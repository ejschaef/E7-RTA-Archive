/*! For license information please see home-page.bundle.js.LICENSE.txt */
(()=>{var t={809:function(t,e){var n,r;n=function t(){var e,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},i=0,c={};function u(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=_(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new d(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let e=this._config.newline;e||(a=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,a)),t=[...t.split(e).slice(r)].join(e)}this.isFirstChunk&&E(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(t))&&(t=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+t;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=a.meta.cursor,this._finished||(this._partialLine=r.substring(t-this._baseIndex),this._baseIndex=t),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)n.postMessage({results:a,workerId:c.WORKER_ID,finished:r});else if(E(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!E(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){E(this._config.error)?this._config.error(t):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:t,finished:!1})}}function s(t){var e;(t=t||{}).chunkSize||(t.chunkSize=c.RemoteChunkSize),u.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t,n=this._config.downloadRequestHeaders;for(t in n)e.setRequestHeader(t,n[t])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(t=>null!==(t=t.getResponseHeader("Content-Range"))?parseInt(t.substring(t.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){t=e.statusText||t,this._sendError(new Error(t))}}function l(t){(t=t||{}).chunkSize||(t.chunkSize=c.LocalChunkSize),u.call(this,t);var e,n,r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input,o=(this._config.chunkSize&&(o=Math.min(this._start+this._config.chunkSize,this._input.size),t=n.call(t,this._start,o)),e.readAsText(t,this._config.encoding));r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;u.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){var t,n;if(!this._finished)return t=this._config.chunkSize,e=t?(n=e.substring(0,t),e.substring(t)):(n=e,""),this._finished=!e,this.parseChunk(n)}}function p(t){u.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=b(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=b(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=b(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(t){var e,n,r,o,a=Math.pow(2,53),i=-a,u=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,s=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,f=0,p=0,d=!1,v=!1,g=[],m={data:[],errors:[],meta:{}};function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function S(){if(m&&r&&(T("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(m.data=m.data.filter(function(t){return!b(t)})),w()){if(m)if(Array.isArray(m.data[0])){for(var e=0;w()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){E(t.transformHeader)&&(e=t.transformHeader(e,n)),g.push(e)}}function o(e,n){for(var r=t.header?{}:[],o=0;o<e.length;o++){var c=o,l=e[o];l=((e,n)=>(e=>(t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)))(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((t=>{if(u.test(t)&&(t=parseFloat(t),i<t&&t<a))return 1})(n)?parseFloat(n):s.test(n)?new Date(n):""===n?null:n):n)(c=t.header?o>=g.length?"__parsed_extra":g[o]:c,l=t.transform?t.transform(l,c):l),"__parsed_extra"===c?(r[c]=r[c]||[],r[c].push(l)):r[c]=l}return t.header&&(o>g.length?T("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+o,p+n):o<g.length&&T("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+o,p+n)),r}var l;m&&(t.header||t.dynamicTyping||t.transform)&&(l=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(o),l=m.data.length):m.data=o(m.data,0),t.header&&m.meta&&(m.meta.fields=g),p+=l)}function w(){return t.header&&0===g.length}function T(t,e,n,r){t={type:t,code:e,message:n},void 0!==r&&(t.row=r),m.errors.push(t)}E(t.step)&&(o=t.step,t.step=function(e){m=e,w()?S():(S(),0!==m.data.length&&(f+=e.data.length,t.preview&&f>t.preview?n.abort():(m.data=m.data[0],o(m,l))))}),this.parse=function(o,a,i){var u=t.quoteChar||'"';return t.newline||(t.newline=this.guessLineEndings(o,u)),r=!1,t.delimiter?E(t.delimiter)&&(t.delimiter=t.delimiter(o),m.meta.delimiter=t.delimiter):((u=((e,n,r,o,a)=>{var i,u,s,l;a=a||[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var f=0;f<a.length;f++){for(var p,d=a[f],h=0,v=0,g=0,m=(s=void 0,new y({comments:o,delimiter:d,newline:n,preview:10}).parse(e)),_=0;_<m.data.length;_++)r&&b(m.data[_])?g++:(v+=p=m.data[_].length,void 0===s?s=p:0<p&&(h+=Math.abs(p-s),s=p));0<m.data.length&&(v/=m.data.length-g),(void 0===u||h<=u)&&(void 0===l||l<v)&&1.99<v&&(u=h,i=d,l=v)}return{successful:!!(t.delimiter=i),bestDelimiter:i}})(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=u.bestDelimiter:(r=!0,t.delimiter=c.DefaultDelimiter),m.meta.delimiter=t.delimiter),u=_(t),t.preview&&t.header&&u.preview++,e=o,n=new y(u),m=n.parse(e,a,i),S(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=E(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(d=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return v},this.abort=function(){v=!0,n.abort(),m.meta.aborted=!0,E(t.complete)&&t.complete(m),e=""},this.guessLineEndings=function(t,e){t=t.substring(0,1048576),e=new RegExp(h(e)+"([^]*?)"+h(e),"gm");var n=(t=t.replace(e,"")).split("\r");if(t=1<(e=t.split("\n")).length&&e[0].length<n[0].length,1===n.length||t)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(t){var e=(t=t||{}).delimiter,n=t.newline,r=t.comments,o=t.step,a=t.preview,i=t.fastMode,u=null,s=!1,l=null==t.quoteChar?'"':t.quoteChar,f=l;if(void 0!==t.escapeChar&&(f=t.escapeChar),("string"!=typeof e||-1<c.BAD_DELIMITERS.indexOf(e))&&(e=","),r===e)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<c.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var p=0,d=!1;this.parse=function(c,y,v){if("string"!=typeof c)throw new Error("Input must be a string");var g=c.length,m=e.length,_=n.length,b=r.length,S=E(o),w=[],T=[],A=[],O=p=0;if(!c)return M();if(i||!1!==i&&-1===c.indexOf(l)){for(var P=c.split(n),R=0;R<P.length;R++){if(A=P[R],p+=A.length,R!==P.length-1)p+=n.length;else if(v)return M();if(!r||A.substring(0,b)!==r){if(S){if(w=[],j(A.split(e)),G(),d)return M()}else j(A.split(e));if(a&&a<=R)return w=w.slice(0,a),M(!0)}}return M()}for(var I=c.indexOf(e,p),C=c.indexOf(n,p),k=new RegExp(h(f)+h(l),"g"),D=c.indexOf(l,p);;)if(c[p]===l)for(D=p,p++;;){if(-1===(D=c.indexOf(l,D+1)))return v||T.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:p}),N();if(D===g-1)return N(c.substring(p,D).replace(k,l));if(l===f&&c[D+1]===f)D++;else if(l===f||0===D||c[D-1]!==f){-1!==I&&I<D+1&&(I=c.indexOf(e,D+1));var L=x(-1===(C=-1!==C&&C<D+1?c.indexOf(n,D+1):C)?I:Math.min(I,C));if(c.substr(D+1+L,m)===e){A.push(c.substring(p,D).replace(k,l)),c[p=D+1+L+m]!==l&&(D=c.indexOf(l,p)),I=c.indexOf(e,p),C=c.indexOf(n,p);break}if(L=x(C),c.substring(D+1+L,D+1+L+_)===n){if(A.push(c.substring(p,D).replace(k,l)),F(D+1+L+_),I=c.indexOf(e,p),D=c.indexOf(l,p),S&&(G(),d))return M();if(a&&w.length>=a)return M(!0);break}T.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:w.length,index:p}),D++}}else if(r&&0===A.length&&c.substring(p,p+b)===r){if(-1===C)return M();p=C+_,C=c.indexOf(n,p),I=c.indexOf(e,p)}else if(-1!==I&&(I<C||-1===C))A.push(c.substring(p,I)),p=I+m,I=c.indexOf(e,p);else{if(-1===C)break;if(A.push(c.substring(p,C)),F(C+_),S&&(G(),d))return M();if(a&&w.length>=a)return M(!0)}return N();function j(t){w.push(t),O=p}function x(t){return-1!==t&&(t=c.substring(D+1,t))&&""===t.trim()?t.length:0}function N(t){return v||(void 0===t&&(t=c.substring(p)),A.push(t),p=g,j(A),S&&G()),M()}function F(t){p=t,j(A),A=[],C=c.indexOf(n,p)}function M(r){if(t.header&&!y&&w.length&&!s){var o=w[0],a=Object.create(null),i=new Set(o);let e=!1;for(let n=0;n<o.length;n++){let r=o[n];if(a[r=E(t.transformHeader)?t.transformHeader(r,n):r]){let t,c=a[r];for(;t=r+"_"+c,c++,i.has(t););i.add(t),o[n]=t,a[r]++,e=!0,(u=null===u?{}:u)[t]=r}else a[r]=1,o[n]=r;i.add(r)}e&&console.warn("Duplicate headers found and renamed."),s=!0}return{data:w,errors:T,meta:{delimiter:e,linebreak:n,aborted:d,truncated:!!r,cursor:O+(y||0),renamedHeaders:u}}}function G(){o(M()),w=[],T=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return p}}function v(t){var e=t.data,n=a[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,g(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(E(n.userStep)){for(var i=0;i<e.results.data.length&&(n.userStep({data:e.results.data[i],errors:e.results.errors,meta:e.results.meta},o),!r);i++);delete e.results}else E(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&g(e.workerId,e.results)}function g(t,e){var n=a[t];E(n.userComplete)&&n.userComplete(e),n.terminate(),delete a[t]}function m(){throw new Error("Not implemented.")}function _(t){if("object"!=typeof t||null===t)return t;var e,n=Array.isArray(t)?[]:{};for(e in t)n[e]=_(t[e]);return n}function b(t,e){return function(){t.apply(e,arguments)}}function E(t){return"function"==typeof t}return c.parse=function(e,r){var o=(r=r||{}).dynamicTyping||!1;if(E(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!E(r.transform)&&r.transform,!r.worker||!c.WORKERS_SUPPORTED)return o=null,c.NODE_STREAM_INPUT,"string"==typeof e?(e=(t=>65279!==t.charCodeAt(0)?t:t.slice(1))(e),o=new(r.download?s:f)(r)):!0===e.readable&&E(e.read)&&E(e.on)?o=new p(r):(n.File&&e instanceof File||e instanceof Object)&&(o=new l(r)),o.stream(e);(o=(()=>{var e;return!!c.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,r=t.toString();return c.BLOB_URL||(c.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(e=new n.Worker(e)).onmessage=v,e.id=i++,a[e.id]=e)})()).userStep=r.step,o.userChunk=r.chunk,o.userComplete=r.complete,o.userError=r.error,r.step=E(r.step),r.chunk=E(r.chunk),r.complete=E(r.complete),r.error=E(r.error),delete r.worker,o.postMessage({input:e,config:r,workerId:o.id})},c.unparse=function(t,e){var n=!1,r=!0,o=",",a="\r\n",i='"',u=i+i,s=!1,l=null,f=!1,p=((()=>{if("object"==typeof e){if("string"!=typeof e.delimiter||c.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(o=e.delimiter),"boolean"!=typeof e.quotes&&"function"!=typeof e.quotes&&!Array.isArray(e.quotes)||(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(s=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(i=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(u=e.escapeChar+i),e.escapeFormulae instanceof RegExp?f=e.escapeFormulae:"boolean"==typeof e.escapeFormulae&&e.escapeFormulae&&(f=/^[=+\-@\t\r].*$/)}})(),new RegExp(h(i),"g"));if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return d(null,t,s);if("object"==typeof t[0])return d(l||Object.keys(t[0]),t,s)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),d(t.fields||[],t.data||[],s);throw new Error("Unable to serialize unrecognized input");function d(t,e,n){var i="",c=("string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t)&&0<t.length),u=!Array.isArray(e[0]);if(c&&r){for(var s=0;s<t.length;s++)0<s&&(i+=o),i+=y(t[s],s);0<e.length&&(i+=a)}for(var l=0;l<e.length;l++){var f=(c?t:e[l]).length,p=!1,d=c?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!c&&(p="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&c){for(var h=[],v=0;v<f;v++){var g=u?t[v]:v;h.push(e[l][g])}p=""===h.join("").trim()}if(!p){for(var m=0;m<f;m++){0<m&&!d&&(i+=o);var _=c&&u?t[m]:m;i+=y(e[l][_],m)}l<e.length-1&&(!n||0<f&&!d)&&(i+=a)}}return i}function y(t,e){var r,a;return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(a=!1,f&&"string"==typeof t&&f.test(t)&&(t="'"+t,a=!0),r=t.toString().replace(p,u),(a=a||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||((t,e)=>{for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1})(r,c.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=d,c.NetworkStreamer=s,c.FileStreamer=l,c.StringStreamer=f,c.ReadableStreamStreamer=p,n.jQuery&&((e=n.jQuery).fn.parse=function(t){var r=t.config||{},o=[];return this.each(function(t){if("INPUT"!==e(this).prop("tagName").toUpperCase()||"file"!==e(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:e.extend({},r)})}),a(),this;function a(){if(0===o.length)E(t.complete)&&t.complete();else{var n,r,a,u=o[0];if(E(t.before)){var s=t.before(u.file,u.inputElem);if("object"==typeof s){if("abort"===s.action)return n=u.file,r=u.inputElem,a=s.reason,void(E(t.error)&&t.error({name:"AbortError"},n,r,a));if("skip"===s.action)return void i();"object"==typeof s.config&&(u.instanceConfig=e.extend(u.instanceConfig,s.config))}else if("skip"===s)return void i()}var l=u.instanceConfig.complete;u.instanceConfig.complete=function(t){E(l)&&l(t,u.file,u.inputElem),i()},c.parse(u.file,u.instanceConfig)}}function i(){o.splice(0,1),a()}}),o&&(n.onmessage=function(t){t=t.data,void 0===c.WORKER_ID&&t&&(c.WORKER_ID=t.workerId),"string"==typeof t.input?n.postMessage({workerId:c.WORKER_ID,results:c.parse(t.input,t.config),finished:!0}):(n.File&&t.input instanceof File||t.input instanceof Object)&&(t=c.parse(t.input,t.config))&&n.postMessage({workerId:c.WORKER_ID,results:t,finished:!0})}),(s.prototype=Object.create(u.prototype)).constructor=s,(l.prototype=Object.create(u.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(u.prototype)).constructor=p,c},void 0===(r=n.apply(e,[]))||(t.exports=r)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=(t,e)=>e.some(e=>t instanceof e);let e,r;const o=new WeakMap,a=new WeakMap,i=new WeakMap;let c={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return o.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return l(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function u(t){c=t(c)}function s(n){return"function"==typeof n?(a=n,(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(a)?function(...t){return a.apply(f(this),t),l(this.request)}:function(...t){return l(a.apply(f(this),t))}):(n instanceof IDBTransaction&&function(t){if(o.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});o.set(t,e)}(n),t(n,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,c):n);var a}function l(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(l(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return i.set(e,t),e}(t);if(a.has(t))return a.get(t);const e=s(t);return e!==t&&(a.set(t,e),i.set(e,t)),e}const f=t=>i.get(t);function p(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),c=l(i);return r&&i.addEventListener("upgradeneeded",t=>{r(l(i.result),t.oldVersion,t.newVersion,l(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const d=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],y=new Map;function v(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(y.get(e))return y.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=h.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!d.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return y.set(e,a),a}u(t=>({...t,get:(e,n,r)=>v(e,n)||t.get(e,n,r),has:(e,n)=>!!v(e,n)||t.has(e,n)}));const g=["continue","continuePrimaryKey","advance"],m={},_=new WeakMap,b=new WeakMap,E={get(t,e){if(!g.includes(e))return t[e];let n=m[e];return n||(n=m[e]=function(...t){_.set(this,b.get(this)[e](...t))}),n}};async function*S(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,E);for(b.set(n,e),i.set(n,f(e));e;)yield n,e=await(_.get(n)||e.continue()),_.delete(n)}function w(e,n){return n===Symbol.asyncIterator&&t(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&t(e,[IDBIndex,IDBObjectStore])}function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function A(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return O(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(O(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,O(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,O(f,"constructor",s),O(s,"constructor",u),u.displayName="GeneratorFunction",O(s,o,"GeneratorFunction"),O(f),O(f,o,"Generator"),O(f,r,function(){return this}),O(f,"toString",function(){return"[object Generator]"}),(A=function(){return{w:a,m:p}})()}function O(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}O=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){O(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},O(t,e,n,r)}function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach(function(e){I(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function I(t,e,n){return(e=function(t){var e=function(t){if("object"!=T(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function k(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){C(a,r,o,i,c,"next",t)}function c(t){C(a,r,o,i,c,"throw",t)}i(void 0)})}}function D(t,e){return L.apply(this,arguments)}function L(){return(L=k(A().m(function t(e,n){var r;return A().w(function(t){for(;;)switch(t.n){case 0:return(r=e.transaction(n,"readwrite")).objectStore(n).clear(),t.n=1,r.done;case 1:return t.a(2)}},t)}))).apply(this,arguments)}u(t=>({...t,get:(e,n,r)=>w(e,n)?S:t.get(e,n,r),has:(e,n)=>w(e,n)||t.has(e,n)}));var j,x,N,F,M,G,B,U,H,K,V,W,q,Y,z,Q,J,X,Z={USER:"current-user",BATTLES:"battles",RAW_UPLOAD:"raw-upload",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",STATS:"stats",FILTER_STR:"filter-str"},tt=R(R({},Z),{},{HERO_MANAGER:"hero-manager",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",ID_SEARCH_FLAG:"id-search",GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users",ARTIFACTS:"artifacts",ARTIFACTS_LOWERCASE_NAMES_SET:"artifacts-lowercase-names-set",ARTIFACT_OBJECT_LIST:"artifact-object-list",HOME_PAGE_STATE:"home-page-state",INTER_PAGE_MANAGER:"inter-page-manager"}),et={autoZoom:tt.AUTO_ZOOM_FLAG,autoQuery:tt.AUTO_QUERY_FLAG,idSearch:tt.ID_SEARCH_FLAG},nt={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:R({},tt),MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:(X=k(A().m(function t(){return A().w(function(t){for(;;)if(0===t.n)return t.a(2,p(nt.consts.DB_NAME,nt.consts.DB_VERSION,{upgrade:function(t){t.objectStoreNames.contains(nt.consts.STORE_NAME)&&(t.deleteObjectStore(nt.consts.STORE_NAME),console.log("Old store deleted")),t.objectStoreNames.contains(nt.consts.STORE_NAME)||(console.log("Created data store"),t.createObjectStore(nt.consts.STORE_NAME)),t.objectStoreNames.contains(nt.consts.META_STORE_NAME)||(console.log("Created meta data store"),t.createObjectStore(nt.consts.META_STORE_NAME))}}))},t)})),function(){return X.apply(this,arguments)}),get:(J=k(A().m(function t(e){var n,r;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.get(this.consts.STORE_NAME,e);case 2:if(null===(r=t.v)){t.n=3;break}console.log("Found ".concat(e," in cache")),t.n=4;break;case 3:return console.log("".concat(e," not found in cache; returning null")),t.a(2,null);case 4:return t.n=5,this.checkCacheTimeout(e);case 5:if(!t.v){t.n=6;break}return t.a(2,r);case 6:return t.a(2,null);case 7:return t.a(2)}},t,this)})),function(t){return J.apply(this,arguments)}),cache:(Q=k(A().m(function t(e,n){var r;return A().w(function(t){for(;;)switch(t.n){case 0:return console.log("Caching ".concat(e," with data: ").concat(n)),t.n=1,this.openDB();case 1:return r=t.v,t.n=2,r.put(this.consts.STORE_NAME,n,e);case 2:return t.n=3,this.setTimestamp(e,Date.now());case 3:return t.a(2)}},t,this)})),function(t,e){return Q.apply(this,arguments)}),delete:(z=k(A().m(function t(e){var n;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.delete(this.consts.STORE_NAME,e);case 2:return t.n=3,this.deleteTimestamp(e);case 3:return t.a(2)}},t,this)})),function(t){return z.apply(this,arguments)}),deleteDB:(Y=k(A().m(function t(){return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,indexedDB.deleteDatabase(this.consts.DB_NAME);case 1:console.log("Database deleted");case 2:return t.a(2)}},t,this)})),function(){return Y.apply(this,arguments)}),getTimestamp:(q=k(A().m(function t(e){var n,r,o;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.get(this.consts.META_STORE_NAME,r);case 2:return o=t.v,t.a(2,null!=o?o:null)}},t,this)})),function(t){return q.apply(this,arguments)}),setTimestamp:(W=k(A().m(function t(e,n){var r,o;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return r=t.v,o="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,r.put(this.consts.META_STORE_NAME,n,o);case 2:return t.n=3,r.get(this.consts.META_STORE_NAME,o);case 3:t.v;case 4:return t.a(2)}},t,this)})),function(t,e){return W.apply(this,arguments)}),deleteTimestamp:(V=k(A().m(function t(e){var n,r;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.delete(this.consts.META_STORE_NAME,r);case 2:return t.a(2)}},t,this)})),function(t){return V.apply(this,arguments)}),clearData:(K=k(A().m(function t(){var e;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return e=t.v,t.n=2,D(e,this.consts.STORE_NAME);case 2:return t.n=3,D(e,this.consts.META_STORE_NAME);case 3:console.log("All data cleared from data cache and meta data cache");case 4:return t.a(2)}},t,this)})),function(){return K.apply(this,arguments)}),clearUserData:(H=k(A().m(function t(){var e,n=this;return A().w(function(t){for(;;)switch(t.n){case 0:return e=Object.values(Z),t.n=1,Promise.all(e.map(function(t){return n.delete(t)}));case 1:console.log("User data cleared from data cache");case 2:return t.a(2)}},t)})),function(){return H.apply(this,arguments)}),clearSeasonData:(U=k(A().m(function t(){return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.delete(tt.SEASON_DETAILS);case 1:console.log("Season data cleared from data cache");case 2:return t.a(2)}},t,this)})),function(){return U.apply(this,arguments)}),checkCacheTimeout:(B=k(A().m(function t(e){var n,r;return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getTimestamp(e);case 1:if(n=t.v,r=Date.now(),n&&!(r-n>nt.consts.CACHE_TIMEOUT)){t.n=3;break}return console.log("Cache timeout for ".concat(e)),t.n=2,this.delete(e);case 2:return t.a(2,!1);case 3:return t.a(2,!0)}},t,this)})),function(t){return B.apply(this,arguments)}),getFilterStr:(G=k(A().m(function t(){return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(nt.Keys.FILTER_STR);case 1:return t.a(2,t.v)}},t,this)})),function(){return G.apply(this,arguments)}),setFilterStr:(M=k(A().m(function t(e){return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(nt.Keys.FILTER_STR,e);case 1:return t.a(2)}},t,this)})),function(t){return M.apply(this,arguments)}),getStats:(F=k(A().m(function t(){return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(nt.Keys.STATS);case 1:return t.a(2,t.v)}},t,this)})),function(){return F.apply(this,arguments)}),setStats:(N=k(A().m(function t(e){return A().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(tt.STATS,e);case 1:return t.a(2)}},t,this)})),function(t){return N.apply(this,arguments)}),getFlag:(x=k(A().m(function t(e){var n;return A().w(function(t){for(;;)switch(t.n){case 0:if(n=et[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.get(n);case 2:return t.a(2,t.v)}},t,this)})),function(t){return x.apply(this,arguments)}),setFlag:(j=k(A().m(function t(e,n){var r;return A().w(function(t){for(;;)switch(t.n){case 0:if(r=et[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.cache(r,n);case 2:return t.a(2)}},t,this)})),function(t,e){return j.apply(this,arguments)})};const rt=nt;function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ut(r.key),r)}}function ct(t,e,n){return e&&it(t.prototype,e),n&&it(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ut(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}var st=function(){return ct(function t(){at(this,t)},[{key:"SELECT_DATA_MSG",get:function(){return this._SELECT_DATA_MSG||(this._SELECT_DATA_MSG=document.getElementById("select-data-msg"))}},{key:"FILTER_MSG",get:function(){return this._FILTER_MSG||(this._FILTER_MSG=document.getElementById("filterMSG"))}},{key:"SELECT_DATA_BODY",get:function(){return this._SELECT_DATA_BODY||(this._SELECT_DATA_BODY=document.getElementById("select-data-body"))}},{key:"SHOW_STATS_BODY",get:function(){return this._SHOW_STATS_BODY||(this._SHOW_STATS_BODY=document.getElementById("show-stats-body"))}},{key:"LOAD_DATA_BODY",get:function(){return this._LOAD_DATA_BODY||(this._LOAD_DATA_BODY=document.getElementById("load-data-body"))}},{key:"CLEAR_DATA_BTN",get:function(){return this._CLEAR_DATA_BTN||(this._CLEAR_DATA_BTN=document.getElementById("clear-data-btn"))}},{key:"UPLOAD_FORM",get:function(){return this._UPLOAD_FORM||(this._UPLOAD_FORM=document.getElementById("uploadForm"))}},{key:"CSV_FILE",get:function(){return this._CSV_FILE||(this._CSV_FILE=document.getElementById("csvFile"))}},{key:"USER_QUERY_FORM_NAME",get:function(){return this._USER_QUERY_FORM_NAME||(this._USER_QUERY_FORM_NAME=document.getElementById("user-query-form-name"))}},{key:"USER_QUERY_FORM_SERVER",get:function(){return this._USER_QUERY_FORM_SERVER||(this._USER_QUERY_FORM_SERVER=document.getElementById("user-query-form-server"))}},{key:"BATTLES_TABLE",get:function(){return this._BATTLES_TABLE||(this._BATTLES_TABLE=document.getElementById("BattlesTable"))}},{key:"AUTO_ZOOM_FLAG",get:function(){return this._AUTO_ZOOM_FLAG||(this._AUTO_ZOOM_FLAG=document.getElementById("auto-zoom-flag"))}},{key:"FOOTER_BODY",get:function(){return this._FOOTER||(this._FOOTER=document.getElementById("footer-body"))}},{key:"USER_NAME",get:function(){return this._USER_NAME||(this._USER_NAME=document.getElementById("user-name"))}},{key:"USER_ID",get:function(){return this._USER_ID||(this._USER_ID=document.getElementById("user-id"))}},{key:"USER_SERVER",get:function(){return this._USER_SERVER||(this._USER_SERVER=document.getElementById("user-server"))}},{key:"BATTLE_FILTER_TOGGLE",get:function(){return this._BATTLE_FILTER_TOGGLER||(this._BATTLE_FILTER_TOGGLER=document.getElementById("filter-battle-table"))}},{key:"ID_SEARCH_FLAG",get:function(){return this._ID_SEARCH_FLAG||(this._ID_SEARCH_FLAG=document.getElementById("id-search-flag"))}},{key:"ESCAPE_BTN",get:function(){return this._ESCAPE_BTN||(this._ESCAPE_BTN=document.getElementById("escape-btn"))}}])}(),lt=function(){return ct(function t(){at(this,t)},[{key:"SIDEBAR_HIDE_BTN",get:function(){return this._SIDEBAR_HIDE_BTN||(this._SIDEBAR_HIDE_BTN=document.getElementById("sidebar-hide"))}}])}(),ft=function(){return ct(function t(){at(this,t)},[{key:"SEARCH_DOMAINS",get:function(){return this._SEARCH_DOMAINS||(this._SEARCH_DOMAINS=document.getElementById("search-domains"))}},{key:"SEARCH_SUBMIT_BTN",get:function(){return this._SEARCH_SUBMIT_BTN||(this._SEARCH_SUBMIT_BTN=document.getElementById("search-submit-btn"))}},{key:"SEARCH_FORM",get:function(){return this._SEARCH_FORM||(this._SEARCH_FORM=document.getElementById("searchForm"))}},{key:"SEARCH_TABLE_CONTAINER",get:function(){return this._SEARCH_TABLE_CONTAINER||(this._SEARCH_TABLE_CONTAINER=document.getElementById("search-table-container"))}}])}();const pt={HOME_PAGE:new st,NAV_BAR:new lt,SEARCH_PAGE:new ft};var dt,ht,yt,vt,gt,mt,_t,bt=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),Et={world_global:"Global",world_kor:"Korea",world_jpn:"Japan",world_asia:"Asia",world_eu:"Europe"},St={set_speed:"Speed",set_acc:"Hit",set_cri:"Critical",set_res:"Resist",set_def:"Defense",set_att:"Attack",set_max_hp:"Health",set_cri_dmg:"Destruction",set_coop:"Unity",set_immune:"Immunity",set_rage:"Rage",set_vampire:"Lifesteal",set_shield:"Protection",set_revenge:"Revenge",set_penetrate:"Penetration",set_torrent:"Torrent",set_counter:"Counter",set_scar:"Injury"},wt=864e5,Tt={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},At={SEASON:"Season",DATE_TIME:"Date/Time",SECONDS:"Seconds",TURNS:"Turns",SEQ_NUM:"Seq Num",P1_ID:"P1 ID",P1_SERVER:"P1 Server",P2_ID:"P2 ID",P2_SERVER:"P2 Server",P1_LEAGUE:"P1 League",P2_LEAGUE:"P2 League",P1_POINTS:"P1 Points",POINT_GAIN:"Point Gain",WIN:"Win",FIRST_PICK:"First Pick",FIRST_TURN:"First Turn",FIRST_TURN_HERO:"First Turn Hero",CR_BAR:"CR Bar",P1_PREBANS:"P1 Prebans",P2_PREBANS:"P2 Prebans",P1_PICKS:"P1 Picks",P2_PICKS:"P2 Picks",P1_POSTBAN:"P1 Postban",P2_POSTBAN:"P2 Postban",P1_EQUIPMENT:"P1 Equipment",P2_EQUIPMENT:"P2 Equipment",P1_ARTIFACTS:"P1 Artifacts",P2_ARTIFACTS:"P2 Artifacts",P1_MVP:"P1 MVP",P2_MVP:"P2 MVP",P1_PICKS_PRIMES:"P1 Picks Primes",P1_PICKS_PRIME_PRODUCT:"P1 Picks Prime Product",P2_PICKS_PRIMES:"P2 Picks Primes",P2_PICKS_PRIME_PRODUCT:"P2 Picks Prime Product",P1_PREBANS_PRIMES:"P1 Prebans Primes",P1_PREBANS_PRIME_PRODUCT:"P1 Prebans Prime Product",P2_PREBANS_PRIMES:"P2 Prebans Primes",P2_PREBANS_PRIME_PRODUCT:"P2 Prebans Prime Product"},Ot=[At.P1_EQUIPMENT,At.P2_EQUIPMENT,At.P1_ARTIFACTS,At.P2_ARTIFACTS,At.CR_BAR,At.P1_PREBANS,At.P2_PREBANS,At.P1_PICKS,At.P2_PICKS],Pt=[At.FIRST_PICK,At.FIRST_TURN,At.WIN],Rt=[At.SECONDS,At.TURNS,At.P1_POINTS,At.POINT_GAIN],It=[At.P1_LEAGUE,At.P2_LEAGUE],Ct="Hero Name",kt="Battles",Dt="Pick Rate",Lt="Wins",jt="Win rate",xt="Postban Rate",Nt="Success Rate",Ft="Point Gain",Mt="Avg CR",Gt="First Turn Rate",Bt=function(t){for(var e=new Uint8Array(30001),n=[],r=2;r<=t;r++)if(!e[r]){n.push(r);for(var o=r*r;o<=t;o+=r)e[o]=1}return n}(3e4);function Ut(t){var e={};for(var n in t)Array.isArray(t[n])&&t[n].length>0?e[n]=[t[n][0],"Length: ".concat(t[n].length)]:e[n]=t[n];console.log(e)}function Ht(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Kt(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Kt(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Kt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Kt(f,"constructor",s),Kt(s,"constructor",u),u.displayName="GeneratorFunction",Kt(s,o,"GeneratorFunction"),Kt(f),Kt(f,o,"Generator"),Kt(f,r,function(){return this}),Kt(f,"toString",function(){return"[object Generator]"}),(Ht=function(){return{w:a,m:p}})()}function Kt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Kt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Kt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Kt(t,e,n,r)}function Vt(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Wt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Vt(a,r,o,i,c,"next",t)}function c(t){Vt(a,r,o,i,c,"throw",t)}i(void 0)})}}const qt={test:function(t){console.log("Got data in test:",t.rank_plot)},fetchFromPython:(_t=Wt(Ht().m(function t(e){var n,r;return Ht().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=3;break}return console.log("Retrying Fetch..."),t.n=2,fetch(e);case 2:n=t.v;case 3:return t.n=4,n.json();case 4:return r=t.v,t.a(2,r||null)}},t)})),function(t){return _t.apply(this,arguments)}),fetchHeroData:(mt=Wt(Ht().m(function t(){return Ht().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},t,this)})),function(){return mt.apply(this,arguments)}),rsFetchBattleData:(gt=Wt(Ht().m(function t(e){return Ht().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return gt.apply(this,arguments)}),fetchSeasonDetails:(vt=Wt(Ht().m(function t(){var e,n,r;return Ht().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.seasonDetails),t.a(2,{seasonDetails:r,error:!1});case 3:return t.a(2,{seasonDetails:null,error:n.error});case 4:return t.a(2)}},t)})),function(){return vt.apply(this,arguments)}),fetchArtifactJson:(yt=Wt(Ht().m(function t(){var e,n,r;return Ht().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_artifact_json");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.artifactJson),t.a(2,r);case 3:return t.a(2,null);case 4:return t.a(2)}},t)})),function(){return yt.apply(this,arguments)}),fetchUser:(ht=Wt(Ht().m(function t(e){var n,r,o,a,i;return Ht().w(function(t){for(;;)switch(t.n){case 0:if(e.name&&e.world_code||e.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:e})});case 2:return n=t.v,t.n=3,n.json();case 3:if(r=t.v,t.p=4,!n.ok){t.n=9;break}if(r.foundUser){t.n=7;break}if(!e.name){t.n=5;break}return o=e.world_code.replace("world_",""),t.a(2,{user:null,error:'Could not find user: "'.concat(e.name,'" in world_code: ').concat(o)});case 5:if(!e.id){t.n=6;break}return t.a(2,{user:null,error:"Could not find user with ID: ".concat(e.id)});case 6:t.n=8;break;case 7:return a=r.user,console.log("Server communication successful; received response data for user"),console.log("Found user: ".concat(JSON.stringify(a))),t.a(2,{user:a,error:!1});case 8:t.n=10;break;case 9:return console.log("Server communication unsuccessful"),t.a(2,{user:null,error:r.error});case 10:t.n=12;break;case 11:return t.p=11,i=t.v,console.error("Error fetching and caching user: ".concat(i)),t.a(2,{user:null,error:i.message});case 12:return t.a(2)}},t,null,[[4,11]])})),function(t){return ht.apply(this,arguments)}),fetchDataFromID:(dt=Wt(Ht().m(function t(e){return Ht().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass ID to fetch user");case 1:return t.n=2,fetch("/api/get_battle_data_from_id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return dt.apply(this,arguments)})};function Yt(t){return function(t){if(Array.isArray(t))return zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return zt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Jt(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Jt(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Jt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Jt(f,"constructor",s),Jt(s,"constructor",u),u.displayName="GeneratorFunction",Jt(s,o,"GeneratorFunction"),Jt(f),Jt(f,o,"Generator"),Jt(f,r,function(){return this}),Jt(f,"toString",function(){return"[object Generator]"}),(Qt=function(){return{w:a,m:p}})()}function Jt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Jt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Jt(t,e,n,r)}function $t(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Xt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){$t(a,r,o,i,c,"next",t)}function c(t){$t(a,r,o,i,c,"throw",t)}i(void 0)})}}function Zt(t){return te.apply(this,arguments)}function te(){return(te=Xt(Qt().m(function t(e){var n,r,o;return Qt().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error: status: ".concat(n.status));case 2:return t.n=3,n.json();case 3:return r=t.v,console.log("Fetched data from E7 Server; keys:",Object.keys(r)),t.a(2,r);case 4:return t.p=4,o=t.v,console.error("Error fetching global user data:",o),t.a(2,null)}},t,null,[[0,4]])}))).apply(this,arguments)}function ee(){return ee=Xt(Qt().m(function t(){var e,n,r=arguments;return Qt().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,Zt("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find hero data for language:",e),n=null),t.a(2,n)}},t)})),ee.apply(this,arguments)}function ne(){return ne=Xt(Qt().m(function t(){var e,n,r=arguments;return Qt().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,Zt("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_artifact.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find artifact data for language:",e),n=null),t.a(2,n)}},t)})),ne.apply(this,arguments)}function re(){return(re=Xt(Qt().m(function t(e){var n,r;return Qt().w(function(t){for(;;)switch(t.n){case 0:if(e=e.replace("world_",""),Yt(bt).some(function(t){return t.replace("world_","")===e})){t.n=1;break}return console.error("Could not find world code: ".concat(e)),t.a(2,null);case 1:return console.log("Fetching users for world code: ".concat(e," from E7 Server...")),n="https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_".concat(e,".json"),t.n=2,Zt(n);case 2:return(r=t.v)&&console.log("Got user data for world: ".concat(e," ; Found ").concat(r.users.length," users")),t.a(2,r)}},t)}))).apply(this,arguments)}const oe={fetchHeroJSON:function(){return ee.apply(this,arguments)},fetchUserJSON:function(t){return re.apply(this,arguments)},fetchArtifactJSON:function(){return ne.apply(this,arguments)}};function ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||ie(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e){if(t){if("string"==typeof t)return ce(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(t,e):void 0}}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ue(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return se(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(se(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,se(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,se(f,"constructor",s),se(s,"constructor",u),u.displayName="GeneratorFunction",se(s,o,"GeneratorFunction"),se(f),se(f,o,"Generator"),se(f,r,function(){return this}),se(f,"toString",function(){return"[object Generator]"}),(ue=function(){return{w:a,m:p}})()}function se(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}se=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){se(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},se(t,e,n,r)}function le(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function fe(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){le(a,r,o,i,c,"next",t)}function c(t){le(a,r,o,i,c,"throw",t)}i(void 0)})}}var pe,de,he,ye,ve={getHeroManager:(ye=fe(ue().m(function t(){var e,n,r,o;return ue().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.HERO_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=this.fetchAndCacheHeroManager();case 4:return t.a(2,o)}},t,this)})),function(){return ye.apply(this,arguments)}),createHeroManager:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ie(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(n.s();!(e=n.n()).done;){var r=ae(e.value,2),o=r[0],a=r[1],i=Bt[o];a.prime=i}}catch(t){n.e(t)}finally{n.f()}var c={heroes:t};return c=function(t){console.log("Adding Lookup Dicts"),console.log("\tAdding name lookup"),t.name_lookup=t.heroes.reduce(function(t,e){return t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t},{}),console.log("\tAdding prime lookup"),t.prime_lookup=t.heroes.reduce(function(t,e){return t[e.prime]=e,t},{}),console.log("\tAdding code lookup"),t.code_lookup=t.heroes.reduce(function(t,e){return t[e.code]=e,t},{}),console.log("\tAdding prime pair lookup");var e=t.heroes.reduce(function(t,e){return t[e.prime]=e.name,t},{}),n=Object.keys(t.prime_lookup).length-1;console.log("\tAdding prime pair lookup; primes to process",n);for(var r=0;r<n-1;r++)for(var o=Bt[r],a=r+1;a<n;a++){var i=Bt[a],c=o*i,u=t.prime_lookup[o].name,s=t.prime_lookup[i].name;e[c]=[u,s].sort().join(", ")}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.prime],t.prime_pair_lookup=e,t}(c=function(t){var e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:Bt[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(c)),c},fetchHeroManager:(he=fe(ue().m(function t(){var e,n,r,o,a,i;return ue().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,oe.fetchHeroJSON();case 1:if(a=e=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==e;case 2:if(!o){t.n=3;break}i=e,t.n=5;break;case 3:return t.n=4,qt.fetchHeroData();case 4:i=t.v;case 5:return n=i.en,r=this.createHeroManager(n),console.log("Created HeroManager using raw data received from server"),t.a(2,r)}},t,this)})),function(){return he.apply(this,arguments)}),fetchAndCacheHeroManager:(de=fe(ue().m(function t(){var e;return ue().w(function(t){for(;;)switch(t.n){case 0:return console.log("HeroManager not found in cache, fetching from server and caching it"),t.n=1,this.fetchHeroManager();case 1:return e=t.v,t.n=2,rt.cache(rt.Keys.HERO_MANAGER,e);case 2:return console.log("Cached HeroManager using raw data recieved from server"),Ut(e),t.a(2,e)}},t,this)})),function(){return de.apply(this,arguments)}),deleteHeroManager:(pe=fe(ue().m(function t(){return ue().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.HERO_MANAGER);case 1:console.log("Removed hero manager from cache");case 2:return t.a(2)}},t)})),function(){return pe.apply(this,arguments)}),getHeroByName:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;var r=t.toLowerCase().replace(/\s+/g,"");return null!==(n=e.name_lookup[r])&&void 0!==n?n:null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?null!==(n=e.code_lookup[t])&&void 0!==n?n:null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}};const ge=ve;function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function _e(t){return function(t){if(Array.isArray(t))return we(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Se(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e,n){return(e=function(t){var e=function(t){if("object"!=me(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==me(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ee(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Se(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Se(t,e){if(t){if("string"==typeof t)return we(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(t,e):void 0}}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Te=function(t){return t.filter(function(t){return t[At.FIRST_PICK]})};function Ae(t){return(100*t).toFixed(2)+"%"}function Oe(t,e){return Ae(0!==e?t/e:0)}function Pe(t,e){var n=t[At.CR_BAR].find(function(t){return t[0]===e});return n?n[1]:null}function Re(t,e,n){var r,o,a=function(t){return t.filter(function(t){return t[At.WIN]})}(t).length,i=t.length,c=0!==e?i/e:0,u=0!==i?a/i:0,s=t.reduce(function(t,e){return t+(e[At.P1_POSTBAN]===n||e[At.P2_POSTBAN]===n)},0),l=t.reduce(function(t,e){return t+(e[At.WIN]||e[At.P1_POSTBAN]===n||e[At.P2_POSTBAN]===n)},0),f=t.reduce(function(t,e){return t+e[At.POINT_GAIN]},0),p=0,d=0,h=0,y=Ee(t);try{for(y.s();!(o=y.n()).done;){var v=Pe(o.value,n);null!==v&&0!==v&&(p+=1,d+=v,100===v&&(h+=1))}}catch(t){y.e(t)}finally{y.f()}var g=Oe(d/100,p);return be(be(be(be(be(be(be(be(be(be(r={},Ct,n),kt,i),Dt,Ae(c)),Lt,a),jt,Ae(u)),"Postbans",s),xt,Oe(s,i)),Nt,Oe(l,i)),"+/-",2*a-i),Ft,f),be(be(be(r,Mt,g),"First Turns",h),Gt,Oe(h,p))}function Ie(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Set,r=0,o=Object.values(t);r<o.length;r++){var a=o[r];(e?a[At.P1_PICKS_PRIMES]:a[At.P2_PICKS_PRIMES]).forEach(function(t){n.add(t)})}return n}function Ce(t){var e=Math.floor(t/60),n=(t%60).toFixed(1);return 0===e?"".concat(n," secs"):"".concat(e," : ").concat(n,"s")}const ke=function(t,e){if(0===t.length)return{playerHeroStats:[],enemyHeroStats:[]};var n,r=t.length,o=Ie(t,!0),a=Ie(t,!1),i=[],c=[],u=Ee(o);try{var s=function(){var o=n.value,a=ge.getHeroByPrime(o,e),c=t.filter(function(t){return t[At.P1_PICKS_PRIME_PRODUCT]%o===0});c.length>0&&i.push(Re(c,r,a.name))};for(u.s();!(n=u.n()).done;)s()}catch(t){u.e(t)}finally{u.f()}var l,f=Ee(a);try{var p=function(){var n=l.value,o=ge.getHeroByPrime(n,e),a=t.filter(function(t){return t[At.P2_PICKS_PRIME_PRODUCT]%n===0});a.length>0&&c.push(Re(a,r,o.name))};for(f.s();!(l=f.n()).done;)p()}catch(t){f.e(t)}finally{f.f()}var d=Ct;return{playerHeroStats:i.sort(function(t,e){return t[d].localeCompare(e[d])}),enemyHeroStats:c.sort(function(t,e){return t[d].localeCompare(e[d])})}},De=function(t,e){if(0===(t=Te(Object.values(t))).length)return[];var n,r=t.length,o={},a=Ee(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(0!==i[At.P1_PICKS_PRIMES].length){var c=i[At.P1_PICKS_PRIMES][0];c in o||(o[c]={wins:0,appearances:0}),o[c].wins+=i[At.WIN],o[c].appearances+=1}}}catch(t){a.e(t)}finally{a.f()}var u=Object.entries(o).map(function(t){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||Se(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),o=n[0],a=n[1];return{hero:ge.getHeroByPrime(o,e).name,wins:a.wins,appearances:a.appearances,win_rate:Ae(a.wins/a.appearances),appearance_rate:Ae(a.appearances/r),"+/-":2*a.wins-a.appearances}});return u.sort(function(t,e){return e.appearances-t.appearances}),u},Le=function(t,e){var n=ge.getHeroByName("Empty",e).prime;if(0===t.length)return[];var r,o=function(e,r){return _e(new Set(t.map(function(t){return t[e][r]}).filter(function(t){return t&&t!==n})))},a=o(At.P1_PREBANS_PRIMES,0),i=o(At.P1_PREBANS_PRIMES,1),c=new Set([].concat(_e(a),_e(i))),u=[],s=Ee(c);try{for(s.s();!(r=s.n()).done;){var l=r.value;u.push(l)}}catch(t){s.e(t)}finally{s.f()}var f,p=Ee(c);try{for(p.s();!(f=p.n()).done;){var d,h=f.value,y=Ee(c);try{for(y.s();!(d=y.n()).done;){var v=d.value;h<v&&u.push(h*v)}}catch(t){y.e(t)}finally{y.f()}}}catch(t){p.e(t)}finally{p.f()}console.log("Prebans:",u);for(var g=t.length,m=[],_=function(){var n=E[b],r=t.filter(function(t){return t["P1 Prebans Prime Product"]%n===0}),o=r.length;if(o<1)return 1;var a=r.reduce(function(t,e){return t+e.Win},0),i=g>0?o/g:0,c=o>0?a/o:0,u=2*a-o;m.push({preban:e.prime_pair_lookup[n],wins:a,appearances:o,appearance_rate:Ae(i),win_rate:Ae(c),"+/-":u})},b=0,E=u;b<E.length;b++)_();return m.sort(function(t,e){return e.appearances-t.appearances}),m},je=function(t){for(var e=[],n=t.length,r=function(){var r=a[o],i=t.filter(function(t){return t["P2 Server"]===r}),c=i.length,u=i.reduce(function(t,e){return t+e.Win},0),s=c>0?u/c:"N/A",l=n>0?c/n:"N/A",f=i.filter(function(t){return t["First Pick"]}),p=f.reduce(function(t,e){return t+e.Win},0),d=i.filter(function(t){return!t["First Pick"]}),h=d.reduce(function(t,e){return t+e.Win},0);e.push({server:r,count:c,wins:u,win_rate:"N/A"===s?"N/A":Ae(s),frequency:Ae(l),"+/-":2*u-c,fp_games:f.length,sp_games:d.length,fp_wr:f.length>0?Ae(p/f.length):"N/A",sp_wr:d.length>0?Ae(h/d.length):"N/A"})},o=0,a=Object.values(Et);o<a.length;o++)r();return e.sort(function(t,e){return t.server.localeCompare(e.server)}),e},xe=function(t,e){t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var n,r=t.length,o=t.reduce(function(t,e){return t+e["Point Gain"]},0),a=r>0?o/r:0,i=t.reduce(function(t,e){return t+e.Turns},0),c=r>0?i/r:0,u=t.length>0?Math.max.apply(Math,_e(t.map(function(t){return t.Turns}))):0,s=t.reduce(function(t,e){return t+e.Seconds},0),l=r>0?s/r:0,f=t.length>0?Math.max.apply(Math,_e(t.map(function(t){return t.Seconds}))):0,p=Ce(l),d=Ce(f),h=t.reduce(function(t,e){return t+e["First Turn"]},0),y=Te(t),v=function(t){return t.filter(function(t){return!t[At.FIRST_PICK]})}(t),g=y.length,m=v.length,_=y.reduce(function(t,e){return t+e.Win},0),b=v.reduce(function(t,e){return t+e.Win},0),E=r?g/r:0,S=r?m/r:0,w=g?_/g:0,T=m?b/m:0,A=r?(_+b)/r:0,O=0,P=0,R=0,I=0,C=Ee(t);try{for(C.s();!(n=C.n()).done;)n.value.Win?(R+=1,O=Math.max(O,R),I=0):(R=0,I+=1,P=Math.max(P,I))}catch(t){C.e(t)}finally{C.f()}var k="N/A";return{first_pick_count:g,second_pick_count:m,first_pick_rate:g?Ae(E):k,second_pick_rate:m?Ae(S):k,first_pick_winrate:g?Ae(w):k,second_pick_winrate:m?Ae(T):k,total_winrate:r?Ae(A):k,total_battles:r,total_wins:_+b,max_win_streak:O,max_loss_streak:P,avg_ppg:a.toFixed(2),avg_turns:c.toFixed(2),avg_time:p,max_turns:u,max_time:d,first_turn_games:h,first_turn_rate:r?Ae(h/r):k}};function Ne(t){throw new TypeError('"'+t+'" is read-only')}function Fe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ge(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Be(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Be(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Be(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Be(f,"constructor",s),Be(s,"constructor",u),u.displayName="GeneratorFunction",Be(s,o,"GeneratorFunction"),Be(f),Be(f,o,"Generator"),Be(f,r,function(){return this}),Be(f,"toString",function(){return"[object Generator]"}),(Ge=function(){return{w:a,m:p}})()}function Be(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Be=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Be(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Be(t,e,n,r)}function Ue(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function He(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ue(a,r,o,i,c,"next",t)}function c(t){Ue(a,r,o,i,c,"throw",t)}i(void 0)})}}function Ke(){return Ve.apply(this,arguments)}function Ve(){return(Ve=He(Ge().m(function t(){var e;return Ge().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting artifact map from E7 server..."),t.n=1,oe.fetchArtifactJSON("en");case 1:if(null!==(e=t.v)){t.n=3;break}return console.log("Getting artifact map from flask server..."),t.n=2,qt.fetchArtifactJson();case 2:Ne("rawJSON");case 3:if(null!==e){t.n=4;break}return console.error("Could not get artifact Json map from E7 server or flask server"),t.a(2,null);case 4:return console.log("Got artifact Json for language: 'en'"),t.a(2,Object.fromEntries(e.filter(function(t){return null!==t.name}).map(function(t){return[t.code,t.name]})))}},t)}))).apply(this,arguments)}var We,qe,Ye,ze,Qe;const Je={getArtifacts:(Qe=He(Ge().m(function t(){var e,n,r,o;return Ge().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.ARTIFACTS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,this.fetchAndCacheArtifacts();case 4:o=t.v;case 5:return t.a(2,o)}},t,this)})),function(){return Qe.apply(this,arguments)}),getArtifactLowercaseNameSet:(ze=He(Ge().m(function t(){var e,n;return Ge().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.ARTIFACTS_LOWERCASE_NAMES_SET);case 1:if(null===(e=t.v)){t.n=2;break}return console.log("Got artifact lowercase name set from cache"),t.a(2,e);case 2:return t.n=3,this.getArtifacts();case 3:return n=t.v,e=new Set(Object.values(n).filter(function(t){return null!==t}).map(function(t){return t.toLowerCase()})),t.n=4,rt.cache(rt.Keys.ARTIFACTS_LOWERCASE_NAMES_SET,e);case 4:return t.a(2,e)}},t,this)})),function(){return ze.apply(this,arguments)}),getArtifactObjectList:(Ye=He(Ge().m(function t(){var e,n;return Ge().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.ARTIFACT_OBJECT_LIST);case 1:if(null===(e=t.v)){t.n=2;break}return console.log("Got artifact object list from cache"),t.a(2,e);case 2:return t.n=3,this.getArtifacts();case 3:return n=t.v,e=Object.entries(n).map(function(t){var e=Fe(t,2);return{id:e[0],name:e[1]}}),t.n=4,rt.cache(rt.Keys.ARTIFACT_OBJECT_LIST,e);case 4:return t.a(2,e)}},t,this)})),function(){return Ye.apply(this,arguments)}),fetchAndCacheArtifacts:(qe=He(Ge().m(function t(){var e;return Ge().w(function(t){for(;;)switch(t.n){case 0:return console.log("ArtifactManager not found in cache, fetching from server and caching it"),t.n=1,Ke();case 1:return e=t.v,t.n=2,rt.cache(rt.Keys.ARTIFACTS,e);case 2:return console.log("Cached ArtifactManager using raw data recieved from server"),t.a(2,e)}},t)})),function(){return qe.apply(this,arguments)}),clearArtifactData:(We=He(Ge().m(function t(){return Ge().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.ARTIFACTS);case 1:return t.a(2)}},t)})),function(){return We.apply(this,arguments)}),convertCodeToName:function(t,e){return e[t]||t}};function $e(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}function Xe(t){return t.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{})}function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function tn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return en(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function en(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ze(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ze(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rn(t,e){var n=function(t){var n,r;return null!==(n=null===(r=ge.getHeroByName(t,e))||void 0===r?void 0:r.prime)&&void 0!==n?n:e.Fodder.prime},r=function(t,e){return t*e};t[At.P1_PICKS_PRIMES]=t[At.P1_PICKS].map(n),t[At.P2_PICKS_PRIMES]=t[At.P2_PICKS].map(n),t[At.P1_PICKS_PRIME_PRODUCT]=t[At.P1_PICKS_PRIMES].reduce(r,1),t[At.P2_PICKS_PRIME_PRODUCT]=t[At.P2_PICKS_PRIMES].reduce(r,1),t[At.P1_PREBANS_PRIMES]=t[At.P1_PREBANS].map(n),t[At.P2_PREBANS_PRIMES]=t[At.P2_PREBANS].map(n),t[At.P1_PREBANS_PRIME_PRODUCT]=t[At.P1_PREBANS_PRIMES].reduce(r,1),t[At.P2_PREBANS_PRIME_PRODUCT]=t[At.P2_PREBANS_PRIMES].reduce(r,1)}function on(t,e,n){return n=null!=n?n:Je.getArtifacts(),Object.fromEntries(t.map(function(t){var r=function(t,e,n){var r,o=function(t){var n,r;return null!==(n=null===(r=ge.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},a=function(e,r){return r.map(function(r,o){return r?function(t){return Je.convertCodeToName(t,n)||"None"}(r):function(e,n){return"p1"===e?t.p2_postban===t.p1_picks[n]:t.p1_postban===t.p2_picks[n]}(e,o)?"n/a":"None"})},i=function(t){return t.map(function(t){return t.map(function(t){return St[t]||t})})},c=t.cr_bar.find(function(t){return 100===t[1]}),u=!!c&&t.p1_picks.includes(c[0]),s=(nn(nn(nn(nn(nn(nn(nn(nn(nn(nn(r={},At.SEASON,t.season_name||"None"),At.DATE_TIME,t.date_time),At.SECONDS,t.seconds),At.TURNS,t.turns),At.SEQ_NUM,t.seq_num),At.P1_ID,t.p1_id.toString()),At.P1_SERVER,Et[t.p1_server]||t.p1_server||"None"),At.P2_ID,t.p2_id.toString()),At.P2_SERVER,Et[t.p2_server]||t.p2_server||"None"),At.P1_LEAGUE,$e(t.p1_league)||"None"),nn(nn(nn(nn(nn(nn(nn(nn(nn(nn(r,At.P2_LEAGUE,$e(t.p2_league)||"None"),At.P1_POINTS,t.p1_win_score||null),At.POINT_GAIN,t.p1_point_delta||null),At.WIN,1===t.win),At.FIRST_PICK,1===t.first_pick),At.FIRST_TURN,!!u),At.FIRST_TURN_HERO,c?o(c[0]):"n/a"),At.CR_BAR,t.cr_bar.map(function(t){return t&&2==t.length?[o(t[0]),t[1]]:["n/a",0]})),At.P1_PREBANS,t.p1_prebans.map(o)),At.P2_PREBANS,t.p2_prebans.map(o)),nn(nn(nn(nn(nn(nn(nn(nn(nn(nn(r,At.P1_PICKS,t.p1_picks.map(o)),At.P2_PICKS,t.p2_picks.map(o)),At.P1_POSTBAN,o(t.p1_postban)),At.P2_POSTBAN,o(t.p2_postban)),At.P1_EQUIPMENT,i(t.p1_equipment)),At.P2_EQUIPMENT,i(t.p2_equipment)),At.P1_ARTIFACTS,a("p1",t.p1_artifacts)),At.P2_ARTIFACTS,a("p2",t.p2_artifacts)),At.P1_MVP,o(t.p1_mvp)),At.P2_MVP,o(t.p2_mvp)));return rn(s,e),s}(t,e,n);return[r["Seq Num"],r]}))}function an(t,e){var n=t.map(function(t){var n,r=tn(Ot);try{for(r.s();!(n=r.n()).done;){var o=n.value;t[o]=JSON.parse(t[o])}}catch(t){r.e(t)}finally{r.f()}var a,i=tn(Pt);try{for(i.s();!(a=i.n()).done;){var c=a.value;t[c]="true"===t[c].toLowerCase()}}catch(t){i.e(t)}finally{i.f()}var u,s=tn(Rt);try{for(s.s();!(u=s.n()).done;){var l=u.value;t[l]=Number(t[l].replace("'",""))}}catch(t){s.e(t)}finally{s.f()}var f,p=tn(It);try{for(p.s();!(f=p.n()).done;){var d=f.value;t[d]=$e(t[d])}}catch(t){p.e(t)}finally{p.f()}return rn(t,e),t});return Object.fromEntries(n.map(function(t){return[t["Seq Num"],t]}))}function cn(t){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(t)}function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function sn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(Object(n),!0).forEach(function(e){ln(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ln(t,e,n){return(e=function(t){var e=function(t){if("object"!=cn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fn(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(cn(t)+" is not iterable")}function pn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||hn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=hn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function hn(t,e){if(t){if("string"==typeof t)return yn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yn(t,e):void 0}}function yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function vn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return gn(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(gn(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,gn(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,gn(f,"constructor",s),gn(s,"constructor",u),u.displayName="GeneratorFunction",gn(s,o,"GeneratorFunction"),gn(f),gn(f,o,"Generator"),gn(f,r,function(){return this}),gn(f,"toString",function(){return"[object Generator]"}),(vn=function(){return{w:a,m:p}})()}function gn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}gn=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){gn(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},gn(t,e,n,r)}function mn(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function _n(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){mn(a,r,o,i,c,"next",t)}function c(t){mn(a,r,o,i,c,"throw",t)}i(void 0)})}}var bn,En,Sn,wn,Tn,An,On,Pn={loaded_servers:new Set,getBattles:(On=_n(vn().m(function t(){var e,n,r,o;return vn().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting battles"),t.n=1,rt.get(rt.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return On.apply(this,arguments)}),removeBattles:(An=_n(vn().m(function t(){return vn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.BATTLES);case 1:return t.n=2,rt.delete(rt.Keys.UPLOADED_BATTLES);case 2:return t.n=3,rt.delete(rt.Keys.FILTERED_BATTLES);case 3:console.log("Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']");case 4:return t.a(2)}},t)})),function(){return An.apply(this,arguments)}),removeFilteredBattles:(Tn=_n(vn().m(function t(){return vn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.FILTERED_BATTLES);case 1:console.log("Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']");case 2:return t.a(2)}},t)})),function(){return Tn.apply(this,arguments)}),applyFilter:(wn=_n(vn().m(function t(e){var n,r,o,a,i,c,u,s,l,f,p,d;return vn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.localFilters||[],o=e.globalFilters||[],a=Object.values(n),i=dn(o);try{for(i.s();!(c=i.n()).done;)u=c.value,console.log("Applying global filter: ".concat(u)),s=a.length,a=u.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),console.log("Filtered ".concat(s-a.length," out of ").concat(s,"; new total = ").concat(a.length))}catch(t){i.e(t)}finally{i.f()}l=dn(r),t.p=2,p=vn().m(function t(){var e,r;return vn().w(function(t){for(;;)switch(t.n){case 0:e=f.value,console.log("Applying local filter: ".concat(e)),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=pn(t,2),r=(n[0],n[1]);return e.call(r)})),console.log("Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length));case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(fn(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,l.e(d);case 7:return t.p=7,l.f(),t.f(7);case 8:return console.log("Caching filtered battles ; total = ".concat(Object.keys(n).length)),t.n=9,rt.cache(rt.Keys.FILTERED_BATTLES,n);case 9:return console.log("Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters")),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return wn.apply(this,arguments)}),extendBattles:(Sn=_n(vn().m(function t(e){var n,r,o,a,i;return vn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=sn(sn({},i),e),t.n=5,rt.cache(rt.Keys.BATTLES,r);case 5:return console.log("Extended user data in cache"),t.a(2,r)}},t)})),function(t){return Sn.apply(this,arguments)}),cacheQuery:(En=_n(vn().m(function t(e,n,r){var o,a;return vn().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No query battles provided to cacheQuery"),t.a(2,[]);case 1:return console.log("Caching queried battles: ".concat(e.length," battles; modified [BATTLES]")),o=on(e,n,r),t.n=2,this.extendBattles(o);case 2:return a=t.v,console.log("Cached queried battles in cache; modified [BATTLES]"),t.a(2,a)}},t,this)})),function(t,e,n){return En.apply(this,arguments)}),cacheUpload:(bn=_n(vn().m(function t(e,n){var r,o;return vn().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.error("No uploaded battles provided to cacheUpload"),t.a(2,{});case 1:return r=an(e,n),t.n=2,rt.cache(rt.Keys.UPLOADED_BATTLES,r);case 2:return t.n=3,this.extendBattles(r);case 3:return o=t.v,console.log("Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]"),t.a(2,o)}},t,this)})),function(t,e){return bn.apply(this,arguments)}),getStats:function(){var t=_n(vn().m(function t(e,n,r){var o,a,i,c,u,s,l,f,p;return vn().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting stats"),o=n.localFilters.length+n.globalFilters.length,console.log("Applying ".concat(o," filters")),a=Object.values(e),t.n=1,this.applyFilter(n);case 1:return i=t.v,c=Object.values(i),console.log("Getting preban stats"),t.n=2,Le(c,r);case 2:return u=t.v,console.log("Getting first pick stats"),t.n=3,De(c,r);case 3:return s=t.v,console.log("Getting general stats"),t.n=4,xe(c,r);case 4:return l=t.v,console.log("Getting hero stats"),t.n=5,ke(c,r);case 5:return f=t.v,console.log("Getting server stats"),t.n=6,je(c);case 6:return p=t.v,console.log("Returning stats"),t.a(2,{battles:a,filteredBattlesObj:i,prebanStats:u,generalStats:l,firstPickStats:s,playerHeroStats:f.playerHeroStats,enemyHeroStats:f.enemyHeroStats,serverStats:p,numFilters:o})}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()};const Rn=Pn;function In(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")(?=[,)\\s;]|$)"),e)}function Cn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")$"),e)}function kn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";if(t.length<1)throw new Error("orRegex must have at least one pattern");for(var n="(?:".concat(t[0].source,")"),r=1;r<t.length;r++)n+="|(?:".concat(t[r].source,")");return new RegExp(n,e)}var Dn=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Ln=new RegExp("^(?:".concat(["date","is-first-pick","is-win","victory-points","p1.picks","p2.picks","p1.prebans","p2.prebans","p1.postban","p2.postban","prebans","p1.id","p2.id","p1.league","p2.league","p1.server","p2.server","p1.pick1","p1.pick2","p1.pick3","p1.pick4","p1.pick5","p2.pick1","p2.pick2","p2.pick3","p2.pick4","p2.pick5","p1.mvp","p2.mvp","first-turn","first-turn-hero","turns","seconds","point-gain"].map(Dn).join("|"),")"),"i"),jn=new RegExp("(?:".concat(["and","or","xor","not"].map(Dn).join("|"),")(?=\\()"),"i"),xn=new RegExp("(?:".concat(["last-n"].map(Dn).join("|"),")(?=\\()"),"i"),Nn=new RegExp("(?:".concat(["p1.equipment","p2.equipment","p1.artifact","p2.artifact","p1.cr-geq","p2.cr-geq","p1.cr-lt","p2.cr-lt"].map(Dn).join("|"),")(?=\\()"),"i"),Fn=kn([jn,xn,Nn]),Mn=/.*/i,Gn=/\d{4}-\d{2}-\d{2}/,Bn=/\{\s*\}/,Un=/-?\d+/,Hn=/season-[1-9]+[0-9]*(\.[1-9]*)?|current-season/i,Kn=new RegExp("^".concat(Gn.source,"$"),"i"),Vn=new RegExp("(?:".concat(Hn.source,")"),"i"),Wn=Mn.source,qn=Un.source,Yn=Gn.source,zn=Ln.source,Qn=Vn.source,Jn=new RegExp('"('.concat(Wn,")\"|'(").concat(Wn,")'"),"i"),$n=new RegExp(Cn(Jn),"i"),Xn=Jn.source,Zn=new RegExp("(?:".concat(Xn,"|").concat(Wn,"|").concat(Yn,")"),"i"),tr=new RegExp("(?:".concat(zn,"|").concat(Qn,")"),"i"),er=Zn.source,nr=new RegExp("\\{\\s*(?:".concat(er,"\\s*)(?:,\\s*").concat(er,"\\s*)*,?\\s*\\}|").concat(Bn.source),"i"),rr=new RegExp("".concat(qn,"\\.\\.\\.").concat(qn,"|").concat(Yn,"\\.\\.\\.").concat(Yn,"|").concat(qn,"\\.\\.\\.=").concat(qn,"|").concat(Yn,"\\.\\.\\.=").concat(Yn)),or=new RegExp("^".concat(rr.source,"$")),ar={VALID_STRING_RE:Mn,VALID_DATE_RE:Gn,VALID_INT_RE:Un,EMPTY_SET_RE:Bn,SET_ELEMENT_RE:Zn,VALID_SET_RE:nr,VALID_STRING_LITERAL_RE:$n,VALID_DATE_LITERAL_RE:Kn,VALID_INT_LITERAL_RE:/^-?\d+$/,VALID_BOOL_LITERAL_RE:/^(true|false)$/i,VALID_RANGE_RE:rr,VALID_RANGE_LITERAL_RE:or,VALID_SEASON_RE:Hn,VALID_SEASON_LITERAL_RE:Cn(Hn),VALID_DATA_WORD_RE:Vn,VALID_DATA_WORD_LITERAL_RE:Cn(Vn),VALID_FIELD_WORD_RE:Ln,VALID_DATAFIELD_RE:tr,VALID_GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:Cn($n),VALID_CLAUSE_FUNCTIONS_RE:jn,VALID_DIRECT_FUNCTIONS_RE:Nn,VALID_GLOBAL_FUNCTIONS_RE:xn,VALID_FUNCTIONS_RE:Fn,padRegex:In,anchorExp:Cn,tokenMatch:function(t){return t.match(Fn)?(console.log("Matched stream as clause:",t),"keyword"):t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?(console.log("Matched stream as operator:",t),"operator"):t.match(new RegExp("[a-z0-9.\"'}=)-]".concat(tr.source,"(?=[,)\\s;]|$)"),"i"))?(console.log("Matched stream as field with preceding fragment:",t),null):t.match(In(tr))?(console.log("Matched stream as Data Field:",t),"datafield"):t.match(In(Jn))?(console.log("Matched stream as string:",t),"string"):t.match(In(nr))?(console.log("Matched stream as set:",t),"set"):t.match(In(rr))?(console.log("Matched stream as range:",t),"range"):t.match(/[^(,\s;.=0-9\-]+\d+/i)?(console.log("Matched stream as non-num null",t),null):t.match(In(Un))?(console.log("Matched stream as number:",t),"number"):t.match(In(Gn))?(console.log("Matched stream as date:",t),"date"):t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?(console.log("Matched stream as bool:",t),"bool"):t.match(/[\(\)\{\}\;\,]/)?(console.log("Matched stream as bracket:",t),"bracket"):(t.next(),console.log("Matched stream as null:",t),null)},orRegex:kn,escapeRegex:Dn};function ir(t){return ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ir(t)}function cr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||sr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=sr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function sr(t,e){if(t){if("string"==typeof t)return lr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lr(t,e):void 0}}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dr(r.key),r)}}function pr(t,e,n){return e&&fr(t.prototype,e),n&&fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dr(t){var e=function(t){if("object"!=ir(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ir(e)?e:e+""}function hr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yr(t,e,n){return e=br(e),function(t,e){if(e&&("object"==ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mr()?Reflect.construct(e,n||[],br(t).constructor):e.apply(t,n))}function vr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_r(t,e)}function gr(t){var e="function"==typeof Map?new Map:void 0;return gr=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(mr())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&_r(o,n.prototype),o}(t,arguments,br(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_r(n,t)},gr(t)}function mr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mr=function(){return!!t})()}function _r(t,e){return _r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_r(t,e)}function br(t){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},br(t)}var Er=function(t){function e(t){var n;return hr(this,e),(n=yr(this,e,[t])).name="Filter Syntax Exception",n}return vr(e,t),pr(e)}(gr(Error)),Sr=function(t){function e(t){var n;return hr(this,e),(n=yr(this,e,[t])).name="Filter Type Exception",n}return vr(e,t),pr(e)}(gr(Error)),wr=function(t){function e(t){var n;return hr(this,e),(n=yr(this,e,[t])).name="Filter Validation Error",n}return vr(e,t),pr(e)}(gr(Error)),Tr={"(":")","{":"}",'"':'"',"'":"'"},Ar={"'":'"','"':"'"},Or=Object.fromEntries(Object.entries(Tr).filter(function(t){var e=cr(t,2);return e[0]!==e[1]}).map(function(t){var e=cr(t,2),n=e[0];return[e[1],n]}));function Pr(t){var e,n={},r=ur(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=(n[o]||0)+1}}catch(t){r.e(t)}finally{r.f()}return n}const Rr={SyntaxException:Er,TypeException:Sr,ValidationError:wr,retrieveEnclosure:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:")";if(e===n)throw new Error("Enclosure characters must be different: ".concat(e," = ").concat(n));var r,o=!1,a=0,i="",c=ur(function(t){return function(t){if(Array.isArray(t))return lr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).entries());try{for(c.s();!(r=c.n()).done;){var u=cr(r.value,2),s=u[0],l=u[1];if(l===e){if(a+=1,!o){o=!0;continue}}else l===n&&(a-=1);if(0===a&&o){if(s!=t.length-1)throw new Er("Enclosure should not be resolved before end of string; resolved at index: ".concat(s,"; input string: ").concat(t));return i}if(a<0)throw new Er("Unbalanced enclosure at index: ".concat(s," of input string: ").concat(t,'; balance of "').concat(e,"...").concat(n,'" enclosures became negative.'));o&&(i+=l)}}catch(t){c.e(t)}finally{c.f()}if(!o)throw new Er("Enclosure of type ".concat(e,"...").concat(n," not found in string; input string: ").concat(t));if(a>0)throw new Er("Enclosure could not be resolved; too many '".concat(n,"'; balance = +{count}; input string {string}"))},retrieveArgs:function(t){var e,n=0,r=[],o="",a=ur(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;if("("===i){if(1===(n+=1))continue}else")"===i&&(n-=1);1===n&&","===i?(r.push(o.trim()),o=""):n>=1&&(o+=i)}}catch(t){a.e(t)}finally{a.f()}return o.trim()&&r.push(o.trim()),r},getCharCounts:Pr,tokenizeWithNestedEnclosures:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],a="",i=[],c=0;c<t.length;c++){var u=t[c];if(e.includes(u)&&i.length===n)a&&(o.push(r?a.trim():a),a="");else if(Or[u]){var s=Or[u];if(i.length>n&&(a+=u),i[i.length-1]!==s){var l=Pr(t);throw(l["'"]||0)%2!=0||(l['"']||0)%2!=0?new Er("Error tokenizing: Unbalanced closing character at position ".concat(c,"; got string: '").concat(t,"' ; if a str type has quote characters in it, wrap it in the opposite quote character.")):new Er("Error tokenizing: Unbalanced closing character at position ".concat(c,"; got string: '").concat(t,"'"))}i.pop()}else i.length>=n&&(a+=u),!Tr[u]||Ar[u]&&i[i.length-1]===Ar[u]||(i[i.length-1]===Tr[u]&&u===Tr[u]?i.pop():i.push(u))}if(i.length>0)throw new Error("Unbalanced enclosures in input string; unresolved characters from enclosure stack: [ ".concat(i.join(", ")," ]"));return a&&o.push(r?a.trim():a),o},parseDate:function(t){if(!ar.VALID_DATE_LITERAL_RE.test(t))throw new Er("Invalid date; must be in the format: YYYY-MM-DD ( regex: ".concat(ar.VALID_DATE_LITERAL_RE.source," ); got: '").concat(t,"'"));var e=t.split(" ")[0],n=new Date("".concat(e,"T00:00:00"));if(isNaN(n.getTime()))throw new Er("Invalid date; could not be parsed as a valid date; got: '".concat(t,"'"));var r=cr(n.toISOString().split("T")[0].split("-").map(Number),3),o=r[0],a=r[1],i=r[2];if(n.getFullYear()!==o||n.getMonth()+1!==a||n.getDate()!==i)throw new Er("Invalid date; parsed date: ".concat(n.toISOString()," does not match passed in string: ").concat(e));return console.log("Parsed date: ".concat(n.toISOString()," ; ").concat(n.constructor.name)),n},tryConvert:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===r&&(r="Could not convert ".concat(n," to ").concat(e));try{return t(n)}catch(t){throw new Sr("".concat(r,": ").concat(t.message))}},trimSurroundingQuotes:function(t){return t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}};function Ir(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Cr(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Cr(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Cr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Cr(f,"constructor",s),Cr(s,"constructor",u),u.displayName="GeneratorFunction",Cr(s,o,"GeneratorFunction"),Cr(f),Cr(f,o,"Generator"),Cr(f,r,function(){return this}),Cr(f,"toString",function(){return"[object Generator]"}),(Ir=function(){return{w:a,m:p}})()}function Cr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Cr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Cr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Cr(t,e,n,r)}function kr(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Dr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){kr(a,r,o,i,c,"next",t)}function c(t){kr(a,r,o,i,c,"throw",t)}i(void 0)})}}var Lr,jr,xr,Nr={fetchAndCacheSeasonDetails:(xr=Dr(Ir().m(function t(){var e,n,r,o,a,i;return Ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,qt.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))})}),n.sort(function(t,e){return t["Season Number"]-e["Season Number"]}),r=[n[0]],o=n[0],n.slice(1).forEach(function(t){var e=new Date(+o.range[1]+wt),n=new Date(+t.range[0]-wt),a={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};r.push(a),r.push(t),o=t}),o.range[1]<new Date&&(a=new Date(+r.at(-1).range[1]+wt),i={"Season Number":o["Season Number"]+.5,Code:null,Season:"Active Pre-Season",Start:a.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[a,new Date]},r.push(i)),r.reverse(),t.n=3,rt.cache(rt.Keys.SEASON_DETAILS,r);case 3:return t.a(2,r)}},t)})),function(){return xr.apply(this,arguments)}),getSeasonDetails:(jr=Dr(Ir().m(function t(){var e,n,r,o;return Ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.SEASON_DETAILS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,Nr.fetchAndCacheSeasonDetails();case 4:o=t.v;case 5:return t.a(2,o)}},t)})),function(){return jr.apply(this,arguments)}),clearSeasonDetails:(Lr=Dr(Ir().m(function t(){return Ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.SEASON_DETAILS);case 1:console.log("Season details cleared from data cache");case 2:return t.a(2)}},t)})),function(){return Lr.apply(this,arguments)})};const Fr=Nr;var Mr=new Set("'\"(),-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),Gr=new Set(Object.values(St).map(function(t){return t.toLowerCase()}));function Br(t){return function(t){if(Array.isArray(t))return Ur(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ur(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ur(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Hr(t){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hr(t)}function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vr(r.key),r)}}function Vr(t){var e=function(t){if("object"!=Hr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hr(e)?e:e+""}var Wr,qr,Yr,zr=new Set(["victory-points","point-gain"]),Qr=new Set(["prebans","p1.picks","p2.picks","p1.prebans","p2.prebans"]),Jr=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=t.FIELD_EXTRACT_FN_MAP[e];if(!n)throw new Rr.ValidationError("Invalid field type: '".concat(e,"'; valid types are: ").concat(Object.keys(t.FIELD_EXTRACT_FN_MAP).join(", ")));console.log("Found valid field type: ",e),this.str=e,this.extractData=n},(e=[{key:"asString",value:function(){return this.str}}])&&Kr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function $r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||Zr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Zr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Zr(t,e){if(t){if("string"==typeof t)return to(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?to(t,e):void 0}}function to(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function eo(t,e,n){return e=ro(e),function(t,e){if(e&&("object"==io(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,no()?Reflect.construct(e,n||[],ro(t).constructor):e.apply(t,n))}function no(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(no=function(){return!!t})()}function ro(t){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ro(t)}function oo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ao(t,e)}function ao(t,e){return ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ao(t,e)}function io(t){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(t)}function co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lo(r.key),r)}}function so(t,e,n){return e&&uo(t.prototype,e),n&&uo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lo(t){var e=function(t){if("object"!=io(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==io(e)?e:e+""}Wr=Jr,Yr={date:function(t){var e;return t[At.DATE_TIME]?new Date("".concat(null===(e=t[At.DATE_TIME])||void 0===e?void 0:e.slice(0,10),"T00:00:00")):"N/A"},"is-first-pick":function(t){return t[At.FIRST_PICK]?1:0},"is-win":function(t){return t[At.WIN]?1:0},"victory-points":function(t){return t[At.P1_POINTS]},"p1.picks":function(t){return t[At.P1_PICKS]},"p2.picks":function(t){return t[At.P2_PICKS]},"p1.prebans":function(t){return t[At.P1_PREBANS]},"p2.prebans":function(t){return t[At.P2_PREBANS]},"p1.postban":function(t){return t[At.P1_POSTBAN]},"p2.postban":function(t){return t[At.P2_POSTBAN]},prebans:function(t){return[].concat(Br(t[At.P1_PREBANS]),Br(t[At.P2_PREBANS]))},"p1.pick1":function(t){return t[At.P1_PICKS][0]},"p1.pick2":function(t){return t[At.P1_PICKS][1]},"p1.pick3":function(t){return t[At.P1_PICKS][2]},"p1.pick4":function(t){return t[At.P1_PICKS][3]},"p1.pick5":function(t){return t[At.P1_PICKS][4]},"p2.pick1":function(t){return t[At.P2_PICKS][0]},"p2.pick2":function(t){return t[At.P2_PICKS][1]},"p2.pick3":function(t){return t[At.P2_PICKS][2]},"p2.pick4":function(t){return t[At.P2_PICKS][3]},"p2.pick5":function(t){return t[At.P2_PICKS][4]},"p1.league":function(t){return t[At.P1_LEAGUE]},"p2.league":function(t){return t[At.P2_LEAGUE]},"p1.server":function(t){return t[At.P1_SERVER]},"p2.server":function(t){return t[At.P2_SERVER]},"p1.id":function(t){return Number(t[At.P1_ID])},"p2.id":function(t){return Number(t[At.P2_ID])},"p1.mvp":function(t){return t[At.P1_MVP]},"p2.mvp":function(t){return t[At.P2_MVP]},"is-first-turn":function(t){return t[At.FIRST_TURN]},"first-turn-hero":function(t){return t[At.FIRST_TURN_HERO]},turns:function(t){return t[At.TURNS]},seconds:function(t){return t[At.SECONDS]},"point-gain":function(t){return t[At.POINT_GAIN]}},(qr=Vr(qr="FIELD_EXTRACT_FN_MAP"))in Wr?Object.defineProperty(Wr,qr,{value:Yr,enumerable:!0,configurable:!0,writable:!0}):Wr[qr]=Yr;var fo=function(){return so(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;co(this,t),this.rawString=e,this.data=null===r?this.getData(e,n):this.getData(e,n,r)},[{key:"asString",value:function(){return"".concat(this.data)}}])}(),po=function(t){function e(){return co(this,e),eo(this,e,arguments)}return oo(e,t),so(e,[{key:"getData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{types:["hero","league","server","equipment","artifact"]};if(t=(t=Rr.trimSurroundingQuotes(t)).trim(),!ar.VALID_STRING_RE.test(t))throw new Rr.SyntaxException("Invalid string; all string content must start with a letter followed by either num, hyphen or period ( case insensitive regex: ".concat(ar.VALID_STRING_LITERAL_RE.source," ); got: [").concat(t,"]"));function r(t,n){var r;switch(t){case"hero":return null===(r=ge.getHeroByName(n,e.HM))||void 0===r?void 0:r.name;case"league":return Tt[n]?n:null;case"server":return Object.values(Et).find(function(t){return t.toLowerCase()===n});case"equipment":return Gr.has(n)?n:null;case"artifact":return e.ARTIFACT_LOWERCASE_STRINGS_SET.has(n)?n:null}}var o,a=Xr(n.types);try{for(a.s();!(o=a.n()).done;){var i=r(o.value,t);if(i)return console.log("Parsed string: [".concat(t,"] to [").concat(i,"]")),$e(i)}}catch(t){a.e(t)}finally{a.f()}throw new Rr.SyntaxException("Invalid string; All strings must either be a valid [".concat(n.types.join(", "),"]; got: [").concat(t,"]"))}},{key:"asString",value:function(){return'"'.concat(this.data,'"')}}])}(fo),ho=function(t){function e(){return co(this,e),eo(this,e,arguments)}return oo(e,t),so(e,[{key:"getData",value:function(t){return Rr.parseDate(t)}},{key:"asString",value:function(){return"".concat(this.rawString)}}])}(fo),yo=function(t){function e(){return co(this,e),eo(this,e,arguments)}return oo(e,t),so(e,[{key:"getData",value:function(t){if(!ar.VALID_INT_LITERAL_RE.test(t))throw new Rr.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));var e=parseInt(t);if(isNaN(e))throw new Rr.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));return e}},{key:"asString",value:function(){return"".concat(this.data)}}])}(fo),vo=function(t){function e(){return co(this,e),eo(this,e,arguments)}return oo(e,t),so(e,[{key:"getData",value:function(t){if(!ar.VALID_BOOL_LITERAL_RE.test(t))throw new Rr.SyntaxException("Invalid boolean; must be 'true' or 'false'; got: '".concat(t,"'"));return"true"===t?1:0}},{key:"asString",value:function(){return"".concat(this.data?"true":"false")}}])}(fo),go=function(t){function e(){return co(this,e),eo(this,e,arguments)}return oo(e,t),so(e,[{key:"getData",value:function(t){var e=t.split("...");if(2!==e.length)throw new Rr.SyntaxException("Invalid range; ranges must be of the format x...y or x...=y ; got more than two values when splitting string: '".concat(t,"'"));var n=$r(e,2),r=n[0],o=n[1],a=!1;o.includes("=")&&(o=o.replace("=",""),a=!0);var i={start:null,end:null,endInclusive:a};if(ar.VALID_DATE_LITERAL_RE.test(r)){if(i.start=Rr.tryConvert(Rr.parseDate,"Date",r,"Could not convert '".concat(r,"' to Date in declared range: '").concat(t,"'")),i.end=Rr.tryConvert(Rr.parseDate,"Date",o,"Could not convert '".concat(o,"' to Date in declared range: '").concat(t,"' ; Ranges must have homogenous types")),i.start>i.end)throw new Rr.SyntaxException("Invalid range; start date must be on or before end date; ".concat(i.start," > ").concat(i.end));i.type="Date"}else{if(!ar.VALID_INT_LITERAL_RE.test(r))throw new Rr.SyntaxException("Invalid range; must be of the format x...y or x...=y ; got: '".concat(t,"'"));if(i.start=Rr.tryConvert(function(t){return new yo(t)},"Int",r,"Could not convert '".concat(r,"' to Int in declared range: '").concat(t,"'")).data,i.end=Rr.tryConvert(function(t){return new yo(t)},"Int",o,"Could not convert '".concat(o,"' to Int in declared range: '").concat(t,"' ; Ranges must have homogenous types")).data,i.start>i.end)throw new Rr.SyntaxException("Invalid range; start integer must be equal to or less than end integer; ".concat(i.start," > ").concat(i.end));i.type="Int"}return console.log("Built Range: ".concat(JSON.stringify(i))),i}},{key:"asString",value:function(){var t=this.data.endInclusive?"...=":"...";return"Date"===this.data.type?"".concat(this.data.start.toISOString().slice(0,10)).concat(t).concat(this.data.end.toISOString().slice(0,10)):"Int"===this.data.type?"".concat(this.data.start).concat(t).concat(this.data.end):"Error Converting Range to String => < ".concat(this.data.start).concat(t).concat(this.data.end," >")}}])}(fo),mo=function(t){function e(){return co(this,e),eo(this,e,arguments)}return oo(e,t),so(e,[{key:"getData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{types:["hero","league","server","equipment","artifact"]};if(!ar.VALID_SET_RE.test(t))throw new Rr.SyntaxException("Invalid set; must be in the format: { element1, element2,... }, where elements have either string format or date format; ( case insensitive regex: ".concat(ar.VALID_SET_RE.source," ) (Just chat gpt this one bro); got: '").concat(t,"'"));var r=Rr.tokenizeWithNestedEnclosures(t,",",1,!0).map(function(t){if(ar.VALID_STRING_RE.test(t))return new po(t,e,n);if(ar.VALID_DATE_LITERAL_RE.test(t))return new ho(t);throw new Rr.SyntaxException("Invalid set element; must be a string or date; got: '".concat(t,"'"))});console.log("GOT ELEMENTS: ",r);var o,a=new Set,i=Xr(r);try{for(i.s();!(o=i.n()).done;){var c=o.value;a.add(c.constructor.name)}}catch(t){i.e(t)}finally{i.f()}if(a=function(t){return function(t){if(Array.isArray(t))return to(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Zr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a),console.log("GOT TYPES: ",a),a.size>1)throw new Rr.SyntaxException("Invalid set; all set elements must have the same data type; \n                got: types: [".concat(a.join(", "),"]"));return this.type=a[0],this.str="{".concat(r.map(function(t){return t.asString()}).join(", "),"}"),this.list=r.map(function(t){return t.data}),new Set(this.list)}},{key:"asString",value:function(){return this.str}}])}(fo);var _o={Date:ho,String:po,Int:yo,Bool:vo,Set:mo,Range:go};function bo(t,e){if(t){if("string"==typeof t)return Eo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(t,e):void 0}}function Eo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function So(t,e,n){return e=To(e),function(t,e){if(e&&("object"==Po(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wo()?Reflect.construct(e,n||[],To(t).constructor):e.apply(t,n))}function wo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(wo=function(){return!!t})()}function To(t){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},To(t)}function Ao(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oo(t,e)}function Oo(t,e){return Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oo(t,e)}function Po(t){return Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Po(t)}function Ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ko(r.key),r)}}function Co(t,e,n){return e&&Io(t.prototype,e),n&&Io(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ko(t){var e=function(t){if("object"!=Po(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Po(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Po(e)?e:e+""}var Do=function(){return Co(function t(){Ro(this,t)},[{key:"call",value:function(t){throw new Error("Base class ".concat(this.constructor.name," does not implement the 'call' method. Implement this method in a subclass."))}}])}(),Lo=function(t){function e(t){var n;if(Ro(this,e),(n=So(this,e)).name="last-N",1!==t.length)throw new Rr.SyntaxException("".concat(n.name," expects 1 argument, got ").concat(t.length));var r=Number(t[0]);if(!Number.isInteger(r))throw new Rr.TypeException("".concat(n.name," expects an integer argument, could not parse '").concat(t[0],"' as integer"));return n.str="".concat(n.name,"(").concat(r,")"),n.n=r,n}return Ao(e,t),Co(e,[{key:"call",value:function(t){return t.sort(function(t,e){return t["Seq Num"]-e["Seq Num"]}),t.slice(-this.n)}}])}(function(t){function e(){return Ro(this,e),So(this,e)}return Ao(e,t),Co(e,[{key:"asString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Do)),jo=function(t){function e(t){var n;return Ro(this,e),(n=So(this,e)).fns=t,console.log("Clause Fn constructor got fns:",t),n}return Ao(e,t),Co(e,[{key:"asString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=t+"   ";return this.fns.localFilters.forEach(function(t){return e+="".concat(t.asString(n),",\n")}),console.log("Clause Fn asString got output:",e),"".concat(t).concat(this.str,"(\n").concat(e.trimEnd(),"\n").concat(t,")")}}])}(Do),xo=function(t){function e(t){var n;return Ro(this,e),(n=So(this,e,[t])).str="AND",n}return Ao(e,t),Co(e,[{key:"call",value:function(t){return this.fns.localFilters.every(function(e){return e.call(t)})}}])}(jo),No=function(t){function e(t){var n;return Ro(this,e),(n=So(this,e,[t])).str="OR",n}return Ao(e,t),Co(e,[{key:"call",value:function(t){return this.fns.localFilters.some(function(e){return e.call(t)})}}])}(jo),Fo=function(t){function e(t){var n;return Ro(this,e),(n=So(this,e,[t])).str="XOR",n}return Ao(e,t),Co(e,[{key:"call",value:function(t){var e,n=!1,r=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=bo(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(this.fns.localFilters);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=!n&&o.call(t)||n&&!o.call(t)}}catch(t){r.e(t)}finally{r.f()}return n}}])}(jo),Mo=function(t){function e(t){var n;return Ro(this,e),(n=So(this,e,[t])).str="NOT",n}return Ao(e,t),Co(e,[{key:"call",value:function(t){return!this.fns.localFilters[0].call(t)}}])}(jo),Go=function(t){function e(){return Ro(this,e),So(this,e,arguments)}return Ao(e,t),Co(e,[{key:"asString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Do),Bo=function(t){function e(t,n,r){var o;return Ro(this,e),console.log("Received equipment fn args",t,n,r),(o=So(this,e)).hero=t.data,o.equipmentCounts=Xe(n.list),o.str=(r?"p1":"p2")+".equipment(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ao(e,t),Co(e,[{key:"call",value:function(t){var e=this.isPlayer1?t["P1 Equipment"]:t["P2 Equipment"],n=this.isPlayer1?t["P1 Picks"]:t["P2 Picks"],r=function(t,e,n){for(var r=0;r<e.length;r++)if(e[r]===t)return n[r];return null}(this.hero,n,e);if(!r)return!1;var o=Xe(r);return Object.entries(this.equipmentCounts).every(function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||bo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=e[0],r=e[1];return o[n]===r})}}],[{key:"fromFilterStr",value:function(t,n){var r=Rr.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Rr.SyntaxException("Invalid equipment function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!ar.VALID_STRING_LITERAL_RE.test(r[0]))throw new Rr.TypeException("Invalid equipment function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));var o=/^\{[",'a-z\s]*\}$/i.test(r[1])?r[1]:"{".concat(r[1],"}"),a=null,i=null;try{a=new _o.String(r[0],n,{types:["hero"]}),i=new _o.Set(o,n,{types:["equipment"]})}catch(e){throw new Rr.TypeException("Invalid type in equipment function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending equipment fn args",a,i,c),new e(a,i,c)}}])}(Go),Uo=function(t){function e(t,n,r){var o;return Ro(this,e),console.log("Received artifact fn args",t,n,r),(o=So(this,e)).hero=t.data,o.artifactArr=function(t){return function(t){if(Array.isArray(t))return Eo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||bo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.data),o.str=(r?"p1":"p2")+".artifact(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ao(e,t),Co(e,[{key:"call",value:function(t){var e=this.isPlayer1?t["P1 Artifacts"]:t["P2 Artifacts"],n=this.isPlayer1?t["P1 Picks"]:t["P2 Picks"],r=function(t,e,n){for(var r=0;r<e.length;r++)if(e[r]===t)return n[r];return null}(this.hero,n,e);return console.log("Got equipped Artifact: ".concat(r,", hero: ").concat(this.hero,", picks: ").concat(JSON.stringify(n),", artifacts: ").concat(JSON.stringify(e))),!!r&&this.artifactArr.some(function(t){return r.toLowerCase()===t.toLowerCase()})}}],[{key:"fromFilterStr",value:function(t,n){var r=Rr.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Rr.SyntaxException("Invalid artifact function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!ar.anchorExp(ar.VALID_STRING_LITERAL_RE).test(r[0]))throw new Rr.TypeException("Invalid artifact function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));var o=ar.VALID_SET_RE.test(r[1])?r[1]:"{".concat(r[1],"}"),a=null,i=null;try{a=new _o.String(r[0],n,{types:["hero"]}),i=new _o.Set(o,n,{types:["artifact"]})}catch(e){throw console.error(e),new Rr.TypeException("Invalid type in artifact function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending artifact fn args",a,i,c),new e(a,i,c)}}])}(Go),Ho=function(t){function e(t,n,r){var o;return Ro(this,e),console.log("Received CR-GEQ fn args",t.asString(),n.asString(),r),(o=So(this,e)).hero=t.data,o.crThreshold=n.data,o.str=(r?"p1":"p2")+".CR-GEQ(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ao(e,t),Co(e,[{key:"call",value:function(t){var e=this,n=function(t,n){return n.includes(t[0])&&t[1]>=e.crThreshold&&t[0]===e.hero},r=this.isPlayer1?t[At.CR_BAR].find(function(e){return n(e,t[At.P1_PICKS])}):t[At.CR_BAR].find(function(e){return n(e,t[At.P2_PICKS])});return console.log("Got CR Result: ".concat(r,", hero: ").concat(this.hero,", minValue: ").concat(this.crThreshold)),!!r}}],[{key:"fromFilterStr",value:function(t,n){var r=Rr.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Rr.SyntaxException("Invalid artifact function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!ar.VALID_STRING_LITERAL_RE.test(r[0]))throw new Rr.TypeException("Invalid CR-GEQ function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));if(!ar.VALID_INT_LITERAL_RE.test(r[1]))throw new Rr.TypeException("Invalid CR-GEQ function call ; second argument must be a valid integer literal ; got: '".concat(r[1],"' from str: ").concat(t));var o=r[1],a=null,i=null;try{a=new _o.String(r[0],n,{types:["hero"]}),i=new _o.Int(o)}catch(e){throw new Rr.TypeException("Invalid type in CR-GEQ function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending CR fn args",a,i,c),new e(a,i,c)}}])}(Go),Ko=function(t){function e(t,n,r){var o;return Ro(this,e),console.log("Received CR-LT fn args",t.asString(),n.asString(),r),(o=So(this,e)).hero=t.data,o.crThreshold=n.data,o.str=(r?"p1":"p2")+".CR-LT(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ao(e,t),Co(e,[{key:"call",value:function(t){var e=this,n=function(t,n){return n.includes(t[0])&&t[1]<e.crThreshold&&t[0]===e.hero},r=this.isPlayer1?t[At.CR_BAR].find(function(e){return n(e,t[At.P1_PICKS])}):t[At.CR_BAR].find(function(e){return n(e,t[At.P2_PICKS])});return console.log("Got CR Result: ".concat(r,", hero: ").concat(this.hero,", minValue: ").concat(this.crThreshold)),!!r}}],[{key:"fromFilterStr",value:function(t,n){var r=Rr.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Rr.SyntaxException("Invalid artifact function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!ar.VALID_STRING_LITERAL_RE.test(r[0]))throw new Rr.TypeException("Invalid CR-LT function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));if(!ar.VALID_INT_LITERAL_RE.test(r[1]))throw new Rr.TypeException("Invalid CR-LT function call ; second argument must be a valid integer literal ; got: '".concat(r[1],"' from str: ").concat(t));var o=r[1],a=null,i=null;try{a=new _o.String(r[0],n,{types:["hero"]}),i=new _o.Int(o)}catch(e){throw new Rr.TypeException("Invalid type in CR-LT function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending CR fn args",a,i,c),new e(a,i,c)}}])}(Go),Vo={and:xo,or:No,xor:Fo,not:Mo,"last-n":Lo,"p1.equipment":Bo,"p2.equipment":Bo,"p1.artifact":Uo,"p2.artifact":Uo,"p1.cr-geq":Ho,"p2.cr-geq":Ho,"p1.cr-lt":Ko,"p2.cr-lt":Ko};function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function qo(t,e){if(e instanceof Set)return e.has(t);if("object"===Wo(e)&&null!==e&&!Array.isArray(e)&&["start","end","endInclusive","type"].every(function(t){return e.hasOwnProperty(t)}))return t>=e.start&&(e.endInclusive?t<=e.end:t<e.end);if(Array.isArray(e))return e.includes(t);throw new Error("Invalid match pattern for 'in' operators; got: '".concat(t,"' and '").concat(JSON.stringify(e),"}' (").concat(e.constructor.name,")"))}var Yo={">":function(t,e){return t>e},"<":function(t,e){return t<e},"=":function(t,e){return t===e},in:function(t,e){return qo(t,e)},">=":function(t,e){return t>=e},"<=":function(t,e){return t<=e},"!=":function(t,e){return t!==e},"!in":function(t,e){return!qo(t,e)}};function zo(t){return zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zo(t)}function Qo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Jo(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Jo(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Jo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Jo(f,"constructor",s),Jo(s,"constructor",u),u.displayName="GeneratorFunction",Jo(s,o,"GeneratorFunction"),Jo(f),Jo(f,o,"Generator"),Jo(f,r,function(){return this}),Jo(f,"toString",function(){return"[object Generator]"}),(Qo=function(){return{w:a,m:p}})()}function Jo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jo=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Jo(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Jo(t,e,n,r)}function $o(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Xo(t){return function(t){if(Array.isArray(t))return aa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||oa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,na(r.key),r)}}function ea(t,e,n){return e&&ta(t.prototype,e),n&&ta(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function na(t){var e=function(t){if("object"!=zo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=zo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zo(e)?e:e+""}function ra(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=oa(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function oa(t,e){if(t){if("string"==typeof t)return aa(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aa(t,e):void 0}}function aa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ia(t){return function(t,e){var n,r=ra(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.has(o))throw new Rr.SyntaxException("Invalid character within <".concat("Main Filter String","> ; ' ").concat(o," ' is not allowed; got string: '").concat(t,"'"))}}catch(t){r.e(t)}finally{r.f()}}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),Mr),t.toLowerCase()}var ca=function(){return ea(function t(e,n){Zo(this,t),this.str=e,this.fn=n},[{key:"call",value:function(t){return this.fn(t)}},{key:"asString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}();function ua(t,e,n,r){var o=null;try{o=e in Jr.FIELD_EXTRACT_FN_MAP?new Jr(e):function(t,e){if(console.log("Trying to Parse DataType: ".concat(t)),ar.VALID_STRING_LITERAL_RE.test(t))return console.log("Parsing as StringType"),new po(t,e);if(ar.VALID_DATE_LITERAL_RE.test(t))return console.log("Parsing as DateType"),new ho(t);if(ar.VALID_INT_LITERAL_RE.test(t))return console.log("Parsing as IntType"),new yo(t);if(ar.VALID_BOOL_LITERAL_RE.test(t))return console.log("Parsing as BoolType"),new vo(t);if(/\{.*\}/.test(t))return console.log("Parsing as SetType"),new mo(t,e);if(ar.VALID_RANGE_LITERAL_RE.test(t))return console.log("Parsing as RangeType"),new go(t);if(ar.VALID_DATA_WORD_LITERAL_RE.test(t))return console.log("Parsing as DataWord"),function(t,e){if(ar.VALID_SEASON_LITERAL_RE.test(t)){var n=function(t){return t.toISOString().slice(0,10)};if(e.SeasonDetails.length<1)throw new Error("Did not recieve any season details; failed on: '".concat(t,"'"));if("current-season"===t){var r=$r(e.SeasonDetails.find(function(t){return"Active"===t.Status}).range,2),o=r[0],a=r[1];return new go("".concat(n(o),"...=").concat(n("N/A"===a?new Date:a)))}var i=Number(t.split("-")[1]),c=e.SeasonDetails.find(function(t){return t["Season Number"]===i});if(!c)throw new Error("Invalid season specified; ".concat(i," is not a valid season number; failed on str: '").concat(t,"'"));var u=$r(c.range,2),s=u[0],l=u[1];return new go("".concat(n(s),"...=").concat(n(l)))}}(t,e);if(console.log("Failed to parse DataType"),ar.VALID_STRING_LITERAL_RE.test("'".concat(t,"'")))throw new Rr.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you forget to wrap string literals in double or single quotes?"));if(t.includes("'")&&t.includes('"'))throw new Rr.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you encase in mismatching quote types?"));if(t.includes(".=")||t.includes(".."))throw new Rr.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; were you trying to use a range? Ranges must be of the format x...y or x...=y and may only be int-int or date-date"));throw new Rr.SyntaxException("Invalid DataType declaration; could not parse to valid Field or Declared Data Type; got: '".concat(t,"'"))}(e,r)}catch(r){for(var a in Jr.FIELD_EXTRACT_FN_MAP)if(e.includes(a)||a.includes(e))throw new Rr.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"], did you mean to use '").concat(a,"' as a field instead?"));throw console.error(r),new Rr.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"]; error: ").concat(r.message))}return o}var sa=function(){function t(e){if(Zo(this,t),e!==la._)throw new Error("Cannot instantiate FilterSyntaxParser directly; use createAndParse method instead.")}return ea(t,[{key:"asString",value:function(){var t=Xo(this.filters.localFilters);return t.push.apply(t,Xo(this.filters.globalFilters)),"[\n".concat(t.map(function(t){return t.asString("   ")}).join(";\n"),"\n]")}},{key:"parseGlobalFilterFn",value:function(t,e){var n=ar.anchorExp(ar.VALID_GLOBAL_FILTER_RE);if(!n.test(e))throw new Rr.SyntaxException('Invalid global filter format; must follow the case insensitive regex format "'.concat(n.source,"\" ; got: '").concat(e,"'"));var r=Rr.tokenizeWithNestedEnclosures(e,",",1);if(t===Lo)return{localFilters:[],globalFilters:[new Lo(r)]};throw new Rr.SyntaxException("Global filter function ".concat(t.str," not mapped in parseGlobalFilterFn"))}},{key:"parseClauseFn",value:function(e,n){var r=this;console.log("Parsing clause fn:",e.str,n);var o=Rr.tokenizeWithNestedEnclosures(n,",",1).filter(function(t){return t.length>0});if(console.log("Got argArr:",o),e===Fo&&o.length<2)throw new Rr.SyntaxException("XOR clause must have at least two arguments; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));if(e===Mo&&1!==o.length)throw new Rr.SyntaxException("NOT clause must have exactly one argument; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));var a=o.reduce(function(t,e){var n,o;return(n=t.localFilters).push.apply(n,Xo(r.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,Xo(r.parseFilters(e).globalFilters)),t},t.getEmptyFilters());if(a.globalFilters.length>0)throw new Rr.SyntaxException("Global filters not allowed in clause functions; got: ".concat(a.globalFilters,' from string: "').concat(n,'"'));if(e===Mo&&1!==a.localFilters.length)throw new Rr.SyntaxException("NOT clause must have exactly one argument; got: ".concat(a.length,' arguments from string: "').concat(n,'"'));return{localFilters:[new e(a)],globalFilters:[]}}},{key:"parseDirectFn",value:function(t,e){return{localFilters:[t.fromFilterStr(e,this.REFS)],globalFilters:[]}}},{key:"parseBaseFilter",value:function(t){console.log("Parsing base filter:",t);var e=Rr.tokenizeWithNestedEnclosures(t," ",0,!0);if(console.log("Got tokens: ",e,"; Length: ".concat(e.length)),3!==e.length)throw new Rr.SyntaxException("Invalid base filter format; all filters must be of the form: ['X', operator, 'Y']; got tokens: [".concat(e.join(", "),"]"));var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||oa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3),r=n[0],o=n[1],a=n[2];if(!Yo[o])throw new Rr.SyntaxException('Invalid operator in base filter; got: "'.concat(o,'" as the operator in filter: [').concat(t,"]"));var i=Yo[o];if(r=ua("left",r,t,this.REFS,this.SeasonDetails),a=ua("right",a,t,this.REFS,this.SeasonDetails),("in"===o||"!in"===o)&&!(a instanceof _o.Set||a instanceof _o.Range||a instanceof Jr&&Qr.has(a.str)))throw new Rr.TypeException("When using any 'in' or '!in' operator, the right side of the operator must be a Set, Range, or a Field composed of a set (i.e. p1.picks, p2.prebans, etc.); error found in filter: '".concat(t,"'"));if(a instanceof _o.Range)if("Date"===a.data.type){if(!r.str.includes("date"))throw new Rr.TypeException("When using a Date Range, the left side of the operator must be a date field; ".concat(r.str," is not a date field; error found in filter: '").concat(t,"'"))}else if("Int"===a.data.type&&!zr.has(r.str))throw new Rr.TypeException("When using an Int Range, the left side of the operator must be an integer field; ".concat(r.str," is not an integer field; error found in filter: '").concat(t,"'"));if(a instanceof fo&&r instanceof fo)throw new Rr.SyntaxException("Either left or right side of filter must be a data field (a property of a battle); both ".concat(r," and ").concat(a,' are user declared data types in filter: "').concat(t,'"'));var c;c=r instanceof fo?function(t){return i(r.data,a.extractData(t))}:a instanceof fo?function(t){return i(r.extractData(t),a.data)}:function(t){return i(r.extractData(t),a.extractData(t))};var u="".concat(r.asString()," ").concat(o," ").concat(a.asString()),s=new ca(u,c);return console.log("Returning base local filter",[s.asString()]),{localFilters:[s],globalFilters:[]}}},{key:"parseFilters",value:function(e){var n=this;if(console.log('Parsing filter string: "'.concat(e||this.preParsedString,'"')),""===e)return console.log("Empty filter string; Returning empty filters"),t.getEmptyFilters();var r,o=(e=e.trim()).split(";").filter(function(t){return t.length>0}),a=ra(o);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=Rr.getCharCounts(i);if(c["("]!==c[")"])throw new Rr.SyntaxException('Imbalanced parentheses in following string: "'.concat(i,'"'));if(c["{"]!==c["}"])throw new Rr.SyntaxException("Imbalanced braces ('{', '}') in following string: \"".concat(i,'"'))}}catch(t){a.e(t)}finally{a.f()}if(o.length>1)return console.log("Processing <".concat(o.length,"> filters; filters: ").concat(o)),o.reduce(function(t,e){var r,o;return(r=t.localFilters).push.apply(r,Xo(n.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,Xo(n.parseFilters(e).globalFilters)),t},t.getEmptyFilters());var u=o[0].trim();if(u.length<4)throw new Rr.SyntaxException("Filter string cannot be valid (less than 4 characters); got filter string: [".concat(u,"]"));var s=u.split("("),l=Vo[s[0]];if(console.log("Trying to look for Fn ; got string:",u),l){if(ar.VALID_CLAUSE_FUNCTIONS_RE.test(u))return console.log("Found clause fn; dispatching to clause fn parser"),this.parseClauseFn(l,u);if(ar.VALID_GLOBAL_FUNCTIONS_RE.test(u))return console.log("Found global filter fn; dispatching to global filter fn parser"),this.parseGlobalFilterFn(l,u);if(ar.VALID_DIRECT_FUNCTIONS_RE.test(u))return this.parseDirectFn(l,u);throw new Error('could not parse filter string as Fn: "'.concat(e,'" ; did not map to any known function ; check filter-syntax page'))}return console.log("Did not find Fn; dispatching to base filter parser"),this.parseBaseFilter(u)}}],[{key:"getEmptyFilters",value:function(){return{localFilters:[],globalFilters:[]}}},{key:"createAndParse",value:(e=Qo().m(function e(n){var r,o,a,i,c,u=arguments;return Qo().w(function(e){for(;;)switch(e.n){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:null,o=u.length>2&&void 0!==u[2]?u[2]:null,console.log("Initialized parsing of string:",n),a=new t(la._),i=r){e.n=2;break}return e.n=1,ge.getHeroManager();case 1:i=e.v;case 2:if(r=i,c=o){e.n=4;break}return e.n=3,Fr.getSeasonDetails();case 3:c=e.v;case 4:return o=c,a.rawString=n,a.HM=r,e.n=5,Je.getArtifactLowercaseNameSet();case 5:return a.ARTIFACT_LOWERCASE_STRINGS_SET=e.v,console.log("Got Artifact Lowercase Strings Set"),console.log(a.ARTIFACT_LOWERCASE_STRINGS_SET),a.SeasonDetails=o,a.REFS={HM:a.HM,ARTIFACT_LOWERCASE_STRINGS_SET:a.ARTIFACT_LOWERCASE_STRINGS_SET,SeasonDetails:a.SeasonDetails},a.preParsedString=ia(n),a.globalFilters=[],a.filters=a.parseFilters(a.preParsedString),console.log("Got Filters\n"),console.log(a.asString()),e.a(2,a)}},e)}),n=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(t){$o(a,r,o,i,c,"next",t)}function c(t){$o(a,r,o,i,c,"throw",t)}i(void 0)})},function(t){return n.apply(this,arguments)})}]);var e,n}(),la={_:Symbol("internal")};const fa=sa;var pa={SELECT_DATA:"select-data",SHOW_STATS:"show-stats",LOAD_DATA:"load-data"};function da(t){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},da(t)}function ha(t,e,n){return(e=function(t){var e=function(t){if("object"!=da(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==da(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ya,va,ga=ha(ha(ha({},pa.SELECT_DATA,0),pa.SHOW_STATS,0),pa.LOAD_DATA,0),ma={SOURCE:"SOURCE",ERROR_MSG:"ERROR_MSG",AUTO_ZOOM:"AUTO_ZOOM",AUTO_QUERY:"AUTO_QUERY",STATS_POST_RENDER_COMPLETED:"STATS_POST_RENDER_COMPLETED",STATS_PRE_RENDER_COMPLETED:"STATS_PRE_RENDER_COMPLETED",HOME_PAGE_STATE:"STATE",SCROLL_PERCENTS:"SCROLL_PERCENTS"},_a={KEYS:ma,VALUES:{SOURCE:{QUERY:"query",UPLOAD:"upload",STATS:"stats"}},ERROR_MSG:null,SOURCE:null,AUTO_QUERY:null,AUTO_ZOOM:!1,STATS_POST_RENDER_COMPLETED:!1,STATS_PRE_RENDER_COMPLETED:!1,HOME_PAGE_STATE:null,SCROLL_PERCENTS:ga,popKey:function(t){var e=this[t];return this[t]=this._getDefault(t),e},readKey:function(t){return this[t]},_getDefault:function(t){switch(t){case ma.AUTO_ZOOM:return!1;case ma.ERROR_MSG:case ma.SOURCE:case ma.AUTO_QUERY:return null;case ma.STATS_POST_RENDER_COMPLETED:case ma.STATS_PRE_RENDER_COMPLETED:return!1;case ma.HOME_PAGE_STATE:return null;case ma.SCROLL_PERCENTS:return ga;default:return null}}};function ba(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ea(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ea(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ea(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ea(f,"constructor",s),Ea(s,"constructor",u),u.displayName="GeneratorFunction",Ea(s,o,"GeneratorFunction"),Ea(f),Ea(f,o,"Generator"),Ea(f,r,function(){return this}),Ea(f,"toString",function(){return"[object Generator]"}),(ba=function(){return{w:a,m:p}})()}function Ea(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ea=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Ea(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Ea(t,e,n,r)}function Sa(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function wa(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Sa(a,r,o,i,c,"next",t)}function c(t){Sa(a,r,o,i,c,"throw",t)}i(void 0)})}}const Ta={queryAndCacheBattles:(va=wa(ba().m(function t(e,n,r){var o,a,i,c,u,s;return ba().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Je.getArtifacts();case 1:return o=t.v,t.n=2,qt.rsFetchBattleData(e);case 2:if((a=t.v).ok){t.n=4;break}return t.n=3,a.json().error;case 3:i=t.v,c="Error while fetching data: ".concat(i),console.error("Error while fetching data: ".concat(i)),_a.ERROR_MSG=c,n(pa.SELECT_DATA),t.n=7;break;case 4:return t.n=5,a.json();case 5:return u=t.v,s=u.battles,t.n=6,Rn.cacheQuery(s,r,o);case 6:console.log("Cached queried battles");case 7:return t.a(2)}},t)})),function(t,e,n){return va.apply(this,arguments)}),addStrParam:function(t,e,n){var r=encodeURIComponent(n);return"".concat(t,"?").concat(e,"=").concat(r)},addStrParams:function(t,e){for(var n in e)t=this.addStrParam(t,n,e[n]);return t},validateFilterSyntax:(ya=wa(ba().m(function t(e){var n,r,o;return ba().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ge.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.p=2,t.n=3,fa.createAndParse(e,n);case 3:return r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0);case 4:return t.p=4,o=t.v,console.error(o),r.textContent="Validation Failed: ".concat(o.message),r.classList.remove("text-safe"),r.classList.add("text-danger"),t.a(2,!1)}},t,null,[[2,4]])})),function(t){return ya.apply(this,arguments)}),setScrollPercent:function(t){console.log("Scrolling to ".concat(t,"%"));var e=t/100*(document.documentElement.scrollHeight-window.innerHeight),n=document.documentElement,r=n.style.scrollBehavior;n.style.scrollBehavior="auto",window.scrollTo({top:e}),n.style.scrollBehavior=r},getScrollPercent:function(){var t=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight;return 0===e?0:t/e*100},setTextGreen:function(t,e){t.textContent=e,t.classList.remove("text-danger"),t.classList.add("text-safe")},setTextRed:function(t,e){t.textContent=e,t.classList.remove("text-safe"),t.classList.add("text-danger")},setVisibility:function(t,e){e?t.classList.remove("d-none"):t.classList.add("d-none")}};function Aa(t){return Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(t)}function Oa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Pa(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Pa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ra(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ia(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ia(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ia(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ia(f,"constructor",s),Ia(s,"constructor",u),u.displayName="GeneratorFunction",Ia(s,o,"GeneratorFunction"),Ia(f),Ia(f,o,"Generator"),Ia(f,r,function(){return this}),Ia(f,"toString",function(){return"[object Generator]"}),(Ra=function(){return{w:a,m:p}})()}function Ia(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ia=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Ia(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Ia(t,e,n,r)}function Ca(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ka(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ca(a,r,o,i,c,"next",t)}function c(t){Ca(a,r,o,i,c,"throw",t)}i(void 0)})}}function Da(t,e,n){return(e=function(t){var e=function(t){if("object"!=Aa(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Aa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Aa(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var La=Da(Da(Da(Da(Da({},"world_global",rt.Keys.GLOBAL_USERS),"world_eu",rt.Keys.EU_USERS),"world_asia",rt.Keys.ASIA_USERS),"world_jpn",rt.Keys.JPN_USERS),"world_kor",rt.Keys.KOR_USERS);function ja(t,e){return{id:t.nick_no,name:t.nick_nm,code:t.code,rank:t.rank,world_code:e}}function xa(t){return Na.apply(this,arguments)}function Na(){return(Na=ka(Ra().m(function t(e){var n;return Ra().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code from E7 server: ".concat(e)),t.n=1,oe.fetchUserJSON(e);case 1:if(n=t.v){t.n=2;break}return console.log("Could not get user map from E7 server for world code: ".concat(e)),t.a(2,null);case 2:return console.log("Got user map from E7 server for world code: ".concat(e)),t.a(2,Object.fromEntries(n.users.map(function(t){return[t.nick_no,ja(t,e)]})))}},t)}))).apply(this,arguments)}var Fa,Ma,Ga,Ba,Ua,Ha={getUserMap:(Ua=ka(Ra().m(function t(e){var n,r;return Ra().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code: ".concat(e)),t.n=1,rt.get(La[e]);case 1:if(null===(n=t.v)){t.n=2;break}return console.log("Got user map from cache"),t.a(2,n);case 2:return t.n=3,xa(e);case 3:return r=t.v,t.n=4,rt.cache(La[e],r);case 4:return t.a(2,r)}},t)})),function(t){return Ua.apply(this,arguments)}),findUser:(Ba=ka(Ra().m(function t(e){var n,r,o,a,i,c,u,s,l,f,p,d,h,y,v,g,m;return Ra().w(function(t){for(;;)switch(t.n){case 0:if(n=!1,r=function(t){return Et[t]},console.log("Attempting to find user: ".concat(JSON.stringify(e))),!e.id){t.n=12;break}o=Oa(bt),t.p=1,o.s();case 2:if((a=o.n()).done){t.n=8;break}if(i=a.value,!e.world_code||e.world_code===i){t.n=3;break}return t.a(3,7);case 3:return t.n=4,this.getUserMap(i);case 4:if(c=t.v,(u=Object.values(c))&&0!==u.length){t.n=5;break}return console.log("User map had no users, falling back to flask server for world code: ".concat(r(i))),n=!0,t.a(3,7);case 5:if(!(s=u.find(function(t){return t.id===e.id}))){t.n=6;break}return console.log("Found user: ".concat(JSON.stringify(s)," in world code: ").concat(r(i))),t.a(2,{user:s,error:!1});case 6:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(r(i)," from client-side means"));case 7:t.n=2;break;case 8:t.n=10;break;case 9:t.p=9,m=t.v,o.e(m);case 10:return t.p=10,o.f(),t.f(10);case 11:t.n=18;break;case 12:if(!e.name||!e.world_code){t.n=17;break}return l=[e.name,e.world_code],f=l[0],p=l[1],t.n=13,this.getUserMap(p);case 13:if(d=t.v,(h=Object.values(d))&&0!==h.length){t.n=14;break}console.log("User map had no users, falling back to flask server for world code: ".concat(r(p))),n=!0,t.n=16;break;case 14:if(y=f.toLowerCase(),v=h.find(function(t){return y===t.name.toLowerCase()}),!v){t.n=15;break}return console.log("Found user: ".concat(JSON.stringify(v)," in world code: ").concat(r(p))),t.a(2,{user:v,error:!1});case 15:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(r(p)," from client-side means"));case 16:t.n=18;break;case 17:return console.error("Must pass a user object with either user.name and user.world_code or user.id to fetch user"),t.a(2,{user:null,error:"Must pass a user object with either user.name and user.world_code or user.id to fetch user"});case 18:if(!n){t.n=21;break}return console.log("Failed to find user through client-side means; falling back to flask server"),t.n=19,qt.fetchUser(e);case 19:if(!(g=t.v).error){t.n=20;break}return t.a(2,{user:null,error:g.error});case 20:return t.a(2,{user:g.user,error:!1});case 21:return t.a(2,{user:null,error:"Could not find user"});case 22:return t.a(2)}},t,this,[[1,9,10,11]])})),function(t){return Ba.apply(this,arguments)}),setUser:(Ga=ka(Ra().m(function t(e){return Ra().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.cache(rt.Keys.USER,e);case 1:return t.a(2)}},t)})),function(t){return Ga.apply(this,arguments)}),getUser:(Ma=ka(Ra().m(function t(){return Ra().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.USER);case 1:return t.a(2,t.v)}},t)})),function(){return Ma.apply(this,arguments)}),clearUserData:function(){var t=ka(Ra().m(function t(){return Ra().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.clearUserData();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),clearUserDataLists:(Fa=ka(Ra().m(function t(){return Ra().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.GLOBAL_USERS);case 1:return t.n=2,rt.delete(rt.Keys.EU_USERS);case 2:return t.n=3,rt.delete(rt.Keys.ASIA_USERS);case 3:return t.n=4,rt.delete(rt.Keys.JPN_USERS);case 4:return t.n=5,rt.delete(rt.Keys.KOR_USERS);case 5:return t.a(2)}},t)})),function(){return Fa.apply(this,arguments)})};const Ka=Ha;function Va(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Wa(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Wa(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Wa(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Wa(f,"constructor",s),Wa(s,"constructor",u),u.displayName="GeneratorFunction",Wa(s,o,"GeneratorFunction"),Wa(f),Wa(f,o,"Generator"),Wa(f,r,function(){return this}),Wa(f,"toString",function(){return"[object Generator]"}),(Va=function(){return{w:a,m:p}})()}function Wa(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Wa=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Wa(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Wa(t,e,n,r)}function qa(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ya(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){qa(a,r,o,i,c,"next",t)}function c(t){qa(a,r,o,i,c,"throw",t)}i(void 0)})}}var za=new Set(Object.values(pa));function Qa(t){return!!za.has(t)||(console.error("Invalid page state: ".concat(t)),!1)}function Ja(t){switch(t){case pa.SELECT_DATA:return pt.HOME_PAGE.SELECT_DATA_BODY;case pa.SHOW_STATS:return pt.HOME_PAGE.SHOW_STATS_BODY;case pa.LOAD_DATA:return pt.HOME_PAGE.LOAD_DATA_BODY;default:console.error("Invalid page state: ".concat(t))}}var $a,Xa,Za,ti={getState:(Za=Ya(Va().m(function t(){var e,n,r,o;return Va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.HOME_PAGE_STATE);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=pa.SELECT_DATA;case 4:return t.a(2,o)}},t)})),function(){return Za.apply(this,arguments)}),setState:(Xa=Ya(Va().m(function t(e){return Va().w(function(t){for(;;)switch(t.n){case 0:if(Qa(e)){t.n=1;break}return t.a(2);case 1:return t.n=2,rt.cache(rt.Keys.HOME_PAGE_STATE,e);case 2:return t.a(2)}},t)})),function(t){return Xa.apply(this,arguments)}),resetState:($a=Ya(Va().m(function t(){return Va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.delete(rt.Keys.HOME_PAGE_STATE);case 1:return t.a(2)}},t)})),function(){return $a.apply(this,arguments)})};function ei(t){t?(pt.HOME_PAGE.USER_NAME.innerText=t.name,pt.HOME_PAGE.USER_ID.innerText=t.id,pt.HOME_PAGE.USER_SERVER.innerText=Et[t.world_code]):(pt.HOME_PAGE.USER_NAME.innerText="(None)",pt.HOME_PAGE.USER_ID.innerText="(None)",pt.HOME_PAGE.USER_SERVER.innerText="(None)")}function ni(){return(ni=Ya(Va().m(function t(e){return Va().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ka.clearUserData();case 1:if(ei(e),!e){t.n=2;break}return t.n=2,Ka.setUser(e);case 2:return t.a(2)}},t)}))).apply(this,arguments)}var ri={homePageSetView:function(t){if(Qa(t)){for(var e=0,n=Object.values(pa);e<n.length;e++){var r=n[e];if(t!==r){var o=Ja(r);console.log("Hiding ".concat(o.id)),Ta.setVisibility(o,!1)}}var a=Ja(t);console.log("Showing ".concat(a.id)),Ta.setVisibility(a,!0)}},homePageSetUser:function(t){return ni.apply(this,arguments)},homePageDrawUserInfo:ei};function oi(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||ai(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(t,e){if(t){if("string"==typeof t)return ii(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ii(t,e):void 0}}function ii(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ci(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])}),n||(n={name:"UID: ".concat(e[0]["P1 ID"])});var a,i=e.map(function(t,e){return e}),c=e.map(function(t){return t["P1 Points"]}),u=[],s={startX:null,endX:null,startY:null,endY:null},l=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ai(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(e.entries());try{for(l.s();!(a=l.n()).done;){var f=oi(a.value,2),p=f[0],d=f[1];r&&d["Seq Num"]in r?(!0===o&&(s.startX=p<s.startX||null===s.startX?p-.5:s.startX,s.startY=d["P1 Points"]<s.startY+50||null===s.startY?d["P1 Points"]-50:s.startY,s.endX=p>s.endX||null===s.endX?p+.5:s.endX,s.endY=d["P1 Points"]>s.endY-50||null===s.endY?d["P1 Points"]+50:s.endY),u.push("#ff9900")):u.push("#0df8fd")}}catch(t){l.e(t)}finally{l.f()}var h={x:i,y:c,mode:"lines+markers",line:{color:"#4f9293",width:2},marker:{symbol:"circle",size:4,color:u},customdata:e.map(function(t){return[t["Date/Time"].slice(0,10),t["P1 League"]]}),hovertemplate:"Points: %{y}<br>Date: %{customdata[0]}<br>League: %{customdata[1]}<extra></extra>"},y={autosize:!0,font:{family:"Roboto, Open Sans"},title:{text:"".concat(n.name,"'s RTA Point Plot"),font:{size:24,color:"#dddddd"},xanchor:"center",yanchor:"top",y:.95,x:.5},xaxis:{title:{text:"Battle Number (Chronological)",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!1,tickfont:{size:12,color:"#dddddd"},range:s.startX?[s.startX,s.endX]:null},yaxis:{title:{text:"Victory Points",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!0,zerolinecolor:"#dddddd",zerolinewidth:2,tickfont:{size:12,color:"#dddddd"},range:s.startY?[s.startY,s.endY]:null},plot_bgcolor:"#1e222d",paper_bgcolor:"#1e222d"},v=document.createElement("div");v.id="rank-plot",v.style.width="100%",v.style.height="100%",t.appendChild(v),Plotly.newPlot(v,[h],y,{responsive:!0})}function ui(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return si(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(si(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,si(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,si(f,"constructor",s),si(s,"constructor",u),u.displayName="GeneratorFunction",si(s,o,"GeneratorFunction"),si(f),si(f,o,"Generator"),si(f,r,function(){return this}),si(f,"toString",function(){return"[object Generator]"}),(ui=function(){return{w:a,m:p}})()}function si(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}si=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){si(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},si(t,e,n,r)}function li(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function fi(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return pi(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function di(t){var e=$("#".concat(t));$.fn.dataTable.isDataTable(e)&&(console.log("Destroying DataTable: ",t),e.DataTable().clear().destroy())}function hi(t){var e,n=fi(t=structuredClone(t));try{for(n.s();!(e=n.n()).done;){var r,o=e.value,a=fi(Ot);try{for(a.s();!(r=a.n()).done;){var i=r.value;o[i]=JSON.stringify(o[i])}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}return t}var yi={};function vi(t){var e=Number(t.replace("%",""));return e>50?"text-over50":e<50?"text-below50":""}yi.functions={populateHeroStatsTable:function(t,e){di(t),document.getElementById("".concat(t,"Body")).innerHTML="";var n=t.includes("Player"),r=n?"Player":"Enemy",o=[Ct,kt,Dt,Lt,jt,xt,Nt,"+/-",Ft,Mt,Gt],a=o.filter(function(t){return t!==Nt}),i=n?o:a;console.log("Columns: ",i);var c=$("#".concat(t)).DataTable({layout:{topStart:"buttons"},language:{info:"Total rows: _TOTAL_"},order:[[2,"desc"]],buttons:{name:"primary",buttons:["copy",{extend:"csv",text:"CSV",filename:r+" Hero Stats"},{extend:"excel",text:"Excel",filename:r+" Hero Stats"}]},columnDefs:[{targets:"_all",className:"nowrap"},{targets:4,createdCell:function(t,e){var n=Number(e.replace("%",""));n<50?t.style.color="red":n>50&&(t.style.color="mediumspringgreen")}}],pageLength:50,scrollY:"300px",deferRender:!0,scroller:!0,scrollCollapse:!1,columns:i.map(function(t){return{data:t}})});return c.rows.add(e).draw(),c},populateSeasonDetailsTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t["Season Number"],"</td>\n            <td>").concat(t.Season,"</td>\n            <td>").concat(t.Start,"</td>\n            <td>").concat(t.End,"</td>\n            <td>").concat(t.Status,"</td>\n            "),n.appendChild(e)})},populateServerStatsTable:function(t,e){var n=document.getElementById("".concat(t,"-body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.server,"</td>\n            <td>").concat(t.count,"</td>\n            <td>").concat(t.frequency,"</td>\n            <td>").concat(t.wins,'</td>\n            <td class="').concat(vi(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],'</td>\n            <td class="').concat(vi(t.fp_wr),'">').concat(t.fp_wr,'</td>\n            <td class="').concat(vi(t.sp_wr),'">').concat(t.sp_wr,"</td>\n            "),n.appendChild(e)})},populatePlayerPrebansTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.preban,"</td>\n            <td>").concat(t.appearances,"</td>\n            <td>").concat(t.appearance_rate,'</td>\n            <td class="').concat(vi(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)})},populatePlayerFirstPickTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.hero,"</td>\n            <td>").concat(t.appearances,"</td>\n            <td>").concat(t.appearance_rate,'</td>\n            <td class="').concat(vi(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)})},populateFullBattlesTable:function(t,e,n){var r;di(t),e=hi(e),document.getElementById("".concat(t,"Body")).innerHTML="",r=n?n.name:0===e.length?"Empty":"UID(".concat(e[0]["P1 ID"],")");var o="".concat(r," Battle Data"),a=$("#BattlesTable").DataTable({layout:{topStart:"buttons"},language:{info:"Total rows: _TOTAL_"},order:[[0,"desc"]],columnDefs:[{targets:"_all",className:"nowrap"}],rowCallback:function(t,e,n){var r=t.cells[13],o=t.cells[14],a=t.cells[15];!0===e.Win?r.style.color="mediumspringgreen":!1===e.Win&&(r.style.color="red"),!0===e["First Pick"]&&(o.style.color="deepskyblue"),!0===e["First Turn"]&&(a.style.color="deepskyblue")},buttons:{name:"primary",buttons:["copy",{extend:"csv",text:"CSV",filename:o},{extend:"excel",text:"Excel",filename:o}]},pageLength:50,scrollY:"300px",deferRender:!0,scroller:!0,scrollCollapse:!1,columns:Object.values(At).filter(function(t){return!t.toLowerCase().includes("prime")}).map(function(t){return{data:t}})});return a.rows.add(e).draw(),a},replaceDatatableData:function(t,e){$("#".concat(t)).DataTable().clear().rows.add(e).draw()},replaceBattleData:function(t){t=hi(t),this.replaceDatatableData("BattlesTable",t)}};var gi,mi,_i={};_i.functions={populateGeneralStats:function(t){document.getElementById("total-battles").textContent=t.total_battles,document.getElementById("first-pick-count").textContent=t.first_pick_count,document.getElementById("first-pick-rate").textContent=" (".concat(t.first_pick_rate,")"),document.getElementById("second-pick-count").textContent=t.second_pick_count,document.getElementById("second-pick-rate").textContent=" (".concat(t.second_pick_rate,")"),document.getElementById("total-winrate").textContent=t.total_winrate,document.getElementById("first-pick-winrate").textContent=t.first_pick_winrate,document.getElementById("second-pick-winrate").textContent=t.second_pick_winrate,document.getElementById("total-wins").textContent=t.total_wins,document.getElementById("max-win-streak").textContent=t.max_win_streak,document.getElementById("max-loss-streak").textContent=t.max_loss_streak,document.getElementById("avg-ppg").textContent=t.avg_ppg,document.getElementById("avg-turns").textContent=t.avg_turns,document.getElementById("avg-time").textContent=t.avg_time,document.getElementById("max-turns").textContent=t.max_turns,document.getElementById("max-time").textContent=t.max_time,document.getElementById("first-turn-games").textContent=t.first_turn_games,document.getElementById("first-turn-rate").textContent=t.first_turn_rate},populateRankPlot:(gi=ui().m(function t(e){var n,r,o;return ui().w(function(t){for(;;)switch(t.n){case 0:return(n=document.getElementById("rank-plot-container")).innerHTML="",t.n=1,Ka.getUser();case 1:return r=t.v,t.n=2,rt.get(rt.Keys.AUTO_ZOOM_FLAG);case 2:o=t.v,ci(n,e.battles,r,e.numFilters>0?e.filteredBattlesObj:null,o);case 3:return t.a(2)}},t)}),mi=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=gi.apply(t,e);function a(t){li(o,n,r,a,i,"next",t)}function i(t){li(o,n,r,a,i,"throw",t)}a(void 0)})},function(t){return mi.apply(this,arguments)})};var bi=n(809),Ei=n.n(bi);function Si(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return wi(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(wi(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,wi(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,wi(f,"constructor",s),wi(s,"constructor",u),u.displayName="GeneratorFunction",wi(s,o,"GeneratorFunction"),wi(f),wi(f,o,"Generator"),wi(f,r,function(){return this}),wi(f,"toString",function(){return"[object Generator]"}),(Si=function(){return{w:a,m:p}})()}function wi(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}wi=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){wi(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},wi(t,e,n,r)}function Ti(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var Ai,Oi=Object.values(At),Pi={parseUpload:(Ai=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ti(a,r,o,i,c,"next",t)}function c(t){Ti(a,r,o,i,c,"throw",t)}i(void 0)})}}(Si().m(function t(e){var n,r,o;return Si().w(function(t){for(;;)switch(t.n){case 0:return this.validateCSV(e),t.n=1,e.text();case 1:if(n=t.v,(r=Ei().parse(n,{header:!0,skipEmptyLines:!0,quoteChar:'"',dynamicTyping:!1})).meta.fields.forEach(function(t,e){var n=t.trim().replace(/"/g,"");if(n!==Oi[e])throw new Error("Header ".concat(n," does not match expected column ").concat(Oi[e]," at index ").concat(e))}),!(r.errors.length>0)){t.n=2;break}throw o=r.errors[0],new Error("Failed to parse CSV: Row ".concat(o.row,", ").concat(o.message));case 2:return console.log("Parsed CSV"),console.log(r.data),t.a(2,r.data)}},t,this)})),function(t){return Ai.apply(this,arguments)}),validateCSV:function(t){if(!t.name.endsWith(".csv"))throw new Error("File must be .csv");if(t.size>52428800)throw new Error("File must be smaller than ".concat(50,"mb, got ").concat(t.size/1048576,"mb File."))}};const Ri=Pi;function Ii(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ci(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ci(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ci(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ci(f,"constructor",s),Ci(s,"constructor",u),u.displayName="GeneratorFunction",Ci(s,o,"GeneratorFunction"),Ci(f),Ci(f,o,"Generator"),Ci(f,r,function(){return this}),Ci(f,"toString",function(){return"[object Generator]"}),(Ii=function(){return{w:a,m:p}})()}function Ci(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ci=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Ci(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Ci(t,e,n,r)}function ki(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var Di,Li={HeroManager:ge,BattleManager:Rn,SeasonManager:Fr,UserManager:Ka,ClientCache:rt,ArtifactManager:Je,getFilters:(Di=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ki(a,r,o,i,c,"next",t)}function c(t){ki(a,r,o,i,c,"throw",t)}i(void 0)})}}(Ii().m(function t(e){var n,r,o;return Ii().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.getFilterStr();case 1:if(n=t.v){t.n=2;break}return t.a(2,fa.getEmptyFilters());case 2:return t.n=3,Fr.getSeasonDetails();case 3:return r=t.v,t.n=4,fa.createAndParse(n,e,r);case 4:return o=t.v,t.a(2,o.filters)}},t)})),function(t){return Di.apply(this,arguments)})};const ji=Li;var xi={"Current Season":"date in current-season","First Pick":"is-first-pick = true","Second Pick":"is-first-pick = false","Champion+ Opponent":"p2.league in {champion, warlord, emperor, legend}","Warlord+ Opponent":"p2.league in {warlord, emperor, legend}","Emperor+ Opponent":"p2.league in {emperor, legend}","Legend Opponent":"p2.league = 'legend'",Wins:"is-win = true",Losses:"is-win = false",extendFilters:function(t,e){var n=xi[e];return";"!==(t=t.replace(/\s+$/,"")).slice(-1)&&t.length>0?t+=";\n":";"===t.slice(-1)&&(t+="\n"),"".concat(t).concat(n,";")}};const Ni=xi;function Fi(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Mi(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Mi(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Mi(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Mi(f,"constructor",s),Mi(s,"constructor",u),u.displayName="GeneratorFunction",Mi(s,o,"GeneratorFunction"),Mi(f),Mi(f,o,"Generator"),Mi(f,r,function(){return this}),Mi(f,"toString",function(){return"[object Generator]"}),(Fi=function(){return{w:a,m:p}})()}function Mi(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Mi=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Mi(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Mi(t,e,n,r)}function Gi(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Bi(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Gi(a,r,o,i,c,"next",t)}function c(t){Gi(a,r,o,i,c,"throw",t)}i(void 0)})}}function Ui(t){return Hi.apply(this,arguments)}function Hi(){return Hi=Bi(Fi().m(function t(e){var n,r,o;return Fi().w(function(t){for(;;)switch(t.n){case 0:n=pt.HOME_PAGE.ID_SEARCH_FLAG,r=ji.ClientCache.Keys.ID_SEARCH_FLAG,n.addEventListener("click",Bi(Fi().m(function t(){return Fi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ji.ClientCache.cache(r,n.checked);case 1:return t.a(2)}},t)}))),(o=document.getElementById("userForm")).addEventListener("submit",function(){var t=Bi(Fi().m(function t(n){var r,a,i,c,u,s,l;return Fi().w(function(t){for(;;)switch(t.n){case 0:if(console.log("Processing User Submission"),n.preventDefault(),r=new FormData(o),a=r.get("username"),i=r.get("server"),a){t.n=1;break}Ta.setTextRed(pt.HOME_PAGE.SELECT_DATA_MSG,"Must enter username"),t.n=8;break;case 1:return t.p=1,t.n=2,ji.ClientCache.get(ji.ClientCache.Keys.ID_SEARCH_FLAG);case 2:return c=t.v,u=c?{id:a,world_code:i}:{name:a,world_code:i},console.log("Finding User using:",u),t.n=3,ji.UserManager.findUser(u);case 3:if(s=t.v,console.log("Got data:",JSON.stringify(s)),s.error){t.n=5;break}return t.n=4,ri.homePageSetUser(s.user);case 4:return _a.AUTO_QUERY=!0,_a.SOURCE=_a.VALUES.SOURCE.QUERY,e(pa.LOAD_DATA),t.a(2);case 5:console.log("User Not Found:",s.error),document.getElementById("select-data-msg").textContent="Could not find user: ".concat(a," in server: ").concat(Et[i]);case 6:t.n=8;break;case 7:t.p=7,l=t.v,console.error("Caught Error:",l),document.getElementById("select-data-msg").textcontent="Error encountered: ".concat(l.message);case 8:return t.a(2)}},t,null,[[1,7]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),Hi.apply(this,arguments)}function Ki(t){return Vi.apply(this,arguments)}function Vi(){return Vi=Bi(Fi().m(function t(e){var n,r;return Fi().w(function(t){for(;;)switch(t.n){case 0:(n=document.getElementById("auto-query-flag")).addEventListener("click",Bi(Fi().m(function t(){return Fi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ji.ClientCache.setFlag("autoQuery",n.checked);case 1:return t.a(2)}},t)}))),r=null,pt.HOME_PAGE.CSV_FILE.addEventListener("change",function(t){r=t.target.files[0]}),pt.HOME_PAGE.UPLOAD_FORM.addEventListener("submit",function(){var t=Bi(Fi().m(function t(o){var a,i,c;return Fi().w(function(t){for(;;)switch(t.n){case 0:if(console.log("Processing File Submission"),o.preventDefault(),a=n.checked,i=pt.HOME_PAGE.SELECT_DATA_MSG,t.p=1,r){t.n=2;break}return Ta.setTextRed(i,"Must upload a file"),t.a(2);case 2:return console.log("Selected File: ".concat(r.name," ; content: ").concat(JSON.stringify(r))),t.n=3,ji.ClientCache.cache(ji.ClientCache.Keys.RAW_UPLOAD,r);case 3:return _a.AUTO_QUERY=a,_a.SOURCE=_a.VALUES.SOURCE.UPLOAD,e(pa.LOAD_DATA),t.a(2);case 4:t.p=4,c=t.v,console.error("Caught Error:",c),Ta.setTextRed(i,c.message);case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),Vi.apply(this,arguments)}function Wi(t){return qi.apply(this,arguments)}function qi(){return(qi=Bi(Fi().m(function t(e){return Fi().w(function(t){for(;;)switch(t.n){case 0:Ui(e),Ki(e);case 1:return t.a(2)}},t)}))).apply(this,arguments)}function Yi(t){return zi.apply(this,arguments)}function zi(){return(zi=Bi(Fi().m(function t(e){var n,r,o,a;return Fi().w(function(t){for(;;)switch(t.n){case 0:return n=document.getElementById("auto-query-flag"),t.n=1,ji.ClientCache.getFlag("autoQuery");case 1:return n.checked=t.v,r=pt.HOME_PAGE.ID_SEARCH_FLAG,t.n=2,ji.ClientCache.getFlag("idSearch");case 2:r.checked=t.v,(o=pt.HOME_PAGE.SELECT_DATA_MSG).textContent="",_a.ERROR_MSG&&(a=_a.popKey(_a.KEYS.ERROR_MSG),console.log("Setting Error Message:",a),Ta.setTextRed(o,a));case 3:return t.a(2)}},t)}))).apply(this,arguments)}function Qi(t){return Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qi(t)}function Ji(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return $i(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):($i(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,$i(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,$i(f,"constructor",s),$i(s,"constructor",u),u.displayName="GeneratorFunction",$i(s,o,"GeneratorFunction"),$i(f),$i(f,o,"Generator"),$i(f,r,function(){return this}),$i(f,"toString",function(){return"[object Generator]"}),(Ji=function(){return{w:a,m:p}})()}function $i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$i=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){$i(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},$i(t,e,n,r)}function Xi(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Zi(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Xi(a,r,o,i,c,"next",t)}function c(t){Xi(a,r,o,i,c,"throw",t)}i(void 0)})}}function tc(){return ec.apply(this,arguments)}function ec(){return(ec=Zi(Ji().m(function t(){var e,n,r,o;return Ji().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ji.UserManager.getUser();case 1:if(e=t.v){t.n=2;break}return console.log("Skipping populate tables: user not found"),t.a(2);case 2:return console.log("POPULATING DATA PROCESS INITIATED"),t.p=3,console.log("Getting Season Details"),t.n=4,ji.SeasonManager.getSeasonDetails();case 4:return n=t.v,console.log("Got season details:",n,Qi(n)),console.log("Getting Stats"),t.n=5,ji.ClientCache.getStats();case 5:return r=t.v,console.time("populateTables"),console.log("POPULATING TABLES, CARD CONTENT, AND PLOTS"),yi.functions.populateSeasonDetailsTable("SeasonDetails",n),yi.functions.populateHeroStatsTable("PlayerTable",r.playerHeroStats),yi.functions.populateHeroStatsTable("OpponentTable",r.enemyHeroStats),yi.functions.populatePlayerFirstPickTable("FirstPickStats",r.firstPickStats),yi.functions.populatePlayerPrebansTable("PrebanStats",r.prebanStats),yi.functions.populateServerStatsTable("server-stats",r.serverStats),pt.HOME_PAGE.BATTLE_FILTER_TOGGLE.checked?(console.log("POPULATING AS FILTERED BATTLES TABLE"),yi.functions.populateFullBattlesTable("BattlesTable",Object.values(r.filteredBattlesObj),e)):(console.log("POPULATING AS FULL BATTLES TABLE"),yi.functions.populateFullBattlesTable("BattlesTable",r.battles,e)),_i.functions.populateGeneralStats(r.generalStats),t.n=6,_i.functions.populateRankPlot(r);case 6:console.log("FINISHED POPULATING"),console.timeEnd("populateTables"),t.n=8;break;case 7:t.p=7,o=t.v,console.error("Error loading data:",o);case 8:return t.a(2)}},t,null,[[3,7]])}))).apply(this,arguments)}function nc(){var t=pt.HOME_PAGE.AUTO_ZOOM_FLAG;t.addEventListener("click",Zi(Ji().m(function e(){return Ji().w(function(e){for(;;)switch(e.n){case 0:return console.log("Toggling Auto Zoom: ",t.checked),e.n=1,ji.ClientCache.setFlag("autoZoom",t.checked);case 1:return e.a(2)}},e)})))}function rc(t){document.getElementById("premade-filters").addEventListener("click",function(e){console.log("Attempting to add a premade filter"),e.preventDefault();var n=e.target.closest(".dropdown-item");if(n){var r=n.textContent.trim();console.log("Target found:",r);var o=t.getValue(),a=Ni.extendFilters(o,r);t.setValue(a)}})}function oc(t,e){document.getElementById("filterForm").addEventListener("submit",function(){var n=Zi(Ji().m(function n(r){var o,a,i,c;return Ji().w(function(n){for(;;)switch(n.n){case 0:return r.preventDefault(),document.getElementById("codeArea").value=t.getValue(),console.log("Processing Filter Action"),o=r.submitter,a=null==o?void 0:o.value,i=t.getValue(),n.n=1,ji.ClientCache.getFilterStr();case 1:if(c=n.v,"apply"!==a){n.n=5;break}return n.n=2,Ta.validateFilterSyntax(i);case 2:if(!n.v){n.n=4;break}return n.n=3,ji.ClientCache.setFilterStr(i);case 3:case 8:return _a.AUTO_QUERY=!1,e(pa.LOAD_DATA),n.a(2);case 4:case 6:n.n=9;break;case 5:if("check"!==a){n.n=7;break}return console.log("Checking Str",i),n.n=6,Ta.validateFilterSyntax(i);case 7:if("clear"!==a){n.n=9;break}if(t.setValue(""),console.log("Found applied filter [",c,"] when clearing"),!c){n.n=9;break}return console.log("Found filter str",c),n.n=8,ji.ClientCache.setFilterStr("");case 9:return n.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}())}function ac(t){return ic.apply(this,arguments)}function ic(){return(ic=Zi(Ji().m(function t(e){var n,r,o;return Ji().w(function(t){for(;;)switch(t.n){case 0:return CodeMirror.defineMode("filterSyntax",function(){return{token:function(t,e){return ar.tokenMatch(t)}}}),n=document.getElementById("codeArea"),(r=CodeMirror.fromTextArea(n,{mode:"filterSyntax",lineNumbers:!0,theme:"default"})).setSize(null,185),t.n=1,ji.ClientCache.getFilterStr();case 1:(o=t.v)&&r.setValue(o),r.on("change",function(){r.save()}),n.classList.remove("codemirror-hidden"),rc(r),oc(r,e);case 2:return t.a(2)}},t)}))).apply(this,arguments)}function cc(){console.log("Setting listener for filter-battle-table checkbox");var t=pt.HOME_PAGE.BATTLE_FILTER_TOGGLE;t.addEventListener("click",Zi(Ji().m(function e(){var n;return Ji().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ji.ClientCache.getStats();case 1:n=e.v,t.checked?yi.functions.replaceBattleData(Object.values(n.filteredBattlesObj)):yi.functions.replaceBattleData(n.battles);case 2:return e.a(2)}},e)})))}function uc(){return(uc=Zi(Ji().m(function t(e){return Ji().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ac(e);case 1:cc();case 2:return t.a(2)}},t)}))).apply(this,arguments)}function sc(){return(sc=Zi(Ji().m(function t(e){return Ji().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,tc();case 1:return t.a(2)}},t)}))).apply(this,arguments)}function lc(){return(lc=Zi(Ji().m(function t(){return Ji().w(function(t){for(;;)switch(t.n){case 0:nc();case 1:return t.a(2)}},t)}))).apply(this,arguments)}function fc(){return(fc=Zi(Ji().m(function t(e){var n,r,o,a,i;return Ji().w(function(t){for(;;)switch(t.n){case 0:return n=pt.HOME_PAGE.AUTO_ZOOM_FLAG,t.n=1,ji.ClientCache.getFlag("autoZoom");case 1:return r=t.v,n.checked=r,t.n=2,ji.ClientCache.getStats();case 2:return o=t.v,pt.HOME_PAGE.BATTLE_FILTER_TOGGLE.checked&&yi.functions.replaceBattleData(Object.values(o.filteredBattlesObj)),t.n=3,ji.UserManager.getUser();case 3:if(a=t.v){t.n=4;break}return console.log("User not found sending to select data quitely"),e(pa.SELECT_DATA),t.a(2);case 4:console.log("User found:",a);case 5:(i=pt.HOME_PAGE.FILTER_MSG).textContent="",_a.ERROR_MSG&&(console.log("Setting Error Message: ".concat(_a.ERROR_MSG)),Ta.setTextRed(i,_a.popKey(_a.KEYS.ERROR_MSG))),pt.HOME_PAGE.CSV_FILE.value="",pt.HOME_PAGE.USER_QUERY_FORM_NAME.value="";case 6:return t.a(2)}},t)}))).apply(this,arguments)}var pc={initializeStatsLogic:function(){return lc.apply(this,arguments)},postFirstRenderLogic:function(t){return uc.apply(this,arguments)},runStatsLogic:function(t){return fc.apply(this,arguments)},populateContent:tc,preFirstRenderLogic:function(t){return sc.apply(this,arguments)}};function dc(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return hc(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(hc(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,hc(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,hc(f,"constructor",s),hc(s,"constructor",u),u.displayName="GeneratorFunction",hc(s,o,"GeneratorFunction"),hc(f),hc(f,o,"Generator"),hc(f,r,function(){return this}),hc(f,"toString",function(){return"[object Generator]"}),(dc=function(){return{w:a,m:p}})()}function hc(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}hc=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){hc(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},hc(t,e,n,r)}function yc(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function vc(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){yc(a,r,o,i,c,"next",t)}function c(t){yc(a,r,o,i,c,"throw",t)}i(void 0)})}}function gc(){pt.HOME_PAGE.ESCAPE_BTN.addEventListener("click",vc(dc().m(function t(){return dc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ji.UserManager.getUser();case 1:if(!t.v){t.n=3;break}return t.n=2,ri.homePageSetUser(null);case 2:t.n=4;break;case 3:return t.n=4,stateDispatcher(pa.SELECT_DATA);case 4:return t.a(2)}},t)})))}function mc(t){return _c.apply(this,arguments)}function _c(){return(_c=vc(dc().m(function t(e){var n,r,o,a;return dc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ji.ClientCache.get(ji.ClientCache.Keys.RAW_UPLOAD);case 1:return n=t.v,console.log("Retrieved Upload: ",n),t.n=2,Ri.parseUpload(n);case 2:return r=t.v,o=r[0]["P1 ID"],t.n=3,ji.UserManager.findUser({id:o});case 3:if((a=t.v).error){t.n=6;break}return t.n=4,ri.homePageSetUser(a.user);case 4:return t.n=5,ji.BattleManager.cacheUpload(r,e);case 5:case 7:return t.a(2);case 6:throw console.log("Failed to find user with ID during upload verification:",o),console.log("Setting Error Message:",a.error),new Error("File Upload Error ",a.error)}},t)}))).apply(this,arguments)}function bc(t,e,n){return Ec.apply(this,arguments)}function Ec(){return(Ec=vc(dc().m(function t(e,n,r){return dc().w(function(t){for(;;)switch(t.n){case 0:return console.log("querying and caching user battles for user: ",JSON.stringify(e)),t.n=1,Ta.queryAndCacheBattles(e,n,r);case 1:return t.a(2)}},t)}))).apply(this,arguments)}function Sc(t){return wc.apply(this,arguments)}function wc(){return(wc=vc(dc().m(function t(e){var n,r,o,a,i,c,u,s,l,f,p;return dc().w(function(t){for(;;)switch(t.n){case 0:return n=null,r=null,o=null,t.p=1,t.n=2,ji.HeroManager.getHeroManager();case 2:return n=t.v,r=_a.popKey(_a.KEYS.SOURCE),t.n=3,ji.ClientCache.getFlag("autoZoom");case 3:t.v,o=_a.popKey(_a.KEYS.AUTO_QUERY),t.n=5;break;case 4:t.p=4,l=t.v,console.error("Could not load reference and context variables: ",l),e(pa.SELECT_DATA);case 5:if(t.p=5,r!==_a.VALUES.SOURCE.UPLOAD){t.n=6;break}return t.n=6,mc(n);case 6:return t.n=7,ji.UserManager.getUser();case 7:if(a=t.v,!o){t.n=8;break}return t.n=8,bc(a,e,n);case 8:return console.log("Getting Battles From Cache"),t.n=9,ji.BattleManager.getBattles();case 9:return i=t.v,console.log("BATTLES DURING LOAD"),console.log(i),console.log("Getting Filters From Cache"),t.n=10,ji.getFilters(n);case 10:return c=t.v,console.log("Received Filters: ".concat(JSON.stringify(c))),t.n=11,ji.BattleManager.getStats(i,c,n);case 11:return u=t.v,t.n=12,ji.ClientCache.setStats(u);case 12:return t.n=13,pc.populateContent();case 13:return _a.STATS_PRE_RENDER_COMPLETED=!0,e(pa.SHOW_STATS),console.log("REACHED END OF LOAD DATA LOGIC"),t.a(2);case 14:return t.p=14,f=t.v,t.p=15,r===_a.VALUES.SOURCE.QUERY||r===_a.VALUES.SOURCE.UPLOAD?s=pa.SELECT_DATA:r===_a.VALUES.SOURCE.STATS?s=pa.SHOW_STATS:(console.error("Invalid source: ".concat(r," ; redirecting to select data")),s=pa.SELECT_DATA),console.error(f),t.n=16,ji.UserManager.clearUserData();case 16:return _a.ERROR_MSG="Failed to load data: ".concat(f.message),e(s),t.a(2);case 17:t.p=17,p=t.v,console.error("Something went wrong ; redirecting to select data ; error:",p),e(pa.SELECT_DATA);case 18:return t.a(2)}},t,null,[[15,17],[5,14],[1,4]])}))).apply(this,arguments)}function Tc(t){return function(t){if(Array.isArray(t))return Ac(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ac(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ac(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ac(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Oc(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Pc(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Pc(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Pc(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Pc(f,"constructor",s),Pc(s,"constructor",u),u.displayName="GeneratorFunction",Pc(s,o,"GeneratorFunction"),Pc(f),Pc(f,o,"Generator"),Pc(f,r,function(){return this}),Pc(f,"toString",function(){return"[object Generator]"}),(Oc=function(){return{w:a,m:p}})()}function Pc(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pc=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Pc(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Pc(t,e,n,r)}function Rc(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ic(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Rc(a,r,o,i,c,"next",t)}function c(t){Rc(a,r,o,i,c,"throw",t)}i(void 0)})}}var Cc,kc,Dc={ACTIONS:{CLEAR_USER:"CLEAR_USER",SHOW_NO_USER_MSG:"SHOW_NO_USER_MSG",SHOW_DATA_ALREADY_CLEARED_MSG:"SHOW_DATA_ALREADY_CLEARED_MSG",QUERY_USER:"QUERY_USER"},getState:function(){var t=Ic(Oc().m(function t(){var e,n,r,o;return Oc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.get(rt.Keys.INTER_PAGE_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o={actions:[]};case 4:return t.a(2,o)}},t)}));return function(){return t.apply(this,arguments)}}(),setState:function(){var t=Ic(Oc().m(function t(e){return Oc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt.cache(rt.Keys.INTER_PAGE_MANAGER,e);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),pushActions:(kc=Ic(Oc().m(function t(e){var n,r;return Oc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getState();case 1:return r=t.v,(n=r.actions).push.apply(n,Tc(e)),t.n=2,this.setState(r);case 2:return t.a(2)}},t,this)})),function(t){return kc.apply(this,arguments)}),readAndClear:(Cc=Ic(Oc().m(function t(){var e;return Oc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getState();case 1:return e=t.v,t.n=2,rt.delete(rt.Keys.INTER_PAGE_MANAGER);case 2:return t.a(2,e)}},t,this)})),function(){return Cc.apply(this,arguments)})};const Lc=Dc;function jc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return xc(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xc(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function xc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Nc(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Fc(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Fc(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Fc(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Fc(f,"constructor",s),Fc(s,"constructor",u),u.displayName="GeneratorFunction",Fc(s,o,"GeneratorFunction"),Fc(f),Fc(f,o,"Generator"),Fc(f,r,function(){return this}),Fc(f,"toString",function(){return"[object Generator]"}),(Nc=function(){return{w:a,m:p}})()}function Fc(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Fc=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Fc(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Fc(t,e,n,r)}function Mc(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Gc(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Mc(a,r,o,i,c,"next",t)}function c(t){Mc(a,r,o,i,c,"throw",t)}i(void 0)})}}function Bc(){setTimeout(function(){Plotly.Plots.resize(document.getElementById("rank-plot"))},20)}function Uc(t){return Hc.apply(this,arguments)}function Hc(){return(Hc=Gc(Nc().m(function t(e){return Nc().w(function(t){for(;;)switch(t.n){case 0:if(_a.STATS_PRE_RENDER_COMPLETED){t.n=2;break}return console.log("Running stats pre render logic"),t.n=1,pc.preFirstRenderLogic(e);case 1:_a.STATS_PRE_RENDER_COMPLETED=!0,console.log("Completed stats pre render logic");case 2:return t.n=3,pc.runStatsLogic(e);case 3:return t.n=4,ri.homePageSetView(pa.SHOW_STATS);case 4:if(_a.STATS_POST_RENDER_COMPLETED){t.n=6;break}return console.log("Running stats post render logic"),t.n=5,pc.postFirstRenderLogic(e);case 5:_a.STATS_POST_RENDER_COMPLETED=!0,console.log("Completed stats post render logic");case 6:Bc();case 7:return t.a(2)}},t)}))).apply(this,arguments)}function Kc(t){return Vc.apply(this,arguments)}function Vc(){return(Vc=Gc(Nc().m(function t(e){var n,r,o;return Nc().w(function(t){for(;;)switch(t.n){case 0:if(console.log("Switching to state: ".concat(e,", with CONTEXT: "),_a),Qa(e)){t.n=1;break}return t.a(2);case 1:return t.n=2,ti.getState();case 2:return n=t.v,_a.SCROLL_PERCENTS[n]=Ta.getScrollPercent(),r=_a.SCROLL_PERCENTS[e],t.n=3,ti.setState(e);case 3:o=e,t.n=o===pa.SELECT_DATA?4:o===pa.SHOW_STATS?7:o===pa.LOAD_DATA?9:12;break;case 4:return t.n=5,Yi(Kc);case 5:return t.n=6,ri.homePageSetView(e);case 6:return t.a(3,13);case 7:return t.n=8,Uc(Kc);case 8:return t.a(3,13);case 9:return t.n=10,ri.homePageSetView(e);case 10:return t.n=11,Sc(Kc);case 11:return t.a(3,13);case 12:console.error("Invalid page state: ".concat(e));case 13:setTimeout(function(){Ta.setScrollPercent(r)},0);case 14:return t.a(2)}},t)}))).apply(this,arguments)}function Wc(t){return qc.apply(this,arguments)}function qc(){return(qc=Gc(Nc().m(function t(e){var n,r;return Nc().w(function(t){for(;;)switch(t.n){case 0:r=e,t.n=r===Lc.ACTIONS.CLEAR_USER?1:r===Lc.ACTIONS.SHOW_DATA_ALREADY_CLEARED_MSG?5:r===Lc.ACTIONS.SHOW_NO_USER_MSG?6:r===Lc.ACTIONS.QUERY_USER?7:8;break;case 1:return t.n=2,ji.UserManager.getUser();case 2:return n=t.v,t.n=3,ri.homePageSetUser(null);case 3:return t.n=4,Kc(pa.SELECT_DATA);case 4:return Ta.setTextGreen(pt.HOME_PAGE.SELECT_DATA_MSG,"Data of user ".concat(n.name," (").concat(n.id,") cleared")),t.a(2);case 5:return Ta.setTextGreen(pt.HOME_PAGE.SELECT_DATA_MSG,"Data already cleared"),t.a(2);case 6:return Ta.setTextRed(pt.HOME_PAGE.SELECT_DATA_MSG,"User not found; Must either query a valid user or upload battles to view hero stats"),t.a(2);case 7:return _a.AUTO_QUERY=!0,Kc(pa.LOAD_DATA),t.a(2);case 8:return console.error("Invalid action: ".concat(e)),t.a(2);case 9:return t.a(2)}},t)}))).apply(this,arguments)}function Yc(){document.querySelectorAll(".nav-link").forEach(function(t){t.addEventListener("click",function(){var t=Gc(Nc().m(function t(e){var n,r;return Nc().w(function(t){for(;;)switch(t.n){case 0:return n=this.dataset.nav,console.log("Clicked nav item:",n),t.n=1,ti.getState();case 1:if(r=t.v,!Object.values(pa).includes(n)){t.n=6;break}if(r!==n){t.n=2;break}return console.log("Already in state: ".concat(r," ; returning")),t.a(2);case 2:if(n!==pa.SELECT_DATA){t.n=3;break}Kc(pa.SELECT_DATA,_a),t.n=5;break;case 3:if(n!==pa.SHOW_STATS){t.n=5;break}return t.n=4,ji.UserManager.getUser();case 4:t.v?Kc(pa.SHOW_STATS,_a):(_a.ERROR_MSG="User not found; Must either query a valid user or upload battles to view hero stats",console.error(_a.ERROR_MSG),Kc(pa.SELECT_DATA,_a));case 5:t.n=7;break;case 6:console.log("Navigating to: ".concat(this.href));case 7:return t.a(2)}},t,this)}));return function(e){return t.apply(this,arguments)}}())}),pt.HOME_PAGE.CLEAR_DATA_BTN.addEventListener("click",function(){var t=Gc(Nc().m(function t(e){var n;return Nc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ji.UserManager.getUser();case 1:if(!(n=t.v)){t.n=4;break}return t.n=2,ri.homePageSetUser(null);case 2:return t.n=3,Kc(pa.SELECT_DATA);case 3:Ta.setTextGreen(pt.HOME_PAGE.SELECT_DATA_MSG,"Data of user ".concat(n.name," (").concat(n.id,") cleared")),_a.SCROLL_PERCENTS[pa.SHOW_STATS]=0,t.n=6;break;case 4:return t.n=5,Kc(pa.SELECT_DATA);case 5:Ta.setTextGreen(pt.HOME_PAGE.SELECT_DATA_MSG,"Data already cleared");case 6:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),pt.NAV_BAR.SIDEBAR_HIDE_BTN.addEventListener("click",function(t){console.log("Triggered sidebar listener"),Bc()})}function zc(){return Qc.apply(this,arguments)}function Qc(){return(Qc=Gc(Nc().m(function t(){var e,n,r,o,a,i,c;return Nc().w(function(t){for(;;)switch(t.n){case 0:return console.log("Initialized CONTEXT",_a),Yc(),gc(),t.n=1,Wi(Kc);case 1:return t.n=2,pc.initializeStatsLogic(Kc);case 2:return t.n=3,ji.UserManager.getUser();case 3:return e=t.v,console.log("GOT USER",e),ri.homePageDrawUserInfo(e),t.n=4,ti.getState();case 4:if((n=t.v)!=pa.LOAD_DATA){t.n=5;break}return n=pa.SELECT_DATA,t.n=5,ti.setState(n);case 5:return _a.HOME_PAGE_STATE=n,t.n=6,Kc(n);case 6:return t.n=7,Lc.readAndClear();case 7:r=t.v,console.log("IPM STATE",r),o=jc(r.actions),t.p=8,o.s();case 9:if((a=o.n()).done){t.n=11;break}return i=a.value,t.n=10,Wc(i);case 10:t.n=9;break;case 11:t.n=13;break;case 12:t.p=12,c=t.v,o.e(c);case 13:return t.p=13,o.f(),t.f(13);case 14:Ta.setVisibility(pt.HOME_PAGE.FOOTER_BODY,!0);case 15:return t.a(2)}},t,null,[[8,12,13,14]])}))).apply(this,arguments)}function Jc(){return(Jc=Gc(Nc().m(function t(){return Nc().w(function(t){for(;;)switch(t.n){case 0:document.addEventListener("DOMContentLoaded",Gc(Nc().m(function t(){return Nc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,zc();case 1:return t.a(2)}},t)})));case 1:return t.a(2)}},t)}))).apply(this,arguments)}!function(){Jc.apply(this,arguments)}()})()})();
//# sourceMappingURL=home-page.bundle.js.map