/*! For license information please see default.3b26f19d76224a36b0fe.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e,r,n,a,o={40:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(412);async function a(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error: status: ${e.status}`);const r=await e.json();return Object.keys(r),r}catch(t){return console.error("Error fetching global user data:",t),null}}const o={fetchHeroJSON:async function(t=null){let e=await a("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");return e?(t&&e[t]?e=e[t]:t&&!e[t]&&(console.error("Could not find hero data for language:",t),e=null),e):null},fetchUserJSON:async function(t){if(t=t.replace("world_",""),![...n.WB].some(e=>e.replace("world_","")===t))return console.error(`Could not find world code: ${t}`),null;const e=`https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_${t}.json`,r=await a(e);return r&&"object"==typeof r&&"users"in r&&Array.isArray(r.users)&&r.users.length,r},fetchArtifactJSON:async function(t=null){let e=await a("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_artifact.json"),r=null;if(e&&t&&"object"==typeof e&&t in e){let r=e;if(Array.isArray(r[t]))return r[t]}return r},fetchInfo:async function(t,e,r="en"){const n=new URLSearchParams({nick_no:t,world_code:e,lang:r});try{const t=await fetch("https://epic7.onstove.com/gg/gameApi/getUserInfo",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!t.ok)return console.error("Error fetching battle list:",t.status,t.statusText),null;return await t.json()}catch(t){return console.error("Request failed:",t),null}}}},54:(t,e,r)=>{r.d(e,{A:()=>f});var n=r(207);class a extends Error{constructor(t){super(t),this.name="Filter Syntax Exception"}}class o extends Error{constructor(t){super(t),this.name="Filter Type Exception"}}class i extends Error{constructor(t){super(t),this.name="Filter Validation Error"}}const s={"(":")","{":"}",'"':'"',"'":"'"},c={"'":'"','"':"'"},u=Object.fromEntries(Object.entries(s).filter(([t,e])=>t!==e).map(([t,e])=>[e,t]));function l(t){const e={};for(const r of t)e[r]=(e[r]||0)+1;return e}const f={SyntaxException:a,TypeException:o,ValidationError:i,getCharCounts:l,tokenizeWithNestedEnclosures:function(t,e=" ",r=0,n=!0){const o=[];let i="",f=[];for(let p=0;p<t.length;p++){const _=t[p];if(e.includes(_)&&f.length===r)i&&(o.push(n?i.trim():i),i="");else if(u[_]){const e=u[_];if(f.length>r&&(i+=_),f[f.length-1]!==e){const e=l(t);throw(e["'"]||0)%2!=0||(e['"']||0)%2!=0?new a(`Error tokenizing: Unbalanced closing character at position ${p}; got string: '${t}' ; if a str type has quote characters in it, wrap it in the opposite quote character.`):new a(`Error tokenizing: Unbalanced closing character at position ${p}; got string: '${t}'`)}f.pop()}else f.length>=r&&(i+=_),!s[_]||c[_]&&f[f.length-1]===c[_]||(f[f.length-1]===s[_]&&_===s[_]?f.pop():f.push(_))}if(f.length>0)throw new Error(`Unbalanced enclosures in input string; unresolved characters from enclosure stack: [ ${f.join(", ")} ]`);return i&&o.push(n?i.trim():i),o},parseDate:function(t){if(!n.L.DATE_LITERAL_RE.test(t))throw new a(`Invalid date; must be in the format: YYYY-MM-DD ( regex: ${n.L.DATE_LITERAL_RE.source} ); got: '${t}'`);const e=t.split(" ")[0],r=new Date(`${e}T00:00:00`);if(isNaN(r.getTime()))throw new a(`Invalid date; could not be parsed as a valid date; got: '${t}'`);const o=r.toISOString().split("T")[0],[i,s,c]=o.split("-").map(Number);if(r.getFullYear()!==i||r.getMonth()+1!==s||r.getDate()!==c)throw new a(`Invalid date; parsed date: ${r.toISOString()} does not match passed in string: ${e}`);return r.toISOString(),r.constructor.name,r},tryConvert:function(t,e,r,n=null){null===n&&(n=`Could not convert ${r} to ${e}`);try{return t(r)}catch(t){throw new o(`${n}: ${t.message}`)}},trimSurroundingQuotes:function(t){return t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}}},82:(t,e,r)=>{r.d(e,{j:()=>c});var n=r(836),a=r(412),o=r(771);function i(t,e,r){const n={user:t,filterStr:r,battles:{headers:[],rows:[]}};var o;return n.battles=(o=Object.values(e),{headers:a.se,rows:o.map(t=>a.se.map(e=>JSON.stringify(t[e])))}),n}function s(t){if(!t||"object"!=typeof t)throw new Error("Invalid upload: data is null, undefined, or not an object");if(!("user"in t))throw new Error("Invalid upload: missing 'user' field");if((0,o.l)(t.user),!("battles"in t))throw new Error("Invalid upload: missing 'battles' field");return function(t){if(!t||"object"!=typeof t)return!1;if(!("headers"in t)||!Array.isArray(t.headers))throw new Error("Invalid upload: missing headers field");if(t.headers.length!==a.se.length)throw new Error(`Invalid upload: expected ${a.se.length} headers, got ${t.headers.length}`);for(let e=0;e<a.se.length;e++)if(a.se[e]!==t.headers[e])throw new Error(`Invalid upload: headers do not match at index ${e}; expected ${a.se[e]}, got ${t.headers[e]}`);if(!("rows"in t)||!Array.isArray(t.rows))throw new Error("Invalid upload: missing rows field or rows is not an array");if(0===t.rows.length)throw new Error("Invalid upload: uploaded data has no battles");for(let e=0;e<t.rows.length;e++){const r=t.rows[e];if(r.length!==a.se.length)throw new Error(`Invalid upload: expected ${a.se.length} columns per row, got ${r.length} at index ${e}`)}}(t.battles),!0}const c={triggerDownload:async function(){const t=await n.n.UserManager.getUser();if(!t)throw new Error("User not found; cannot export data without an active user");const e=await n.n.ClientCache.getStats(),r=await n.n.ClientCache.getFilterStr()||void 0,a=e.areFiltersApplied?" Filtered":"";let o=e.areFiltersApplied?Object.values(e.filteredBattlesObj):e.battles;o=o||[];const s=await i(t,o,r),c=(new Date).toISOString().split("T")[0]||"";!function(t,e){const r=JSON.stringify(e),n=new Blob([r],{type:"application/json"}),a=URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download=t.endsWith(".json")?t:`${t}.json`,o.click(),URL.revokeObjectURL(a)}(`${t.name} (${t.id})${a} ${c}`,s)},parseJSON:async function(t){const e=await t.text();!function(t,e=".json",r=60){if(!t.name.endsWith(".json"))throw new Error("File must be .json");const n=1024*r*1024;if(t.size>n)throw new Error(`File must be smaller than ${r}mb, got ${t.size/1048576}mb File.`)}(t);const r=JSON.parse(e);return s(r),r},restructureParsedUploadBattles:function(t){const e=[];for(const r of t.rows){const t={};a.se.forEach((e,n)=>{t[e]=r[n]}),e.push(t)}return function(t){const e=new Set(t.map(t=>t[a.Lx.P1_ID])),r=new Set(t.map(t=>t[a.Lx.P1_SERVER]));if(1!==e.size)throw new Error(`Invalid upload: Multiple P1 IDs found in upload: {${Array.from(e).join(", ")}}`);if(1!==r.size)throw new Error(`Invalid upload: Multiple P1 Servers found in upload: {${Array.from(r).join(", ")}}`);const n=r.values().next().value?.replace(/"|'/g,"");if(!n||!Object.values(a.DB).includes(n))throw new Error(`Invalid upload: Invalid P1 Server found in upload: '${n}'`)}(e),e}}},84:(t,e,r)=>{r.d(e,{S:()=>p});var n=r(834),a=r(528),o=r(207),i=r(205),s=r(411),c=r(971),u=r(54),l=r(667);function f(t){return function(t,e,r){for(let n of t)if(!e.has(n))throw new u.A.SyntaxException(`Invalid character within <${r}> ; ' ${n} ' is not allowed; got string: '${t}'`)}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),c.yL,"Main Filter String"),t=t.toLowerCase()}class p{_filters;rawString;preParsedString;references;constructor(){this._filters=[],this.rawString="",this.preParsedString="",this.references={HeroDicts:null,ARTIFACT_LOWERCASE_STRINGS_MAP:{},SEASON_DETAILS:[]}}async addReferences(t=null){if(null===(t=t||await a.A.getHeroDicts()))throw new Error("Hero Manager could not be retrieved to parse filters.");const e=await i.A.getSeasonDetails();if(null===e)throw new Error("Season Details could not be retrieved to parse filters.");const r=await n.A.getArtifactLowercaseNameMap();this.references={HeroDicts:t,ARTIFACT_LOWERCASE_STRINGS_MAP:r,SEASON_DETAILS:e}}getFilters(){return function(t){const e=[],r=[];for(const n of t)n instanceof s.y4?e.push(n):r.push(n);return[...e,...r]}(this._filters)}asString(){const t=c.RG;return`[\n${this._filters.map(e=>e.asString(t)).join(";\n")};\n]`}static async getFiltersFromCache(t=null){const e=await l.A.get(l.A.Keys.FILTER_STR);if(null===e)return[];return(await this.fromFilterStr(e,t)).getFilters()}static async fromFilterStr(t,e=null){const r=new p;return r.rawString=t,await r.addReferences(e),r.preParsedString=f(t),r._filters=r.parse(r.preParsedString),r}parseList(t){return t.reduce((t,e)=>(t.push(...this.parse(e)),t),[])}parse(t){if(""===(t=t.trim()))return[];if(t.includes(";")){const e=t.split(";");return this.parseList(e)}const e=t.split("(")[0].replace(/p[1-2]\./i,""),r=u.A.tokenizeWithNestedEnclosures(t,",",1,!0);switch(e){case s.eR.AND:case s.eR.OR:case s.eR.NOT:case s.eR.XOR:const n=function(t,e){for(const r of t)if(r instanceof s.y4)throw new u.A.SyntaxException(`Global filters not allowed in clause functions; got: ${r.asString()} from string: "${e}"`);return t.filter(t=>t instanceof s.Qo)}(this.parseList(r),t);return[new s.CO[e](...n)];case s.eR.LAST_N:return[new s.c2.LAST_N(t)];case s.eR.EQUIPMENT:case s.eR.ARTIFACT:case s.eR.CR:return[new s.CO[e](t,this.references)];default:if(o.L.FUNCTION_CALL_RE.test(t))throw new u.A.SyntaxException(`Filter String is not a valid function call but a parenthese block was detected; got: ${t}`);return[new s.c2.BASE_FILTER(t,this.references)]}}}},92:(t,e,r)=>{function n(t){return t.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}function a(t){return t.reduce((t,e)=>(t[e]=(t[e]||0)+1,t),{})}r.d(e,{J:()=>a,S:()=>n})},121:(t,e,r)=>{r.d(e,{DG:()=>a.D,qD:()=>E});var n=r(667),a=(r(623),r(940),r(823));r(771),r(412);function o(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,o){var s=n&&n.prototype instanceof u?n:u,l=Object.create(s.prototype);return i(l,"_invoke",function(r,n,a){var o,i,s,u=0,l=a||[],f=!1,p={p:0,n:0,v:t,a:_,f:_.bind(t,4),d:function(e,r){return o=e,i=0,s=t,p.n=r,c}};function _(r,n){for(i=r,s=n,e=0;!f&&u&&!a&&e<l.length;e++){var a,o=l[e],_=p.p,E=o[2];r>3?(a=E===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=_&&((a=r<2&&_<o[1])?(i=0,p.v=n,p.n=o[1]):_<E&&(a=r<3||o[0]>n||n>E)&&(o[4]=r,o[5]=n,p.n=E,i=0))}if(a||r>1)return c;throw f=!0,n}return function(a,l,E){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&_(l,E),i=l,s=E;(e=i<2?t:s)||!f;){o||(i?i<3?(i>1&&(p.n=-1),_(i,s)):p.n=s:p.v=s);try{if(u=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(f=p.n<0)?s:r.call(n,p))!==c)break}catch(e){o=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(r,a,o),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][n]?e(e([][n]())):(i(e={},n,function(){return this}),e),_=f.prototype=u.prototype=Object.create(p);function E(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t}return l.prototype=f,i(_,"constructor",f),i(f,"constructor",l),l.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(_),i(_,a,"Generator"),i(_,n,function(){return this}),i(_,"toString",function(){return"[object Generator]"}),(o=function(){return{w:s,m:E}})()}function i(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}i=function(t,e,r,n){if(e)a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var o=function(e,r){i(t,e,function(t){return this._invoke(e,r,t)})};o("next",0),o("throw",1),o("return",2)}},i(t,e,r,n)}function s(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){s(o,n,a,i,c,"next",t)}function c(t){s(o,n,a,i,c,"throw",t)}i(void 0)})}}var u=new Set(Object.values(a.D));function l(t){return!!u.has(t)||(console.error("Invalid page state: ".concat(t)),!1)}var f,p,_,E={getState:(_=c(o().m(function t(){var e,r,i,s;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.A.get(n.A.Keys.HOME_PAGE_STATE);case 1:if(i=e=t.v,!(r=null!==i)){t.n=2;break}r=void 0!==e;case 2:if(!r){t.n=3;break}s=e,t.n=4;break;case 3:s=a.D.SELECT_DATA;case 4:return t.a(2,s)}},t)})),function(){return _.apply(this,arguments)}),setState:(p=c(o().m(function t(e){return o().w(function(t){for(;;)switch(t.n){case 0:if(l(e)){t.n=1;break}return t.a(2);case 1:return t.n=2,n.A.cache(n.A.Keys.HOME_PAGE_STATE,e);case 2:return t.a(2)}},t)})),function(t){return p.apply(this,arguments)}),resetState:(f=c(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.A.delete(n.A.Keys.HOME_PAGE_STATE);case 1:return t.a(2)}},t)})),function(){return f.apply(this,arguments)})}},136:(t,e,r)=>{r.d(e,{A:()=>a});var n=r(667);const a={ACTIONS:{CLEAR_USER:"CLEAR_USER",SHOW_NO_USER_MSG:"SHOW_NO_USER_MSG",SHOW_DATA_ALREADY_CLEARED_MSG:"SHOW_DATA_ALREADY_CLEARED_MSG",QUERY_USER:"QUERY_USER"},getState:async function(){return await n.A.get(n.A.Keys.INTER_PAGE_MANAGER)??{actions:[],messages:[]}},setState:async function(t){await n.A.cache(n.A.Keys.INTER_PAGE_MANAGER,t)},pushActions:async function(t){let e=await this.getState();e.actions.push(...t),await this.setState(e)},pushMessages:async function(t){let e=await this.getState();e.messages.push(...t),await this.setState(e)},pushState:async function(t){let e=await this.getState();e.actions.push(...t.actions),e.messages.push(...t.messages),await this.setState(e)},flushState:async function(){const t=await this.getState();return await n.A.delete(n.A.Keys.INTER_PAGE_MANAGER),t}}},149:(t,e,r)=>{r.d(e,{W:()=>a});var n=r(836);const a={changeLang:async function(t){await n.n.ClientCache.setLang(t),await n.n.HeroManager.fetchAndCacheHeroManager(t),window.location.reload()},getLang:async function(){return await n.n.ClientCache.getLang()}}},172:(t,e,r)=>{r.d(e,{GF:()=>p,ev:()=>l});r(623);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function s(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}var u={RED:"text-danger",GREEN:"text-safe"},l=s(function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.docElement=r,this.classList=n});function f(t){if(!t instanceof l)throw new Error("Only instances of TextPacket can be passed to this function")}var p={queue:[],autoClearElements:[],TextPacket:l,STYLES:u,clearStyles:function(t){for(var e=0,r=Object.values(u);e<r.length;e++){var n=r[e];t.classList.remove(n)}},write:function(t){f(t),t.docElement.textContent=t.text,this.clearStyles(t.docElement),t.classList.forEach(function(e){t.docElement.classList.add(e)})},push:function(t){f(t),this.queue.push(t)},pushFromObj:function(t){var e=t.text,r=t.docElement,n=t.classList;this.push(new l(e,r,n))},bindAutoClear:function(t){var e,r=a(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;this.autoClearElements.push(n)}}catch(t){r.e(t)}finally{r.f()}},processQueue:function(){var t=this;this.queue.forEach(function(e){t.write(e)}),this.queue=[]},clearMessages:function(){var t,e=a(this.autoClearElements);try{for(e.s();!(t=e.n()).done;){var r=t.value;r.textContent="",this.clearStyles(r)}}catch(t){e.e(t)}finally{e.f()}}}},205:(t,e,r)=>{r.d(e,{A:()=>E});var n=r(667),a=r(275),o=r(412);function i(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof u?n:u,l=Object.create(i.prototype);return s(l,"_invoke",function(r,n,a){var o,i,s,u=0,l=a||[],f=!1,p={p:0,n:0,v:t,a:_,f:_.bind(t,4),d:function(e,r){return o=e,i=0,s=t,p.n=r,c}};function _(r,n){for(i=r,s=n,e=0;!f&&u&&!a&&e<l.length;e++){var a,o=l[e],_=p.p,E=o[2];r>3?(a=E===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=_&&((a=r<2&&_<o[1])?(i=0,p.v=n,p.n=o[1]):_<E&&(a=r<3||o[0]>n||n>E)&&(o[4]=r,o[5]=n,p.n=E,i=0))}if(a||r>1)return c;throw f=!0,n}return function(a,l,E){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&_(l,E),i=l,s=E;(e=i<2?t:s)||!f;){o||(i?i<3?(i>1&&(p.n=-1),_(i,s)):p.n=s:p.v=s);try{if(u=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(f=p.n<0)?s:r.call(n,p))!==c)break}catch(e){o=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(r,a,o),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][n]?e(e([][n]())):(s(e={},n,function(){return this}),e),_=f.prototype=u.prototype=Object.create(p);function E(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t}return l.prototype=f,s(_,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,a,"GeneratorFunction"),s(_),s(_,a,"Generator"),s(_,n,function(){return this}),s(_,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:E}})()}function s(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}s=function(t,e,r,n){if(e)a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var o=function(e,r){s(t,e,function(t){return this._invoke(e,r,t)})};o("next",0),o("throw",1),o("return",2)}},s(t,e,r,n)}function c(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function u(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){c(o,n,a,i,s,"next",t)}function s(t){c(o,n,a,i,s,"throw",t)}i(void 0)})}}var l,f,p,_={fetchAndCacheSeasonDetails:(p=u(i().m(function t(){var e,r,s,c,u,l,f;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,a.A.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(r=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))}),t["Season Number"]=String(t["Season Number"])}),r.sort(function(t,e){return parseInt(t["Season Number"])-parseInt(e["Season Number"])}),s=[r[0]],c=r[0],r.slice(1).forEach(function(t){var e=new Date(+c.range[1]+o.CZ),r=new Date(+t.range[0]-o.CZ),n=c["Season Number"]+"f",a={"Season Number":n,Code:"pvp_rta_ss"+n,Season:"Pre ".concat(t.Season),Start:e.toISOString().slice(0,10),End:r.toISOString().slice(0,10),Status:"Complete",range:[e,r]};s.push(a),s.push(t),c=t}),c.range[1]<new Date&&(u=new Date(+s.at(-1).range[1]+o.CZ),l=c["Season Number"]+"f",f={"Season Number":l,Code:"pvp_rta_ss"+l,Season:"Active Pre-Season",Start:u.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[u,new Date]},s.push(f)),s.reverse(),t.n=3,n.A.cache(n.A.Keys.SEASON_DETAILS,s);case 3:return t.a(2,s)}},t)})),function(){return p.apply(this,arguments)}),getSeasonDetails:(f=u(i().m(function t(){var e,r;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.A.get(n.A.Keys.SEASON_DETAILS);case 1:if(null==(e=t.v)){t.n=2;break}r=e,t.n=4;break;case 2:return t.n=3,_.fetchAndCacheSeasonDetails();case 3:r=t.v;case 4:return t.a(2,r)}},t)})),function(){return f.apply(this,arguments)}),clearSeasonDetails:(l=u(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.A.delete(n.A.Keys.SEASON_DETAILS);case 1:case 2:return t.a(2)}},t)})),function(){return l.apply(this,arguments)}),getSeasonNumFromCode:function(t){return t.split("_")[-1]}};const E=_},207:(t,e,r)=>{r.d(e,{L:()=>B});var n=r(833);function a(t,e="i"){return new RegExp(`^(?:${t.source})(?=[,)\\s;]|$)`,e)}function o(t,e="i"){return new RegExp(`^(?:${t.source})$`,e)}function i(t,e="i"){if(t.length<1)throw new Error("orRegex must have at least one pattern");let r=`(?:${t[0].source})`;for(let e=1;e<t.length;e++)r+=`|(?:${t[e].source})`;return new RegExp(r,e)}const s=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=Object.keys(n.j),u=new RegExp(`^(?:${c.map(s).join("|")})`,"i"),l=new RegExp(`(?:${["and","or","xor","not"].map(s).join("|")})(?=\\()`,"i"),f=new RegExp(`(?:${["last-n"].map(s).join("|")})(?=\\()`,"i"),p=new RegExp(`(?:${["p1.equipment","p2.equipment","p1.artifact","p2.artifact","p1.cr","p2.cr"].map(s).join("|")})(?=\\()`,"i"),_=i([l,f,p]),E=/.*/i,d=/\d{4}-\d{2}-\d{2}/,S=/\{\s*\}/,h=/-?\d+/,A=/season-[1-9]+[0-9]*f?|current-season|last-season/i,T=/pvp_rta_ss[1-9]+[0-9]*f?/i,m=new RegExp(`^${d.source}$`,"i"),g=new RegExp(`(?:${A.source})`,"i"),w=E.source,y=h.source,R=d.source,v=u.source,L=g.source,P=new RegExp(`(["'])(${w})\\1`,"i"),N=o(P),b=P.source,O=new RegExp(`(?:${b}|${w}|${R})`,"i"),I=new RegExp(`(?:${v}|${L})`,"i"),D=O.source,C=new RegExp(`\\{\\s*(?:${D}\\s*)(?:,\\s*${D}\\s*)*,?\\s*\\}|${S.source}`,"i"),x=new RegExp(`${y}\\.\\.\\.=?${y}|${R}\\.\\.\\.=?${R}`),F=new RegExp(`^${x.source}$`);let B={STRING_RE:E,DATE_RE:d,INT_RE:h,EMPTY_SET_RE:S,SET_ELEMENT_RE:O,SET_RE:C,SET_LITERAL_RE:o(C),STRING_LITERAL_RE:N,DATE_LITERAL_RE:m,INT_LITERAL_RE:/^-?\d+$/,BOOL_LITERAL_RE:/^(true|false)$/i,RANGE_RE:x,RANGE_LITERAL_RE:F,SEASON_RE:A,SEASON_LITERAL_RE:o(A),SEASON_CODE_RE:T,SEASON_CODE_LITERAL_RE:o(T),DATA_WORD_RE:g,DATA_WORD_LITERAL_RE:o(g),FIELD_WORD_RE:u,FIELD_WORD_LITERAL_RE:o(u),DATAFIELD_RE:I,GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:o(N),CLAUSE_FUNCTIONS_RE:l,DIRECT_FUNCTIONS_RE:p,GLOBAL_FUNCTIONS_RE:f,FUNCTIONS_RE:_,FUNCTION_CALL_RE:/\(.*\)/i,padRegex:a,anchorExp:o,tokenMatch:function(t){return t.match(_)?"keyword":t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?"operator":t.match(new RegExp(`[a-z0-9."'}=)-]${I.source}(?=[,)\\s;]|$)`,"i"))?null:t.match(a(u))?"field":t.match(a(g))?"declared-data":t.match(a(P))?"string":t.match(a(C))?"set":t.match(a(x))?"range":t.match(/[^(,\s;.=0-9\-]+\d+/i)?null:t.match(a(h))||t.match(a(d))||t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?"declared-data":t.match(/[\(\)\{\}\;\,]/)?"bracket":(t.next(),null)},orRegex:i,escapeRegex:s}},275:(t,e,r)=>{function n(){var t,e,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function s(r,n,o,i){var s=n&&n.prototype instanceof u?n:u,l=Object.create(s.prototype);return a(l,"_invoke",function(r,n,a){var o,i,s,u=0,l=a||[],f=!1,p={p:0,n:0,v:t,a:_,f:_.bind(t,4),d:function(e,r){return o=e,i=0,s=t,p.n=r,c}};function _(r,n){for(i=r,s=n,e=0;!f&&u&&!a&&e<l.length;e++){var a,o=l[e],_=p.p,E=o[2];r>3?(a=E===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=_&&((a=r<2&&_<o[1])?(i=0,p.v=n,p.n=o[1]):_<E&&(a=r<3||o[0]>n||n>E)&&(o[4]=r,o[5]=n,p.n=E,i=0))}if(a||r>1)return c;throw f=!0,n}return function(a,l,E){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&_(l,E),i=l,s=E;(e=i<2?t:s)||!f;){o||(i?i<3?(i>1&&(p.n=-1),_(i,s)):p.n=s:p.v=s);try{if(u=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(f=p.n<0)?s:r.call(n,p))!==c)break}catch(e){o=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(r,o,i),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(a(e={},o,function(){return this}),e),_=f.prototype=u.prototype=Object.create(p);function E(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,i,"GeneratorFunction")),t.prototype=Object.create(_),t}return l.prototype=f,a(_,"constructor",f),a(f,"constructor",l),l.displayName="GeneratorFunction",a(f,i,"GeneratorFunction"),a(_),a(_,i,"Generator"),a(_,o,function(){return this}),a(_,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:E}})()}function a(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,r,n){if(e)o?o(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var i=function(e,r){a(t,e,function(t){return this._invoke(e,r,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,r,n)}function o(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var i=t.apply(e,r);function s(t){o(i,n,a,s,c,"next",t)}function c(t){o(i,n,a,s,c,"throw",t)}s(void 0)})}}r.d(e,{A:()=>_});var s,c,u,l,f,p;const _={test:function(t){t.rank_plot},fetchFromPython:(p=i(n().m(function t(e){var r,a;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if((r=t.v).ok){t.n=3;break}return t.n=2,fetch(e);case 2:r=t.v;case 3:return t.n=4,r.json();case 4:return a=t.v,t.a(2,a||null)}},t)})),function(t){return p.apply(this,arguments)}),fetchHeroData:(f=i(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},t,this)})),function(){return f.apply(this,arguments)}),rsFetchBattleData:(l=i(n().m(function t(e){return n().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return l.apply(this,arguments)}),fetchSeasonDetails:(u=i(n().m(function t(){var e,r,a;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(r=t.v).success){t.n=3;break}return a=JSON.parse(r.seasonDetails),t.a(2,{seasonDetails:a,error:!1});case 3:return t.a(2,{seasonDetails:null,error:r.error});case 4:return t.a(2)}},t)})),function(){return u.apply(this,arguments)}),fetchArtifactJson:(c=i(n().m(function t(){var e,r,a;return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_artifact_json");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(r=t.v).success){t.n=3;break}return a=JSON.parse(r.artifactJson),t.a(2,a);case 3:return t.a(2,null);case 4:return t.a(2)}},t)})),function(){return c.apply(this,arguments)}),fetchUser:(s=i(n().m(function t(e){var r,a,o;return n().w(function(t){for(;;)switch(t.n){case 0:if(e.name&&e.world_code||e.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:e})});case 2:return r=t.v,t.n=3,r.json();case 3:if(a=t.v,r.ok){t.n=4;break}throw new Error("Flask server error: ".concat(a.error));case 4:if(a.foundUser){t.n=6;break}if(e.world_code){t.n=5;break}return t.a(2,{user:null,ok:!0});case 5:return t.a(2,{user:null,ok:!0});case 6:return o=a.user,"Found user: ".concat(JSON.stringify(o)),t.a(2,{user:o,ok:!0})}},t)})),function(t){return s.apply(this,arguments)})}},319:(t,e,r)=>{r.d(e,{A$:()=>u,Qi:()=>s,aQ:()=>c});r(699);const n={">":(t,e)=>t>e,"<":(t,e)=>t<e,"=":(t,e)=>t===e,">=":(t,e)=>t>=e,"<=":(t,e)=>t<=e,"!=":(t,e)=>t!==e},a="in",o="compare";class i{}class s extends i{type=a;opStr;negate=!1;constructor(t=!1){super(),this.negate=t,this.opStr=this.negate?"!in":"in"}call(t,e){const r=Array.isArray(e)?e.includes(t):e.has(t);return this.negate?!r:r}}class c extends i{type=o;opStr;compareFn;constructor(t){if(super(),this.opStr=t,this.compareFn=n[t],!this.compareFn)throw new Error(`Unknown operator: ${t}`)}call(t,e){return this.compareFn(t,e)}}function u(t){switch(t){case"in":return new s;case"!in":return new s(!0);default:return new c(t)}}},411:(t,e,r)=>{r.d(e,{CO:()=>I,Qo:()=>S,c2:()=>D,eR:()=>l,y4:()=>P});var n=r(92),a=r(412),o=r(699),i=r(319),s=r(971),c=r(54),u=r(413);const l={AND:"and",OR:"or",XOR:"xor",NOT:"not",LAST_N:"last-n",EQUIPMENT:"equipment",ARTIFACT:"artifact",CR:"cr",BASE_FILTER:"base-filter"},f="CLAUSE_FN",p="HERO_LIST_FN",_="GLOBAL_FN",E="BASE_FILTER";class d{}class S extends d{}class h extends S{fnType=f;fns=[];constructor(...t){super(),this.fns=t}asString(t=""){let e="";const r=t+s.RG;return this.fns.forEach(t=>e+=`${t.asString(r)},\n`),`${t}${this.fnName}(\n${e.trimEnd()}\n${t})`}}class A extends h{fnName=l.AND;fnType=f;call(t){return this.fns.every(e=>e.call(t))}}class T extends h{fnName=l.OR;fnType=f;call(t){return this.fns.some(e=>e.call(t))}}class m extends h{fnName=l.XOR;fnType=f;call(t){let e=!1;for(let r of this.fns)e=!e&&r.call(t)||e&&!r.call(t);return e}}class g extends h{fnName=l.NOT;fnType=f;constructor(...t){if(super(...t),1!==this.fns.length)throw new c.A.SyntaxException(`Invalid NOT function call ; accepts exactly 1 argument ; got: [${this.fns}]`)}call(t){return!this.fns[0].call(t)}}class w extends S{fnType=p;getHeroes(t){return this.isPlayer1?t[a.Lx.P1_PICKS]:t[a.Lx.P2_PICKS]}asString(t=""){return`${t}${this.fnName}(${this.argFmtString})`}}class y extends w{fnName=l.CR;fnType=p;heroName;crThreshold=0;operator;targetField;isPlayer1=!1;argFmtString;constructor(t,e){super();const r=t.includes(",")?",":" ",n=c.A.tokenizeWithNestedEnclosures(t,r,1,!0);if(3!==n.length)throw new c.A.SyntaxException(`Invalid CR function call ; accepts exactly 3 arguments ; got: [${n}] from str: ${t}`);const s=parseInt(n[2]);if(isNaN(s))throw new c.A.TypeException(`Invalid CR function call ; third argument must be a valid integer literal ; got: '${n[2]}' from str: ${t}`);const l=(0,i.A$)(n[1]);if(!(l instanceof i.aQ))throw new c.A.TypeException(`Invalid CR function call ; second argument must be a valid comparison operator ; got: '${n[1]}' from str: ${t}`);this.heroName=new o.H3.StringLiteral(n[0],e,[u.xD.Hero]).data,this.crThreshold=s,this.operator=l,this.isPlayer1=t.includes("p1."),this.targetField=t=>t[a.Lx.CR_BAR],this.argFmtString=`${this.heroName} ${this.operator.opStr} ${this.crThreshold}`}call(t){const e=this.getHeroes(t),r=this.targetField(t).find(t=>t[0]===this.heroName);return!!r&&(!!e.includes(this.heroName)&&this.operator.call(r,this.crThreshold))}}function R(t,e){for(const r in t)if(t[r]>(e[r]||0))return!1;return!0}class v extends w{fnName=l.EQUIPMENT;fnType=p;heroName;targetEquipCounts;isPlayer1=!1;argFmtString;targetField;constructor(t,e){super();const r=c.A.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new c.A.SyntaxException(`Invalid equipment function call ; accepts exactly 2 arguments ; got: [${r}] from str: ${t}`);const i=r[1].includes("{")?r[1]:`{${r[1]}}`;let s=c.A.tokenizeWithNestedEnclosures(i,",",1,!0);s=s.map(t=>new o.H3.StringLiteral(t,e,[u.xD.Equipment]).data),this.targetEquipCounts=(0,n.J)(s),this.heroName=new o.H3.StringLiteral(r[0],e,[u.xD.Hero]).data,this.isPlayer1=t.includes("p1."),this.argFmtString=`${this.heroName}, {${s.join(",")}}`,this.targetField=t=>this.isPlayer1?t[a.Lx.P1_EQUIPMENT]:t[a.Lx.P2_EQUIPMENT]}call(t){const e=this.getHeroes(t),r=this.targetField(t);for(let t=0;t<e.length;t++)if(e[t]===this.heroName){const e=(0,n.J)(r[t]);return R(this.targetEquipCounts,e)}return!1}}class L extends w{fnName=l.ARTIFACT;fnType=p;heroName;targetArtifacts;isPlayer1=!1;argFmtString;targetField;constructor(t,e){super();const r=c.A.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new c.A.SyntaxException(`Invalid artifact function call ; accepts exactly 2 arguments ; got: [${r}] from str: ${t}`);const n=r[1].includes("{")?r[1]:`{${r[1]}}`;let i=c.A.tokenizeWithNestedEnclosures(n,",",1,!0);i=i.map(t=>new o.H3.StringLiteral(t,e,[u.xD.Artifact]).data),this.targetArtifacts=i,this.heroName=new o.H3.StringLiteral(r[0],e,[u.xD.Hero]).data,this.isPlayer1=t.includes("p1."),this.argFmtString=`${this.heroName}, {${i.join(", ")}}`,this.targetField=t=>this.isPlayer1?t[a.Lx.P1_ARTIFACTS]:t[a.Lx.P2_ARTIFACTS]}call(t){const e=this.getHeroes(t),r=this.targetField(t);for(let t=0;t<e.length;t++)if(e[t]===this.heroName)return this.targetArtifacts.some(e=>r[t].includes(e));return!1}}class P extends d{fnType=_;asString(t=""){return`${t}${this.fnName}(${this.argFmtString})`}}class N extends P{fnName=l.LAST_N;fnType=_;argFmtString;n;constructor(t){super();const e=c.A.tokenizeWithNestedEnclosures(t,",",1,!0);if(1!==e.length)throw new c.A.SyntaxException(`Invalid last-n function call ; accepts exactly 1 argument ; got: [${e}] from str: ${t}`);this.n=new o.H3.IntLiteral(e[0]).data,this.argFmtString=`${this.n}`}call(t){return t.slice(-this.n)}}function b(t,e,r){const n=`${t.asString()} ${e.opStr} ${r.asString()}`;if(t instanceof o.H3.Field&&r instanceof o.H3.Field)throw new c.A.ValidationError(`Invalid base filter; fields cannot be compared with other fields ; got string: [${n}]`);if(t.type!==o.H3.BaseEltTypes.FIELD&&r.type!==o.H3.BaseEltTypes.FIELD)throw new c.A.ValidationError(`Invalid base filter; every base filter must have at least one field ; got string: [${n}]`);if(e instanceof i.Qi&&(a=r,!(o.H3.COLLECTION_FIELDS_SET.has(a.rawString)||r instanceof o.H3.RangeLiteral||r instanceof o.H3.SetLiteral)))throw new c.A.ValidationError(`Invalid base filter; 'in' operators can only be used with Ranges, Sets, or Fields that correspond to sets like 'p1.picks' ; got string: [${n}]`);var a;return!0}class O extends S{fnType=E;fnName=l.BASE_FILTER;fmtString;fn;constructor(t,e){super();const r=c.A.tokenizeWithNestedEnclosures(t," ",0,!0);if(3!==r.length)throw new c.A.SyntaxException(`Invalid base filter; filters must have 3 tokens and be of the form: ['X', operator, 'Y']; got: [${r}] tokens from str: ${t}`);let[n,a,s]=r;const u=(0,i.A$)(a),l=o.H3.parseBaseElement(n,e),f=o.H3.parseBaseElement(s,e);if(l.asString(),f.asString(),b(l,u,f),l instanceof o.H3.Field&&!(f instanceof o.H3.Field))this.fn=t=>u.call(l.extractData(t),f.getData());else{if(l instanceof o.H3.Field||!(f instanceof o.H3.Field))throw new c.A.ValidationError("Invalid base filter; filters must contain a Field and a Literal; got: "+t);this.fn=t=>u.call(l.getData(),f.extractData(t))}this.fmtString=`${l.asString()} ${a} ${f.asString()}`}call(t){return this.fn(t)}asString(t=""){return`${t}${this.fmtString}`}}const I={[l.BASE_FILTER]:O,[l.AND]:A,[l.OR]:T,[l.NOT]:g,[l.XOR]:m,[l.LAST_N]:N,[l.EQUIPMENT]:v,[l.ARTIFACT]:L,[l.CR]:y},D={AND:A,OR:T,NOT:g,XOR:m,LAST_N:N,EQUIPMENT:v,ARTIFACT:L,CR:y,BASE_FILTER:O}},412:(t,e,r)=>{r.d(e,{$k:()=>c,CZ:()=>l,D5:()=>d,DB:()=>s,F4:()=>S,F7:()=>i,Lx:()=>_,W4:()=>h,WB:()=>o,Yj:()=>a,bh:()=>A,pg:()=>u,se:()=>E,yR:()=>p});var n=r(92);const a={CODES:{DE:"de",KO:"ko",PT:"pt",TH:"th",ZH_TW:"zh-TW",JA:"ja",EN:"en",FR:"fr",ZH_CN:"zh-CN",ES:"es"},NAMES:{DE:"German",KO:"Korean",PT:"Portuguese",TH:"Thai",ZH_TW:"Chinese (Traditional, Taiwan)",JA:"Japanese",EN:"English",FR:"French",ZH_CN:"Chinese (Simplified, China)",ES:"Spanish"}},o=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),i={GLOBAL:"world_global",KOR:"world_kor",JPN:"world_jpn",ASIA:"world_asia",EU:"world_eu"},s={[i.GLOBAL]:"Global",[i.KOR]:"Korea",[i.JPN]:"Japan",[i.ASIA]:"Asia",[i.EU]:"Europe"},c=(s.world_global,i.GLOBAL,s.world_kor,i.KOR,s.world_jpn,i.JPN,s.world_asia,i.ASIA,s.world_eu,i.EU,Object.fromEntries(Object.values(s).map(t=>[t.toLowerCase(),t]))),u={set_speed:"Speed",set_acc:"Hit",set_cri:"Critical",set_res:"Resist",set_def:"Defense",set_att:"Attack",set_max_hp:"Health",set_cri_dmg:"Destruction",set_coop:"Unity",set_immune:"Immunity",set_rage:"Rage",set_vampire:"Lifesteal",set_shield:"Protection",set_revenge:"Revenge",set_penetrate:"Penetration",set_torrent:"Torrent",set_counter:"Counter",set_scar:"Injury"},l=864e5,f={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},p=Object.fromEntries(Object.keys(f).sort((t,e)=>f[t]-f[e]).map(t=>[t,(0,n.S)(t)])),_={SEASON:"Season",SEASON_CODE:"Season Code",DATE_TIME:"Date/Time",SECONDS:"Seconds",TURNS:"Turns",SEQ_NUM:"Seq Num",P1_ID:"P1 ID",P1_SERVER:"P1 Server",P2_ID:"P2 ID",P2_SERVER:"P2 Server",P1_LEAGUE:"P1 League",P2_LEAGUE:"P2 League",P1_POINTS:"P1 Points",POINT_GAIN:"Point Gain",WIN:"Win",FIRST_PICK:"First Pick",FIRST_TURN:"First Turn",FIRST_TURN_HERO:"First Turn Hero",CR_BAR:"CR Bar",P1_PREBANS:"P1 Prebans",P2_PREBANS:"P2 Prebans",P1_PICKS:"P1 Picks",P2_PICKS:"P2 Picks",P1_POSTBAN:"P1 Postban",P2_POSTBAN:"P2 Postban",P1_EQUIPMENT:"P1 Equipment",P2_EQUIPMENT:"P2 Equipment",P1_ARTIFACTS:"P1 Artifacts",P2_ARTIFACTS:"P2 Artifacts",P1_MVP:"P1 MVP",P2_MVP:"P2 MVP",P1_PICKS_PRIMES:"P1 Picks Primes",P1_PICKS_PRIME_PRODUCT:"P1 Picks Prime Product",P2_PICKS_PRIMES:"P2 Picks Primes",P2_PICKS_PRIME_PRODUCT:"P2 Picks Prime Product",P1_PREBANS_PRIMES:"P1 Prebans Primes",P1_PREBANS_PRIME_PRODUCT:"P1 Prebans Prime Product",P2_PREBANS_PRIMES:"P2 Prebans Primes",P2_PREBANS_PRIME_PRODUCT:"P2 Prebans Prime Product"},E=(Object.values(_).filter(t=>!t.toLowerCase().includes("prime")),Object.values(_).filter(t=>!t.toLowerCase().includes("prime"))),d=(_.P1_EQUIPMENT,_.P2_EQUIPMENT,_.P1_ARTIFACTS,_.P2_ARTIFACTS,_.CR_BAR,_.P1_PREBANS,_.P2_PREBANS,_.P1_PICKS,_.P2_PICKS,_.FIRST_PICK,_.FIRST_TURN,_.WIN,_.SECONDS,_.TURNS,_.P1_POINTS,_.POINT_GAIN,_.P1_LEAGUE,_.P2_LEAGUE,{HERO_NAME:"Hero Name",BATTLES:"Battles",PICK_RATE:"Pick Rate",WINS:"Wins",WIN_RATE:"Win rate",POSTBANS:"Postbans",POSTBAN_RATE:"Postban Rate",SUCCESS_RATE:"Success Rate",PLUS_MINUS:"+/-",POINT_GAIN:"Point Gain",AVG_CR:"Avg CR",FIRST_TURNS:"First Turns",FIRST_TURN_RATE:"First Turn Rate"}),S="https://epic7.onstove.com",h=S+"/gg";const A=function(t){const e=new Uint8Array(t+1),r=[];for(let n=2;n<=t;n++)if(!e[n]){r.push(n);for(let r=n*n;r<=t;r+=n)e[r]=1}return r}(3e4)},413:(t,e,r)=>{r.d(e,{QV:()=>c,xD:()=>u});var n=r(528),a=r(412),o=r(971),i=r(207);class s{}function c(t,e,r){for(const n of r){const r=n.parse(t,e);if(n.parserType,r)return r}return null}const u={Hero:new class extends s{parse(t,e){return n.A.getHeroByName(t,e.HeroDicts)?.name??null}parserType="Hero"},League:new class extends s{parse(t){return a.yR,a.yR[t]}parserType="League"},Server:new class extends s{parse(t){return a.$k[t]}parserType="Server"},Equipment:new class extends s{parse(t){return o.Nk[t.toLowerCase()]}parserType="Equipment"},Artifact:new class extends s{parse(t,e){return e.ARTIFACT_LOWERCASE_STRINGS_MAP[t.toLowerCase()]}parserType="Artifact"},Season:new class extends s{parse(t,e){let r;if("current-season"===t)return e.SEASON_DETAILS[0].Code;if("last-season"===t)return e.SEASON_DETAILS[1].Code;if(i.L.SEASON_LITERAL_RE.test(t))r=t.split("-").at(-1);else{if(!i.L.SEASON_CODE_LITERAL_RE.test(t))return null;r=t.split("_ss").at(-1)}e.SEASON_DETAILS.map(t=>t.Code.split("_").at(-1));return e.SEASON_DETAILS.find(t=>t.Code.split("_ss").at(-1)===r)?.Code}parserType="Season Code"}}},494:(t,e,r)=>{r.d(e,{K:()=>n});const n={unwrapHtmlElt:function(t){const e=document.getElementById(t);if(null===e)throw new Error(`Could not find element with ID ${t}`);return e},setText:function(t,e){this.unwrapHtmlElt(t).textContent=e}}},528:(t,e,r)=>{r.d(e,{A:()=>u});var n=r(667),a=r(412),o=r(275),i=r(40);const s="~Fodder",c="~Empty";const u={getHeroDicts:async function(t=a.Yj.CODES.EN){const e=await n.A.get(n.A.Keys.HERO_MANAGER);return e||this.fetchAndCacheHeroManager(t)},createHeroManager:function(t){for(let[e,r]of t.entries()){const t=a.bh[e];r.prime=t}let e={heroes:[],Empty:{attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"N/A",prime:1},Fodder:{attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"N/A",prime:1},name_lookup:{},code_lookup:{},prime_lookup:{},prime_pair_lookup:{}};return e.heroes=t,e=function(t){const e=t.heroes.length,r={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:c,prime:1},n={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:s,prime:a.bh[e]};return t.heroes.push(r),t.heroes.push(n),t.Fodder=n,t.Empty=r,t}(e),e=function(t){t.name_lookup=t.heroes.reduce((t,e)=>(t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t),{}),t.prime_lookup=t.heroes.reduce((t,e)=>(t[e.prime]=e,t),{}),t.code_lookup=t.heroes.reduce((t,e)=>(t[e.code]=e,t),{});let e=t.heroes.reduce((t,e)=>(t[e.prime]=e.name,t),{});const r=Object.keys(t.prime_lookup).length-1;for(let n=0;n<r-1;n++){const o=a.bh[n];for(let i=n+1;i<r;i++){const r=a.bh[i],n=o*r,s=t.prime_lookup[o].name,c=t.prime_lookup[r].name;e[n]=[s,c].sort().join(", ")}}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.name].join(", "),t.prime_pair_lookup=e,t}(e),e},fetchHeroManager:async function(t=a.Yj.CODES.EN){const e=(await i.A.fetchHeroJSON()??await o.A.fetchHeroData())[t];return this.createHeroManager(e)},fetchAndCacheHeroManager:async function(t=a.Yj.CODES.EN){const e=await this.fetchHeroManager(t);return await n.A.cache(n.A.Keys.HERO_MANAGER,e),e},deleteHeroManager:async function(){await n.A.delete(n.A.Keys.HERO_MANAGER)},getHeroByName:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;const r=t.toLowerCase().replace(/\s+/g,"");return e.name_lookup[r]??null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?e.code_lookup[t]??null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]},EMPTY_NAME:c,FODDER_NAME:s}},593:(t,e,r)=>{r.a(t,async(t,e)=>{try{var n=r(874);async function a(){await n.Su.initialize()}await a(),e()}catch(o){e(o)}},1)},602:(t,e,r)=>{r.d(e,{P2:()=>d});const n=(t,e)=>e.some(e=>t instanceof e);let a,o;const i=new WeakMap,s=new WeakMap,c=new WeakMap;let u={get(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return i.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _(t[e])},set:(t,e,r)=>(t[e]=r,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function l(t){u=t(u)}function f(t){return(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(E(this),e),_(this.request)}:function(...e){return _(t.apply(E(this),e))}}function p(t){return"function"==typeof t?f(t):(t instanceof IDBTransaction&&function(t){if(i.has(t))return;const e=new Promise((e,r)=>{const n=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{e(),n()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});i.set(t,e)}(t),n(t,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,u):t)}function _(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,r)=>{const n=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{e(_(t.result)),n()},o=()=>{r(t.error),n()};t.addEventListener("success",a),t.addEventListener("error",o)});return c.set(e,t),e}(t);if(s.has(t))return s.get(t);const e=p(t);return e!==t&&(s.set(t,e),c.set(e,t)),e}const E=t=>c.get(t);function d(t,e,{blocked:r,upgrade:n,blocking:a,terminated:o}={}){const i=indexedDB.open(t,e),s=_(i);return n&&i.addEventListener("upgradeneeded",t=>{n(_(i.result),t.oldVersion,t.newVersion,_(i.transaction),t)}),r&&i.addEventListener("blocked",t=>r(t.oldVersion,t.newVersion,t)),s.then(t=>{o&&t.addEventListener("close",()=>o()),a&&t.addEventListener("versionchange",t=>a(t.oldVersion,t.newVersion,t))}).catch(()=>{}),s}const S=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],A=new Map;function T(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(A.get(e))return A.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=h.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!a&&!S.includes(r))return;const o=async function(t,...e){const o=this.transaction(t,a?"readwrite":"readonly");let i=o.store;return n&&(i=i.index(e.shift())),(await Promise.all([i[r](...e),a&&o.done]))[0]};return A.set(e,o),o}l(t=>({...t,get:(e,r,n)=>T(e,r)||t.get(e,r,n),has:(e,r)=>!!T(e,r)||t.has(e,r)}));const m=["continue","continuePrimaryKey","advance"],g={},w=new WeakMap,y=new WeakMap,R={get(t,e){if(!m.includes(e))return t[e];let r=g[e];return r||(r=g[e]=function(...t){w.set(this,y.get(this)[e](...t))}),r}};async function*v(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const r=new Proxy(e,R);for(y.set(r,e),c.set(r,E(e));e;)yield r,e=await(w.get(r)||e.continue()),w.delete(r)}function L(t,e){return e===Symbol.asyncIterator&&n(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&n(t,[IDBIndex,IDBObjectStore])}l(t=>({...t,get:(e,r,n)=>L(e,r)?v:t.get(e,r,n),has:(e,r)=>L(e,r)||t.has(e,r)}))},623:(t,e,r)=>{r.d(e,{A:()=>c});var n=r(494);class a{_SELECT_DATA_MSG=null;_FILTER_MSG=null;_SELECT_DATA_BODY=null;_SHOW_STATS_BODY=null;_LOAD_DATA_BODY=null;_LATEST_BATTLES_BTN=null;_UPLOAD_FORM=null;_CSV_FILE=null;_USER_QUERY_FORM_NAME=null;_USER_QUERY_FORM_SERVER=null;_AUTO_ZOOM_FLAG=null;_FOOTER=null;_USER_NAME=null;_USER_ID=null;_USER_SERVER=null;_BATTLE_FILTER_TOGGLER=null;_ID_SEARCH_FLAG=null;_SEASON_DETAILS_TBL=null;_PERFORMANCE_STATS_TBL=null;_FIRST_PICK_STATS_TBL=null;_PREBAN_STATS_TBL=null;_PLAYER_TBL=null;_OPPONENT_TBL=null;_BATTLE_TBL=null;_RANK_PLOT=null;get SELECT_DATA_MSG(){return this._SELECT_DATA_MSG||=n.K.unwrapHtmlElt("select-data-msg")}get FILTER_MSG(){return this._FILTER_MSG||=n.K.unwrapHtmlElt("filterMSG")}get SELECT_DATA_BODY(){return this._SELECT_DATA_BODY||=n.K.unwrapHtmlElt("select-data-body")}get SHOW_STATS_BODY(){return this._SHOW_STATS_BODY||=n.K.unwrapHtmlElt("show-stats-body")}get LOAD_DATA_BODY(){return this._LOAD_DATA_BODY||=n.K.unwrapHtmlElt("load-data-body")}get LATEST_BATTLES_BTN(){return this._LATEST_BATTLES_BTN||=n.K.unwrapHtmlElt("latest-battles-btn")}get UPLOAD_FORM(){return this._UPLOAD_FORM||=n.K.unwrapHtmlElt("uploadForm")}get CSV_FILE(){return this._CSV_FILE||=n.K.unwrapHtmlElt("csvFile")}get USER_QUERY_FORM_NAME(){return this._USER_QUERY_FORM_NAME||=n.K.unwrapHtmlElt("user-query-form-name")}get USER_QUERY_FORM_SERVER(){return this._USER_QUERY_FORM_SERVER||=n.K.unwrapHtmlElt("user-query-form-server")}get AUTO_ZOOM_FLAG(){return this._AUTO_ZOOM_FLAG||=n.K.unwrapHtmlElt("auto-zoom-flag")}get FOOTER_BODY(){return this._FOOTER||=n.K.unwrapHtmlElt("footer-body")}get USER_NAME(){return this._USER_NAME||=n.K.unwrapHtmlElt("user-name")}get USER_ID(){return this._USER_ID||=n.K.unwrapHtmlElt("user-id")}get USER_SERVER(){return this._USER_SERVER||=n.K.unwrapHtmlElt("user-server")}get BATTLE_FILTER_TOGGLE(){return this._BATTLE_FILTER_TOGGLER||=n.K.unwrapHtmlElt("filter-battle-table")}get ID_SEARCH_FLAG(){return this._ID_SEARCH_FLAG||=n.K.unwrapHtmlElt("id-search-flag")}get SEASON_DETAILS_TBL(){return this._SEASON_DETAILS_TBL||=n.K.unwrapHtmlElt("season-details-tbl")}get PERFORMANCE_STATS_TBL(){return this._PERFORMANCE_STATS_TBL||=n.K.unwrapHtmlElt("performance-stats-tbl")}get FIRST_PICK_STATS_TBL(){return this._FIRST_PICK_STATS_TBL||=n.K.unwrapHtmlElt("first-pick-stats-tbl")}get PREBAN_STATS_TBL(){return this._PREBAN_STATS_TBL||=n.K.unwrapHtmlElt("preban-stats-tbl")}get PLAYER_TBL(){return this._PLAYER_TBL||=n.K.unwrapHtmlElt("player-tbl")}get OPPONENT_TBL(){return this._OPPONENT_TBL||=n.K.unwrapHtmlElt("opponent-tbl")}get BATTLES_TBL(){return this._BATTLE_TBL||=n.K.unwrapHtmlElt("battles-tbl")}get RANK_PLOT(){return this._RANK_PLOT||=n.K.unwrapHtmlElt("rank-plot")}get MESSAGE_ELEMENTS_LIST(){return[this.SELECT_DATA_MSG,this.FILTER_MSG]}}class o{_SIDEBAR_HIDE_BTN=null;get SIDEBAR_HIDE_BTN(){return this._SIDEBAR_HIDE_BTN||=n.K.unwrapHtmlElt("sidebar-hide")}_CLEAR_DATA_BTN=null;get CLEAR_DATA_BTN(){return this._CLEAR_DATA_BTN||=n.K.unwrapHtmlElt("clear-data-btn")}_EXPORT_CSV_BTN=null;get EXPORT_DATA_BTN(){return this._EXPORT_CSV_BTN||=n.K.unwrapHtmlElt("export-data-btn")}_OFFICIAL_SITE_BTN=null;get OFFICIAL_SITE_BTN(){return this._OFFICIAL_SITE_BTN||=n.K.unwrapHtmlElt("official-site-btn")}_USER_NAME=null;get USER_NAME(){return this._USER_NAME||=n.K.unwrapHtmlElt("user-name")}_USER_ID=null;get USER_ID(){return this._USER_ID||=n.K.unwrapHtmlElt("user-id")}_USER_SERVER=null;get USER_SERVER(){return this._USER_SERVER||=n.K.unwrapHtmlElt("user-server")}_SIDEBAR_CONTROL=null;get SIDEBAR_CONTROL(){return this._SIDEBAR_CONTROL||=n.K.unwrapHtmlElt("sidebar-control")}}class i{_SEARCH_DOMAINS=null;get SEARCH_DOMAINS(){return this._SEARCH_DOMAINS||=n.K.unwrapHtmlElt("search-domains")}_SEARCH_SUBMIT_BTN=null;get SEARCH_SUBMIT_BTN(){return this._SEARCH_SUBMIT_BTN||=n.K.unwrapHtmlElt("search-submit-btn")}_SEARCH_FORM=null;get SEARCH_FORM(){return this._SEARCH_FORM||=n.K.unwrapHtmlElt("searchForm")}_SEARCH_TABLE_CONTAINER=null;get SEARCH_TABLE_CONTAINER(){return this._SEARCH_TABLE_CONTAINER||=n.K.unwrapHtmlElt("search-table-container")}}class s{_FILTER_SYNTAX_RULES_CONTAINER=null;get FILTER_SYNTAX_RULES_CONTAINER(){return this._FILTER_SYNTAX_RULES_CONTAINER||=n.K.unwrapHtmlElt("filter-syntax-rules-container")}_ALL_CONTENT_CONTAINER=null;get ALL_CONTENT_CONTAINER(){return this._ALL_CONTENT_CONTAINER||=n.K.unwrapHtmlElt("all-content-container")}}const c=new class{HOME_PAGE;NAV_BAR;SEARCH_PAGE;FILTER_SYNTAX_PAGE;_BODY_FOOTER_CONTAINER=null;constructor(){this.HOME_PAGE=new a,this.NAV_BAR=new o,this.SEARCH_PAGE=new i,this.FILTER_SYNTAX_PAGE=new s}get BODY_FOOTER_CONTAINER(){return this._BODY_FOOTER_CONTAINER??=n.K.unwrapHtmlElt("body-footer-container")}}},667:(t,e,r)=>{r.d(e,{A:()=>l});var n=r(602),a=r(412);async function o(t,e){const r=t.transaction(e,"readwrite");r.objectStore(e).clear(),await r.done}const i={USER:"current-user",BATTLES:"battles",RAW_UPLOAD:"raw-upload",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",STATS:"stats",FILTER_STR:"filter-str"},s={GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},c={...i,...s,LANG:"lang",HERO_MANAGER:"hero-manager",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",ID_SEARCH_FLAG:"id-search",ARTIFACTS:"artifacts",ARTIFACTS_LOWERCASE_NAMES_MAP:"artifacts-lowercase-names-map",ARTIFACT_OBJECT_LIST:"artifact-object-list",HOME_PAGE_STATE:"home-page-state",INTER_PAGE_MANAGER:"inter-page-manager"};let u={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:{...c},MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:async()=>(0,n.P2)(u.consts.DB_NAME,u.consts.DB_VERSION,{upgrade(t){t.objectStoreNames.contains(u.consts.STORE_NAME)&&t.deleteObjectStore(u.consts.STORE_NAME),t.objectStoreNames.contains(u.consts.STORE_NAME)||t.createObjectStore(u.consts.STORE_NAME),t.objectStoreNames.contains(u.consts.META_STORE_NAME)||t.createObjectStore(u.consts.META_STORE_NAME)}}),get:async function(t){const e=await this.openDB(),r=await e.get(this.consts.STORE_NAME,t);if(null===r)return null;return await this.checkCacheTimeout(t)?r:null},cache:async function(t,e){const r=await this.openDB();await r.put(this.consts.STORE_NAME,e,t),await this.setTimestamp(t,Date.now())},delete:async function(t){const e=await this.openDB();await e.delete(this.consts.STORE_NAME,t),await this.deleteTimestamp(t)},deleteDB:async function(){await indexedDB.deleteDatabase(this.consts.DB_NAME)},getTimestamp:async function(t){const e=await this.openDB(),r=`${t+this.MetaKeys.TIMESTAMP}`;return await e.get(this.consts.META_STORE_NAME,r)??0},setTimestamp:async function(t,e){const r=await this.openDB(),n=`${t+this.MetaKeys.TIMESTAMP}`;await r.put(this.consts.META_STORE_NAME,e,n),await r.get(this.consts.META_STORE_NAME,n)},deleteTimestamp:async function(t){const e=await this.openDB(),r=`${t+this.MetaKeys.TIMESTAMP}`;await e.delete(this.consts.META_STORE_NAME,r)},clearData:async function(){const t=await this.openDB();await o(t,this.consts.STORE_NAME),await o(t,this.consts.META_STORE_NAME)},clearUserData:async function(){const t=Object.values(i);await Promise.all(t.map(t=>this.delete(t)))},clearUserLists:async function(){const t=Object.values(s);await Promise.all(t.map(t=>this.delete(t)))},clearSeasonData:async function(){await this.delete(c.SEASON_DETAILS)},checkCacheTimeout:async function(t){const e=await this.getTimestamp(t),r=Date.now();return!(!e||r-e>u.consts.CACHE_TIMEOUT)||(await this.delete(t),!1)},getFilterStr:async function(){return await this.get(u.Keys.FILTER_STR)},setFilterStr:async function(t){await this.cache(u.Keys.FILTER_STR,t)},getLang:async function(){return await this.get(u.Keys.LANG)??a.Yj.CODES.EN},setLang:async function(t){await this.cache(u.Keys.LANG,t)},getStats:async function(){return await this.get(u.Keys.STATS)},setStats:async function(t){await this.cache(c.STATS,t)}};const l=u},699:(t,e,r)=>{r.d(e,{H3:()=>y});var n=r(207),a=r(54),o=r(413),i=r(833);const s=new Set(["p1.picks","p2.picks","p1.prebans","p2.prebans","prebans"]),c={FIELD:"FIELD",RANGE:"RANGE",SET:"SET",INT:"INT",DATE:"DATE",BOOL:"BOOL",STRING:"STRING"};class u{}class l extends u{type=c.FIELD;rawString;extractFn;constructor(t){if(super(),this.rawString=t,!i.j[t])throw new Error("Invalid field");this.extractFn=i.j[t]}getData(){throw new Error("Not implemented for Field")}extractData(t){return this.extractFn(t)}asString(){return`${this.rawString}`}}class f extends u{rawString;constructor(t){super(),this.rawString=t}getData(){return this.data}extractData(t){throw new Error("Not implemented for Literals")}asString(){return`${this.fmtString}`}}class p extends f{type=c.STRING;fmtString;data;constructor(t,e,r=Object.values(o.xD)){super(t),t=a.A.trimSurroundingQuotes(t),this.data=this.processString(t,e,r),this.fmtString=this.data}processString(t,e,r){const n=(0,o.QV)(t,e,r);if(!n){const e=r.map(t=>t.parserType).join(", ");throw new a.A.ValidationError(`Invalid string literal: '${t}' ; could not be parsed as a valid instance of any of the following: [${e}]`)}return n}}class _ extends f{type=c.INT;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){const e=parseInt(t);if(isNaN(e))throw new a.A.ValidationError(`Invalid integer literal: '${t}'`);return e}}class E extends f{type=c.BOOL;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){if("true"===t)return!0;if("false"===t)return!1;throw new a.A.ValidationError(`Invalid boolean literal: '${t}'`)}}class d extends f{type=c.DATE;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){return a.A.parseDate(t)}}class S{start;end;endInclusive;constructor(t,e,r){this.start=t,this.end=e,this.endInclusive=r}has(t){return typeof t==typeof this.start&&(!(t<this.start)&&(!(t>this.end)&&(t!==this.end||this.endInclusive)))}includes(t){return this.has(t)}}const h=[t=>n.L.DATE_LITERAL_RE.test(t)?new d(t):null,t=>n.L.INT_LITERAL_RE.test(t)?new _(t):null];function A(t,e,r,n){let a=n(t),o=n(e);return null===a||null===o?null:new S(a.data,o.data,r)}class T extends f{type=c.RANGE;fmtString;data;constructor(t,e){super(t),this.fmtString=t,this.data=this.processString(t,e)}processString(t,e){const r=t.split("..."),n=r[0];let o="="===r[1].charAt(0);const i=r[1].slice(o?1:0);for(const t of h){const e=A(n,i,o,t);if(null!==e)return e}throw new a.A.ValidationError(`Invalid range literal: '${t}' ; ranges must be homogenous and of the format x...y or x...=y for the types: [Date, Integer]`)}}const m=[...h],g=(t,e,r)=>n.L.STRING_RE.test(t)?new p(t,e,r):null;class w extends f{type=c.SET;fmtString;data;constructor(t,e,r=Object.values(o.xD)){super(t),this.fmtString=t,this.data=this.processString(t,e,r)}processString(t,e,r){let n=a.A.tokenizeWithNestedEnclosures(t,",",1,!0);n=n.filter(t=>""!==t);const o=new Set;for(const i of n){let n=null;for(const t of m)if(n=t(i),n){o.add(n.data);break}if(!n){if(n=g(i,e,r),!n)throw new a.A.ValidationError(`Invalid set element: '${t}' ; could not be parsed as a valid instance of any of the following types: [Date, Integer, String]`);o.add(n.data)}}return this.fmtString=`{${Array.from(o).join(", ")}}`,o}}const y={StringLiteral:p,IntLiteral:_,BoolLiteral:E,DateLiteral:d,RangeLiteral:T,SetLiteral:w,Field:l,BaseEltTypes:c,FIELD_EXTRACT_FN_MAP:i.j,parseBaseElement:function(t,e){if(n.L.STRING_LITERAL_RE.test(t))return new p(t,e);if(n.L.INT_LITERAL_RE.test(t))return new _(t);if(n.L.BOOL_LITERAL_RE.test(t))return new E(t);if(n.L.DATE_LITERAL_RE.test(t))return new d(t);if(n.L.RANGE_LITERAL_RE.test(t))return new T(t,e);if(n.L.SET_LITERAL_RE.test(t))return new w(t,e);if(n.L.SEASON_LITERAL_RE.test(t))return new p(t,e,[o.xD.Season]);if(n.L.FIELD_WORD_LITERAL_RE.test(t))return new l(t);throw new a.A.ValidationError(`Invalid base element: '${t}' ; could not be parsed as a Field or Literal.`)},COLLECTION_FIELDS_SET:s}},706:(t,e,r)=>{r.d(e,{A:()=>b});var n,a,o,i,s,c,u,l,f=r(667),p=r(961),_=r(933),E=r(411),d=r(412);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach(function(e){T(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function T(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==S(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(S(t)+" is not iterable")}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=y(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function y(t,e){if(t){if("string"==typeof t)return R(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function v(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return L(u,"_invoke",function(r,n,a){var o,s,c,u=0,l=a||[],f=!1,p={p:0,n:0,v:t,a:_,f:_.bind(t,4),d:function(e,r){return o=e,s=0,c=t,p.n=r,i}};function _(r,n){for(s=r,c=n,e=0;!f&&u&&!a&&e<l.length;e++){var a,o=l[e],_=p.p,E=o[2];r>3?(a=E===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=_&&((a=r<2&&_<o[1])?(s=0,p.v=n,p.n=o[1]):_<E&&(a=r<3||o[0]>n||n>E)&&(o[4]=r,o[5]=n,p.n=E,s=0))}if(a||r>1)return i;throw f=!0,n}return function(a,l,E){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&_(l,E),s=l,c=E;(e=s<2?t:c)||!f;){o||(s?s<3?(s>1&&(p.n=-1),_(s,c)):p.n=c:p.v=c);try{if(u=2,o){if(s||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((e=(f=p.n<0)?c:r.call(n,p))!==i)break}catch(e){o=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(r,a,o),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][n]?e(e([][n]())):(L(e={},n,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,L(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,L(f,"constructor",u),L(u,"constructor",c),c.displayName="GeneratorFunction",L(u,a,"GeneratorFunction"),L(f),L(f,a,"Generator"),L(f,n,function(){return this}),L(f,"toString",function(){return"[object Generator]"}),(v=function(){return{w:o,m:p}})()}function L(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}L=function(t,e,r,n){if(e)a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var o=function(e,r){L(t,e,function(t){return this._invoke(e,r,t)})};o("next",0),o("throw",1),o("return",2)}},L(t,e,r,n)}function P(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function N(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){P(o,n,a,i,s,"next",t)}function s(t){P(o,n,a,i,s,"throw",t)}i(void 0)})}}const b={loaded_servers:new Set,getBattles:(l=N(v().m(function t(){var e,r,n,a;return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.get(f.A.Keys.BATTLES);case 1:if(n=e=t.v,!(r=null!==n)){t.n=2;break}r=void 0!==e;case 2:if(!r){t.n=3;break}a=e,t.n=4;break;case 3:a=null;case 4:return t.a(2,a)}},t)})),function(){return l.apply(this,arguments)}),removeBattles:(u=N(v().m(function t(){return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.delete(f.A.Keys.BATTLES);case 1:return t.n=2,f.A.delete(f.A.Keys.UPLOADED_BATTLES);case 2:return t.n=3,f.A.delete(f.A.Keys.FILTERED_BATTLES);case 3:case 4:return t.a(2)}},t)})),function(){return u.apply(this,arguments)}),removeFilteredBattles:(c=N(v().m(function t(){return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.delete(f.A.Keys.FILTERED_BATTLES);case 1:case 2:return t.a(2)}},t)})),function(){return c.apply(this,arguments)}),applyFilter:(s=N(v().m(function t(e){var r,n,a,o,i,s,c,u,l,p,_,d;return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:r=t.v,n=e.filter(function(t){return t instanceof E.Qo}),a=e.filter(function(t){return t instanceof E.y4}),o=Object.values(r),i=w(a);try{for(i.s();!(s=i.n()).done;)c=s.value,"Applying global filter: ".concat(c.asString()),u=o.length,o=c.call(o),r=Object.fromEntries(o.map(function(t){return[t["Seq Num"],t]})),"Filtered ".concat(u-o.length," out of ").concat(u,"; new total = ").concat(o.length)}catch(t){i.e(t)}finally{i.f()}l=w(n),t.p=2,_=v().m(function t(){var e,n;return v().w(function(t){for(;;)switch(t.n){case 0:e=p.value,"Applying local filter: ".concat(e.asString()),n=Object.keys(r).length,r=Object.fromEntries(Object.entries(r).filter(function(t){var r=g(t,2),n=(r[0],r[1]);return e.call(n)})),"Filtered ".concat(n-Object.keys(r).length," out of ").concat(n,"; new total = ").concat(Object.keys(r).length);case 1:return t.a(2)}},t)}),l.s();case 3:if((p=l.n()).done){t.n=5;break}return t.d(m(_()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,l.e(d);case 7:return t.p=7,l.f(),t.f(7);case 8:return"Caching filtered battles ; total = ".concat(Object.keys(r).length),t.n=9,f.A.cache(f.A.Keys.FILTERED_BATTLES,r);case 9:return"Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(n.length+a.length,"> filters"),t.a(2,r)}},t,this,[[2,6,7,8]])})),function(t){return s.apply(this,arguments)}),extendBattles:(i=N(v().m(function t(e){var r,n,a,o,i;return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.get(f.A.Keys.BATTLES);case 1:if(o=r=t.v,!(a=null!==o)){t.n=2;break}a=void 0!==r;case 2:if(!a){t.n=3;break}i=r,t.n=4;break;case 3:i={};case 4:return n=A(A({},i),this.sortBattlesObj(e)),t.n=5,f.A.cache(f.A.Keys.BATTLES,n);case 5:return t.a(2,n)}},t,this)})),function(t){return i.apply(this,arguments)}),cacheQuery:(o=N(v().m(function t(e,r,n){var a,o;return v().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,[]);case 1:return"Caching queried battles: ".concat(e.length," battles; modified [BATTLES];"),a=(0,_.d)(e,r,n),t.n=2,this.extendBattles(a);case 2:return o=t.v,t.a(2,o)}},t,this)})),function(t,e,r){return o.apply(this,arguments)}),cacheUpload:(a=N(v().m(function t(e,r){var n,a;return v().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.error("No uploaded battles provided to cacheUpload"),t.a(2,{});case 1:return n=(0,_.j)(e,r),t.n=2,f.A.cache(f.A.Keys.UPLOADED_BATTLES,n);case 2:return t.n=3,this.extendBattles(n);case 3:return a=t.v,t.a(2,a)}},t,this)})),function(t,e){return a.apply(this,arguments)}),getStats:(n=N(v().m(function t(e,r,n){var a,o,i,s,c,u,l,f,_,E;return v().w(function(t){for(;;)switch(t.n){case 0:return a=r.length,"Applying ".concat(a," filters"),o=Object.values(e),t.n=1,this.applyFilter(r);case 1:return i=t.v,s=Object.values(i),c=a>0,t.n=2,p.A.getPrebanStats(s,n);case 2:return u=t.v,t.n=3,p.A.getFirstPickStats(s,n);case 3:return l=t.v,t.n=4,p.A.getGeneralStats(s,n);case 4:return f=t.v,t.n=5,p.A.getHeroStats(s,n);case 5:return _=t.v,t.n=6,p.A.getPerformanceStats(s);case 6:return E=t.v,t.a(2,{battles:o,filteredBattlesObj:i,prebanStats:u,generalStats:f,firstPickStats:l,playerHeroStats:_.playerHeroStats,enemyHeroStats:_.enemyHeroStats,performanceStats:E,numFilters:a,areFiltersApplied:c})}},t,this)})),function(t,e,r){return n.apply(this,arguments)}),sortBattlesList:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=d.Lx.DATE_TIME;return e?t.sort(function(t,e){return new Date(t[r])-new Date(e[r])}):t.sort(function(t,e){return new Date(e[r])-new Date(t[r])})},sortBattlesObj:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=d.Lx.DATE_TIME;if(e){var n=Object.values(t).sort(function(t,e){return new Date(t[r])-new Date(e[r])});return Object.fromEntries(n.map(function(t){return[t[d.Lx.SEQ_NUM],t]}))}var a=Object.values(t).sort(function(t,e){return new Date(e[r])-new Date(t[r])});return Object.fromEntries(a.map(function(t){return[t[d.Lx.SEQ_NUM],t]}))}}},771:(t,e,r)=>{r.d(e,{A:()=>_,l:()=>c});var n=r(412),a=r(667),o=r(40),i=r(275);const s={[n.F7.GLOBAL]:a.A.Keys.GLOBAL_USERS,[n.F7.EU]:a.A.Keys.EU_USERS,[n.F7.ASIA]:a.A.Keys.ASIA_USERS,[n.F7.JPN]:a.A.Keys.JPN_USERS,[n.F7.KOR]:a.A.Keys.KOR_USERS};function c(t){if(!t)throw new Error("Invalid user; user is null or undefined");if(!("id"in t)||"number"!=typeof t.id)throw new Error("Invalid user; user.id does not exist or is not a number");if(!("name"in t)||"string"!=typeof t.name)throw new Error("Invalid user; user.name does not exist or is not a string");if(!("code"in t)||"string"!=typeof t.code)throw new Error("Invalid user; user.code does not exist or is not a string");if(!("rank"in t)||"number"!=typeof t.rank)throw new Error("Invalid user; user.rank does not exist or is not a number");if(!("world_code"in t)||"string"!=typeof t.world_code)throw new Error("Invalid user; user.world_code does not exist or is not a string");if(!(t.world_code in n.DB))throw new Error("Invalid user; user.world_code is not a valid world code");return!0}function u(t,e){return{id:Number(t.nick_no),name:t.nick_nm,code:t.code,rank:Number(t.rank),world_code:e}}async function l(t){const e=await a.A.get(s[t]);if(null!==e)return e;const r=await async function(t){const e=await o.A.fetchUserJSON(t);if(!e||"object"==typeof e&&!("users"in e))return null;const r=e;return Object.fromEntries(r.users.map(e=>[e.nick_no,u(e,t)]))}(t);return await a.A.cache(s[t],r),r}const f=t=>n.DB[t];async function p(t,e){const r=await l(e),n=r?Object.values(r):[];if(0===n.length)return f(e),{user:null,ok:!1};let a,o;if(t.id)a=t.id,o=t=>t.id;else{if(!t.name)throw new Error("Must pass a user object with either user.name or user.id to find user");a=t.name.toLowerCase(),o=t=>t.name.toLowerCase()}return function(t,e,r){const n=e.find(e=>r(e)===t);return n?(JSON.stringify(n),{user:n,ok:!0}):{user:null,ok:!0}}(a,n,o)}const _={getUserMap:l,findUser:async function(t){if(JSON.stringify(t),!t.name&&!t.id||!t.world_code)throw new Error("Must pass a user object with either user.name or user.id, and user.world_code to find user");let e=t.id?`Numeric ID: ${t.id}`:`Name: '${t.name}'`,r=null;if(r=await p(t,t.world_code),r.ok||(r=await i.A.fetchUser(t)),r.ok){const n=r.user;if(null===n)throw new Error(`Could not find user with ${e} in Server: ${f(t.world_code)}`);return n}throw new Error(`Function did not properly terminate: ${JSON.stringify(r)}`)},setUser:async function(t){await a.A.cache(a.A.Keys.USER,t)},getUser:async function(){return await a.A.get(a.A.Keys.USER)},clearUserData:async function(){await a.A.clearUserData()},clearUserDataLists:async function(){await a.A.clearUserLists()}}},823:(t,e,r)=>{r.d(e,{D:()=>n});var n={SELECT_DATA:"select-data",SHOW_STATS:"show-stats",LOAD_DATA:"load-data"}},833:(t,e,r)=>{r.d(e,{j:()=>a});var n=r(412);const a={date:t=>t[n.Lx.DATE_TIME]?new Date(`${t[n.Lx.DATE_TIME].slice(0,10)}T00:00:00`):"N/A",season:t=>t[n.Lx.SEASON_CODE],"is-first-pick":t=>!!t[n.Lx.FIRST_PICK],"is-win":t=>!!t[n.Lx.WIN],"victory-points":t=>t[n.Lx.P1_POINTS],"p1.picks":t=>t[n.Lx.P1_PICKS],"p2.picks":t=>t[n.Lx.P2_PICKS],"p1.prebans":t=>t[n.Lx.P1_PREBANS],"p2.prebans":t=>t[n.Lx.P2_PREBANS],"p1.postban":t=>t[n.Lx.P1_POSTBAN],"p2.postban":t=>t[n.Lx.P2_POSTBAN],prebans:t=>[...t[n.Lx.P1_PREBANS],...t[n.Lx.P2_PREBANS]],"p1.pick1":t=>t[n.Lx.P1_PICKS][0],"p1.pick2":t=>t[n.Lx.P1_PICKS][1],"p1.pick3":t=>t[n.Lx.P1_PICKS][2],"p1.pick4":t=>t[n.Lx.P1_PICKS][3],"p1.pick5":t=>t[n.Lx.P1_PICKS][4],"p2.pick1":t=>t[n.Lx.P2_PICKS][0],"p2.pick2":t=>t[n.Lx.P2_PICKS][1],"p2.pick3":t=>t[n.Lx.P2_PICKS][2],"p2.pick4":t=>t[n.Lx.P2_PICKS][3],"p2.pick5":t=>t[n.Lx.P2_PICKS][4],"p1.league":t=>t[n.Lx.P1_LEAGUE],"p2.league":t=>t[n.Lx.P2_LEAGUE],"p1.server":t=>t[n.Lx.P1_SERVER],"p2.server":t=>t[n.Lx.P2_SERVER],"p1.id":t=>Number(t[n.Lx.P1_ID]),"p2.id":t=>Number(t[n.Lx.P2_ID]),"p1.mvp":t=>t[n.Lx.P1_MVP],"p2.mvp":t=>t[n.Lx.P2_MVP],"is-first-turn":t=>!!t[n.Lx.FIRST_TURN],"first-turn-hero":t=>t[n.Lx.FIRST_TURN_HERO],turns:t=>t[n.Lx.TURNS],seconds:t=>t[n.Lx.SECONDS],"point-gain":t=>t[n.Lx.POINT_GAIN]}},834:(t,e,r)=>{r.d(e,{A:()=>i});var n=r(667),a=r(40),o=r(275);const i={async getArtifactCodeToNameMap(){let t=await n.A.get(n.A.Keys.ARTIFACTS);return t||(t=await this.fetchAndCacheArtifacts()),t},getArtifactLowercaseNameMap:async function(){let t=await n.A.get(n.A.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP);if(null!==t)return t;const e=await this.getArtifactCodeToNameMap();return t=Object.fromEntries(Object.values(e).filter(t=>null!==t).map(t=>[t.toLowerCase(),t])),await n.A.cache(n.A.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP,t),t},getArtifactObjectList:async function(){let t=await n.A.get(n.A.Keys.ARTIFACT_OBJECT_LIST);if(null!==t)return t;const e=await this.getArtifactCodeToNameMap();return t=Object.entries(e).map(([t,e])=>({id:t,name:e})),await n.A.cache(n.A.Keys.ARTIFACT_OBJECT_LIST,t),t},fetchAndCacheArtifacts:async function(){const t=await async function(){let t=await a.A.fetchArtifactJSON("en");return null===t&&(t=await o.A.fetchArtifactJson()),null===t?(console.error("Could not get artifact Json map from E7 server or flask server"),null):Object.fromEntries(t.filter(t=>null!==t.name).map(t=>[t.code,t.name]))}();return null===t?{}:(await n.A.cache(n.A.Keys.ARTIFACTS,t),t)},clearArtifactData:async function(){await n.A.delete(n.A.Keys.ARTIFACTS)},convertCodeToName:function(t,e){return e[t]||t}}},836:(t,e,r)=>{r.d(e,{n:()=>l});var n=r(528),a=r(706),o=r(205),i=r(667),s=r(771),c=r(834),u=r(149);let l={HeroManager:n.A,BattleManager:a.A,SeasonManager:o.A,UserManager:s.A,ClientCache:i.A,ArtifactManager:c.A,LangManager:u.W}},874:(t,e,r)=>{r.d(e,{Su:()=>h});var n=r(121),a=r(412),o=r(771),i=r(623),s=r(136),c=r(836),u=r(149),l=r(82);function f(){window.location.href=URL_UTILS.HOME_PAGE_URL}function p(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",async function(e){if(!("dataset"in t)||!t.dataset||"object"!=typeof t.dataset||!("nav"in t.dataset))return;const r=t.dataset.nav;if(Object.values(n.DG).includes(r))if(r===n.DG.SELECT_DATA)await n.qD.setState(n.DG.SELECT_DATA),f();else if(r===n.DG.SHOW_STATS){await o.A.getUser()?(await n.qD.setState(n.DG.SHOW_STATS),f()):(await n.qD.setState(n.DG.SELECT_DATA),await s.A.pushState({messages:["Active user not found; you must either query a valid user or upload battles to view hero stats."],actions:[s.A.ACTIONS.SHOW_NO_USER_MSG]}),f())}})})}function _(){i.A.NAV_BAR.CLEAR_DATA_BTN.addEventListener("click",async function(){await o.A.getUser()?(await n.qD.setState(n.DG.SELECT_DATA),await s.A.pushActions([s.A.ACTIONS.CLEAR_USER])):(await n.qD.setState(n.DG.SELECT_DATA),await s.A.pushActions([s.A.ACTIONS.SHOW_DATA_ALREADY_CLEARED_MSG])),f()})}function E(){[i.A.NAV_BAR.CLEAR_DATA_BTN,i.A.NAV_BAR.EXPORT_DATA_BTN,i.A.NAV_BAR.OFFICIAL_SITE_BTN].forEach(t=>{t.addEventListener("touchstart",()=>{t.classList.add("touch-hover"),setTimeout(()=>t.classList.remove("touch-hover"),150)})})}function d(t,e="en"){t?(i.A.NAV_BAR.USER_NAME.innerText=t.name,i.A.NAV_BAR.USER_ID.innerText=`${t.id}`,i.A.NAV_BAR.USER_SERVER.innerText=a.DB[t.world_code],i.A.NAV_BAR.OFFICIAL_SITE_BTN.onclick=()=>{window.open(function(t,e){const r=`${a.F4}/${e}/gg/battlerecord/${t.world_code}/${t.id}`;return r}(t,e),"_blank","noopener,noreferrer")}):(i.A.NAV_BAR.USER_NAME.innerText="(None)",i.A.NAV_BAR.USER_ID.innerText="(None)",i.A.NAV_BAR.USER_SERVER.innerText="(None)",i.A.NAV_BAR.OFFICIAL_SITE_BTN.onclick=()=>{window.open(a.W4,"_blank","noopener,noreferrer")})}function S(){i.A.NAV_BAR.EXPORT_DATA_BTN.addEventListener("click",async function(){if(!await c.n.UserManager.getUser())return await s.A.pushState({messages:["User not found; cannot export data without an active user"],actions:[s.A.ACTIONS.SHOW_NO_USER_MSG]}),await n.qD.setState(n.DG.SELECT_DATA),void f();await l.j.triggerDownload()})}let h={addNavListeners:p,addClearDataBtnListener:_,writeUserInfo:d,initialize:async function(){d(await o.A.getUser()),p(),_(),S(),E()},navToHome:f,addExportDataBtnListener:S,addBraceButtonListeners:E,eraseUserFromPage:async function(){await o.A.clearUserData(),d(null)},setUserOnPage:async function(t){await o.A.setUser(t),d(t,await u.W.getLang())}}},933:(t,e,r)=>{r.d(e,{d:()=>f,j:()=>p});var n=r(528),a=r(834),o=r(412),i=r(92);function s(t,e){const r=t=>n.A.getHeroByName(t,e)?.prime??e.Fodder.prime,a=(t,e)=>t*e;t[o.Lx.P1_PICKS_PRIMES]=t[o.Lx.P1_PICKS].map(r),t[o.Lx.P2_PICKS_PRIMES]=t[o.Lx.P2_PICKS].map(r),t[o.Lx.P1_PICKS_PRIME_PRODUCT]=t[o.Lx.P1_PICKS_PRIMES].reduce(a,1),t[o.Lx.P2_PICKS_PRIME_PRODUCT]=t[o.Lx.P2_PICKS_PRIMES].reduce(a,1),t[o.Lx.P1_PREBANS_PRIMES]=t[o.Lx.P1_PREBANS].map(r),t[o.Lx.P2_PREBANS_PRIMES]=t[o.Lx.P2_PREBANS].map(r),t[o.Lx.P1_PREBANS_PRIME_PRODUCT]=t[o.Lx.P1_PREBANS_PRIMES].reduce(a,1),t[o.Lx.P2_PREBANS_PRIME_PRODUCT]=t[o.Lx.P2_PREBANS_PRIMES].reduce(a,1)}const c="p1",u="p2";function l(t,e,r){const l=t=>n.A.getHeroByCode(t,e)?.name??e.Fodder.name,f=(e,n)=>n.map((n,o)=>n?(t=>a.A.convertCodeToName(t,r)||"None")(n):((e,r)=>e===c?t.p2_postban===t.p1_picks[r]:t.p1_postban===t.p2_picks[r])(e,o)?"n/a":"None");const p=t=>t.map(t=>t.map(t=>o.pg[t]||t)),_=t.cr_bar.find(t=>100===t[1]),E=!!_&&t.p1_picks.includes(_[0]),d={[o.Lx.SEASON]:t.season_name||"None",[o.Lx.SEASON_CODE]:t.season_code||"None",[o.Lx.DATE_TIME]:t.date_time,[o.Lx.SECONDS]:t.seconds,[o.Lx.TURNS]:t.turns,[o.Lx.SEQ_NUM]:t.seq_num,[o.Lx.P1_ID]:t.p1_id.toString(),[o.Lx.P1_SERVER]:o.DB[t.p1_server]||t.p1_server||"None",[o.Lx.P2_ID]:t.p2_id.toString(),[o.Lx.P2_SERVER]:o.DB[t.p2_server]||t.p2_server||"None",[o.Lx.P1_LEAGUE]:(0,i.S)(t.p1_league)||"None",[o.Lx.P2_LEAGUE]:(0,i.S)(t.p2_league)||"None",[o.Lx.P1_POINTS]:t.p1_win_score,[o.Lx.POINT_GAIN]:t.p1_point_delta||null,[o.Lx.WIN]:1===t.win,[o.Lx.FIRST_PICK]:1===t.first_pick,[o.Lx.FIRST_TURN]:!!E,[o.Lx.FIRST_TURN_HERO]:_?l(_[0]):"n/a",[o.Lx.CR_BAR]:(S=t.cr_bar,S.map(t=>t&&2==t.length?[l(t[0]),t[1]]:["n/a",0])),[o.Lx.P1_PREBANS]:t.p1_prebans.map(l),[o.Lx.P2_PREBANS]:t.p2_prebans.map(l),[o.Lx.P1_PICKS]:t.p1_picks.map(l),[o.Lx.P2_PICKS]:t.p2_picks.map(l),[o.Lx.P1_POSTBAN]:l(t.p1_postban),[o.Lx.P2_POSTBAN]:l(t.p2_postban),[o.Lx.P1_EQUIPMENT]:p(t.p1_equipment),[o.Lx.P2_EQUIPMENT]:p(t.p2_equipment),[o.Lx.P1_ARTIFACTS]:f(c,t.p1_artifacts),[o.Lx.P2_ARTIFACTS]:f(u,t.p2_artifacts),[o.Lx.P1_MVP]:l(t.p1_mvp),[o.Lx.P2_MVP]:l(t.p2_mvp)};var S;return s(d,e),d}function f(t,e,r){r=r??a.A.getArtifactCodeToNameMap();let n=[];for(const a of t){let t=l(a,e,r);n.push([t["Seq Num"],t])}return Object.fromEntries(n)}function p(t,e){const r=t.map(t=>{const r=(n=t,Object.fromEntries(Object.entries(n).map(([t,e])=>[t,JSON.parse(e)])));var n;return s(r,e),r});return Object.fromEntries(r.map(t=>[t[o.Lx.SEQ_NUM],t]))}},940:(t,e,r)=>{r.d(e,{A:()=>f});var n,a,o=r(528),i=r(84),s=r(172);function c(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof s?n:s,l=Object.create(c.prototype);return u(l,"_invoke",function(r,n,a){var o,s,c,u=0,l=a||[],f=!1,p={p:0,n:0,v:t,a:_,f:_.bind(t,4),d:function(e,r){return o=e,s=0,c=t,p.n=r,i}};function _(r,n){for(s=r,c=n,e=0;!f&&u&&!a&&e<l.length;e++){var a,o=l[e],_=p.p,E=o[2];r>3?(a=E===n)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=_&&((a=r<2&&_<o[1])?(s=0,p.v=n,p.n=o[1]):_<E&&(a=r<3||o[0]>n||n>E)&&(o[4]=r,o[5]=n,p.n=E,s=0))}if(a||r>1)return i;throw f=!0,n}return function(a,l,E){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&_(l,E),s=l,c=E;(e=s<2?t:c)||!f;){o||(s?s<3?(s>1&&(p.n=-1),_(s,c)):p.n=c:p.v=c);try{if(u=2,o){if(s||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((e=(f=p.n<0)?c:r.call(n,p))!==i)break}catch(e){o=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(r,a,o),!0),l}var i={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][n]?e(e([][n]())):(u(e={},n,function(){return this}),e),_=f.prototype=s.prototype=Object.create(p);function E(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t}return l.prototype=f,u(_,"constructor",f),u(f,"constructor",l),l.displayName="GeneratorFunction",u(f,a,"GeneratorFunction"),u(_),u(_,a,"Generator"),u(_,n,function(){return this}),u(_,"toString",function(){return"[object Generator]"}),(c=function(){return{w:o,m:E}})()}function u(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}u=function(t,e,r,n){if(e)a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var o=function(e,r){u(t,e,function(t){return this._invoke(e,r,t)})};o("next",0),o("throw",1),o("return",2)}},u(t,e,r,n)}function l(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}const f={validateFilterSyntax:(n=c().m(function t(e){var r,n,a;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,o.A.getHeroDicts();case 1:return r=t.v,n=document.getElementById("filterMSG"),t.p=2,t.n=3,i.S.fromFilterStr(e,r);case 3:return t.v.asString(),s.GF.write(new s.ev("Validation Passed",n,[s.GF.STYLES.GREEN])),t.a(2,!0);case 4:return t.p=4,a=t.v,console.error(a),s.GF.write(new s.ev("Validation Failed: ".concat(a.message),n,[s.GF.STYLES.RED])),t.a(2,!1)}},t,null,[[2,4]])}),a=function(){var t=this,e=arguments;return new Promise(function(r,a){var o=n.apply(t,e);function i(t){l(o,r,a,i,s,"next",t)}function s(t){l(o,r,a,i,s,"throw",t)}i(void 0)})},function(t){return a.apply(this,arguments)}),setScrollPercent:function(t){"Scrolling to ".concat(t,"%");var e=t/100*(document.documentElement.scrollHeight-window.innerHeight),r=document.documentElement,n=r.style.scrollBehavior;r.style.scrollBehavior="auto",window.scrollTo({top:e}),r.style.scrollBehavior=n},getScrollPercent:function(){var t=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight;return 0===e?0:t/e*100},setVisibility:function(t,e){e?t.classList.remove("d-none"):t.classList.add("d-none")}}},961:(t,e,r)=>{r.d(e,{A:()=>T});var n=r(528),a=r(412);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=l(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){s=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var p=function(t){return t.filter(function(t){return t[a.Lx.FIRST_PICK]})};function _(t){return(100*t).toFixed(2)+"%"}function E(t,e){return _(0!==e?t/e:0)}function d(t,e){var r=t[a.Lx.CR_BAR].find(function(t){return t[0]===e});return r?r[1]:null}function S(t,e,r){var n,o,i=function(t){return t.filter(function(t){return t[a.Lx.WIN]})}(t).length,s=t.length,l=0!==e?s/e:0,f=0!==s?i/s:0,p=t.reduce(function(t,e){return t+(e[a.Lx.P1_POSTBAN]===r||e[a.Lx.P2_POSTBAN]===r)},0),S=t.reduce(function(t,e){return t+(e[a.Lx.WIN]||e[a.Lx.P1_POSTBAN]===r||e[a.Lx.P2_POSTBAN]===r)},0),h=t.reduce(function(t,e){return t+e[a.Lx.POINT_GAIN]},0),A=0,T=0,m=0,g=u(t);try{for(g.s();!(o=g.n()).done;){var w=d(o.value,r);null!==w&&0!==w&&(A+=1,T+=w,100===w&&(m+=1))}}catch(t){g.e(t)}finally{g.f()}var y=E(T/100,A);return c(c(c(c(c(c(c(c(c(c(n={},a.D5.HERO_NAME,r),a.D5.BATTLES,s),a.D5.PICK_RATE,_(l)),a.D5.WINS,i),a.D5.WIN_RATE,_(f)),a.D5.POSTBANS,p),a.D5.POSTBAN_RATE,E(p,s)),a.D5.SUCCESS_RATE,E(S,s)),a.D5.PLUS_MINUS,2*i-s),a.D5.POINT_GAIN,h),c(c(c(n,a.D5.AVG_CR,y),a.D5.FIRST_TURNS,m),a.D5.FIRST_TURN_RATE,E(m,A))}function h(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new Set,n=0,o=Object.values(t);n<o.length;n++){var i=o[n];(e?i[a.Lx.P1_PICKS_PRIMES]:i[a.Lx.P2_PICKS_PRIMES]).forEach(function(t){r.add(t)})}return r}function A(t){var e=Math.floor(t/60),r=(t%60).toFixed(1);return 0===e?"".concat(r," secs"):"".concat(e," : ").concat(r,"s")}const T={getHeroStats:function(t,e){if(0===t.length)return{playerHeroStats:[],enemyHeroStats:[]};var r,o=t.length,i=h(t,!0),s=h(t,!1),c=[],l=[],f=u(i);try{var p=function(){var i=r.value,s=n.A.getHeroByPrime(i,e),u=t.filter(function(t){return t[a.Lx.P1_PICKS_PRIME_PRODUCT]%i===0});u.length>0&&c.push(S(u,o,s.name))};for(f.s();!(r=f.n()).done;)p()}catch(t){f.e(t)}finally{f.f()}var _,E=u(s);try{var d=function(){var r=_.value,i=n.A.getHeroByPrime(r,e),s=t.filter(function(t){return t[a.Lx.P2_PICKS_PRIME_PRODUCT]%r===0});s.length>0&&l.push(S(s,o,i.name))};for(E.s();!(_=E.n()).done;)d()}catch(t){E.e(t)}finally{E.f()}var A=a.D5.HERO_NAME;return{playerHeroStats:c.sort(function(t,e){return t[A].localeCompare(e[A])}),enemyHeroStats:l.sort(function(t,e){return t[A].localeCompare(e[A])})}},getFirstPickStats:function(t,e){if(0===(t=p(Object.values(t))).length)return[];var r,o=t.length,i={},c=u(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(0!==l[a.Lx.P1_PICKS_PRIMES].length){var f=l[a.Lx.P1_PICKS_PRIMES][0];f in i||(i[f]={wins:0,appearances:0}),i[f].wins+=l[a.Lx.WIN],i[f].appearances+=1}}}catch(t){c.e(t)}finally{c.f()}var E=Object.entries(i).map(function(t){var r=s(t,2),a=r[0],i=r[1];return{hero:n.A.getHeroByPrime(a,e).name,wins:i.wins,appearances:i.appearances,win_rate:_(i.wins/i.appearances),appearance_rate:_(i.appearances/o),"+/-":2*i.wins-i.appearances}});return E.sort(function(t,e){return e.appearances-t.appearances}),E},getPrebanStats:function(t,e){var r=n.A.getHeroByName(n.A.EMPTY_NAME,e).prime;if(0===t.length)return[];var o,s=function(e,n){return i(new Set(t.map(function(t){return t[e][n]}).filter(function(t){return t&&t!==r})))},c=s(a.Lx.P1_PREBANS_PRIMES,0),l=s(a.Lx.P1_PREBANS_PRIMES,1),f=new Set([].concat(i(c),i(l))),p=[],E=u(f);try{for(E.s();!(o=E.n()).done;){var d=o.value;p.push(d)}}catch(t){E.e(t)}finally{E.f()}var S,h=u(f);try{for(h.s();!(S=h.n()).done;){var A,T=S.value,m=u(f);try{for(m.s();!(A=m.n()).done;){var g=A.value;T<g&&p.push(T*g)}}catch(t){m.e(t)}finally{m.f()}}}catch(t){h.e(t)}finally{h.f()}for(var w=t.length,y=[],R=function(){var r=L[v],n=t.filter(function(t){return t["P1 Prebans Prime Product"]%r===0}),a=n.length;if(a<1)return 1;var o=n.reduce(function(t,e){return t+e.Win},0),i=w>0?a/w:0,s=a>0?o/a:0,c=2*o-a;y.push({preban:e.prime_pair_lookup[r],wins:o,appearances:a,appearance_rate:_(i),win_rate:_(s),"+/-":c})},v=0,L=p;v<L.length;v++)R();return y.sort(function(t,e){return e.appearances-t.appearances}),y},getPerformanceStats:function(t){var e,r={servers:[],leagues:[]},n=t.length,o=Object.values(a.DB),c=Object.values(a.yR),l=u([].concat(i(o.map(function(t){return["Server: ".concat(t),function(e){return e["P2 Server"]===t}]})),i(c.map(function(t){return["League: ".concat(t),function(e){return e["P2 League"]===t}]}))));try{for(l.s();!(e=l.n()).done;){var f=s(e.value,2),p=f[0],E=f[1],d=t.filter(E);if(0!==d.length){var S=d.length,h=d.reduce(function(t,e){return t+e.Win},0),A=S>0?h/S:"N/A",T=n>0?S/n:"N/A",m=d.filter(function(t){return t["First Pick"]}),g=m.reduce(function(t,e){return t+e.Win},0),w=d.filter(function(t){return!t["First Pick"]}),y=w.reduce(function(t,e){return t+e.Win},0);(p.toLowerCase().includes("server")?r.servers:r.leagues).push({label:p,count:S,wins:h,win_rate:"N/A"===A?"N/A":_(A),frequency:_(T),"+/-":2*h-S,fp_games:m.length,sp_games:w.length,fp_wr:m.length>0?_(g/m.length):"N/A",sp_wr:w.length>0?_(y/w.length):"N/A"})}}}catch(t){l.e(t)}finally{l.f()}return[].concat(i(r.servers),i(r.leagues.slice(-4)))},getGeneralStats:function(t,e){t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var r,n=t.length,o=t.reduce(function(t,e){return t+e["Point Gain"]},0),s=n>0?o/n:0,c=t.reduce(function(t,e){return t+e.Turns},0),l=n>0?c/n:0,f=t.length>0?Math.max.apply(Math,i(t.map(function(t){return t.Turns}))):0,E=t.reduce(function(t,e){return t+e.Seconds},0),d=n>0?E/n:0,S=t.length>0?Math.max.apply(Math,i(t.map(function(t){return t.Seconds}))):0,h=A(d),T=A(S),m=t.reduce(function(t,e){return t+e["First Turn"]},0),g=p(t),w=function(t){return t.filter(function(t){return!t[a.Lx.FIRST_PICK]})}(t),y=g.length,R=w.length,v=g.reduce(function(t,e){return t+e.Win},0),L=w.reduce(function(t,e){return t+e.Win},0),P=n?y/n:0,N=n?R/n:0,b=y?v/y:0,O=R?L/R:0,I=n?(v+L)/n:0,D=0,C=0,x=0,F=0,B=u(t);try{for(B.s();!(r=B.n()).done;){r.value.Win?(x+=1,D=Math.max(D,x),F=0):(x=0,F+=1,C=Math.max(C,F))}}catch(t){B.e(t)}finally{B.f()}var M="N/A";return{first_pick_count:y,second_pick_count:R,first_pick_rate:y?_(P):M,second_pick_rate:R?_(N):M,first_pick_winrate:y?_(b):M,second_pick_winrate:R?_(O):M,total_winrate:n?_(I):M,total_battles:n,total_wins:v+L,max_win_streak:D,max_loss_streak:C,avg_ppg:s.toFixed(2),avg_turns:l.toFixed(2),avg_time:h,max_turns:f,max_time:T,first_turn_games:m,first_turn_rate:n?_(m/n):M}}}},971:(t,e,r)=>{r.d(e,{Nk:()=>i,RG:()=>o,yL:()=>a});var n=r(412);const a=new Set("'\"(),_-.=; ><!1234567890{}~abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),o="   ",i=Object.fromEntries(Object.values(n.pg).map(t=>[t.toLowerCase(),t]))}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return o[t](r,r.exports,s),r.exports}t="function"==typeof Symbol,e=t?Symbol("webpack queues"):"__webpack_queues__",r=t?Symbol("webpack exports"):"__webpack_exports__",n=t?Symbol("webpack error"):"__webpack_error__",a=t=>{t&&t.d<1&&(t.d=1,t.forEach(t=>t.r--),t.forEach(t=>t.r--?t.r++:t()))},s.a=(t,o,i)=>{var s;i&&((s=[]).d=-1);var c,u,l,f=new Set,p=t.exports,_=new Promise((t,e)=>{l=e,u=t});_[r]=p,_[e]=t=>(s&&t(s),f.forEach(t),_.catch(t=>{})),t.exports=_,o(t=>{var o;c=(t=>t.map(t=>{if(null!==t&&"object"==typeof t){if(t[e])return t;if(t.then){var o=[];o.d=0,t.then(t=>{i[r]=t,a(o)},t=>{i[n]=t,a(o)});var i={};return i[e]=t=>t(o),i}}var s={};return s[e]=t=>{},s[r]=t,s}))(t);var i=()=>c.map(t=>{if(t[n])throw t[n];return t[r]}),u=new Promise(t=>{(o=()=>t(i)).r=0;var r=t=>t!==s&&!f.has(t)&&(f.add(t),t&&!t.d&&(o.r++,t.push(o)));c.map(t=>t[e](r))});return o.r?u:i()},t=>(t?l(_[n]=t):u(p),a(s))),s&&s.d<0&&(s.d=0)},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);s(593)})();