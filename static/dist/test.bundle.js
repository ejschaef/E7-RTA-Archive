/*! For license information please see test.bundle.js.LICENSE.txt */
(()=>{"use strict";var t=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),e={world_global:"Global",world_kor:"Korea",world_jpn:"Japan",world_asia:"Asia",world_eu:"Europe"},n=864e5,r={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},o=function(t){for(var e=new Uint8Array(30001),n=[],r=2;r<=t;r++)if(!e[r]){n.push(r);for(var o=r*r;o<=t;o+=r)e[o]=1}return n}(3e4);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return u(l,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),l}var i={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(u(e={},r,function(){return this}),e),d=f.prototype=s.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,u(d,"constructor",f),u(f,"constructor",l),l.displayName="GeneratorFunction",u(f,o,"GeneratorFunction"),u(d),u(d,o,"Generator"),u(d,r,function(){return this}),u(d,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:h}})()}function u(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}u=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){u(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},u(t,e,n,r)}function s(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){s(a,r,o,i,c,"next",t)}function c(t){s(a,r,o,i,c,"throw",t)}i(void 0)})}}function f(t){return p.apply(this,arguments)}function p(){return(p=l(c().m(function t(e){var n,r,o;return c().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error: status: ".concat(n.status));case 2:return t.n=3,n.json();case 3:return r=t.v,console.log("Fetched data from E7 Server; keys:",Object.keys(r)),t.a(2,r);case 4:return t.p=4,o=t.v,console.error("Error fetching global user data:",o),t.a(2,null)}},t,null,[[0,4]])}))).apply(this,arguments)}function d(){return d=l(c().m(function t(){var e,n,r=arguments;return c().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,f("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find hero data for language:",e),n=null),t.a(2,n)}},t)})),d.apply(this,arguments)}function h(){return(h=l(c().m(function e(n){var r,o;return c().w(function(e){for(;;)switch(e.n){case 0:if(n=n.replace("world_",""),a(t).some(function(t){return t.replace("world_","")===n})){e.n=1;break}return console.error("Could not find world code: ".concat(n)),e.a(2,null);case 1:return console.log("Fetching users for world code: ".concat(n," from E7 Server...")),r="https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_".concat(n,".json"),e.n=2,f(r);case 2:return(o=e.v)&&console.log("Got user data for world: ".concat(n," ; Found ").concat(o.users.length," users")),e.a(2,o)}},e)}))).apply(this,arguments)}const y={fetchHeroJSON:function(){return d.apply(this,arguments)},fetchUserJSON:function(t){return h.apply(this,arguments)}};function v(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return g(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(g(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,g(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,g(f,"constructor",s),g(s,"constructor",u),u.displayName="GeneratorFunction",g(s,o,"GeneratorFunction"),g(f),g(f,o,"Generator"),g(f,r,function(){return this}),g(f,"toString",function(){return"[object Generator]"}),(v=function(){return{w:a,m:p}})()}function g(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}g=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){g(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},g(t,e,n,r)}function m(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,c,"next",t)}function c(t){m(a,r,o,i,c,"throw",t)}i(void 0)})}}var w,S,P,E,_,T,k;const O={test:function(t){console.log("Got data in test:",t.rank_plot)},fetchFromPython:(k=b(v().m(function t(e){var n,r;return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=3;break}return console.log("Retrying Fetch..."),t.n=2,fetch(e);case 2:n=t.v;case 3:return t.n=4,n.json();case 4:return r=t.v,t.a(2,r||null)}},t)})),function(t){return k.apply(this,arguments)}),fetchHeroData:(T=b(v().m(function t(){return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},t,this)})),function(){return T.apply(this,arguments)}),fetchBattleData:(_=b(v().m(function t(e){return v().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return _.apply(this,arguments)}),rsFetchBattleData:(E=b(v().m(function t(e){return v().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return E.apply(this,arguments)}),fetchSeasonDetails:(P=b(v().m(function t(){var e,n,r;return v().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.seasonDetails),t.a(2,{seasonDetails:r,error:!1});case 3:return t.a(2,{seasonDetails:null,error:n.error});case 4:return t.a(2)}},t)})),function(){return P.apply(this,arguments)}),fetchUser:(S=b(v().m(function t(e){var n,r,o,a,i;return v().w(function(t){for(;;)switch(t.n){case 0:if(e.name&&e.world_code||e.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:e})});case 2:return n=t.v,t.n=3,n.json();case 3:if(r=t.v,t.p=4,!n.ok){t.n=9;break}if(r.foundUser){t.n=7;break}if(!e.name){t.n=5;break}return o=e.world_code.replace("world_",""),t.a(2,{user:null,error:'Could not find user: "'.concat(e.name,'" in world_code: ').concat(o)});case 5:if(!e.id){t.n=6;break}return t.a(2,{user:null,error:"Could not find user with ID: ".concat(e.id)});case 6:t.n=8;break;case 7:return a=r.user,console.log("Server communication successful; received response data for user"),console.log("Found user: ".concat(JSON.stringify(a))),t.a(2,{user:a,error:!1});case 8:t.n=10;break;case 9:return console.log("Server communication unsuccessful"),t.a(2,{user:null,error:r.error});case 10:t.n=12;break;case 11:return t.p=11,i=t.v,console.error("Error fetching and caching user: ".concat(i)),t.a(2,{user:null,error:i.message});case 12:return t.a(2)}},t,null,[[4,11]])})),function(t){return S.apply(this,arguments)}),fetchDataFromID:(w=b(v().m(function t(e){return v().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass ID to fetch user");case 1:return t.n=2,fetch("/api/get_battle_data_from_id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return w.apply(this,arguments)})},A=(t,e)=>e.some(e=>t instanceof e);let D,I;const j=new WeakMap,L=new WeakMap,R=new WeakMap;let x={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return j.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function F(t){x=t(x)}function N(t){return"function"==typeof t?(e=t,(I||(I=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(B(this),t),M(this.request)}:function(...t){return M(e.apply(B(this),t))}):(t instanceof IDBTransaction&&function(t){if(j.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});j.set(t,e)}(t),A(t,D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,x):t);var e}function M(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(M(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return R.set(e,t),e}(t);if(L.has(t))return L.get(t);const e=N(t);return e!==t&&(L.set(t,e),R.set(e,t)),e}const B=t=>R.get(t);function G(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),c=M(i);return r&&i.addEventListener("upgradeneeded",t=>{r(M(i.result),t.oldVersion,t.newVersion,M(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const C=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],V=new Map;function H(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(V.get(e))return V.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=U.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!C.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return V.set(e,a),a}F(t=>({...t,get:(e,n,r)=>H(e,n)||t.get(e,n,r),has:(e,n)=>!!H(e,n)||t.has(e,n)}));const K=["continue","continuePrimaryKey","advance"],W={},q=new WeakMap,Y=new WeakMap,z={get(t,e){if(!K.includes(e))return t[e];let n=W[e];return n||(n=W[e]=function(...t){q.set(this,Y.get(this)[e](...t))}),n}};async function*J(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,z);for(Y.set(n,e),R.set(n,B(e));e;)yield n,e=await(q.get(n)||e.continue()),q.delete(n)}function X(t,e){return e===Symbol.asyncIterator&&A(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&A(t,[IDBIndex,IDBObjectStore])}function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function Q(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Z(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Z(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Z(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Z(f,"constructor",s),Z(s,"constructor",u),u.displayName="GeneratorFunction",Z(s,o,"GeneratorFunction"),Z(f),Z(f,o,"Generator"),Z(f,r,function(){return this}),Z(f,"toString",function(){return"[object Generator]"}),(Q=function(){return{w:a,m:p}})()}function Z(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Z=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Z(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Z(t,e,n,r)}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function et(t,e,n){return(e=function(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function rt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){nt(a,r,o,i,c,"next",t)}function c(t){nt(a,r,o,i,c,"throw",t)}i(void 0)})}}function ot(t,e){return at.apply(this,arguments)}function at(){return(at=rt(Q().m(function t(e,n){var r;return Q().w(function(t){for(;;)switch(t.n){case 0:return(r=e.transaction(n,"readwrite")).objectStore(n).clear(),t.n=1,r.done;case 1:return t.a(2)}},t)}))).apply(this,arguments)}F(t=>({...t,get:(e,n,r)=>X(e,n)?J:t.get(e,n,r),has:(e,n)=>X(e,n)||t.has(e,n)}));var it,ct,ut,st,lt,ft,pt,dt,ht,yt,vt,gt,mt,bt,wt,St,Pt,Et,_t={USER:"current-user",HERO_MANAGER:"hero-manager",BATTLES:"battles",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",FILTER_STR:"filter-str",STATS:"stats",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},Tt={autoZoom:_t.AUTO_ZOOM_FLAG,autoQuery:_t.AUTO_QUERY_FLAG},kt={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach(function(e){et(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},_t),MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:(Et=rt(Q().m(function t(){return Q().w(function(t){for(;;)if(0===t.n)return t.a(2,G(kt.consts.DB_NAME,kt.consts.DB_VERSION,{upgrade:function(t){t.objectStoreNames.contains(kt.consts.STORE_NAME)&&(t.deleteObjectStore(kt.consts.STORE_NAME),console.log("Old store deleted")),t.objectStoreNames.contains(kt.consts.STORE_NAME)||(console.log("Created data store"),t.createObjectStore(kt.consts.STORE_NAME)),t.objectStoreNames.contains(kt.consts.META_STORE_NAME)||(console.log("Created meta data store"),t.createObjectStore(kt.consts.META_STORE_NAME))}}))},t)})),function(){return Et.apply(this,arguments)}),get:(Pt=rt(Q().m(function t(e){var n,r;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.get(this.consts.STORE_NAME,e);case 2:if(null===(r=t.v)){t.n=3;break}console.log("Found ".concat(e," in cache")),t.n=4;break;case 3:return console.log("".concat(e," not found in cache; returning null")),t.a(2,null);case 4:return t.n=5,this.checkCacheTimeout(e);case 5:if(!t.v){t.n=6;break}return console.log("Timeout not reached, using cache for ".concat(e)),t.a(2,r);case 6:return console.log("Timeout reached, returning null for ".concat(e)),t.a(2,null);case 7:return t.a(2)}},t,this)})),function(t){return Pt.apply(this,arguments)}),cache:(St=rt(Q().m(function t(e,n){var r;return Q().w(function(t){for(;;)switch(t.n){case 0:return console.log("Caching ".concat(e," with data: ").concat(n)),t.n=1,this.openDB();case 1:return r=t.v,t.n=2,r.put(this.consts.STORE_NAME,n,e);case 2:return t.n=3,this.setTimestamp(e,Date.now());case 3:return t.a(2)}},t,this)})),function(t,e){return St.apply(this,arguments)}),delete:(wt=rt(Q().m(function t(e){var n;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.delete(this.consts.STORE_NAME,e);case 2:return t.n=3,this.deleteTimestamp(e);case 3:return t.a(2)}},t,this)})),function(t){return wt.apply(this,arguments)}),deleteDB:(bt=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,indexedDB.deleteDatabase(this.consts.DB_NAME);case 1:console.log("Database deleted");case 2:return t.a(2)}},t,this)})),function(){return bt.apply(this,arguments)}),getTimestamp:(mt=rt(Q().m(function t(e){var n,r,o;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.get(this.consts.META_STORE_NAME,r);case 2:return o=t.v,t.a(2,null!=o?o:null)}},t,this)})),function(t){return mt.apply(this,arguments)}),setTimestamp:(gt=rt(Q().m(function t(e,n){var r,o,a;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return r=t.v,o="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,r.put(this.consts.META_STORE_NAME,n,o);case 2:return t.n=3,r.get(this.consts.META_STORE_NAME,o);case 3:a=t.v,console.log("Timestamp set: ".concat(a));case 4:return t.a(2)}},t,this)})),function(t,e){return gt.apply(this,arguments)}),deleteTimestamp:(vt=rt(Q().m(function t(e){var n,r;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.delete(this.consts.META_STORE_NAME,r);case 2:console.log("Timestamp deleted for <".concat(e,">"));case 3:return t.a(2)}},t,this)})),function(t){return vt.apply(this,arguments)}),clearData:(yt=rt(Q().m(function t(){var e;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return e=t.v,t.n=2,ot(e,this.consts.STORE_NAME);case 2:return t.n=3,ot(e,this.consts.META_STORE_NAME);case 3:console.log("All data cleared from data cache and meta data cache");case 4:return t.a(2)}},t,this)})),function(){return yt.apply(this,arguments)}),clearUserData:(ht=rt(Q().m(function t(){var e,n=this;return Q().w(function(t){for(;;)switch(t.n){case 0:return e=[_t.USER,_t.BATTLES,_t.UPLOADED_BATTLES,_t.FILTERED_BATTLES,_t.FILTER_STR,_t.STATS],t.n=1,Promise.all(e.map(function(t){return n.delete(t)}));case 1:console.log("User data cleared from data cache");case 2:return t.a(2)}},t)})),function(){return ht.apply(this,arguments)}),clearSeasonData:(dt=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.delete(_t.SEASON_DETAILS);case 1:console.log("Season data cleared from data cache");case 2:return t.a(2)}},t,this)})),function(){return dt.apply(this,arguments)}),checkCacheTimeout:(pt=rt(Q().m(function t(e){var n,r;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getTimestamp(e);case 1:if(n=t.v,r=Date.now(),console.log("Checking Timeout for <".concat(e,"> | Current time: ").concat(r,", cache timestamp: ").concat(n,", difference: ").concat(r-n," ms")),n&&!(r-n>kt.consts.CACHE_TIMEOUT)){t.n=3;break}return console.log("Cache timeout reached, clearing data from <".concat(e,">")),t.n=2,this.delete(e);case 2:return t.a(2,!1);case 3:return t.a(2,!0)}},t,this)})),function(t){return pt.apply(this,arguments)}),getFilterStr:(ft=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(kt.Keys.FILTER_STR);case 1:return t.a(2,t.v)}},t,this)})),function(){return ft.apply(this,arguments)}),setFilterStr:(lt=rt(Q().m(function t(e){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(kt.Keys.FILTER_STR,e);case 1:return t.a(2)}},t,this)})),function(t){return lt.apply(this,arguments)}),getStats:(st=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(kt.Keys.STATS);case 1:return t.a(2,t.v)}},t,this)})),function(){return st.apply(this,arguments)}),setStats:(ut=rt(Q().m(function t(e){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(_t.STATS,e);case 1:return t.a(2)}},t,this)})),function(t){return ut.apply(this,arguments)}),getFlag:(ct=rt(Q().m(function t(e){var n;return Q().w(function(t){for(;;)switch(t.n){case 0:if(n=Tt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.get(n);case 2:return t.a(2,t.v)}},t,this)})),function(t){return ct.apply(this,arguments)}),setFlag:(it=rt(Q().m(function t(e,n){var r;return Q().w(function(t){for(;;)switch(t.n){case 0:if(r=Tt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.cache(r,n);case 2:return t.a(2)}},t,this)})),function(t,e){return it.apply(this,arguments)})};const Ot=kt;function At(t){var e={};for(var n in t)Array.isArray(t[n])&&t[n].length>0?e[n]=[t[n][0],"Length: ".concat(t[n].length)]:e[n]=t[n];console.log(e)}function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||It(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(t,e){if(t){if("string"==typeof t)return jt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Lt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Rt(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Rt(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Rt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Rt(f,"constructor",s),Rt(s,"constructor",u),u.displayName="GeneratorFunction",Rt(s,o,"GeneratorFunction"),Rt(f),Rt(f,o,"Generator"),Rt(f,r,function(){return this}),Rt(f,"toString",function(){return"[object Generator]"}),(Lt=function(){return{w:a,m:p}})()}function Rt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Rt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Rt(t,e,n,r)}function xt(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ft(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){xt(a,r,o,i,c,"next",t)}function c(t){xt(a,r,o,i,c,"throw",t)}i(void 0)})}}var Nt,Mt,Bt,Gt,Ct={getHeroManager:(Gt=Ft(Lt().m(function t(){var e,n,r,o;return Lt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.get(Ot.Keys.HERO_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=this.fetchAndCacheHeroManager();case 4:return t.a(2,o)}},t,this)})),function(){return Gt.apply(this,arguments)}),createHeroManager:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=It(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Dt(e.value,2),a=r[0],i=r[1],c=o[a];i.prime=c}}catch(t){n.e(t)}finally{n.f()}var u={heroes:t};return u=function(t){console.log("Adding Lookup Dicts"),console.log("\tAdding name lookup"),t.name_lookup=t.heroes.reduce(function(t,e){return t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t},{}),console.log("\tAdding prime lookup"),t.prime_lookup=t.heroes.reduce(function(t,e){return t[e.prime]=e,t},{}),console.log("\tAdding code lookup"),t.code_lookup=t.heroes.reduce(function(t,e){return t[e.code]=e,t},{}),console.log("\tAdding prime pair lookup");var e=t.heroes.reduce(function(t,e){return t[e.prime]=e.name,t},{}),n=Object.keys(t.prime_lookup).length-1;console.log("\tAdding prime pair lookup; primes to process",n);for(var r=0;r<n-1;r++)for(var a=o[r],i=r+1;i<n;i++){var c=o[i],u=a*c,s=t.prime_lookup[a].name,l=t.prime_lookup[c].name;e[u]=[s,l].sort().join(", ")}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.prime],t.prime_pair_lookup=e,t}(u=function(t){var e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:o[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(u)),u},fetchHeroManager:(Bt=Ft(Lt().m(function t(){var e,n,r,o,a,i;return Lt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,y.fetchHeroJSON();case 1:if(a=e=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==e;case 2:if(!o){t.n=3;break}i=e,t.n=5;break;case 3:return t.n=4,O.fetchHeroData();case 4:i=t.v;case 5:return n=i.en,r=this.createHeroManager(n),console.log("Created HeroManager using raw data received from server"),t.a(2,r)}},t,this)})),function(){return Bt.apply(this,arguments)}),fetchAndCacheHeroManager:(Mt=Ft(Lt().m(function t(){var e;return Lt().w(function(t){for(;;)switch(t.n){case 0:return console.log("HeroManager not found in cache, fetching from server and caching it"),t.n=1,this.fetchHeroManager();case 1:return e=t.v,t.n=2,Ot.cache(Ot.Keys.HERO_MANAGER,e);case 2:return console.log("Cached HeroManager using raw data recieved from server"),At(e),t.a(2,e)}},t,this)})),function(){return Mt.apply(this,arguments)}),deleteHeroManager:(Nt=Ft(Lt().m(function t(){return Lt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.delete(Ot.Keys.HERO_MANAGER);case 1:console.log("Removed hero manager from cache");case 2:return t.a(2)}},t)})),function(){return Nt.apply(this,arguments)}),getHeroByName:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;var r=t.toLowerCase().replace(/\s+/g,"");return null!==(n=e.name_lookup[r])&&void 0!==n?n:null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?null!==(n=e.code_lookup[t])&&void 0!==n?n:null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}};const Ut=Ct;function Vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){if(t){if("string"==typeof t)return Kt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(t,e):void 0}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Wt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])}),e||(e={name:"UID: ".concat(t[0]["P1 ID"])});var o,a=t.map(function(t,e){return e}),i=t.map(function(t){return t["P1 Points"]}),c=[],u={startX:null,endX:null,startY:null,endY:null},s=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ht(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(s.s();!(o=s.n()).done;){var l=Vt(o.value,2),f=l[0],p=l[1];n&&p["Seq Num"]in n?(!0===r&&(u.startX=f<u.startX||null===u.startX?f-.5:u.startX,u.startY=p["P1 Points"]<u.startY+50||null===u.startY?p["P1 Points"]-50:u.startY,u.endX=f>u.endX||null===u.endX?f+.5:u.endX,u.endY=p["P1 Points"]>u.endY-50||null===u.endY?p["P1 Points"]+50:u.endY),c.push("#ff9900")):c.push("#0df8fd")}}catch(t){s.e(t)}finally{s.f()}var d={x:a,y:i,mode:"lines+markers",line:{color:"#4f9293",width:2},marker:{symbol:"circle",size:4,color:c},customdata:t.map(function(t){return[t["Date/Time"].slice(0,10),t["P1 League"]]}),hovertemplate:"Points: %{y}<br>Date: %{customdata[0]}<br>League: %{customdata[1]}<extra></extra>"},h={autosize:!0,font:{family:"Roboto, Open Sans"},title:{text:"".concat(e.name,"'s RTA Point Plot"),font:{size:24,color:"#dddddd"},xanchor:"center",yanchor:"top",y:.95,x:.5},xaxis:{title:{text:"Battle Number (Chronological)",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!1,tickfont:{size:12,color:"#dddddd"},range:u.startX?[u.startX,u.endX]:null},yaxis:{title:{text:"Victory Points",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!0,zerolinecolor:"#dddddd",zerolinewidth:2,tickfont:{size:12,color:"#dddddd"},range:u.startY?[u.startY,u.endY]:null},plot_bgcolor:"#1e222d",paper_bgcolor:"#1e222d"},y="plot-".concat(Math.random().toString(36).substr(2,9));return'<div id="'.concat(y,'"></div>')+"\n<script>\n    Plotly.newPlot('".concat(y,"', [").concat(JSON.stringify(d),"], ").concat(JSON.stringify(h),", ").concat(JSON.stringify({responsive:!0}),");\n<\/script>\n")}function qt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")(?=[,)\\s;]|$)"),e)}function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")$"),e)}var zt=/[a-z][a-z0-9.\s]*/i,Jt=/\d{4}-\d{2}-\d{2}/,Xt=/\{\s*\}/,$t=/\d+/,Qt=/season-[1-9]+[0-9]*(\.[1-9]*)?|current-season/i,Zt=new RegExp("^".concat(Jt.source,"$"),"i"),te=new RegExp("(?:".concat(Qt.source,")"),"i"),ee=/(?:date|is-first-pick|is-win|victory-points|p1.picks|p1.prebans|p2.prebans|prebans|p2.picks|p1.pick1|p1.pick2|p1.pick3|p1.pick4|p1.pick5|p2.pick1|p2.pick2|p2.pick3|p2.pick4|p2.pick5|p1.league|p2.league|p1.postban|p2.postban|p1.server|p2.server)/i,ne=zt.source,re=$t.source,oe=Jt.source,ae=ee.source,ie=te.source,ce=new RegExp('"('.concat(ne,")\"|'(").concat(ne,")'"),"i"),ue=new RegExp(Yt(ce),"i"),se=ce.source,le=new RegExp("(?:".concat(se,"|").concat(ne,"|").concat(oe,")"),"i"),fe=new RegExp("(?:".concat(ae,"|").concat(ie,")"),"i"),pe=le.source,de=new RegExp("\\{\\s*(?:".concat(pe,"\\s*)(?:,\\s*").concat(pe,"\\s*)*,?\\s*\\}|").concat(Xt.source),"i"),he=new RegExp("".concat(re,"\\.\\.\\.").concat(re,"|").concat(oe,"\\.\\.\\.").concat(oe,"|").concat(re,"\\.\\.\\.=").concat(re,"|").concat(oe,"\\.\\.\\.=").concat(oe)),ye=new RegExp("^".concat(he.source,"$")),ve={VALID_STRING_RE:zt,VALID_DATE_RE:Jt,VALID_INT_RE:$t,EMPTY_SET_RE:Xt,SET_ELEMENT_RE:le,VALID_SET_RE:de,VALID_STRING_LITERAL_RE:ue,VALID_DATE_LITERAL_RE:Zt,VALID_INT_LITERAL_RE:/^\d+$/,VALID_BOOL_LITERAL_RE:/^(true|false)$/i,VALID_RANGE_RE:he,VALID_RANGE_LITERAL_RE:ye,VALID_SEASON_RE:Qt,VALID_SEASON_LITERAL_RE:Yt(Qt),VALID_DATA_WORD_RE:te,VALID_DATA_WORD_LITERAL_RE:Yt(te),VALID_FIELD_WORD_RE:ee,VALID_DATAFIELD_RE:fe,VALID_GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:Yt(ue),padRegex:qt,anchorExp:Yt,tokenMatch:function(t){return t.match(/AND(?=\()|OR(?=\()|XOR(?=\()|NOT(?=\()|LAST-N(?=\()/i)?(console.log("Matched stream as clause:",t),"keyword"):t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?(console.log("Matched stream as operator:",t),"operator"):t.match(new RegExp("[a-z0-9.\"'}=)-]".concat(fe.source,"(?=[,)\\s;]|$)"),"i"))?(console.log("Matched stream as field with preceding fragment:",t),null):t.match(qt(fe))?(console.log("Matched stream as Data Field:",t),"datafield"):t.match(/[^(,\s;.=0-9]+\d+/i)?(console.log("Matched stream as non-num null"),null):t.match(qt(he))?(console.log("Matched stream as range:",t),"range"):t.match(qt($t))?(console.log("Matched stream as number:",t),"number"):t.match(qt(Jt))?(console.log("Matched stream as date:",t),"date"):t.match(qt(de))?(console.log("Matched stream as set:",t),"set"):t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?(console.log("Matched stream as bool:",t),"bool"):t.match(qt(ce))?(console.log("Matched stream as string:",t),"string"):t.match(/[\(\)\{\}\;\,]/)?(console.log("Matched stream as bracket:",t),"bracket"):(t.next(),console.log("Matched stream as null:",t),null)}};function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||we(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=we(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function we(t,e){if(t){if("string"==typeof t)return Se(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(t,e):void 0}}function Se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_e(r.key),r)}}function Ee(t,e,n){return e&&Pe(t.prototype,e),n&&Pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _e(t){var e=function(t){if("object"!=ge(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ge(e)?e:e+""}function Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ke(t,e,n){return e=je(e),function(t,e){if(e&&("object"==ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,De()?Reflect.construct(e,n||[],je(t).constructor):e.apply(t,n))}function Oe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e)}function Ae(t){var e="function"==typeof Map?new Map:void 0;return Ae=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(De())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Ie(o,n.prototype),o}(t,arguments,je(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ie(n,t)},Ae(t)}function De(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(De=function(){return!!t})()}function Ie(t,e){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ie(t,e)}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}var Le=function(t){function e(t){var n;return Te(this,e),(n=ke(this,e,[t])).name="Filter Syntax Exception",n}return Oe(e,t),Ee(e)}(Ae(Error)),Re=function(t){function e(t){var n;return Te(this,e),(n=ke(this,e,[t])).name="Filter Type Exception",n}return Oe(e,t),Ee(e)}(Ae(Error)),xe=function(t){function e(t){var n;return Te(this,e),(n=ke(this,e,[t])).name="Filter Validation Error",n}return Oe(e,t),Ee(e)}(Ae(Error)),Fe={"(":")","{":"}",'"':'"',"'":"'"},Ne=Object.fromEntries(Object.entries(Fe).filter(function(t){var e=me(t,2);return e[0]!==e[1]}).map(function(t){var e=me(t,2),n=e[0];return[e[1],n]}));const Me={SyntaxException:Le,TypeException:Re,ValidationError:xe,retrieveEnclosure:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:")";if(e===n)throw new Error("Enclosure characters must be different: ".concat(e," = ").concat(n));var r,o=!1,a=0,i="",c=be(function(t){return function(t){if(Array.isArray(t))return Se(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||we(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).entries());try{for(c.s();!(r=c.n()).done;){var u=me(r.value,2),s=u[0],l=u[1];if(l===e){if(a+=1,!o){o=!0;continue}}else l===n&&(a-=1);if(0===a&&o){if(s!=t.length-1)throw new Le("Enclosure should not be resolved before end of string; resolved at index: ".concat(s,"; input string: ").concat(t));return i}if(a<0)throw new Le("Unbalanced enclosure at index: ".concat(s," of input string: ").concat(t,'; balance of "').concat(e,"...").concat(n,'" enclosures became negative.'));o&&(i+=l)}}catch(t){c.e(t)}finally{c.f()}if(!o)throw new Le("Enclosure of type ".concat(e,"...").concat(n," not found in string; input string: ").concat(t));if(a>0)throw new Le("Enclosure could not be resolved; too many '".concat(n,"'; balance = +{count}; input string {string}"))},retrieveArgs:function(t){var e,n=0,r=[],o="",a=be(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;if("("===i){if(1===(n+=1))continue}else")"===i&&(n-=1);1===n&&","===i?(r.push(o.trim()),o=""):n>=1&&(o+=i)}}catch(t){a.e(t)}finally{a.f()}return o.trim()&&r.push(o.trim()),r},getCharCounts:function(t){var e,n={},r=be(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=(n[o]||0)+1}}catch(t){r.e(t)}finally{r.f()}return n},tokenizeWithNestedEnclosures:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],a="",i=[],c=0;c<t.length;c++){var u=t[c];if(e.includes(u)&&i.length===n)a&&(o.push(r?a.trim():a),a="");else if(Ne[u]){var s=Ne[u];if(i.length>n&&(a+=u),i[i.length-1]!==s)throw new Error("Unbalanced closing bracket at position ".concat(c));i.pop()}else i.length>=n&&(a+=u),Fe[u]&&(i[i.length-1]===Fe[u]&&u===Fe[u]?i.pop():i.push(u))}if(i.length>0)throw new Error("Unbalanced enclosures in input string; unresolved characters from enclosure stack: ",i);return a&&o.push(r?a.trim():a),o},parseDate:function(t){if(!ve.VALID_DATE_LITERAL_RE.test(t))throw new Le("Invalid date; must be in the format: YYYY-MM-DD ( regex: ".concat(ve.VALID_DATE_LITERAL_RE.source," ); got: '").concat(t,"'"));var e=t.split(" ")[0],n=new Date("".concat(e,"T00:00:00"));if(isNaN(n.getTime()))throw new Le("Invalid date; could not be parsed as a valid date; got: '".concat(t,"'"));var r=me(n.toISOString().split("T")[0].split("-").map(Number),3),o=r[0],a=r[1],i=r[2];if(n.getFullYear()!==o||n.getMonth()+1!==a||n.getDate()!==i)throw new Le("Invalid date; parsed date: ".concat(n.toISOString()," does not match passed in string: ").concat(e));return console.log("Parsed date: ".concat(n.toISOString()," ; ").concat(n.constructor.name)),n},tryConvert:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===r&&(r="Could not convert ".concat(n," to ").concat(e));try{return t(n)}catch(t){throw new Re("".concat(r,": ").concat(t.message))}}};function Be(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ge(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ge(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ge(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ge(f,"constructor",s),Ge(s,"constructor",u),u.displayName="GeneratorFunction",Ge(s,o,"GeneratorFunction"),Ge(f),Ge(f,o,"Generator"),Ge(f,r,function(){return this}),Ge(f,"toString",function(){return"[object Generator]"}),(Be=function(){return{w:a,m:p}})()}function Ge(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ge=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Ge(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Ge(t,e,n,r)}function Ce(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ue(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ce(a,r,o,i,c,"next",t)}function c(t){Ce(a,r,o,i,c,"throw",t)}i(void 0)})}}var Ve,He,Ke,We={fetchAndCacheSeasonDetails:(Ke=Ue(Be().m(function t(){var e,r,o,a,i,c;return Be().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,O.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(r=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))})}),r.sort(function(t,e){return t["Season Number"]-e["Season Number"]}),o=[r[0]],a=r[0],r.slice(1).forEach(function(t){var e=new Date(+a.range[1]+n),r=new Date(+t.range[0]-n),i={"Season Number":a["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(t.Season),Start:e.toISOString().slice(0,10),End:r.toISOString().slice(0,10),Status:"Complete",range:[e,r]};o.push(i),o.push(t),a=t}),a.range[1]<new Date&&(i=new Date(+o.at(-1).range[1]+n),c={"Season Number":a["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(season.Season),Start:i.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[i,new Date]},o.push(c)),o.reverse(),t.n=3,Ot.cache(Ot.Keys.SEASON_DETAILS,o);case 3:return t.a(2,o)}},t)})),function(){return Ke.apply(this,arguments)}),getSeasonDetails:(He=Ue(Be().m(function t(){var e,n,r,o;return Be().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.get(Ot.Keys.SEASON_DETAILS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,We.fetchAndCacheSeasonDetails();case 4:o=t.v;case 5:return t.a(2,o)}},t)})),function(){return He.apply(this,arguments)}),clearSeasonDetails:(Ve=Ue(Be().m(function t(){return Be().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.delete(Ot.Keys.SEASON_DETAILS);case 1:console.log("Season details cleared from data cache");case 2:return t.a(2)}},t)})),function(){return Ve.apply(this,arguments)})};const qe=We;function Ye(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return ze(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(ze(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ze(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,ze(f,"constructor",s),ze(s,"constructor",u),u.displayName="GeneratorFunction",ze(s,o,"GeneratorFunction"),ze(f),ze(f,o,"Generator"),ze(f,r,function(){return this}),ze(f,"toString",function(){return"[object Generator]"}),(Ye=function(){return{w:a,m:p}})()}function ze(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ze=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){ze(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},ze(t,e,n,r)}function Je(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Xe(t){return function(t){if(Array.isArray(t))return ln(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||sn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||sn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(t,e,n){return e=tn(e),function(t,e){if(e&&("object"==fn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ze()?Reflect.construct(e,n||[],tn(t).constructor):e.apply(t,n))}function Ze(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ze=function(){return!!t})()}function tn(t){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tn(t)}function en(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}function nn(t,e){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nn(t,e)}function rn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function on(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cn(r.key),r)}}function an(t,e,n){return e&&on(t.prototype,e),n&&on(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cn(t){var e=function(t){if("object"!=fn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=fn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fn(e)?e:e+""}function un(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=sn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function sn(t,e){if(t){if("string"==typeof t)return ln(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ln(t,e):void 0}}function ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fn(t){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(t)}var pn=new Set("'\"(),-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function dn(t,e){var n="object"===fn(e)?JSON.stringify(e):"".concat(e);if(e instanceof Set)return e.has(t);if("object"===fn(e)&&null!==e&&!Array.isArray(e)&&["start","end","endInclusive","type"].every(function(t){return e.hasOwnProperty(t)}))return t>=e.start&&(e.endInclusive?t<=e.end:t<e.end);if(Array.isArray(e))return e.includes(t);throw new Error("Invalid match pattern for 'in' operators; got: '".concat(t,"' and '").concat(n,"' (").concat(e.constructor.name,")"))}var hn={">":function(t,e){return t>e},"<":function(t,e){return t<e},"=":function(t,e){return t===e},in:function(t,e){return dn(t,e)},">=":function(t,e){return t>=e},"<=":function(t,e){return t<=e},"!=":function(t,e){return t!==e},"!in":function(t,e){return!dn(t,e)}};function yn(t){return function(t,e){var n,r=un(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.has(o))throw new Me.SyntaxException("Invalid character within <".concat("Main Filter String","> ; ' ").concat(o," ' is not allowed; got string: '").concat(t,"'"))}}catch(t){r.e(t)}finally{r.f()}}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),pn),t.toLowerCase()}var vn,gn,mn,bn=new Set(["victory-points"]),wn=new Set(["prebans","p1.picks","p2.picks","p1.prebans","p2.prebans"]),Sn=function(){return an(function t(e){rn(this,t);var n=t.FIELD_EXTRACT_FN_MAP[e];if(!n)throw new Me.ValidationError("Invalid field type: '".concat(e,"'; valid types are: ").concat(Object.keys(t.FIELD_EXTRACT_FN_MAP).join(", ")));console.log("Found valid field type: ",e),this.str=e,this.extractData=n},[{key:"toString",value:function(){return this.str}}])}();vn=Sn,mn={date:function(t){var e;return t["Date/Time"]?new Date("".concat(null===(e=t["Date/Time"])||void 0===e?void 0:e.slice(0,10),"T00:00:00")):"N/A"},"is-first-pick":function(t){return"True"===t["First Pick"]?1:0},"is-win":function(t){return"W"===t.Win?1:0},"victory-points":function(t){return t["P1 Points"]},"p1.picks":function(t){return t["P1 Picks"]},"p2.picks":function(t){return t["P2 Picks"]},"p1.prebans":function(t){return t["P1 Prebans"]},"p2.prebans":function(t){return t["P2 Prebans"]},"p1.postban":function(t){return t["P1 Postban"]},"p2.postban":function(t){return t["P2 Postban"]},prebans:function(t){return[].concat(Xe(t["P1 Prebans"]),Xe(t["P2 Prebans"]))},"p1.pick1":function(t){return t["P1 Pick 1"]},"p1.pick2":function(t){return t["P1 Pick 2"]},"p1.pick3":function(t){return t["P1 Pick 3"]},"p1.pick4":function(t){return t["P1 Pick 4"]},"p1.pick5":function(t){return t["P1 Pick 5"]},"p2.pick1":function(t){return t["P2 Pick 1"]},"p2.pick2":function(t){return t["P2 Pick 2"]},"p2.pick3":function(t){return t["P2 Pick 3"]},"p2.pick4":function(t){return t["P2 Pick 4"]},"p2.pick5":function(t){return t["P2 Pick 5"]},"p1.league":function(t){return r[t["P1 League"]]},"p2.league":function(t){return r[t["P2 League"]]},"p1.server":function(t){return t["P1 Server"]},"p2.server":function(t){return t["P2 Server"]}},(gn=cn(gn="FIELD_EXTRACT_FN_MAP"))in vn?Object.defineProperty(vn,gn,{value:mn,enumerable:!0,configurable:!0,writable:!0}):vn[gn]=mn;var Pn=function(){return an(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;rn(this,t),this.rawString=e,this.data=this.getData(e,n)},[{key:"toString",value:function(){return"".concat(this.data)}}])}(),En=function(t){function n(){return rn(this,n),Qe(this,n,arguments)}return en(n,t),an(n,[{key:"getData",value:function(t,n){if(t=(t=t.replace(/'/g,"").replace(/"/g,"")).trim(),!ve.VALID_STRING_RE.test(t))throw new Me.SyntaxException("Invalid string; all string content must start with a letter followed by either num, hyphen or period ( case insensitive regex: ".concat(ve.VALID_STRING_LITERAL_RE.source," ); got: '").concat(t,"'"));t=t.replace(/"|'/g,"");var o=Ut.getHeroByName(t,n),a=r[t],i=Object.values(e).find(function(e){return e.toLowerCase()===t});if(!(o||a||i))throw new Me.SyntaxException("Invalid string; All strings must either be a valid hero, league name, or server; got: '".concat(t,"'"));return o?o.name:a||i}},{key:"toString",value:function(){return'"'.concat(this.data,'"')}}])}(Pn),_n=function(t){function e(){return rn(this,e),Qe(this,e,arguments)}return en(e,t),an(e,[{key:"getData",value:function(t){return Me.parseDate(t)}},{key:"toString",value:function(){return"".concat(this.data)}}])}(Pn),Tn=function(t){function e(){return rn(this,e),Qe(this,e,arguments)}return en(e,t),an(e,[{key:"getData",value:function(t){if(!ve.VALID_INT_LITERAL_RE.test(t))throw new Me.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));var e=parseInt(t);if(isNaN(e))throw new Me.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));return e}},{key:"toString",value:function(){return"".concat(this.data)}}])}(Pn),kn=function(t){function e(){return rn(this,e),Qe(this,e,arguments)}return en(e,t),an(e,[{key:"getData",value:function(t){if(!ve.VALID_BOOL_LITERAL_RE.test(t))throw new Me.SyntaxException("Invalid boolean; must be 'true' or 'false'; got: '".concat(t,"'"));return"true"===t?1:0}},{key:"toString",value:function(){return"".concat(this.data?"true":"false")}}])}(Pn),On=function(t){function e(){return rn(this,e),Qe(this,e,arguments)}return en(e,t),an(e,[{key:"getData",value:function(t){var e=t.split("...");if(2!==e.length)throw new Me.SyntaxException("Invalid range; ranges must be of the format x...y or x...=y ; got more than two values when splitting string: '".concat(t,"'"));var n=$e(e,2),r=n[0],o=n[1],a=!1;o.includes("=")&&(o=o.replace("=",""),a=!0);var i={start:null,end:null,endInclusive:a};if(ve.VALID_DATE_LITERAL_RE.test(r)){if(i.start=Me.tryConvert(Me.parseDate,"Date",r,"Could not convert '".concat(r,"' to Date in declared range: '").concat(t,"'")),i.end=Me.tryConvert(Me.parseDate,"Date",o,"Could not convert '".concat(o,"' to Date in declared range: '").concat(t,"' ; Ranges must have homogenous types")),i.start>i.end)throw new Me.SyntaxException("Invalid range; start date must be on or before end date; ".concat(i.start," > ").concat(i.end));i.type="Date"}else{if(!ve.VALID_INT_LITERAL_RE.test(r))throw new Me.SyntaxException("Invalid range; must be of the format x...y or x...=y ; got: '".concat(t,"'"));if(i.start=Me.tryConvert(function(t){return new Tn(t)},"Int",r,"Could not convert '".concat(r,"' to Int in declared range: '").concat(t,"'")).data,i.end=Me.tryConvert(function(t){return new Tn(t)},"Int",o,"Could not convert '".concat(o,"' to Int in declared range: '").concat(t,"' ; Ranges must have homogenous types")).data,i.start>i.end)throw new Me.SyntaxException("Invalid range; start integer must be equal to or less than end integer; ".concat(i.start," > ").concat(i.end));i.type="Int"}return console.log("Built Range: ".concat(JSON.stringify(i))),i}},{key:"toString",value:function(){var t=this.data.endInclusive?"...=":"...";return"Date"===this.data.type?"".concat(this.data.start.toISOString()).concat(t).concat(this.data.end.toISOString(),")"):"Int"===this.data.type?"".concat(this.data.start,"...").concat(t).concat(this.data.end):"Error Converting Range to String => < ".concat(this.data.start,"...").concat(t).concat(this.data.end," >")}}])}(Pn),An=function(t){function e(){return rn(this,e),Qe(this,e,arguments)}return en(e,t),an(e,[{key:"getData",value:function(t,e){if(!ve.VALID_SET_RE.test(t))throw new Me.SyntaxException("Invalid set; must be in the format: { element1, element2,... }, where elements have either string format or date format; ( case insensitive regex: ".concat(ve.VALID_SET_RE.source," ) (Just chat gpt this one bro); got: '").concat(t,"'"));var n=t.replace(/^\{|\}$/g,"").split(",").map(function(t){return t.trim()}).filter(function(t){return""!==t}).map(function(t){if(ve.VALID_STRING_RE.test(t))return new En(t,e);if(ve.VALID_DATE_LITERAL_RE.test(t))return new _n(t);throw new Me.SyntaxException("Invalid set element; must be a string or date; got: '".concat(t,"'"))});console.log("GOT ELEMENTS: ",n);var r,o=new Set,a=un(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;o.add(i.constructor.name)}}catch(t){a.e(t)}finally{a.f()}if(o=Xe(o),console.log("GOT TYPES: ",o),o.size>1)throw new Me.SyntaxException("Invalid set; all set elements must have the same data type; got: types: [".concat(o.join(", "),"]"));return this.Type=o[0],new Set(n.map(function(t){return t.data}))}},{key:"toString",value:function(){return"{".concat(this.data.map(function(t){return t.toString()}).join(", "),"}")}}])}(Pn);var Dn=function(){return an(function t(){rn(this,t)},[{key:"call",value:function(t){throw new Error("Base class ".concat(this.constructor.name," does not implement the 'call' method. Implement this method in a subclass."))}}])}(),In=function(t){function e(t){var n;if(rn(this,e),(n=Qe(this,e)).name="last-N",1!==t.length)throw new Me.SyntaxException("".concat(n.name," expects 1 argument, got ").concat(t.length));var r=Number(t[0]);if(!Number.isInteger(r))throw new Me.TypeException("".concat(n.name," expects an integer argument, could not parse '").concat(t[0],"' as integer"));return n.str="".concat(n.name,"(").concat(r,")"),n.n=r,n}return en(e,t),an(e,[{key:"call",value:function(t){return t.sort(function(t,e){return t["Seq Num"]-e["Seq Num"]}),t.slice(-this.n)}}])}(function(t){function e(){return rn(this,e),Qe(this,e)}return en(e,t),an(e,[{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Dn)),jn=function(t){function e(t){var n;return rn(this,e),(n=Qe(this,e)).fns=t,console.log("Clause Fn constructor got fns:",t),n}return en(e,t),an(e,[{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=t+"   ";return this.fns.localFilters.forEach(function(t){return e+="".concat(t.toString(n),",\n")}),console.log("Clause Fn toString got output:",e),"".concat(t).concat(this.str,"(\n").concat(e.trimEnd(),"\n").concat(t,")")}}])}(Dn),Ln=function(t){function e(t){var n;return rn(this,e),(n=Qe(this,e,[t])).str="AND",n}return en(e,t),an(e,[{key:"call",value:function(t){return this.fns.localFilters.every(function(e){return e.call(t)})}}])}(jn),Rn=function(t){function e(t){var n;return rn(this,e),(n=Qe(this,e,[t])).str="OR",n}return en(e,t),an(e,[{key:"call",value:function(t){return this.fns.localFilters.some(function(e){return e.call(t)})}}])}(jn),xn=function(t){function e(t){var n;return rn(this,e),(n=Qe(this,e,[t])).str="XOR",n}return en(e,t),an(e,[{key:"call",value:function(t){var e,n=!1,r=un(this.fns.localFilters);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=!n&&o.call(t)||n&&!o.call(t)}}catch(t){r.e(t)}finally{r.f()}return n}}])}(jn),Fn=function(t){function e(t){var n;return rn(this,e),(n=Qe(this,e,[t])).str="NOT",n}return en(e,t),an(e,[{key:"call",value:function(t){return!this.fns.localFilters[0].call(t)}}])}(jn),Nn={and:Ln,or:Rn,xor:xn,not:Fn,"last-n":In},Mn=new Set([Ln,Rn,xn,Fn]),Bn=new Set([In]),Gn=function(){return an(function t(e,n){rn(this,t),this.str=e,this.fn=n},[{key:"call",value:function(t){return this.fn(t)}},{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}();function Cn(t,e,n,r,o){var a=null;try{a=e in Sn.FIELD_EXTRACT_FN_MAP?new Sn(e):function(t,e,n){if(console.log("Trying to Parse DataType: ".concat(t)),ve.VALID_STRING_LITERAL_RE.test(t))return console.log("Parsing as StringType"),new En(t,e);if(ve.VALID_DATE_LITERAL_RE.test(t))return console.log("Parsing as DateType"),new _n(t);if(ve.VALID_INT_LITERAL_RE.test(t))return console.log("Parsing as IntType"),new Tn(t);if(ve.VALID_BOOL_LITERAL_RE.test(t))return console.log("Parsing as BoolType"),new kn(t);if(/\{.*\}/.test(t))return console.log("Parsing as SetType"),new An(t,e);if(ve.VALID_RANGE_LITERAL_RE.test(t))return console.log("Parsing as RangeType"),new On(t);if(ve.VALID_DATA_WORD_LITERAL_RE.test(t))return console.log("Parsing as DataWord"),function(t,e){if(ve.VALID_SEASON_LITERAL_RE.test(t)){var n=function(t){return t.toISOString().slice(0,10)};if(e.SeasonDetails.length<1)throw new Error("Did not recieve any season details; failed on: '".concat(t,"'"));if("current-season"===t){var r=$e(e.SeasonDetails.find(function(t){return"Active"===t.Status}).range,2),o=r[0],a=r[1];return new On("".concat(n(o),"...=").concat(n("N/A"===a?new Date:a)))}var i=Number(t.split("-")[1]),c=e.SeasonDetails.find(function(t){return t["Season Number"]===i});if(!c)throw new Error("Invalid season specified; ".concat(i," is not a valid season number; failed on str: '").concat(t,"'"));var u=$e(c.range,2),s=u[0],l=u[1];return new On("".concat(n(s),"...=").concat(n(l)))}}(t,{SeasonDetails:n});if(console.log("Failed to parse DataType"),ve.VALID_STRING_LITERAL_RE.test("'".concat(t,"'")))throw new Me.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you forget to wrap string literals in double or single quotes?"));if(t.includes("'")&&t.includes('"'))throw new Me.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you encase in mismatching quote types?"));if(t.includes(".=")||t.includes(".."))throw new Me.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; were you trying to use a range? Ranges must be of the format x...y or x...=y and may only be int-int or date-date"));throw new Me.SyntaxException("Invalid DataType declaration; could not parse to valid Field or Declared Data Type; got: '".concat(t,"'"))}(e,r,o)}catch(r){for(var i in Sn.FIELD_EXTRACT_FN_MAP)if(e.includes(i)||i.includes(e))throw new Me.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"], did you mean to use '").concat(i,"' as a field instead?"));throw console.error(r),new Me.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"]; error: ").concat(r.message))}return a}var Un=function(){function t(e){if(rn(this,t),e!==Vn._)throw new Error("Cannot instantiate FilterSyntaxParser directly; use createAndParse method instead.")}return an(t,[{key:"toString",value:function(){var t=Xe(this.filters.localFilters);return t.push.apply(t,Xe(this.filters.globalFilters)),"[\n".concat(t.map(function(t){return t.toString("   ")}).join(";\n"),"\n]")}},{key:"parseGlobalFilterFn",value:function(t,e){var n=ve.anchorExp(ve.VALID_GLOBAL_FILTER_RE);if(!n.test(e))throw new Me.SyntaxException('Invalid global filter format; must follow the case insensitive regex format "'.concat(n.source,"\" ; got: '").concat(e,"'"));var r=Me.tokenizeWithNestedEnclosures(e,",",1);if(t===In)return{localFilters:[],globalFilters:[new In(r)]};throw new Me.SyntaxException("Global filter function ".concat(t.str," not mapped in parseGlobalFilterFn"))}},{key:"parseClauseFn",value:function(e,n){var r=this;console.log("Parsing clause fn:",e.name,n);var o=Me.tokenizeWithNestedEnclosures(n,",",1);if(console.log("Got argArr:",o),e===xn&&o.length<2)throw new Me.SyntaxException("XOR clause must have at least two arguments; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));if(e===Fn&&1!==o.length)throw new Me.SyntaxException("NOT clause must have exactly one argument; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));var a=o.reduce(function(t,e){var n,o;return(n=t.localFilters).push.apply(n,Xe(r.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,Xe(r.parseFilters(e).globalFilters)),t},t.getEmptyFilters());if(a.globalFilters.length>0)throw new Me.SyntaxException("Global filters not allowed in clause functions; got: ".concat(a.globalFilters,' from string: "').concat(n,'"'));if(e===Fn&&1!==a.localFilters.length)throw new Me.SyntaxException("NOT clause must have exactly one argument; got: ".concat(a.length,' arguments from string: "').concat(n,'"'));return{localFilters:[new e(a)],globalFilters:[]}}},{key:"parseBaseFilter",value:function(t){console.log("Parsing base filter:",t);var e=this.HM,n=Me.tokenizeWithNestedEnclosures(t," ",0,!0);if(console.log("Got tokens: ",n,"; Length: ".concat(n.length)),3!==n.length)throw new Me.SyntaxException("Invalid base filter format; all filters must be of the form: ['X', operator, 'Y']; got tokens: [".concat(n.join(", "),"]"));var r=$e(n,3),o=r[0],a=r[1],i=r[2];if(!hn[a])throw new Me.SyntaxException('Invalid operator in base filter; got: "'.concat(a,'" as the operator in filter: [').concat(t,"]"));var c=hn[a];if(o=Cn("left",o,t,e,this.SeasonDetails),i=Cn("right",i,t,e,this.SeasonDetails),("in"===a||"!in"===a)&&!(i instanceof An||i instanceof On||i instanceof Sn&&wn.has(i.str)))throw new Me.TypeException("When using any 'in' or '!in' operator, the right side of the operator must be a Set, Range, or a Field composed of a set (i.e. p1.picks, p2.prebans, etc.); error found in filter: '".concat(t,"'"));if(i instanceof On)if("Date"===i.data.type){if(!o.str.includes("date"))throw new Me.TypeException("When using a Date Range, the left side of the operator must be a date field; ".concat(o.str," is not a date field; error found in filter: '").concat(t,"'"))}else if("Int"===i.data.type&&!bn.has(o.str))throw new Me.TypeException("When using an Int Range, the left side of the operator must be an integer field; ".concat(o.str," is not an integer field; error found in filter: '").concat(t,"'"));if(i instanceof Pn&&o instanceof Pn)throw new Me.SyntaxException("Either left or right side of filter must be a data field (a property of a battle); both ".concat(o," and ").concat(i,' are user declared data types in filter: "').concat(t,'"'));var u;return u=o instanceof Pn?function(t){return c(o.data,i.extractData(t))}:i instanceof Pn?function(t){return c(o.extractData(t),i.data)}:function(t){return c(o.extractData(t),i.extractData(t))},console.log("Returning base local filter",[new Gn(t,u).toString()]),{localFilters:[new Gn(t,u)],globalFilters:[]}}},{key:"parseFilters",value:function(e){var n=this;if(console.log('Parsing filter string: "'.concat(e||this.preParsedString,'"')),""===e)return console.log("Empty filter string; Returning empty filters"),t.getEmptyFilters();var r,o=(e=e.trim()).split(";").filter(function(t){return t.length>0}),a=un(o);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=Me.getCharCounts(i);if(c["("]!==c[")"])throw new Me.SyntaxException('Imbalanced parentheses in following string: "'.concat(i,'"'));if(c["{"]!==c["}"])throw new Me.SyntaxException("Imbalanced braces ('{', '}') in following string: \"".concat(i,'"'));if((c['"']||0)%2!=0)throw new Me.SyntaxException('Imbalanced double quotes in following string: "'.concat(i,'"'));if((c["'"]||0)%2!=0)throw console.log("Imbalanced single quotes in following string:",i,"; got:",c["'"]),new Me.SyntaxException('Imbalanced single quotes in following string: "'.concat(i,'"'))}}catch(t){a.e(t)}finally{a.f()}if(o.length>1)return console.log("Processing <".concat(o.length,"> filters; filters: ").concat(o)),o.reduce(function(t,e){var r,o;return(r=t.localFilters).push.apply(r,Xe(n.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,Xe(n.parseFilters(e).globalFilters)),t},t.getEmptyFilters());var u=o[0];if(u.length<4)throw new Me.SyntaxException("Filter string cannot be valid (less than 4 characters); got filter string: [".concat(u,"]"));var s=u.split("("),l=Nn[s[0]];if(console.log("Trying to look for Fn ; got:",s[0],"from string:",u),l){if(Mn.has(l))return console.log("Found clause fn; dispatching to clause fn parser"),this.parseClauseFn(l,u);if(Bn.has(l))return console.log("Found global filter fn; dispatching to global filter fn parser"),this.parseGlobalFilterFn(l,u);throw new Error('could not parse filter string as Fn: "'.concat(e,'" ; did not map to any defined pattern'))}return console.log("Did not find Fn; dispatching to base filter parser"),this.parseBaseFilter(u)}}],[{key:"getEmptyFilters",value:function(){return{localFilters:[],globalFilters:[]}}},{key:"createAndParse",value:(e=Ye().m(function e(n){var r,o,a,i,c,u=arguments;return Ye().w(function(e){for(;;)switch(e.n){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:null,o=u.length>2&&void 0!==u[2]?u[2]:null,console.log("Initialized parsing of string:",n),a=new t(Vn._),i=r){e.n=2;break}return e.n=1,Ut.getHeroManager();case 1:i=e.v;case 2:if(r=i,c=o){e.n=4;break}return e.n=3,qe.getSeasonDetails();case 3:c=e.v;case 4:return o=c,a.rawString=n,a.HM=r,a.SeasonDetails=o,a.preParsedString=yn(n),a.globalFilters=[],a.filters=a.parseFilters(a.preParsedString),console.log("Got Filters\n"),console.log(a.toString()),e.a(2,a)}},e)}),n=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(t){Je(a,r,o,i,c,"next",t)}function c(t){Je(a,r,o,i,c,"throw",t)}i(void 0)})},function(t){return n.apply(this,arguments)})}]);var e,n}(),Vn={_:Symbol("internal")};const Hn=Un;function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Wn(t){return function(t){if(Array.isArray(t))return zn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Yn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Yn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Yn(t,e){if(t){if("string"==typeof t)return zn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(t,e):void 0}}function zn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Jn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Xn(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Xn(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Xn(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Xn(f,"constructor",s),Xn(s,"constructor",u),u.displayName="GeneratorFunction",Xn(s,o,"GeneratorFunction"),Xn(f),Xn(f,o,"Generator"),Xn(f,r,function(){return this}),Xn(f,"toString",function(){return"[object Generator]"}),(Jn=function(){return{w:a,m:p}})()}function Xn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xn=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Xn(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Xn(t,e,n,r)}function $n(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Qn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){$n(a,r,o,i,c,"next",t)}function c(t){$n(a,r,o,i,c,"throw",t)}i(void 0)})}}var Zn={world_global:Ot.Keys.GLOBAL_USERS,world_eu:Ot.Keys.EU_USERS,world_asia:Ot.Keys.ASIA_USERS,world_jpn:Ot.Keys.JPN_USERS,world_kor:Ot.Keys.KOR_USERS};function tr(t,e){return{id:t.nick_no,name:t.nick_nm.toLowerCase(),code:t.code,rank:t.rank,world_code:e}}function er(t){return nr.apply(this,arguments)}function nr(){return(nr=Qn(Jn().m(function t(e){var n;return Jn().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code from E7 server: ".concat(e)),t.n=1,y.fetchUserJSON(e);case 1:if(n=t.v){t.n=2;break}return console.log("Could not get user map from E7 server for world code: ".concat(e)),t.a(2,null);case 2:return console.log("Got user map from E7 server for world code: ".concat(e)),t.a(2,Object.fromEntries(n.users.map(function(t){return[t.nick_no,tr(t,e)]})))}},t)}))).apply(this,arguments)}var rr,or,ar,ir,cr,ur,sr={getUserMap:(ur=Qn(Jn().m(function t(e){var n,r;return Jn().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code: ".concat(e)),t.n=1,Ot.get(Zn[e]);case 1:if(null===(n=t.v)){t.n=2;break}return console.log("Got user map from cache"),t.a(2,n);case 2:return t.n=3,er(e);case 3:return r=t.v,t.n=4,Ot.cache(Zn[e],r);case 4:return t.a(2,r)}},t)})),function(t){return ur.apply(this,arguments)}),findUser:(cr=Qn(Jn().m(function e(n){var r,o,a,i,c,u,s,l,f,p,d,h,y;return Jn().w(function(e){for(;;)switch(e.n){case 0:if(!n.id){e.n=10;break}r=qn(t),e.p=1,r.s();case 2:if((o=r.n()).done){e.n=6;break}return a=o.value,e.n=3,this.getUserMap(a);case 3:if(i=e.v,!(c=Object.values(i).find(function(t){return t.id===n.id}))){e.n=4;break}return console.log("Found user: ".concat(JSON.stringify(c)," in world code: ").concat(a)),e.a(2,{user:c,error:!1});case 4:console.log("Could not find user with ID: ".concat(n.id," in world code: ").concat(a," from client-side means"));case 5:e.n=2;break;case 6:e.n=8;break;case 7:e.p=7,y=e.v,r.e(y);case 8:return e.p=8,r.f(),e.f(8);case 9:e.n=15;break;case 10:if(!n.name||!n.world_code){e.n=14;break}return u=[n.name,n.world_code],s=u[0],l=u[1],e.n=11,this.getUserMap(l);case 11:if(f=e.v,p=s.toLowerCase(),d=Object.values(f).find(function(t){return p===t.name.toLowerCase()}),!d){e.n=12;break}return console.log("Found user: ".concat(JSON.stringify(d)," in world code: ").concat(l)),e.a(2,{user:d,error:!1});case 12:console.log("Could not find user with ID: ".concat(n.id," in world code: ").concat(l," from client-side means"));case 13:e.n=15;break;case 14:return console.error("Must pass a user object with either user.name and user.world_code or user.id to fetch user"),e.a(2,{user:null,error:"Must pass a user object with either user.name and user.world_code or user.id to fetch user"});case 15:return e.n=16,O.fetchUser(n);case 16:if(!(h=e.v).error){e.n=17;break}return e.a(2,{user:null,error:h.error});case 17:return e.a(2,{user:h.user,error:!1})}},e,this,[[1,7,8,9]])})),function(t){return cr.apply(this,arguments)}),addP2ServersByID:(ir=Qn(Jn().m(function e(n){var r,o,a,i=this;return Jn().w(function(e){for(;;)switch(e.n){case 0:return console.log("Adding P2 servers by ID..."),r=Object.values(n),o=[],e.p=1,e.n=2,Promise.all(Wn(t).map(function(t){return i.getUserMap(t)}));case 2:o=e.v,e.n=4;break;case 3:return e.p=3,a=e.v,console.error(a),r.forEach(function(t){return t["P2 Server"]="Not Found"}),e.a(2);case 4:if(0!==o.length){e.n=5;break}return console.error("Failed to get any user maps"),r.forEach(function(t){return t["P2 Server"]="Not Found"}),e.a(2);case 5:r.forEach(function(t){var e,n=null===(e=o.find(function(e){return e[t["P2 ID"]]}))||void 0===e?void 0:e[t["P2 ID"]].world_code;n?t["P2 Server"]=i.convertServerStr(n):(console.log("Could not find user with ID: ".concat(t["P2 ID"]," in client-side means ; typeof: ").concat(Kn(t["P2 ID"]),", id type: ").concat(Kn(Object.keys(USER_MAPS[0])[0]))),t["P2 Server"]="Not Found")});case 6:return e.a(2)}},e,null,[[1,3]])})),function(t){return ir.apply(this,arguments)}),setUser:(ar=Qn(Jn().m(function t(e){return Jn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.cache(Ot.Keys.USER,e);case 1:return t.a(2)}},t)})),function(t){return ar.apply(this,arguments)}),getUser:(or=Qn(Jn().m(function t(){return Jn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.get(Ot.Keys.USER);case 1:return t.a(2,t.v)}},t)})),function(){return or.apply(this,arguments)}),clearUserData:function(){var t=Qn(Jn().m(function t(){return Jn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.clearUserData();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),clearUserDataLists:(rr=Qn(Jn().m(function t(){return Jn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.delete(Ot.Keys.GLOBAL_USERS);case 1:return t.n=2,Ot.delete(Ot.Keys.EU_USERS);case 2:return t.n=3,Ot.delete(Ot.Keys.ASIA_USERS);case 3:return t.n=4,Ot.delete(Ot.Keys.JPN_USERS);case 4:return t.n=5,Ot.delete(Ot.Keys.KOR_USERS);case 5:return t.a(2)}},t)})),function(){return rr.apply(this,arguments)}),convertServerStr:function(t){return e[t]}};const lr=sr;function fr(t){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(t)}function pr(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(fr(t)+" is not iterable")}function dr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return hr(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(hr(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,hr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,hr(f,"constructor",s),hr(s,"constructor",u),u.displayName="GeneratorFunction",hr(s,o,"GeneratorFunction"),hr(f),hr(f,o,"Generator"),hr(f,r,function(){return this}),hr(f,"toString",function(){return"[object Generator]"}),(dr=function(){return{w:a,m:p}})()}function hr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}hr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){hr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},hr(t,e,n,r)}function yr(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function vr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){yr(a,r,o,i,c,"next",t)}function c(t){yr(a,r,o,i,c,"throw",t)}i(void 0)})}}function gr(t){return function(t){if(Array.isArray(t))return _r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Er(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||Er(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?br(Object(n),!0).forEach(function(e){Sr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Sr(t,e,n){return(e=function(t){var e=function(t){if("object"!=fr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Er(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Er(t,e){if(t){if("string"==typeof t)return _r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(t,e):void 0}}function _r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Tr=["Date/Time","Seq Num","P1 ID","P1 Server","P1 League","P1 Points","P2 ID","P2 Server","P2 League","Win","First Pick","P1 Preban 1","P1 Preban 2","P2 Preban 1","P2 Preban 2","P1 Pick 1","P1 Pick 2","P1 Pick 3","P1 Pick 4","P1 Pick 5","P2 Pick 1","P2 Pick 2","P2 Pick 3","P2 Pick 4","P2 Pick 5","P1 Postban","P2 Postban"].filter(function(t){return t.includes(" Pick ")||t.includes("ban ")});function kr(t){var e={};console.log("Processing ".concat(t.length," battles into dict..."));var n,r=Pr(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;console.log("Processing battle: ".concat(o)),e[o["Seq Num"]]=o}}catch(t){r.e(t)}finally{r.f()}return e}function Or(t,e){var n,r,o,a=function(t){var n,r;return null!==(n=null===(r=Ut.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},i={"Date/Time":t.time,"Seq Num":t.seq_num,"P1 ID":t.p1_id.toString(),"P2 ID":t.p2_id.toString(),"P1 League":null!==(n=t.grades[0])&&void 0!==n?n:"","P2 League":null!==(r=t.grades[1])&&void 0!==r?r:"","P1 Points":null!==(o=t.scores[0])&&void 0!==o?o:null,Win:1===t.winner?"W":"L","First Pick":1===t.first_pick?"True":"False","P1 Preban 1":a(t.p1_preban[0]),"P1 Preban 2":a(t.p1_preban[1]),"P2 Preban 1":a(t.p2_preban[0]),"P2 Preban 2":a(t.p2_preban[1]),"P1 Pick 1":a(t.p1_picks[0]),"P1 Pick 2":a(t.p1_picks[1]),"P1 Pick 3":a(t.p1_picks[2]),"P1 Pick 4":a(t.p1_picks[3]),"P1 Pick 5":a(t.p1_picks[4]),"P2 Pick 1":a(t.p2_picks[0]),"P2 Pick 2":a(t.p2_picks[1]),"P2 Pick 3":a(t.p2_picks[2]),"P2 Pick 4":a(t.p2_picks[3]),"P2 Pick 5":a(t.p2_picks[4]),"P1 Postban":a(t.postbans[1]),"P2 Postban":a(t.postbans[0])};return i["P1 Picks"]=[i["P1 Pick 1"],i["P1 Pick 2"],i["P1 Pick 3"],i["P1 Pick 4"],i["P1 Pick 5"]],i["P2 Picks"]=[i["P2 Pick 1"],i["P2 Pick 2"],i["P2 Pick 3"],i["P2 Pick 4"],i["P2 Pick 5"]],i["P1 Prebans"]=[i["P1 Preban 1"],i["P1 Preban 2"]],i["P2 Prebans"]=[i["P2 Preban 1"],i["P2 Preban 2"]],i}function Ar(t){var e,n=Pr(Tr);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=t[r]?t[r]:"Empty"}}catch(t){n.e(t)}finally{n.f()}return t["P1 Points"]=Number(t["P1 Points"])||t["P1 Points"],t["P1 Picks"]=[t["P1 Pick 1"],t["P1 Pick 2"],t["P1 Pick 3"],t["P1 Pick 4"],t["P1 Pick 5"]],t["P2 Picks"]=[t["P2 Pick 1"],t["P2 Pick 2"],t["P2 Pick 3"],t["P2 Pick 4"],t["P2 Pick 5"]],t["P1 Prebans"]=[t["P1 Preban 1"],t["P1 Preban 2"]],t["P2 Prebans"]=[t["P2 Preban 1"],t["P2 Preban 2"]],t}function Dr(t,e){var n,o,a=function(t){return Ut.getHeroByName(t,e).prime};return{"Date/Time":t["Date/Time"],"Seq Num":t["Seq Num"],"P1 ID":t["P1 ID"],"P2 ID":t["P2 ID"],"P1 League":null!==(n=r[t["P1 League"]])&&void 0!==n?n:"","P2 League":null!==(o=r[t["P2 League"]])&&void 0!==o?o:"","P1 Points":t["P1 Points"],Win:"W"===t.Win?1:0,"First Pick":"True"===t["First Pick"]?1:0,"P1 Preban 1":a(t["P1 Preban 1"]),"P1 Preban 2":a(t["P1 Preban 2"]),"P2 Preban 1":a(t["P2 Preban 1"]),"P2 Preban 2":a(t["P2 Preban 2"]),"P1 Pick 1":a(t["P1 Pick 1"]),"P1 Pick 2":a(t["P1 Pick 2"]),"P1 Pick 3":a(t["P1 Pick 3"]),"P1 Pick 4":a(t["P1 Pick 4"]),"P1 Pick 5":a(t["P1 Pick 5"]),"P2 Pick 1":a(t["P2 Pick 1"]),"P2 Pick 2":a(t["P2 Pick 2"]),"P2 Pick 3":a(t["P2 Pick 3"]),"P2 Pick 4":a(t["P2 Pick 4"]),"P2 Pick 5":a(t["P2 Pick 5"]),"P1 Postban":a(t["P1 Postban"]),"P2 Postban":a(t["P2 Postban"]),"P1 Picks":t["P1 Picks"].map(a).reduce(function(t,e){return t*e},1),"P2 Picks":t["P2 Picks"].map(a).reduce(function(t,e){return t*e},1),"P1 Prebans":t["P1 Prebans"].map(a).reduce(function(t,e){return t*e},1),"P2 Prebans":t["P2 Prebans"].map(a).reduce(function(t,e){return t*e},1)}}function Ir(t){return(100*t).toFixed(2)+"%"}function jr(t,e){var n=t.filter(function(t){return t.Win}).length,r=t.length,o=0!==r?n/r:0;return{games_won:n,games_appeared:r,total_games:e,appearance_rate:Ir(0!==e?r/e:0),win_rate:Ir(o),"+/-":2*n-r}}var Lr,Rr,xr,Fr,Nr,Mr,Br,Gr,Cr={loaded_servers:new Set,getBattles:(Gr=vr(dr().m(function t(){var e,n,r,o;return dr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting battles"),t.n=1,Ot.get(Ot.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return Gr.apply(this,arguments)}),removeBattles:(Br=vr(dr().m(function t(){return dr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.delete(Ot.Keys.BATTLES);case 1:return t.n=2,Ot.delete(Ot.Keys.UPLOADED_BATTLES);case 2:return t.n=3,Ot.delete(Ot.Keys.FILTERED_BATTLES);case 3:console.log("Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']");case 4:return t.a(2)}},t)})),function(){return Br.apply(this,arguments)}),removeFilteredBattles:(Mr=vr(dr().m(function t(){return dr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.delete(Ot.Keys.FILTERED_BATTLES);case 1:console.log("Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']");case 2:return t.a(2)}},t)})),function(){return Mr.apply(this,arguments)}),applyFilter:(Nr=vr(dr().m(function t(e){var n,r,o,a,i,c,u,s,l,f,p,d;return dr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.localFilters||[],o=e.globalFilters||[],a=Object.values(n),i=Pr(o);try{for(i.s();!(c=i.n()).done;)u=c.value,console.log("Applying global filter: ".concat(u)),s=a.length,a=u.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),console.log("Filtered ".concat(s-a.length," out of ").concat(s,"; new total = ").concat(a.length))}catch(t){i.e(t)}finally{i.f()}l=Pr(r),t.p=2,p=dr().m(function t(){var e,r;return dr().w(function(t){for(;;)switch(t.n){case 0:e=f.value,console.log("Applying local filter: ".concat(e)),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=mr(t,2),r=(n[0],n[1]);return e.call(r)})),console.log("Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length));case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(pr(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,l.e(d);case 7:return t.p=7,l.f(),t.f(7);case 8:return console.log("Caching filtered battles ; total = ".concat(Object.keys(n).length)),t.n=9,Ot.cache(Ot.Keys.FILTERED_BATTLES,n);case 9:return console.log("Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters")),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return Nr.apply(this,arguments)}),getNumericalBattles:(Fr=vr(dr().m(function t(e,n){var r,o;return dr().w(function(t){for(;;)if(0===t.n)return r=function(t,e){return[t,Dr(e,n)]},o=Object.fromEntries(Object.entries(e).map(function(t){var e=mr(t,2),n=e[0],o=e[1];return r(n,o)})),t.a(2,o)},t)})),function(t,e){return Fr.apply(this,arguments)}),extendBattles:(xr=vr(dr().m(function t(e){var n,r,o,a,i;return dr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.get(Ot.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=wr(wr({},i),kr(e)),t.n=5,Ot.cache(Ot.Keys.BATTLES,r);case 5:return console.log("Extended user data in cache"),t.a(2,r)}},t)})),function(t){return xr.apply(this,arguments)}),cacheQuery:(Rr=vr(dr().m(function t(e,n,r){var o,a,i,c;return dr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No query battles provided to cacheQuery"),t.a(2,[]);case 1:return console.log("Caching queried battles: ".concat(e," battles; modified [BATTLES]")),o=function(t){return Or(t,r)},a=e.map(o),i=lr.convertServerStr(n.world_code),a.map(function(t){t["P1 Server"]=i}),t.n=2,lr.addP2ServersByID(a);case 2:return t.n=3,this.extendBattles(a);case 3:return c=t.v,console.log("Cached queried battles in cache; modified [BATTLES]"),t.a(2,c)}},t,this)})),function(t,e,n){return Rr.apply(this,arguments)}),cacheUpload:(Lr=vr(dr().m(function t(e){var n,r;return dr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No uploaded battles provided to cacheUpload"),t.a(2,Hn.emptyFilters());case 1:return n=e.map(Ar),t.n=2,Ot.cache(Ot.Keys.UPLOADED_BATTLES,n);case 2:return t.n=3,this.extendBattles(n);case 3:return r=t.v,console.log("Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]"),t.a(2,r)}},t,this)})),function(t){return Lr.apply(this,arguments)}),getStats:function(){var t=vr(dr().m(function t(e,n,r,o,a){var i,c,u,s,l,f,p,d,h,y,v;return dr().w(function(t){for(;;)switch(t.n){case 0:return i=r.localFilters.length+r.globalFilters.length,t.n=1,this.applyFilter(r);case 1:return c=t.v,u=Object.values(e),s=Object.values(c),t.n=2,this.getNumericalBattles(c,o);case 2:return l=t.v,f=Wt(u,n,i>0?l:null,a),t.n=3,this.getPrebanStats(l,o);case 3:return p=t.v,t.n=4,this.getFirstPickStats(l,o);case 4:return d=t.v,t.n=5,this.getGeneralStats(l,o);case 5:return h=t.v,t.n=6,this.getHeroStats(l,o);case 6:return y=t.v,t.n=7,this.getServerStats(s);case 7:return v=t.v,t.a(2,{battles:u,filteredBattles:s,plotContent:f,prebanStats:p,generalStats:h,firstPickStats:d,playerHeroStats:y.playerHeroStats,enemyHeroStats:y.enemyHeroStats,serverStats:v})}},t,this)}));return function(e,n,r,o,a){return t.apply(this,arguments)}}(),getPrebanStats:function(t,e){var n=Ut.getHeroByName("Empty",e).prime,r=Object.values(t);if(0===r.length)return[];var o,a=function(t){return gr(new Set(r)).map(function(e){return e[t]}).filter(function(t){return t&&t!==n})},i=a("P1 Preban 1"),c=a("P1 Preban 2"),u=new Set([].concat(gr(i),gr(c))),s=[],l=Pr(u);try{for(l.s();!(o=l.n()).done;){var f=o.value;s.push(f)}}catch(t){l.e(t)}finally{l.f()}var p,d=Pr(u);try{for(d.s();!(p=d.n()).done;){var h,y=p.value,v=Pr(u);try{for(v.s();!(h=v.n()).done;){var g=h.value;y<g&&s.push(y*g)}}catch(t){v.e(t)}finally{v.f()}}}catch(t){d.e(t)}finally{d.f()}for(var m=r.length,b=[],w=function(){var t=P[S],n=r.filter(function(e){return e["P1 Prebans"]%t===0}),o=n.length;if(o<1)return 1;var a=n.reduce(function(t,e){return t+e.Win},0),i=m>0?o/m:0,c=o>0?a/o:0,u=2*a-o;b.push({preban:e.prime_pair_lookup[t],wins:a,appearances:o,appearance_rate:Ir(i),win_rate:Ir(c),"+/-":u})},S=0,P=s;S<P.length;S++)w();return b.sort(function(t,e){return e.appearances-t.appearances}),b},getFirstPickStats:function(t,e){var n=Object.values(t).filter(function(t){return t["First Pick"]});if(0===n.length)return[];var r,o=n.length,a={},i=Pr(n);try{for(i.s();!(r=i.n()).done;){var c=r.value,u=c["P1 Pick 1"];u in a||(a[u]={wins:0,appearances:0}),a[u].wins+=c.Win?1:0,a[u].appearances+=1}}catch(t){i.e(t)}finally{i.f()}var s=Object.entries(a).map(function(t){var n=mr(t,2),r=n[0],a=n[1];return{hero:Ut.getHeroByPrime(r,e).name,wins:a.wins,appearances:a.appearances,win_rate:Ir(a.wins/a.appearances),appearance_rate:Ir(a.appearances/o),"+/-":2*a.wins-a.appearances}});return s.sort(function(t,e){return e.appearances-t.appearances}),s},getGeneralStats:function(t,e){var n=Object.values(t);n.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var r=0,o=0;if(n.length>1)for(var a=0;a<n.length-1;a++){var i=[n[a],n[a+1]],c=i[0],u=i[1]["P1 Points"]-c["P1 Points"];u<-40||(r+=u,o+=1)}for(var s=o>0?r/o:0,l=n.length,f=n.filter(function(t){return 1===t["First Pick"]}),p=n.filter(function(t){return 1!==t["First Pick"]}),d=f.length,h=p.length,y=f.reduce(function(t,e){return t+e.Win},0),v=p.reduce(function(t,e){return t+e.Win},0),g=l?d/l:0,m=l?h/l:0,b=d?y/d:0,w=h?v/h:0,S=l?(y+v)/l:0,P=0,E=0,_=0,T=0,k=0,O=n;k<O.length;k++)1===O[k].Win?(_+=1,P=Math.max(P,_),T=0):(_=0,T+=1,E=Math.max(E,T));var A="N/A";return{first_pick_count:d,second_pick_count:h,first_pick_rate:d?Ir(g):A,second_pick_rate:h?Ir(m):A,first_pick_winrate:d?Ir(b):A,second_pick_winrate:h?Ir(w):A,total_winrate:l?Ir(S):A,total_battles:l,total_wins:y+v,max_win_streak:P,max_loss_streak:E,avg_ppg:s.toFixed(2)}},getHeroStats:function(t,e){var n=e.heroes,r=Object.values(t);if(0===r.length)return{playerHeroStats:[],enemyHeroStats:[]};var o,a=r.length,i=[],c=[],u=Pr(n);try{var s=function(){var t=o.value;if(t.name===e.Empty.name)return 1;var n=t.prime,u=r.filter(function(t){return t["P1 Picks"]%n===0}),s=r.filter(function(t){return t["P2 Picks"]%n===0});u.length>0&&i.push(wr(wr({},jr(u,a)),{},{hero:t.name})),s.length>0&&c.push(wr(wr({},jr(s,a)),{},{hero:t.name}))};for(u.s();!(o=u.n()).done;)s()}catch(t){u.e(t)}finally{u.f()}return{playerHeroStats:i.sort(function(t,e){return t.hero.localeCompare(e.hero)}),enemyHeroStats:c.sort(function(t,e){return t.hero.localeCompare(e.hero)})}},getServerStats:function(t){for(var n=[],r=t.length,o=function(){var e=i[a],o=t.filter(function(t){return t["P2 Server"]===e}),c=o.length,u=o.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),s=c>0?u/c:"N/A",l=r>0?c/r:"N/A",f=o.filter(function(t){return"True"===t["First Pick"]}),p=f.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),d=f.length>0?p/f.length:"N/A",h=o.filter(function(t){return"False"===t["First Pick"]}),y=h.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),v=h.length>0?y/h.length:"N/A";n.push({server:e,count:c,wins:u,win_rate:Ir(s),frequency:Ir(l),"+/-":2*u-c,fp_games:f.length,sp_games:h.length,fp_wr:Ir(d),sp_wr:Ir(v)})},a=0,i=Object.values(e);a<i.length;a++)o();return n.sort(function(t,e){return t.server.localeCompare(e.server)}),n}};function Ur(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Vr(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Vr(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Vr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Vr(f,"constructor",s),Vr(s,"constructor",u),u.displayName="GeneratorFunction",Vr(s,o,"GeneratorFunction"),Vr(f),Vr(f,o,"Generator"),Vr(f,r,function(){return this}),Vr(f,"toString",function(){return"[object Generator]"}),(Ur=function(){return{w:a,m:p}})()}function Vr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Vr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Vr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Vr(t,e,n,r)}function Hr(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var Kr,Wr,qr={HeroManager:Ut,BattleManager:Cr,SeasonManager:qe,UserManager:lr,ClientCache:Ot,getFilters:(Kr=Ur().m(function t(e){var n,r,o;return Ur().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ot.getFilterStr();case 1:if(n=t.v){t.n=2;break}return t.a(2,Hn.getEmptyFilters());case 2:return t.n=3,qe.getSeasonDetails();case 3:return r=t.v,t.n=4,Hn.createAndParse(n,e,r);case 4:return o=t.v,t.a(2,o.filters)}},t)}),Wr=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=Kr.apply(t,e);function a(t){Hr(o,n,r,a,i,"next",t)}function i(t){Hr(o,n,r,a,i,"throw",t)}a(void 0)})},function(t){return Wr.apply(this,arguments)})};const Yr=qr;function zr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Jr(s,"_invoke",function(n,r,o){var a,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,u=t,p.n=n,i}};function d(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(u=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,u=h;(e=c<2?t:u)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(e){a=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,a),!0),s}var i={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Jr(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Jr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Jr(f,"constructor",s),Jr(s,"constructor",u),u.displayName="GeneratorFunction",Jr(s,o,"GeneratorFunction"),Jr(f),Jr(f,o,"Generator"),Jr(f,r,function(){return this}),Jr(f,"toString",function(){return"[object Generator]"}),(zr=function(){return{w:a,m:p}})()}function Jr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Jr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Jr(t,e,n,r)}function Xr(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function $r(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Xr(a,r,o,i,c,"next",t)}function c(t){Xr(a,r,o,i,c,"throw",t)}i(void 0)})}}document.addEventListener("DOMContentLoaded",$r(zr().m(function t(){var e,n,r;return zr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Yr.UserManager.findUser({id:"195863691"});case 1:return e=t.v,t.n=2,O.rsFetchBattleData(e.user);case 2:if(!(n=t.v).ok){t.n=4;break}return t.n=3,n.json();case 3:r=t.v,console.log("Success"),console.log(r.battles),t.n=5;break;case 4:console.error("Error:",n.error);case 5:return t.a(2)}},t)})))})();