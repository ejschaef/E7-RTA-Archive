/*! For license information please see test.bundle.js.LICENSE.txt */
(()=>{"use strict";var t=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),e="world_global",n="world_kor",r="world_jpn",o="world_asia",i="world_eu",a={world_global:"Global",world_kor:"Korea",world_jpn:"Japan",world_asia:"Asia",world_eu:"Europe"},c={set_speed:"Speed",set_acc:"Hit",set_cri:"Critical",set_res:"Resist",set_def:"Defense",set_att:"Attack",set_max_hp:"Health",set_cri_dmg:"Destruction",set_coop:"Unity",set_immune:"Immunity",set_rage:"Rage",set_vampire:"Lifesteal",set_shield:"Protection",set_revenge:"Revenge",set_penetrate:"Penetration",set_torrent:"Torrent",set_counter:"Counter",set_scar:"Injury"},u=864e5,s={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},l="Date/Time",f="Seconds",p="Turns",h="P1 ID",d="P1 Server",y="P2 ID",g="P2 Server",v="P1 League",m="P2 League",b="P1 Points",w="Point Gain",S="Win",E="First Pick",A="First Turn",_="First Turn Hero",O="CR Bar",T="P1 Prebans",I="P2 Prebans",j="P1 Picks",D="P2 Picks",R="P1 Postban",k="P2 Postban",P="P1 Equipment",C="P2 Equipment",F="P1 Artifacts",x="P2 Artifacts",L="P1 MVP",M="P2 MVP",N="P1 Picks Primes",B="P1 Picks Prime Product",G="P2 Picks Primes",U="P2 Picks Prime Product",V="P1 Prebans Primes",H="P2 Prebans Primes",K=[P,C,F,x,O,T,I,j,D],$=[E,A,S],W=[f,p,b,w],q=[v,m],J="Hero Name",z=function(t){for(var e=new Uint8Array(30001),n=[],r=2;r<=t;r++)if(!e[r]){n.push(r);for(var o=r*r;o<=t;o+=r)e[o]=1}return n}(3e4);function Q(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function X(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Z(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Z(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Z(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Z(f,"constructor",s),Z(s,"constructor",u),u.displayName="GeneratorFunction",Z(s,o,"GeneratorFunction"),Z(f),Z(f,o,"Generator"),Z(f,r,function(){return this}),Z(f,"toString",function(){return"[object Generator]"}),(X=function(){return{w:i,m:p}})()}function Z(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Z=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Z(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Z(t,e,n,r)}function tt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function et(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){tt(i,r,o,a,c,"next",t)}function c(t){tt(i,r,o,a,c,"throw",t)}a(void 0)})}}function nt(t){return rt.apply(this,arguments)}function rt(){return(rt=et(X().m(function t(e){var n,r,o;return X().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error: status: ".concat(n.status));case 2:return t.n=3,n.json();case 3:return r=t.v,console.log("Fetched data from E7 Server; keys:",Object.keys(r)),t.a(2,r);case 4:return t.p=4,o=t.v,console.error("Error fetching global user data:",o),t.a(2,null)}},t,null,[[0,4]])}))).apply(this,arguments)}function ot(){return ot=et(X().m(function t(){var e,n,r=arguments;return X().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,nt("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find hero data for language:",e),n=null),t.a(2,n)}},t)})),ot.apply(this,arguments)}function it(){return it=et(X().m(function t(){var e,n,r=arguments;return X().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,nt("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_artifact.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find artifact data for language:",e),n=null),t.a(2,n)}},t)})),it.apply(this,arguments)}function at(){return(at=et(X().m(function e(n){var r,o;return X().w(function(e){for(;;)switch(e.n){case 0:if(n=n.replace("world_",""),Q(t).some(function(t){return t.replace("world_","")===n})){e.n=1;break}return console.error("Could not find world code: ".concat(n)),e.a(2,null);case 1:return console.log("Fetching users for world code: ".concat(n," from E7 Server...")),r="https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_".concat(n,".json"),e.n=2,nt(r);case 2:return(o=e.v)&&console.log("Got user data for world: ".concat(n," ; Found ").concat(o.users.length," users")),e.a(2,o)}},e)}))).apply(this,arguments)}const ct={fetchHeroJSON:function(){return ot.apply(this,arguments)},fetchUserJSON:function(t){return at.apply(this,arguments)},fetchArtifactJSON:function(){return it.apply(this,arguments)}};function ut(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return st(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(st(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,st(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,st(f,"constructor",s),st(s,"constructor",u),u.displayName="GeneratorFunction",st(s,o,"GeneratorFunction"),st(f),st(f,o,"Generator"),st(f,r,function(){return this}),st(f,"toString",function(){return"[object Generator]"}),(ut=function(){return{w:i,m:p}})()}function st(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}st=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){st(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},st(t,e,n,r)}function lt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ft(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){lt(i,r,o,a,c,"next",t)}function c(t){lt(i,r,o,a,c,"throw",t)}a(void 0)})}}var pt,ht,dt,yt,gt,vt,mt;const bt={test:function(t){console.log("Got data in test:",t.rank_plot)},fetchFromPython:(mt=ft(ut().m(function t(e){var n,r;return ut().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=3;break}return console.log("Retrying Fetch..."),t.n=2,fetch(e);case 2:n=t.v;case 3:return t.n=4,n.json();case 4:return r=t.v,t.a(2,r||null)}},t)})),function(t){return mt.apply(this,arguments)}),fetchHeroData:(vt=ft(ut().m(function t(){return ut().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},t,this)})),function(){return vt.apply(this,arguments)}),rsFetchBattleData:(gt=ft(ut().m(function t(e){return ut().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return gt.apply(this,arguments)}),fetchSeasonDetails:(yt=ft(ut().m(function t(){var e,n,r;return ut().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.seasonDetails),t.a(2,{seasonDetails:r,error:!1});case 3:return t.a(2,{seasonDetails:null,error:n.error});case 4:return t.a(2)}},t)})),function(){return yt.apply(this,arguments)}),fetchArtifactJson:(dt=ft(ut().m(function t(){var e,n,r;return ut().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_artifact_json");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.artifactJson),t.a(2,r);case 3:return t.a(2,null);case 4:return t.a(2)}},t)})),function(){return dt.apply(this,arguments)}),fetchUser:(ht=ft(ut().m(function t(e){var n,r,o,i,a;return ut().w(function(t){for(;;)switch(t.n){case 0:if(e.name&&e.world_code||e.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:e})});case 2:return n=t.v,t.n=3,n.json();case 3:if(r=t.v,t.p=4,!n.ok){t.n=9;break}if(r.foundUser){t.n=7;break}if(!e.name){t.n=5;break}return o=e.world_code.replace("world_",""),t.a(2,{user:null,error:'Could not find user: "'.concat(e.name,'" in world_code: ').concat(o)});case 5:if(!e.id){t.n=6;break}return t.a(2,{user:null,error:"Could not find user with ID: ".concat(e.id)});case 6:t.n=8;break;case 7:return i=r.user,console.log("Server communication successful; received response data for user"),console.log("Found user: ".concat(JSON.stringify(i))),t.a(2,{user:i,error:!1});case 8:t.n=10;break;case 9:return console.log("Server communication unsuccessful"),t.a(2,{user:null,error:r.error});case 10:t.n=12;break;case 11:return t.p=11,a=t.v,console.error("Error fetching and caching user: ".concat(a)),t.a(2,{user:null,error:a.message});case 12:return t.a(2)}},t,null,[[4,11]])})),function(t){return ht.apply(this,arguments)}),fetchDataFromID:(pt=ft(ut().m(function t(e){return ut().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass ID to fetch user");case 1:return t.n=2,fetch("/api/get_battle_data_from_id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return pt.apply(this,arguments)})},wt=(t,e)=>e.some(e=>t instanceof e);let St,Et;const At=new WeakMap,_t=new WeakMap,Ot=new WeakMap;let Tt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return At.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function It(t){Tt=t(Tt)}function jt(t){return"function"==typeof t?(e=t,(Et||(Et=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Rt(this),t),Dt(this.request)}:function(...t){return Dt(e.apply(Rt(this),t))}):(t instanceof IDBTransaction&&function(t){if(At.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});At.set(t,e)}(t),wt(t,St||(St=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,Tt):t);var e}function Dt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(Dt(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return Ot.set(e,t),e}(t);if(_t.has(t))return _t.get(t);const e=jt(t);return e!==t&&(_t.set(t,e),Ot.set(e,t)),e}const Rt=t=>Ot.get(t);function kt(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=Dt(a);return r&&a.addEventListener("upgradeneeded",t=>{r(Dt(a.result),t.oldVersion,t.newVersion,Dt(a.transaction),t)}),n&&a.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const Pt=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],Ft=new Map;function xt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ft.get(e))return Ft.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Ct.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Pt.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return Ft.set(e,i),i}It(t=>({...t,get:(e,n,r)=>xt(e,n)||t.get(e,n,r),has:(e,n)=>!!xt(e,n)||t.has(e,n)}));const Lt=["continue","continuePrimaryKey","advance"],Mt={},Nt=new WeakMap,Bt=new WeakMap,Gt={get(t,e){if(!Lt.includes(e))return t[e];let n=Mt[e];return n||(n=Mt[e]=function(...t){Nt.set(this,Bt.get(this)[e](...t))}),n}};async function*Ut(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,Gt);for(Bt.set(n,e),Ot.set(n,Rt(e));e;)yield n,e=await(Nt.get(n)||e.continue()),Nt.delete(n)}function Vt(t,e){return e===Symbol.asyncIterator&&wt(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&wt(t,[IDBIndex,IDBObjectStore])}function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Kt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return $t(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):($t(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,$t(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,$t(f,"constructor",s),$t(s,"constructor",u),u.displayName="GeneratorFunction",$t(s,o,"GeneratorFunction"),$t(f),$t(f,o,"Generator"),$t(f,r,function(){return this}),$t(f,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:i,m:p}})()}function $t(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$t=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){$t(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},$t(t,e,n,r)}function Wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(n),!0).forEach(function(e){Jt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Jt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Qt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){zt(i,r,o,a,c,"next",t)}function c(t){zt(i,r,o,a,c,"throw",t)}a(void 0)})}}function Yt(t,e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Qt(Kt().m(function t(e,n){var r;return Kt().w(function(t){for(;;)switch(t.n){case 0:return(r=e.transaction(n,"readwrite")).objectStore(n).clear(),t.n=1,r.done;case 1:return t.a(2)}},t)}))).apply(this,arguments)}It(t=>({...t,get:(e,n,r)=>Vt(e,n)?Ut:t.get(e,n,r),has:(e,n)=>Vt(e,n)||t.has(e,n)}));var Zt,te,ee,ne,re,oe,ie,ae,ce,ue,se,le,fe,pe,he,de,ye,ge,ve={USER:"current-user",BATTLES:"battles",RAW_UPLOAD:"raw-upload",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",STATS:"stats",FILTER_STR:"filter-str"},me=qt(qt({},ve),{},{HERO_MANAGER:"hero-manager",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",ID_SEARCH_FLAG:"id-search",GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users",ARTIFACTS:"artifacts",ARTIFACTS_LOWERCASE_NAMES_SET:"artifacts-lowercase-names-set",ARTIFACT_OBJECT_LIST:"artifact-object-list",HOME_PAGE_STATE:"home-page-state",INTER_PAGE_MANAGER:"inter-page-manager"}),be={autoZoom:me.AUTO_ZOOM_FLAG,autoQuery:me.AUTO_QUERY_FLAG,idSearch:me.ID_SEARCH_FLAG},we={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:qt({},me),MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:(ge=Qt(Kt().m(function t(){return Kt().w(function(t){for(;;)if(0===t.n)return t.a(2,kt(we.consts.DB_NAME,we.consts.DB_VERSION,{upgrade:function(t){t.objectStoreNames.contains(we.consts.STORE_NAME)&&(t.deleteObjectStore(we.consts.STORE_NAME),console.log("Old store deleted")),t.objectStoreNames.contains(we.consts.STORE_NAME)||(console.log("Created data store"),t.createObjectStore(we.consts.STORE_NAME)),t.objectStoreNames.contains(we.consts.META_STORE_NAME)||(console.log("Created meta data store"),t.createObjectStore(we.consts.META_STORE_NAME))}}))},t)})),function(){return ge.apply(this,arguments)}),get:(ye=Qt(Kt().m(function t(e){var n,r;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.get(this.consts.STORE_NAME,e);case 2:if(null===(r=t.v)){t.n=3;break}console.log("Found ".concat(e," in cache")),t.n=4;break;case 3:return console.log("".concat(e," not found in cache; returning null")),t.a(2,null);case 4:return t.n=5,this.checkCacheTimeout(e);case 5:if(!t.v){t.n=6;break}return t.a(2,r);case 6:return t.a(2,null);case 7:return t.a(2)}},t,this)})),function(t){return ye.apply(this,arguments)}),cache:(de=Qt(Kt().m(function t(e,n){var r;return Kt().w(function(t){for(;;)switch(t.n){case 0:return console.log("Caching ".concat(e," with data: ").concat(n)),t.n=1,this.openDB();case 1:return r=t.v,t.n=2,r.put(this.consts.STORE_NAME,n,e);case 2:return t.n=3,this.setTimestamp(e,Date.now());case 3:return t.a(2)}},t,this)})),function(t,e){return de.apply(this,arguments)}),delete:(he=Qt(Kt().m(function t(e){var n;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.delete(this.consts.STORE_NAME,e);case 2:return t.n=3,this.deleteTimestamp(e);case 3:return t.a(2)}},t,this)})),function(t){return he.apply(this,arguments)}),deleteDB:(pe=Qt(Kt().m(function t(){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,indexedDB.deleteDatabase(this.consts.DB_NAME);case 1:console.log("Database deleted");case 2:return t.a(2)}},t,this)})),function(){return pe.apply(this,arguments)}),getTimestamp:(fe=Qt(Kt().m(function t(e){var n,r,o;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.get(this.consts.META_STORE_NAME,r);case 2:return o=t.v,t.a(2,null!=o?o:null)}},t,this)})),function(t){return fe.apply(this,arguments)}),setTimestamp:(le=Qt(Kt().m(function t(e,n){var r,o;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return r=t.v,o="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,r.put(this.consts.META_STORE_NAME,n,o);case 2:return t.n=3,r.get(this.consts.META_STORE_NAME,o);case 3:t.v;case 4:return t.a(2)}},t,this)})),function(t,e){return le.apply(this,arguments)}),deleteTimestamp:(se=Qt(Kt().m(function t(e){var n,r;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.delete(this.consts.META_STORE_NAME,r);case 2:return t.a(2)}},t,this)})),function(t){return se.apply(this,arguments)}),clearData:(ue=Qt(Kt().m(function t(){var e;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return e=t.v,t.n=2,Yt(e,this.consts.STORE_NAME);case 2:return t.n=3,Yt(e,this.consts.META_STORE_NAME);case 3:console.log("All data cleared from data cache and meta data cache");case 4:return t.a(2)}},t,this)})),function(){return ue.apply(this,arguments)}),clearUserData:(ce=Qt(Kt().m(function t(){var e,n=this;return Kt().w(function(t){for(;;)switch(t.n){case 0:return e=Object.values(ve),t.n=1,Promise.all(e.map(function(t){return n.delete(t)}));case 1:console.log("User data cleared from data cache");case 2:return t.a(2)}},t)})),function(){return ce.apply(this,arguments)}),clearSeasonData:(ae=Qt(Kt().m(function t(){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.delete(me.SEASON_DETAILS);case 1:console.log("Season data cleared from data cache");case 2:return t.a(2)}},t,this)})),function(){return ae.apply(this,arguments)}),checkCacheTimeout:(ie=Qt(Kt().m(function t(e){var n,r;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getTimestamp(e);case 1:if(n=t.v,r=Date.now(),n&&!(r-n>we.consts.CACHE_TIMEOUT)){t.n=3;break}return console.log("Cache timeout for ".concat(e)),t.n=2,this.delete(e);case 2:return t.a(2,!1);case 3:return t.a(2,!0)}},t,this)})),function(t){return ie.apply(this,arguments)}),getFilterStr:(oe=Qt(Kt().m(function t(){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(we.Keys.FILTER_STR);case 1:return t.a(2,t.v)}},t,this)})),function(){return oe.apply(this,arguments)}),setFilterStr:(re=Qt(Kt().m(function t(e){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(we.Keys.FILTER_STR,e);case 1:return t.a(2)}},t,this)})),function(t){return re.apply(this,arguments)}),getStats:(ne=Qt(Kt().m(function t(){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(we.Keys.STATS);case 1:return t.a(2,t.v)}},t,this)})),function(){return ne.apply(this,arguments)}),setStats:(ee=Qt(Kt().m(function t(e){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(me.STATS,e);case 1:return t.a(2)}},t,this)})),function(t){return ee.apply(this,arguments)}),getFlag:(te=Qt(Kt().m(function t(e){var n;return Kt().w(function(t){for(;;)switch(t.n){case 0:if(n=be[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.get(n);case 2:return t.a(2,t.v)}},t,this)})),function(t){return te.apply(this,arguments)}),setFlag:(Zt=Qt(Kt().m(function t(e,n){var r;return Kt().w(function(t){for(;;)switch(t.n){case 0:if(r=be[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.cache(r,n);case 2:return t.a(2)}},t,this)})),function(t,e){return Zt.apply(this,arguments)})};const Se=we;function Ee(t){var e={};for(var n in t)Array.isArray(t[n])&&t[n].length>0?e[n]=[t[n][0],"Length: ".concat(t[n].length)]:e[n]=t[n];console.log(e)}function Ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||_e(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(t,e){if(t){if("string"==typeof t)return Oe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(t,e):void 0}}function Oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Te(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ie(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ie(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ie(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ie(f,"constructor",s),Ie(s,"constructor",u),u.displayName="GeneratorFunction",Ie(s,o,"GeneratorFunction"),Ie(f),Ie(f,o,"Generator"),Ie(f,r,function(){return this}),Ie(f,"toString",function(){return"[object Generator]"}),(Te=function(){return{w:i,m:p}})()}function Ie(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ie=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ie(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Ie(t,e,n,r)}function je(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function De(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){je(i,r,o,a,c,"next",t)}function c(t){je(i,r,o,a,c,"throw",t)}a(void 0)})}}var Re,ke,Pe,Ce,Fe={getHeroManager:(Ce=De(Te().m(function t(){var e,n,r,o;return Te().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.HERO_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=this.fetchAndCacheHeroManager();case 4:return t.a(2,o)}},t,this)})),function(){return Ce.apply(this,arguments)}),createHeroManager:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=_e(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Ae(e.value,2),o=r[0],i=r[1],a=z[o];i.prime=a}}catch(t){n.e(t)}finally{n.f()}var c={heroes:t};return c=function(t){console.log("Adding Lookup Dicts"),console.log("\tAdding name lookup"),t.name_lookup=t.heroes.reduce(function(t,e){return t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t},{}),console.log("\tAdding prime lookup"),t.prime_lookup=t.heroes.reduce(function(t,e){return t[e.prime]=e,t},{}),console.log("\tAdding code lookup"),t.code_lookup=t.heroes.reduce(function(t,e){return t[e.code]=e,t},{}),console.log("\tAdding prime pair lookup");var e=t.heroes.reduce(function(t,e){return t[e.prime]=e.name,t},{}),n=Object.keys(t.prime_lookup).length-1;console.log("\tAdding prime pair lookup; primes to process",n);for(var r=0;r<n-1;r++)for(var o=z[r],i=r+1;i<n;i++){var a=z[i],c=o*a,u=t.prime_lookup[o].name,s=t.prime_lookup[a].name;e[c]=[u,s].sort().join(", ")}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.prime],t.prime_pair_lookup=e,t}(c=function(t){var e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:z[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(c)),c},fetchHeroManager:(Pe=De(Te().m(function t(){var e,n,r,o,i,a;return Te().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ct.fetchHeroJSON();case 1:if(i=e=t.v,!(o=null!==i)){t.n=2;break}o=void 0!==e;case 2:if(!o){t.n=3;break}a=e,t.n=5;break;case 3:return t.n=4,bt.fetchHeroData();case 4:a=t.v;case 5:return n=a.en,r=this.createHeroManager(n),console.log("Created HeroManager using raw data received from server"),t.a(2,r)}},t,this)})),function(){return Pe.apply(this,arguments)}),fetchAndCacheHeroManager:(ke=De(Te().m(function t(){var e;return Te().w(function(t){for(;;)switch(t.n){case 0:return console.log("HeroManager not found in cache, fetching from server and caching it"),t.n=1,this.fetchHeroManager();case 1:return e=t.v,t.n=2,Se.cache(Se.Keys.HERO_MANAGER,e);case 2:return console.log("Cached HeroManager using raw data recieved from server"),Ee(e),t.a(2,e)}},t,this)})),function(){return ke.apply(this,arguments)}),deleteHeroManager:(Re=De(Te().m(function t(){return Te().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.delete(Se.Keys.HERO_MANAGER);case 1:console.log("Removed hero manager from cache");case 2:return t.a(2)}},t)})),function(){return Re.apply(this,arguments)}),getHeroByName:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;var r=t.toLowerCase().replace(/\s+/g,"");return null!==(n=e.name_lookup[r])&&void 0!==n?n:null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?null!==(n=e.code_lookup[t])&&void 0!==n?n:null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}};const xe=Fe;function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function Me(t){return function(t){if(Array.isArray(t))return Ue(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ge(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e,n){return(e=function(t){var e=function(t){if("object"!=Le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Le(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ge(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Ge(t,e){if(t){if("string"==typeof t)return Ue(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(t,e):void 0}}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Ve=function(t){return t.filter(function(t){return t[E]})};function He(t){return(100*t).toFixed(2)+"%"}function Ke(t,e){return He(0!==e?t/e:0)}function $e(t,e){var n=t[O].find(function(t){return t[0]===e});return n?n[1]:null}function We(t,e,n){var r,o,i=function(t){return t.filter(function(t){return t[S]})}(t).length,a=t.length,c=0!==e?a/e:0,u=0!==a?i/a:0,s=t.reduce(function(t,e){return t+(e[R]===n||e[k]===n)},0),l=t.reduce(function(t,e){return t+(e[S]||e[R]===n||e[k]===n)},0),f=t.reduce(function(t,e){return t+e[w]},0),p=0,h=0,d=0,y=Be(t);try{for(y.s();!(o=y.n()).done;){var g=$e(o.value,n);null!==g&&0!==g&&(p+=1,h+=g,100===g&&(d+=1))}}catch(t){y.e(t)}finally{y.f()}var v=Ke(h/100,p);return Ne(Ne(Ne(Ne(Ne(Ne(Ne(Ne(Ne(Ne(r={},J,n),"Battles",a),"Pick Rate",He(c)),"Wins",i),"Win rate",He(u)),"Postbans",s),"Postban Rate",Ke(s,a)),"Success Rate",Ke(l,a)),"+/-",2*i-a),"Point Gain",f),Ne(Ne(Ne(r,"Avg CR",v),"First Turns",d),"First Turn Rate",Ke(d,p))}function qe(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Set,r=0,o=Object.values(t);r<o.length;r++){var i=o[r];(e?i[N]:i[G]).forEach(function(t){n.add(t)})}return n}function Je(t){var e=Math.floor(t/60),n=(t%60).toFixed(1);return 0===e?"".concat(n," secs"):"".concat(e," : ").concat(n,"s")}const ze=function(t,e){if(0===t.length)return{playerHeroStats:[],enemyHeroStats:[]};var n,r=t.length,o=qe(t,!0),i=qe(t,!1),a=[],c=[],u=Be(o);try{var s=function(){var o=n.value,i=xe.getHeroByPrime(o,e),c=t.filter(function(t){return t[B]%o===0});c.length>0&&a.push(We(c,r,i.name))};for(u.s();!(n=u.n()).done;)s()}catch(t){u.e(t)}finally{u.f()}var l,f=Be(i);try{var p=function(){var n=l.value,o=xe.getHeroByPrime(n,e),i=t.filter(function(t){return t[U]%n===0});i.length>0&&c.push(We(i,r,o.name))};for(f.s();!(l=f.n()).done;)p()}catch(t){f.e(t)}finally{f.f()}var h=J;return{playerHeroStats:a.sort(function(t,e){return t[h].localeCompare(e[h])}),enemyHeroStats:c.sort(function(t,e){return t[h].localeCompare(e[h])})}},Qe=function(t,e){if(0===(t=Ve(Object.values(t))).length)return[];var n,r=t.length,o={},i=Be(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(0!==a[N].length){var c=a[N][0];c in o||(o[c]={wins:0,appearances:0}),o[c].wins+=a[S],o[c].appearances+=1}}}catch(t){i.e(t)}finally{i.f()}var u=Object.entries(o).map(function(t){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Ge(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),o=n[0],i=n[1];return{hero:xe.getHeroByPrime(o,e).name,wins:i.wins,appearances:i.appearances,win_rate:He(i.wins/i.appearances),appearance_rate:He(i.appearances/r),"+/-":2*i.wins-i.appearances}});return u.sort(function(t,e){return e.appearances-t.appearances}),u},Ye=function(t,e){var n=xe.getHeroByName("Empty",e).prime;if(0===t.length)return[];var r,o=function(e,r){return Me(new Set(t.map(function(t){return t[e][r]}).filter(function(t){return t&&t!==n})))},i=o(V,0),a=o(V,1),c=new Set([].concat(Me(i),Me(a))),u=[],s=Be(c);try{for(s.s();!(r=s.n()).done;){var l=r.value;u.push(l)}}catch(t){s.e(t)}finally{s.f()}var f,p=Be(c);try{for(p.s();!(f=p.n()).done;){var h,d=f.value,y=Be(c);try{for(y.s();!(h=y.n()).done;){var g=h.value;d<g&&u.push(d*g)}}catch(t){y.e(t)}finally{y.f()}}}catch(t){p.e(t)}finally{p.f()}console.log("Prebans:",u);for(var v=t.length,m=[],b=function(){var n=S[w],r=t.filter(function(t){return t["P1 Prebans Prime Product"]%n===0}),o=r.length;if(o<1)return 1;var i=r.reduce(function(t,e){return t+e.Win},0),a=v>0?o/v:0,c=o>0?i/o:0,u=2*i-o;m.push({preban:e.prime_pair_lookup[n],wins:i,appearances:o,appearance_rate:He(a),win_rate:He(c),"+/-":u})},w=0,S=u;w<S.length;w++)b();return m.sort(function(t,e){return e.appearances-t.appearances}),m},Xe=function(t){for(var e=[],n=t.length,r=function(){var r=i[o],a=t.filter(function(t){return t["P2 Server"]===r}),c=a.length,u=a.reduce(function(t,e){return t+e.Win},0),s=c>0?u/c:"N/A",l=n>0?c/n:"N/A",f=a.filter(function(t){return t["First Pick"]}),p=f.reduce(function(t,e){return t+e.Win},0),h=a.filter(function(t){return!t["First Pick"]}),d=h.reduce(function(t,e){return t+e.Win},0);e.push({server:r,count:c,wins:u,win_rate:"N/A"===s?"N/A":He(s),frequency:He(l),"+/-":2*u-c,fp_games:f.length,sp_games:h.length,fp_wr:f.length>0?He(p/f.length):"N/A",sp_wr:h.length>0?He(d/h.length):"N/A"})},o=0,i=Object.values(a);o<i.length;o++)r();return e.sort(function(t,e){return t.server.localeCompare(e.server)}),e},Ze=function(t,e){t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var n,r=t.length,o=t.reduce(function(t,e){return t+e["Point Gain"]},0),i=r>0?o/r:0,a=t.reduce(function(t,e){return t+e.Turns},0),c=r>0?a/r:0,u=t.length>0?Math.max.apply(Math,Me(t.map(function(t){return t.Turns}))):0,s=t.reduce(function(t,e){return t+e.Seconds},0),l=r>0?s/r:0,f=t.length>0?Math.max.apply(Math,Me(t.map(function(t){return t.Seconds}))):0,p=Je(l),h=Je(f),d=t.reduce(function(t,e){return t+e["First Turn"]},0),y=Ve(t),g=function(t){return t.filter(function(t){return!t[E]})}(t),v=y.length,m=g.length,b=y.reduce(function(t,e){return t+e.Win},0),w=g.reduce(function(t,e){return t+e.Win},0),S=r?v/r:0,A=r?m/r:0,_=v?b/v:0,O=m?w/m:0,T=r?(b+w)/r:0,I=0,j=0,D=0,R=0,k=Be(t);try{for(k.s();!(n=k.n()).done;)n.value.Win?(D+=1,I=Math.max(I,D),R=0):(D=0,R+=1,j=Math.max(j,R))}catch(t){k.e(t)}finally{k.f()}var P="N/A";return{first_pick_count:v,second_pick_count:m,first_pick_rate:v?He(S):P,second_pick_rate:m?He(A):P,first_pick_winrate:v?He(_):P,second_pick_winrate:m?He(O):P,total_winrate:r?He(T):P,total_battles:r,total_wins:b+w,max_win_streak:I,max_loss_streak:j,avg_ppg:i.toFixed(2),avg_turns:c.toFixed(2),avg_time:p,max_turns:u,max_time:h,first_turn_games:d,first_turn_rate:r?He(d/r):P}};function tn(t){throw new TypeError('"'+t+'" is read-only')}function en(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return nn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return on(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(on(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,on(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,on(f,"constructor",s),on(s,"constructor",u),u.displayName="GeneratorFunction",on(s,o,"GeneratorFunction"),on(f),on(f,o,"Generator"),on(f,r,function(){return this}),on(f,"toString",function(){return"[object Generator]"}),(rn=function(){return{w:i,m:p}})()}function on(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}on=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){on(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},on(t,e,n,r)}function an(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function cn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){an(i,r,o,a,c,"next",t)}function c(t){an(i,r,o,a,c,"throw",t)}a(void 0)})}}function un(){return sn.apply(this,arguments)}function sn(){return(sn=cn(rn().m(function t(){var e;return rn().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting artifact map from E7 server..."),t.n=1,ct.fetchArtifactJSON("en");case 1:if(null!==(e=t.v)){t.n=3;break}return console.log("Getting artifact map from flask server..."),t.n=2,bt.fetchArtifactJson();case 2:tn("rawJSON");case 3:if(null!==e){t.n=4;break}return console.error("Could not get artifact Json map from E7 server or flask server"),t.a(2,null);case 4:return console.log("Got artifact Json for language: 'en'"),t.a(2,Object.fromEntries(e.filter(function(t){return null!==t.name}).map(function(t){return[t.code,t.name]})))}},t)}))).apply(this,arguments)}var ln,fn,pn,hn,dn;const yn={getArtifacts:(dn=cn(rn().m(function t(){var e,n,r,o;return rn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.ARTIFACTS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,this.fetchAndCacheArtifacts();case 4:o=t.v;case 5:return t.a(2,o)}},t,this)})),function(){return dn.apply(this,arguments)}),getArtifactLowercaseNameSet:(hn=cn(rn().m(function t(){var e,n;return rn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.ARTIFACTS_LOWERCASE_NAMES_SET);case 1:if(null===(e=t.v)){t.n=2;break}return console.log("Got artifact lowercase name set from cache"),t.a(2,e);case 2:return t.n=3,this.getArtifacts();case 3:return n=t.v,e=new Set(Object.values(n).filter(function(t){return null!==t}).map(function(t){return t.toLowerCase()})),t.n=4,Se.cache(Se.Keys.ARTIFACTS_LOWERCASE_NAMES_SET,e);case 4:return t.a(2,e)}},t,this)})),function(){return hn.apply(this,arguments)}),getArtifactObjectList:(pn=cn(rn().m(function t(){var e,n;return rn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.ARTIFACT_OBJECT_LIST);case 1:if(null===(e=t.v)){t.n=2;break}return console.log("Got artifact object list from cache"),t.a(2,e);case 2:return t.n=3,this.getArtifacts();case 3:return n=t.v,e=Object.entries(n).map(function(t){var e=en(t,2);return{id:e[0],name:e[1]}}),t.n=4,Se.cache(Se.Keys.ARTIFACT_OBJECT_LIST,e);case 4:return t.a(2,e)}},t,this)})),function(){return pn.apply(this,arguments)}),fetchAndCacheArtifacts:(fn=cn(rn().m(function t(){var e;return rn().w(function(t){for(;;)switch(t.n){case 0:return console.log("ArtifactManager not found in cache, fetching from server and caching it"),t.n=1,un();case 1:return e=t.v,t.n=2,Se.cache(Se.Keys.ARTIFACTS,e);case 2:return console.log("Cached ArtifactManager using raw data recieved from server"),t.a(2,e)}},t)})),function(){return fn.apply(this,arguments)}),clearArtifactData:(ln=cn(rn().m(function t(){return rn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.delete(Se.Keys.ARTIFACTS);case 1:return t.a(2)}},t)})),function(){return ln.apply(this,arguments)}),convertCodeToName:function(t,e){return e[t]||t}};function gn(t){return Array.isArray?Array.isArray(t):"[object Array]"===En(t)}function vn(t){return"string"==typeof t}function mn(t){return"number"==typeof t}function bn(t){return"object"==typeof t}function wn(t){return null!=t}function Sn(t){return!t.trim().length}function En(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const An=Object.prototype.hasOwnProperty;class _n{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(t=>{let n=On(t);this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight}),this._keys.forEach(t=>{t.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function On(t){let e=null,n=null,r=null,o=1,i=null;if(vn(t)||gn(t))r=t,e=Tn(t),n=In(t);else{if(!An.call(t,"name"))throw new Error("Missing name property in key");const a=t.name;if(r=a,An.call(t,"weight")&&(o=t.weight,o<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(a));e=Tn(a),n=In(a),i=t.getFn}return{path:e,id:n,weight:o,src:r,getFn:i}}function Tn(t){return gn(t)?t:t.split(".")}function In(t){return gn(t)?t.join("."):t}var jn={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const o=(t,e,i)=>{if(wn(t))if(e[i]){const a=t[e[i]];if(!wn(a))return;if(i===e.length-1&&(vn(a)||mn(a)||function(t){return!0===t||!1===t||function(t){return bn(t)&&null!==t}(t)&&"[object Boolean]"==En(t)}(a)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(a));else if(gn(a)){r=!0;for(let t=0,n=a.length;t<n;t+=1)o(a[t],e,i+1)}else e.length&&o(a,e,i+1)}else n.push(t)};return o(t,vn(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};const Dn=/[^ ]+/g;class Rn{constructor({getFn:t=jn.getFn,fieldNormWeight:e=jn.fieldNormWeight}={}){this.norm=function(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(e){const o=e.match(Dn).length;if(n.has(o))return n.get(o);const i=1/Math.pow(o,.5*t),a=parseFloat(Math.round(i*r)/r);return n.set(o,a),a},clear(){n.clear()}}}(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((t,e)=>{this._keysMap[t.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,vn(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();vn(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!wn(t)||Sn(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach((e,r)=>{let o=e.getFn?e.getFn(t):this.getFn(t,e.path);if(wn(o))if(gn(o)){let t=[];const e=[{nestedArrIndex:-1,value:o}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(wn(r))if(vn(r)&&!Sn(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else gn(r)&&r.forEach((t,n)=>{e.push({nestedArrIndex:n,value:t})})}n.$[r]=t}else if(vn(o)&&!Sn(o)){let t={v:o,n:this.norm.get(o)};n.$[r]=t}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function kn(t,e,{getFn:n=jn.getFn,fieldNormWeight:r=jn.fieldNormWeight}={}){const o=new Rn({getFn:n,fieldNormWeight:r});return o.setKeys(t.map(On)),o.setSources(e),o.create(),o}function Pn(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:o=jn.distance,ignoreLocation:i=jn.ignoreLocation}={}){const a=e/t.length;if(i)return a;const c=Math.abs(r-n);return o?a+c/o:c?1:a}const Cn=32;function Fn(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const o=t.charAt(n);e[o]=(e[o]||0)|1<<r-n-1}return e}const xn=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Ln{constructor(t,{location:e=jn.location,threshold:n=jn.threshold,distance:r=jn.distance,includeMatches:o=jn.includeMatches,findAllMatches:i=jn.findAllMatches,minMatchCharLength:a=jn.minMatchCharLength,isCaseSensitive:c=jn.isCaseSensitive,ignoreDiacritics:u=jn.ignoreDiacritics,ignoreLocation:s=jn.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:s},t=c?t:t.toLowerCase(),t=u?xn(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const l=(t,e)=>{this.chunks.push({pattern:t,alphabet:Fn(t),startIndex:e})},f=this.pattern.length;if(f>Cn){let t=0;const e=f%Cn,n=f-e;for(;t<n;)l(this.pattern.substr(t,Cn),t),t+=Cn;if(e){const t=f-Cn;l(this.pattern.substr(t),t)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,ignoreDiacritics:n,includeMatches:r}=this.options;if(t=e?t:t.toLowerCase(),t=n?xn(t):t,this.pattern===t){let e={isMatch:!0,score:0};return r&&(e.indices=[[0,t.length-1]]),e}const{location:o,distance:i,threshold:a,findAllMatches:c,minMatchCharLength:u,ignoreLocation:s}=this.options;let l=[],f=0,p=!1;this.chunks.forEach(({pattern:e,alphabet:n,startIndex:h})=>{const{isMatch:d,score:y,indices:g}=function(t,e,n,{location:r=jn.location,distance:o=jn.distance,threshold:i=jn.threshold,findAllMatches:a=jn.findAllMatches,minMatchCharLength:c=jn.minMatchCharLength,includeMatches:u=jn.includeMatches,ignoreLocation:s=jn.ignoreLocation}={}){if(e.length>Cn)throw new Error("Pattern length exceeds max of 32.");const l=e.length,f=t.length,p=Math.max(0,Math.min(r,f));let h=i,d=p;const y=c>1||u,g=y?Array(f):[];let v;for(;(v=t.indexOf(e,d))>-1;){let t=Pn(e,{currentLocation:v,expectedLocation:p,distance:o,ignoreLocation:s});if(h=Math.min(t,h),d=v+l,y){let t=0;for(;t<l;)g[v+t]=1,t+=1}}d=-1;let m=[],b=1,w=l+f;const S=1<<l-1;for(let r=0;r<l;r+=1){let i=0,c=w;for(;i<c;)Pn(e,{errors:r,currentLocation:p+c,expectedLocation:p,distance:o,ignoreLocation:s})<=h?i=c:w=c,c=Math.floor((w-i)/2+i);w=c;let u=Math.max(1,p-c+1),v=a?f:Math.min(p+c,f)+l,E=Array(v+2);E[v+1]=(1<<r)-1;for(let i=v;i>=u;i-=1){let a=i-1,c=n[t.charAt(a)];if(y&&(g[a]=+!!c),E[i]=(E[i+1]<<1|1)&c,r&&(E[i]|=(m[i+1]|m[i])<<1|1|m[i+1]),E[i]&S&&(b=Pn(e,{errors:r,currentLocation:a,expectedLocation:p,distance:o,ignoreLocation:s}),b<=h)){if(h=b,d=a,d<=p)break;u=Math.max(1,2*p-d)}}if(Pn(e,{errors:r+1,currentLocation:p,expectedLocation:p,distance:o,ignoreLocation:s})>h)break;m=E}const E={isMatch:d>=0,score:Math.max(.001,b)};if(y){const t=function(t=[],e=jn.minMatchCharLength){let n=[],r=-1,o=-1,i=0;for(let a=t.length;i<a;i+=1){let a=t[i];a&&-1===r?r=i:a||-1===r||(o=i-1,o-r+1>=e&&n.push([r,o]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(g,c);t.length?u&&(E.indices=t):E.isMatch=!1}return E}(t,e,n,{location:o+h,distance:i,threshold:a,findAllMatches:c,minMatchCharLength:u,includeMatches:r,ignoreLocation:s});d&&(p=!0),f+=y,d&&g&&(l=[...l,...g])});let h={isMatch:p,score:p?f/this.chunks.length:1};return p&&r&&(h.indices=l),h}}class Mn{constructor(t){this.pattern=t}static isMultiMatch(t){return Nn(t,this.multiRegex)}static isSingleMatch(t){return Nn(t,this.singleRegex)}search(){}}function Nn(t,e){const n=t.match(e);return n?n[1]:null}class Bn extends Mn{constructor(t,{location:e=jn.location,threshold:n=jn.threshold,distance:r=jn.distance,includeMatches:o=jn.includeMatches,findAllMatches:i=jn.findAllMatches,minMatchCharLength:a=jn.minMatchCharLength,isCaseSensitive:c=jn.isCaseSensitive,ignoreDiacritics:u=jn.ignoreDiacritics,ignoreLocation:s=jn.ignoreLocation}={}){super(t),this._bitapSearch=new Ln(t,{location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:i,minMatchCharLength:a,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:s})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Gn extends Mn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],o=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+o,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const Un=[class extends Mn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},Gn,class extends Mn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends Mn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Mn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends Mn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends Mn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},Bn],Vn=Un.length,Hn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Kn=new Set([Bn.type,Gn.type]);const $n=[];function Wn(t,e){for(let n=0,r=$n.length;n<r;n+=1){let r=$n[n];if(r.condition(t,e))return new r(t,e)}return new Ln(t,e)}const qn="$and",Jn="$path",zn=t=>!(!t[qn]&&!t.$or),Qn=t=>({[qn]:Object.keys(t).map(e=>({[e]:t[e]}))});function Yn(t,e,{auto:n=!0}={}){const r=t=>{let o=Object.keys(t);const i=(t=>!!t[Jn])(t);if(!i&&o.length>1&&!zn(t))return r(Qn(t));if((t=>!gn(t)&&bn(t)&&!zn(t))(t)){const r=i?t[Jn]:o[0],a=i?t.$val:t[r];if(!vn(a))throw new Error((t=>`Invalid value for key ${t}`)(r));const c={keyId:In(r),pattern:a};return n&&(c.searcher=Wn(a,e)),c}let a={children:[],operator:o[0]};return o.forEach(e=>{const n=t[e];gn(n)&&n.forEach(t=>{a.children.push(r(t))})}),a};return zn(t)||(t=Qn(t)),r(t)}function Xn(t,e){const n=t.matches;e.matches=[],wn(n)&&n.forEach(t=>{if(!wn(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let o={indices:n,value:r};t.key&&(o.key=t.key.src),t.idx>-1&&(o.refIndex=t.idx),e.matches.push(o)})}function Zn(t,e){e.score=t.score}class tr{constructor(t,e={},n){this.options={...jn,...e},this.options.useExtendedSearch,this._keyStore=new _n(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Rn))throw new Error("Incorrect 'index' type");this._myIndex=e||kn(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){wn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,r-=1,e.push(o))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:i,ignoreFieldNorm:a}=this.options;let c=vn(t)?vn(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=jn.ignoreFieldNorm}){t.forEach(t=>{let n=1;t.matches.forEach(({key:t,norm:r,score:o})=>{const i=t?t.weight:null;n*=Math.pow(0===o&&i?Number.EPSILON:o,(i||1)*(e?1:r))}),t.score=n})}(c,{ignoreFieldNorm:a}),o&&c.sort(i),mn(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=jn.includeMatches,includeScore:r=jn.includeScore}={}){const o=[];return n&&o.push(Xn),r&&o.push(Zn),t.map(t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return o.length&&o.forEach(e=>{e(t,r)}),r})}(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=Wn(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:t,i:n,n:o})=>{if(!wn(t))return;const{isMatch:i,score:a,indices:c}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:a,value:t,norm:o,indices:c}]})}),r}_searchLogical(t){const e=Yn(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:o}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:o});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}const o=[];for(let i=0,a=t.children.length;i<a;i+=1){const a=t.children[i],c=n(a,e,r);if(c.length)o.push(...c);else if(t.operator===qn)return[]}return o},r=this._myIndex.records,o={},i=[];return r.forEach(({$:t,i:r})=>{if(wn(t)){let a=n(e,t,r);a.length&&(o[r]||(o[r]={idx:r,item:t,matches:[]},i.push(o[r])),a.forEach(({matches:t})=>{o[r].matches.push(...t)}))}}),i}_searchObjectList(t){const e=Wn(t,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:t,i:r})=>{if(!wn(t))return;let i=[];n.forEach((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))}),i.length&&o.push({idx:r,item:t,matches:i})}),o}_findMatches({key:t,value:e,searcher:n}){if(!wn(e))return[];let r=[];if(gn(e))e.forEach(({v:e,i:o,n:i})=>{if(!wn(e))return;const{isMatch:a,score:c,indices:u}=n.searchIn(e);a&&r.push({score:c,key:t,value:e,idx:o,norm:i,indices:u})});else{const{v:o,n:i}=e,{isMatch:a,score:c,indices:u}=n.searchIn(o);a&&r.push({score:c,key:t,value:o,norm:i,indices:u})}return r}}function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(e){or(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function or(t,e,n){return(e=function(t){var e=function(t){if("object"!=er(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==er(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ir(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}function ar(t){return t.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{})}function cr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o={includeScore:!0,threshold:.3},i=new tr(e,r?rr(rr({},o),r):o).search(t);return null!==n?i.slice(0,n):i}function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function sr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return lr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fr(t,e,n){return(e=function(t){var e=function(t){if("object"!=ur(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ur(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pr(t,e){var n=function(t){var n,r;return null!==(n=null===(r=xe.getHeroByName(t,e))||void 0===r?void 0:r.prime)&&void 0!==n?n:e.Fodder.prime},r=function(t,e){return t*e};t[N]=t[j].map(n),t[G]=t[D].map(n),t[B]=t[N].reduce(r,1),t[U]=t[G].reduce(r,1),t[V]=t[T].map(n),t[H]=t[I].map(n),t["P1 Prebans Prime Product"]=t[V].reduce(r,1),t["P2 Prebans Prime Product"]=t[H].reduce(r,1)}function hr(t,e,n){return n=null!=n?n:yn.getArtifacts(),Object.fromEntries(t.map(function(t){var r=function(t,e,n){var r,o=function(t){var n,r;return null!==(n=null===(r=xe.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},i=function(e,r){return r.map(function(r,o){return r?function(t){return yn.convertCodeToName(t,n)||"None"}(r):function(e,n){return"p1"===e?t.p2_postban===t.p1_picks[n]:t.p1_postban===t.p2_picks[n]}(e,o)?"n/a":"None"})},u=function(t){return t.map(function(t){return t.map(function(t){return c[t]||t})})},s=t.cr_bar.find(function(t){return 100===t[1]}),N=!!s&&t.p1_picks.includes(s[0]),B=(fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(r={},"Season",t.season_name||"None"),l,t.date_time),f,t.seconds),p,t.turns),"Seq Num",t.seq_num),h,t.p1_id.toString()),d,a[t.p1_server]||t.p1_server||"None"),y,t.p2_id.toString()),g,a[t.p2_server]||t.p2_server||"None"),v,ir(t.p1_league)||"None"),fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(r,m,ir(t.p2_league)||"None"),b,t.p1_win_score||null),w,t.p1_point_delta||null),S,1===t.win),E,1===t.first_pick),A,!!N),_,s?o(s[0]):"n/a"),O,t.cr_bar.map(function(t){return t&&2==t.length?[o(t[0]),t[1]]:["n/a",0]})),T,t.p1_prebans.map(o)),I,t.p2_prebans.map(o)),fr(fr(fr(fr(fr(fr(fr(fr(fr(fr(r,j,t.p1_picks.map(o)),D,t.p2_picks.map(o)),R,o(t.p1_postban)),k,o(t.p2_postban)),P,u(t.p1_equipment)),C,u(t.p2_equipment)),F,i("p1",t.p1_artifacts)),x,i("p2",t.p2_artifacts)),L,o(t.p1_mvp)),M,o(t.p2_mvp)));return pr(B,e),B}(t,e,n);return[r["Seq Num"],r]}))}function dr(t,e){var n=t.map(function(t){var n,r=sr(K);try{for(r.s();!(n=r.n()).done;){var o=n.value;t[o]=JSON.parse(t[o])}}catch(t){r.e(t)}finally{r.f()}var i,a=sr($);try{for(a.s();!(i=a.n()).done;){var c=i.value;t[c]="true"===t[c].toLowerCase()}}catch(t){a.e(t)}finally{a.f()}var u,s=sr(W);try{for(s.s();!(u=s.n()).done;){var l=u.value;t[l]=Number(t[l].replace("'",""))}}catch(t){s.e(t)}finally{s.f()}var f,p=sr(q);try{for(p.s();!(f=p.n()).done;){var h=f.value;t[h]=ir(t[h])}}catch(t){p.e(t)}finally{p.f()}return pr(t,e),t});return Object.fromEntries(n.map(function(t){return[t["Seq Num"],t]}))}function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function gr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function vr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gr(Object(n),!0).forEach(function(e){mr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function mr(t,e,n){return(e=function(t){var e=function(t){if("object"!=yr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function br(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(yr(t)+" is not iterable")}function wr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Er(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Er(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Er(t,e){if(t){if("string"==typeof t)return Ar(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ar(t,e):void 0}}function Ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _r(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Or(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Or(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Or(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Or(f,"constructor",s),Or(s,"constructor",u),u.displayName="GeneratorFunction",Or(s,o,"GeneratorFunction"),Or(f),Or(f,o,"Generator"),Or(f,r,function(){return this}),Or(f,"toString",function(){return"[object Generator]"}),(_r=function(){return{w:i,m:p}})()}function Or(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Or=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Or(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Or(t,e,n,r)}function Tr(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ir(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Tr(i,r,o,a,c,"next",t)}function c(t){Tr(i,r,o,a,c,"throw",t)}a(void 0)})}}tr.version="7.1.0",tr.createIndex=kn,tr.parseIndex=function(t,{getFn:e=jn.getFn,fieldNormWeight:n=jn.fieldNormWeight}={}){const{keys:r,records:o}=t,i=new Rn({getFn:e,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(o),i},tr.config=jn,tr.parseQuery=Yn,function(...t){$n.push(...t)}(class{constructor(t,{isCaseSensitive:e=jn.isCaseSensitive,ignoreDiacritics:n=jn.ignoreDiacritics,includeMatches:r=jn.includeMatches,minMatchCharLength:o=jn.minMatchCharLength,ignoreLocation:i=jn.ignoreLocation,findAllMatches:a=jn.findAllMatches,location:c=jn.location,threshold:u=jn.threshold,distance:s=jn.distance}={}){this.query=null,this.options={isCaseSensitive:e,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:o,findAllMatches:a,ignoreLocation:i,location:c,threshold:u,distance:s},t=e?t:t.toLowerCase(),t=n?xn(t):t,this.pattern=t,this.query=function(t,e={}){return t.split("|").map(t=>{let n=t.trim().split(Hn).filter(t=>t&&!!t.trim()),r=[];for(let t=0,o=n.length;t<o;t+=1){const o=n[t];let i=!1,a=-1;for(;!i&&++a<Vn;){const t=Un[a];let n=t.isMultiMatch(o);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(a=-1;++a<Vn;){const t=Un[a];let n=t.isSingleMatch(o);if(n){r.push(new t(n,e));break}}}return r})}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:o}=this.options;t=r?t:t.toLowerCase(),t=o?xn(t):t;let i=0,a=[],c=0;for(let r=0,o=e.length;r<o;r+=1){const o=e[r];a.length=0,i=0;for(let e=0,r=o.length;e<r;e+=1){const r=o[e],{isMatch:u,indices:s,score:l}=r.search(t);if(!u){c=0,i=0,a.length=0;break}if(i+=1,c+=l,n){const t=r.constructor.type;Kn.has(t)?a=[...a,...s]:a.push(s)}}if(i){let t={isMatch:!0,score:c/i};return n&&(t.indices=a),t}}return{isMatch:!1,score:1}}});var jr,Dr,Rr,kr,Pr,Cr,Fr,xr={loaded_servers:new Set,getBattles:(Fr=Ir(_r().m(function t(){var e,n,r,o;return _r().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting battles"),t.n=1,Se.get(Se.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return Fr.apply(this,arguments)}),removeBattles:(Cr=Ir(_r().m(function t(){return _r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.delete(Se.Keys.BATTLES);case 1:return t.n=2,Se.delete(Se.Keys.UPLOADED_BATTLES);case 2:return t.n=3,Se.delete(Se.Keys.FILTERED_BATTLES);case 3:console.log("Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']");case 4:return t.a(2)}},t)})),function(){return Cr.apply(this,arguments)}),removeFilteredBattles:(Pr=Ir(_r().m(function t(){return _r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.delete(Se.Keys.FILTERED_BATTLES);case 1:console.log("Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']");case 2:return t.a(2)}},t)})),function(){return Pr.apply(this,arguments)}),applyFilter:(kr=Ir(_r().m(function t(e){var n,r,o,i,a,c,u,s,l,f,p,h;return _r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.localFilters||[],o=e.globalFilters||[],i=Object.values(n),a=Sr(o);try{for(a.s();!(c=a.n()).done;)u=c.value,console.log("Applying global filter: ".concat(u)),s=i.length,i=u.call(i),n=Object.fromEntries(i.map(function(t){return[t["Seq Num"],t]})),console.log("Filtered ".concat(s-i.length," out of ").concat(s,"; new total = ").concat(i.length))}catch(t){a.e(t)}finally{a.f()}l=Sr(r),t.p=2,p=_r().m(function t(){var e,r;return _r().w(function(t){for(;;)switch(t.n){case 0:e=f.value,console.log("Applying local filter: ".concat(e)),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=wr(t,2),r=(n[0],n[1]);return e.call(r)})),console.log("Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length));case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(br(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,h=t.v,l.e(h);case 7:return t.p=7,l.f(),t.f(7);case 8:return console.log("Caching filtered battles ; total = ".concat(Object.keys(n).length)),t.n=9,Se.cache(Se.Keys.FILTERED_BATTLES,n);case 9:return console.log("Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters")),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return kr.apply(this,arguments)}),extendBattles:(Rr=Ir(_r().m(function t(e){var n,r,o,i,a;return _r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.BATTLES);case 1:if(i=n=t.v,!(o=null!==i)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}a=n,t.n=4;break;case 3:a={};case 4:return r=vr(vr({},a),e),t.n=5,Se.cache(Se.Keys.BATTLES,r);case 5:return console.log("Extended user data in cache"),t.a(2,r)}},t)})),function(t){return Rr.apply(this,arguments)}),cacheQuery:(Dr=Ir(_r().m(function t(e,n,r){var o,i;return _r().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No query battles provided to cacheQuery"),t.a(2,[]);case 1:return console.log("Caching queried battles: ".concat(e.length," battles; modified [BATTLES]")),o=hr(e,n,r),t.n=2,this.extendBattles(o);case 2:return i=t.v,console.log("Cached queried battles in cache; modified [BATTLES]"),t.a(2,i)}},t,this)})),function(t,e,n){return Dr.apply(this,arguments)}),cacheUpload:(jr=Ir(_r().m(function t(e,n){var r,o;return _r().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.error("No uploaded battles provided to cacheUpload"),t.a(2,{});case 1:return r=dr(e,n),t.n=2,Se.cache(Se.Keys.UPLOADED_BATTLES,r);case 2:return t.n=3,this.extendBattles(r);case 3:return o=t.v,console.log("Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]"),t.a(2,o)}},t,this)})),function(t,e){return jr.apply(this,arguments)}),getStats:function(){var t=Ir(_r().m(function t(e,n,r){var o,i,a,c,u,s,l,f,p;return _r().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting stats"),o=n.localFilters.length+n.globalFilters.length,console.log("Applying ".concat(o," filters")),i=Object.values(e),t.n=1,this.applyFilter(n);case 1:return a=t.v,c=Object.values(a),console.log("Getting preban stats"),t.n=2,Ye(c,r);case 2:return u=t.v,console.log("Getting first pick stats"),t.n=3,Qe(c,r);case 3:return s=t.v,console.log("Getting general stats"),t.n=4,Ze(c,r);case 4:return l=t.v,console.log("Getting hero stats"),t.n=5,ze(c,r);case 5:return f=t.v,console.log("Getting server stats"),t.n=6,Xe(c);case 6:return p=t.v,console.log("Returning stats"),t.a(2,{battles:i,filteredBattlesObj:a,prebanStats:u,generalStats:l,firstPickStats:s,playerHeroStats:f.playerHeroStats,enemyHeroStats:f.enemyHeroStats,serverStats:p,numFilters:o})}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()};const Lr=xr;function Mr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Nr(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Nr(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Nr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Nr(f,"constructor",s),Nr(s,"constructor",u),u.displayName="GeneratorFunction",Nr(s,o,"GeneratorFunction"),Nr(f),Nr(f,o,"Generator"),Nr(f,r,function(){return this}),Nr(f,"toString",function(){return"[object Generator]"}),(Mr=function(){return{w:i,m:p}})()}function Nr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Nr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Nr(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Nr(t,e,n,r)}function Br(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Gr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Br(i,r,o,a,c,"next",t)}function c(t){Br(i,r,o,a,c,"throw",t)}a(void 0)})}}var Ur,Vr,Hr,Kr={fetchAndCacheSeasonDetails:(Hr=Gr(Mr().m(function t(){var e,n,r,o,i,a;return Mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,bt.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))})}),n.sort(function(t,e){return t["Season Number"]-e["Season Number"]}),r=[n[0]],o=n[0],n.slice(1).forEach(function(t){var e=new Date(+o.range[1]+u),n=new Date(+t.range[0]-u),i={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};r.push(i),r.push(t),o=t}),o.range[1]<new Date&&(i=new Date(+r.at(-1).range[1]+u),a={"Season Number":o["Season Number"]+.5,Code:null,Season:"Active Pre-Season",Start:i.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[i,new Date]},r.push(a)),r.reverse(),t.n=3,Se.cache(Se.Keys.SEASON_DETAILS,r);case 3:return t.a(2,r)}},t)})),function(){return Hr.apply(this,arguments)}),getSeasonDetails:(Vr=Gr(Mr().m(function t(){var e,n,r,o;return Mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.SEASON_DETAILS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,Kr.fetchAndCacheSeasonDetails();case 4:o=t.v;case 5:return t.a(2,o)}},t)})),function(){return Vr.apply(this,arguments)}),clearSeasonDetails:(Ur=Gr(Mr().m(function t(){return Mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.delete(Se.Keys.SEASON_DETAILS);case 1:console.log("Season details cleared from data cache");case 2:return t.a(2)}},t)})),function(){return Ur.apply(this,arguments)})};const $r=Kr;function Wr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")(?=[,)\\s;]|$)"),e)}function qr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")$"),e)}function Jr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";if(t.length<1)throw new Error("orRegex must have at least one pattern");for(var n="(?:".concat(t[0].source,")"),r=1;r<t.length;r++)n+="|(?:".concat(t[r].source,")");return new RegExp(n,e)}var zr=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Qr=new RegExp("^(?:".concat(["date","is-first-pick","is-win","victory-points","p1.picks","p2.picks","p1.prebans","p2.prebans","p1.postban","p2.postban","prebans","p1.id","p2.id","p1.league","p2.league","p1.server","p2.server","p1.pick1","p1.pick2","p1.pick3","p1.pick4","p1.pick5","p2.pick1","p2.pick2","p2.pick3","p2.pick4","p2.pick5","p1.mvp","p2.mvp","first-turn","first-turn-hero","turns","seconds","point-gain"].map(zr).join("|"),")"),"i"),Yr=new RegExp("(?:".concat(["and","or","xor","not"].map(zr).join("|"),")(?=\\()"),"i"),Xr=new RegExp("(?:".concat(["last-n"].map(zr).join("|"),")(?=\\()"),"i"),Zr=new RegExp("(?:".concat(["p1.equipment","p2.equipment","p1.artifact","p2.artifact","p1.cr-geq","p2.cr-geq","p1.cr-lt","p2.cr-lt"].map(zr).join("|"),")(?=\\()"),"i"),to=Jr([Yr,Xr,Zr]),eo=/.*/i,no=/\d{4}-\d{2}-\d{2}/,ro=/\{\s*\}/,oo=/-?\d+/,io=/season-[1-9]+[0-9]*(\.[1-9]*)?|current-season/i,ao=new RegExp("^".concat(no.source,"$"),"i"),co=new RegExp("(?:".concat(io.source,")"),"i"),uo=eo.source,so=oo.source,lo=no.source,fo=Qr.source,po=co.source,ho=new RegExp('"('.concat(uo,")\"|'(").concat(uo,")'"),"i"),yo=new RegExp(qr(ho),"i"),go=ho.source,vo=new RegExp("(?:".concat(go,"|").concat(uo,"|").concat(lo,")"),"i"),mo=new RegExp("(?:".concat(fo,"|").concat(po,")"),"i"),bo=vo.source,wo=new RegExp("\\{\\s*(?:".concat(bo,"\\s*)(?:,\\s*").concat(bo,"\\s*)*,?\\s*\\}|").concat(ro.source),"i"),So=new RegExp("".concat(so,"\\.\\.\\.").concat(so,"|").concat(lo,"\\.\\.\\.").concat(lo,"|").concat(so,"\\.\\.\\.=").concat(so,"|").concat(lo,"\\.\\.\\.=").concat(lo)),Eo=new RegExp("^".concat(So.source,"$")),Ao={VALID_STRING_RE:eo,VALID_DATE_RE:no,VALID_INT_RE:oo,EMPTY_SET_RE:ro,SET_ELEMENT_RE:vo,VALID_SET_RE:wo,VALID_STRING_LITERAL_RE:yo,VALID_DATE_LITERAL_RE:ao,VALID_INT_LITERAL_RE:/^-?\d+$/,VALID_BOOL_LITERAL_RE:/^(true|false)$/i,VALID_RANGE_RE:So,VALID_RANGE_LITERAL_RE:Eo,VALID_SEASON_RE:io,VALID_SEASON_LITERAL_RE:qr(io),VALID_DATA_WORD_RE:co,VALID_DATA_WORD_LITERAL_RE:qr(co),VALID_FIELD_WORD_RE:Qr,VALID_DATAFIELD_RE:mo,VALID_GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:qr(yo),VALID_CLAUSE_FUNCTIONS_RE:Yr,VALID_DIRECT_FUNCTIONS_RE:Zr,VALID_GLOBAL_FUNCTIONS_RE:Xr,VALID_FUNCTIONS_RE:to,padRegex:Wr,anchorExp:qr,tokenMatch:function(t){return t.match(to)?(console.log("Matched stream as clause:",t),"keyword"):t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?(console.log("Matched stream as operator:",t),"operator"):t.match(new RegExp("[a-z0-9.\"'}=)-]".concat(mo.source,"(?=[,)\\s;]|$)"),"i"))?(console.log("Matched stream as field with preceding fragment:",t),null):t.match(Wr(mo))?(console.log("Matched stream as Data Field:",t),"datafield"):t.match(Wr(ho))?(console.log("Matched stream as string:",t),"string"):t.match(Wr(wo))?(console.log("Matched stream as set:",t),"set"):t.match(Wr(So))?(console.log("Matched stream as range:",t),"range"):t.match(/[^(,\s;.=0-9\-]+\d+/i)?(console.log("Matched stream as non-num null",t),null):t.match(Wr(oo))?(console.log("Matched stream as number:",t),"number"):t.match(Wr(no))?(console.log("Matched stream as date:",t),"date"):t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?(console.log("Matched stream as bool:",t),"bool"):t.match(/[\(\)\{\}\;\,]/)?(console.log("Matched stream as bracket:",t),"bracket"):(t.next(),console.log("Matched stream as null:",t),null)},orRegex:Jr,escapeRegex:zr};function _o(t){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_o(t)}function Oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Io(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Io(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Io(t,e){if(t){if("string"==typeof t)return jo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jo(t,e):void 0}}function jo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Do(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ko(r.key),r)}}function Ro(t,e,n){return e&&Do(t.prototype,e),n&&Do(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ko(t){var e=function(t){if("object"!=_o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_o(e)?e:e+""}function Po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Co(t,e,n){return e=No(e),function(t,e){if(e&&("object"==_o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lo()?Reflect.construct(e,n||[],No(t).constructor):e.apply(t,n))}function Fo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e)}function xo(t){var e="function"==typeof Map?new Map:void 0;return xo=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Lo())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Mo(o,n.prototype),o}(t,arguments,No(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Mo(n,t)},xo(t)}function Lo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Lo=function(){return!!t})()}function Mo(t,e){return Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mo(t,e)}function No(t){return No=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},No(t)}var Bo=function(t){function e(t){var n;return Po(this,e),(n=Co(this,e,[t])).name="Filter Syntax Exception",n}return Fo(e,t),Ro(e)}(xo(Error)),Go=function(t){function e(t){var n;return Po(this,e),(n=Co(this,e,[t])).name="Filter Type Exception",n}return Fo(e,t),Ro(e)}(xo(Error)),Uo=function(t){function e(t){var n;return Po(this,e),(n=Co(this,e,[t])).name="Filter Validation Error",n}return Fo(e,t),Ro(e)}(xo(Error)),Vo={"(":")","{":"}",'"':'"',"'":"'"},Ho={"'":'"','"':"'"},Ko=Object.fromEntries(Object.entries(Vo).filter(function(t){var e=Oo(t,2);return e[0]!==e[1]}).map(function(t){var e=Oo(t,2),n=e[0];return[e[1],n]}));function $o(t){var e,n={},r=To(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=(n[o]||0)+1}}catch(t){r.e(t)}finally{r.f()}return n}const Wo={SyntaxException:Bo,TypeException:Go,ValidationError:Uo,retrieveEnclosure:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:")";if(e===n)throw new Error("Enclosure characters must be different: ".concat(e," = ").concat(n));var r,o=!1,i=0,a="",c=To(function(t){return function(t){if(Array.isArray(t))return jo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Io(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).entries());try{for(c.s();!(r=c.n()).done;){var u=Oo(r.value,2),s=u[0],l=u[1];if(l===e){if(i+=1,!o){o=!0;continue}}else l===n&&(i-=1);if(0===i&&o){if(s!=t.length-1)throw new Bo("Enclosure should not be resolved before end of string; resolved at index: ".concat(s,"; input string: ").concat(t));return a}if(i<0)throw new Bo("Unbalanced enclosure at index: ".concat(s," of input string: ").concat(t,'; balance of "').concat(e,"...").concat(n,'" enclosures became negative.'));o&&(a+=l)}}catch(t){c.e(t)}finally{c.f()}if(!o)throw new Bo("Enclosure of type ".concat(e,"...").concat(n," not found in string; input string: ").concat(t));if(i>0)throw new Bo("Enclosure could not be resolved; too many '".concat(n,"'; balance = +{count}; input string {string}"))},retrieveArgs:function(t){var e,n=0,r=[],o="",i=To(t);try{for(i.s();!(e=i.n()).done;){var a=e.value;if("("===a){if(1===(n+=1))continue}else")"===a&&(n-=1);1===n&&","===a?(r.push(o.trim()),o=""):n>=1&&(o+=a)}}catch(t){i.e(t)}finally{i.f()}return o.trim()&&r.push(o.trim()),r},getCharCounts:$o,tokenizeWithNestedEnclosures:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],i="",a=[],c=0;c<t.length;c++){var u=t[c];if(e.includes(u)&&a.length===n)i&&(o.push(r?i.trim():i),i="");else if(Ko[u]){var s=Ko[u];if(a.length>n&&(i+=u),a[a.length-1]!==s){var l=$o(t);throw(l["'"]||0)%2!=0||(l['"']||0)%2!=0?new Bo("Error tokenizing: Unbalanced closing character at position ".concat(c,"; got string: '").concat(t,"' ; if a str type has quote characters in it, wrap it in the opposite quote character.")):new Bo("Error tokenizing: Unbalanced closing character at position ".concat(c,"; got string: '").concat(t,"'"))}a.pop()}else a.length>=n&&(i+=u),!Vo[u]||Ho[u]&&a[a.length-1]===Ho[u]||(a[a.length-1]===Vo[u]&&u===Vo[u]?a.pop():a.push(u))}if(a.length>0)throw new Error("Unbalanced enclosures in input string; unresolved characters from enclosure stack: [ ".concat(a.join(", ")," ]"));return i&&o.push(r?i.trim():i),o},parseDate:function(t){if(!Ao.VALID_DATE_LITERAL_RE.test(t))throw new Bo("Invalid date; must be in the format: YYYY-MM-DD ( regex: ".concat(Ao.VALID_DATE_LITERAL_RE.source," ); got: '").concat(t,"'"));var e=t.split(" ")[0],n=new Date("".concat(e,"T00:00:00"));if(isNaN(n.getTime()))throw new Bo("Invalid date; could not be parsed as a valid date; got: '".concat(t,"'"));var r=Oo(n.toISOString().split("T")[0].split("-").map(Number),3),o=r[0],i=r[1],a=r[2];if(n.getFullYear()!==o||n.getMonth()+1!==i||n.getDate()!==a)throw new Bo("Invalid date; parsed date: ".concat(n.toISOString()," does not match passed in string: ").concat(e));return console.log("Parsed date: ".concat(n.toISOString()," ; ").concat(n.constructor.name)),n},tryConvert:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===r&&(r="Could not convert ".concat(n," to ").concat(e));try{return t(n)}catch(t){throw new Go("".concat(r,": ").concat(t.message))}},trimSurroundingQuotes:function(t){return t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}};var qo=new Set("'\"(),-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),Jo=new Set(Object.values(c).map(function(t){return t.toLowerCase()}));function zo(t){return function(t){if(Array.isArray(t))return Qo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Qo(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qo(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Yo(t){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yo(t)}function Xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zo(r.key),r)}}function Zo(t){var e=function(t){if("object"!=Yo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yo(e)?e:e+""}var ti,ei,ni,ri=new Set(["victory-points","point-gain"]),oi=new Set(["prebans","p1.picks","p2.picks","p1.prebans","p2.prebans"]),ii=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=t.FIELD_EXTRACT_FN_MAP[e];if(!n)throw new Wo.ValidationError("Invalid field type: '".concat(e,"'; valid types are: ").concat(Object.keys(t.FIELD_EXTRACT_FN_MAP).join(", ")));console.log("Found valid field type: ",e),this.str=e,this.extractData=n},(e=[{key:"asString",value:function(){return this.str}}])&&Xo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ai(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||ui(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ui(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ui(t,e){if(t){if("string"==typeof t)return si(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?si(t,e):void 0}}function si(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function li(t,e,n){return e=pi(e),function(t,e){if(e&&("object"==yi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fi()?Reflect.construct(e,n||[],pi(t).constructor):e.apply(t,n))}function fi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fi=function(){return!!t})()}function pi(t){return pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pi(t)}function hi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&di(t,e)}function di(t,e){return di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},di(t,e)}function yi(t){return yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(t)}function gi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bi(r.key),r)}}function mi(t,e,n){return e&&vi(t.prototype,e),n&&vi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bi(t){var e=function(t){if("object"!=yi(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yi(e)?e:e+""}ti=ii,ni={date:function(t){var e;return t[l]?new Date("".concat(null===(e=t[l])||void 0===e?void 0:e.slice(0,10),"T00:00:00")):"N/A"},"is-first-pick":function(t){return t[E]?1:0},"is-win":function(t){return t[S]?1:0},"victory-points":function(t){return t[b]},"p1.picks":function(t){return t[j]},"p2.picks":function(t){return t[D]},"p1.prebans":function(t){return t[T]},"p2.prebans":function(t){return t[I]},"p1.postban":function(t){return t[R]},"p2.postban":function(t){return t[k]},prebans:function(t){return[].concat(zo(t[T]),zo(t[I]))},"p1.pick1":function(t){return t[j][0]},"p1.pick2":function(t){return t[j][1]},"p1.pick3":function(t){return t[j][2]},"p1.pick4":function(t){return t[j][3]},"p1.pick5":function(t){return t[j][4]},"p2.pick1":function(t){return t[D][0]},"p2.pick2":function(t){return t[D][1]},"p2.pick3":function(t){return t[D][2]},"p2.pick4":function(t){return t[D][3]},"p2.pick5":function(t){return t[D][4]},"p1.league":function(t){return t[v]},"p2.league":function(t){return t[m]},"p1.server":function(t){return t[d]},"p2.server":function(t){return t[g]},"p1.id":function(t){return Number(t[h])},"p2.id":function(t){return Number(t[y])},"p1.mvp":function(t){return t[L]},"p2.mvp":function(t){return t[M]},"is-first-turn":function(t){return t[A]},"first-turn-hero":function(t){return t[_]},turns:function(t){return t[p]},seconds:function(t){return t[f]},"point-gain":function(t){return t[w]}},(ei=Zo(ei="FIELD_EXTRACT_FN_MAP"))in ti?Object.defineProperty(ti,ei,{value:ni,enumerable:!0,configurable:!0,writable:!0}):ti[ei]=ni;var wi=function(){return mi(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;gi(this,t),this.rawString=e,this.data=null===r?this.getData(e,n):this.getData(e,n,r)},[{key:"asString",value:function(){return"".concat(this.data)}}])}(),Si=function(t){function e(){return gi(this,e),li(this,e,arguments)}return hi(e,t),mi(e,[{key:"getData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{types:["hero","league","server","equipment","artifact"]};if(t=(t=Wo.trimSurroundingQuotes(t)).trim(),!Ao.VALID_STRING_RE.test(t))throw new Wo.SyntaxException("Invalid string; all string content must start with a letter followed by either num, hyphen or period ( case insensitive regex: ".concat(Ao.VALID_STRING_LITERAL_RE.source," ); got: [").concat(t,"]"));function r(t,n){var r;switch(t){case"hero":return null===(r=xe.getHeroByName(n,e.HM))||void 0===r?void 0:r.name;case"league":return s[n]?n:null;case"server":return Object.values(a).find(function(t){return t.toLowerCase()===n});case"equipment":return Jo.has(n)?n:null;case"artifact":return e.ARTIFACT_LOWERCASE_STRINGS_SET.has(n)?n:null}}var o,i=ci(n.types);try{for(i.s();!(o=i.n()).done;){var c=r(o.value,t);if(c)return console.log("Parsed string: [".concat(t,"] to [").concat(c,"]")),ir(c)}}catch(t){i.e(t)}finally{i.f()}throw new Wo.SyntaxException("Invalid string; All strings must either be a valid [".concat(n.types.join(", "),"]; got: [").concat(t,"]"))}},{key:"asString",value:function(){return'"'.concat(this.data,'"')}}])}(wi),Ei=function(t){function e(){return gi(this,e),li(this,e,arguments)}return hi(e,t),mi(e,[{key:"getData",value:function(t){return Wo.parseDate(t)}},{key:"asString",value:function(){return"".concat(this.rawString)}}])}(wi),Ai=function(t){function e(){return gi(this,e),li(this,e,arguments)}return hi(e,t),mi(e,[{key:"getData",value:function(t){if(!Ao.VALID_INT_LITERAL_RE.test(t))throw new Wo.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));var e=parseInt(t);if(isNaN(e))throw new Wo.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));return e}},{key:"asString",value:function(){return"".concat(this.data)}}])}(wi),_i=function(t){function e(){return gi(this,e),li(this,e,arguments)}return hi(e,t),mi(e,[{key:"getData",value:function(t){if(!Ao.VALID_BOOL_LITERAL_RE.test(t))throw new Wo.SyntaxException("Invalid boolean; must be 'true' or 'false'; got: '".concat(t,"'"));return"true"===t?1:0}},{key:"asString",value:function(){return"".concat(this.data?"true":"false")}}])}(wi),Oi=function(t){function e(){return gi(this,e),li(this,e,arguments)}return hi(e,t),mi(e,[{key:"getData",value:function(t){var e=t.split("...");if(2!==e.length)throw new Wo.SyntaxException("Invalid range; ranges must be of the format x...y or x...=y ; got more than two values when splitting string: '".concat(t,"'"));var n=ai(e,2),r=n[0],o=n[1],i=!1;o.includes("=")&&(o=o.replace("=",""),i=!0);var a={start:null,end:null,endInclusive:i};if(Ao.VALID_DATE_LITERAL_RE.test(r)){if(a.start=Wo.tryConvert(Wo.parseDate,"Date",r,"Could not convert '".concat(r,"' to Date in declared range: '").concat(t,"'")),a.end=Wo.tryConvert(Wo.parseDate,"Date",o,"Could not convert '".concat(o,"' to Date in declared range: '").concat(t,"' ; Ranges must have homogenous types")),a.start>a.end)throw new Wo.SyntaxException("Invalid range; start date must be on or before end date; ".concat(a.start," > ").concat(a.end));a.type="Date"}else{if(!Ao.VALID_INT_LITERAL_RE.test(r))throw new Wo.SyntaxException("Invalid range; must be of the format x...y or x...=y ; got: '".concat(t,"'"));if(a.start=Wo.tryConvert(function(t){return new Ai(t)},"Int",r,"Could not convert '".concat(r,"' to Int in declared range: '").concat(t,"'")).data,a.end=Wo.tryConvert(function(t){return new Ai(t)},"Int",o,"Could not convert '".concat(o,"' to Int in declared range: '").concat(t,"' ; Ranges must have homogenous types")).data,a.start>a.end)throw new Wo.SyntaxException("Invalid range; start integer must be equal to or less than end integer; ".concat(a.start," > ").concat(a.end));a.type="Int"}return console.log("Built Range: ".concat(JSON.stringify(a))),a}},{key:"asString",value:function(){var t=this.data.endInclusive?"...=":"...";return"Date"===this.data.type?"".concat(this.data.start.toISOString().slice(0,10)).concat(t).concat(this.data.end.toISOString().slice(0,10)):"Int"===this.data.type?"".concat(this.data.start).concat(t).concat(this.data.end):"Error Converting Range to String => < ".concat(this.data.start).concat(t).concat(this.data.end," >")}}])}(wi),Ti=function(t){function e(){return gi(this,e),li(this,e,arguments)}return hi(e,t),mi(e,[{key:"getData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{types:["hero","league","server","equipment","artifact"]};if(!Ao.VALID_SET_RE.test(t))throw new Wo.SyntaxException("Invalid set; must be in the format: { element1, element2,... }, where elements have either string format or date format; ( case insensitive regex: ".concat(Ao.VALID_SET_RE.source," ) (Just chat gpt this one bro); got: '").concat(t,"'"));var r=Wo.tokenizeWithNestedEnclosures(t,",",1,!0).map(function(t){if(Ao.VALID_STRING_RE.test(t))return new Si(t,e,n);if(Ao.VALID_DATE_LITERAL_RE.test(t))return new Ei(t);throw new Wo.SyntaxException("Invalid set element; must be a string or date; got: '".concat(t,"'"))});console.log("GOT ELEMENTS: ",r);var o,i=new Set,a=ci(r);try{for(a.s();!(o=a.n()).done;){var c=o.value;i.add(c.constructor.name)}}catch(t){a.e(t)}finally{a.f()}if(i=function(t){return function(t){if(Array.isArray(t))return si(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ui(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i),console.log("GOT TYPES: ",i),i.size>1)throw new Wo.SyntaxException("Invalid set; all set elements must have the same data type; \n                got: types: [".concat(i.join(", "),"]"));return this.type=i[0],this.str="{".concat(r.map(function(t){return t.asString()}).join(", "),"}"),this.list=r.map(function(t){return t.data}),new Set(this.list)}},{key:"asString",value:function(){return this.str}}])}(wi);var Ii={Date:Ei,String:Si,Int:Ai,Bool:_i,Set:Ti,Range:Oi};function ji(t,e){if(t){if("string"==typeof t)return Di(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(t,e):void 0}}function Di(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ri(t,e,n){return e=Pi(e),function(t,e){if(e&&("object"==xi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ki()?Reflect.construct(e,n||[],Pi(t).constructor):e.apply(t,n))}function ki(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ki=function(){return!!t})()}function Pi(t){return Pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pi(t)}function Ci(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fi(t,e)}function Fi(t,e){return Fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fi(t,e)}function xi(t){return xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(t)}function Li(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bi(r.key),r)}}function Ni(t,e,n){return e&&Mi(t.prototype,e),n&&Mi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bi(t){var e=function(t){if("object"!=xi(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xi(e)?e:e+""}var Gi=function(){return Ni(function t(){Li(this,t)},[{key:"call",value:function(t){throw new Error("Base class ".concat(this.constructor.name," does not implement the 'call' method. Implement this method in a subclass."))}}])}(),Ui=function(t){function e(t){var n;if(Li(this,e),(n=Ri(this,e)).name="last-N",1!==t.length)throw new Wo.SyntaxException("".concat(n.name," expects 1 argument, got ").concat(t.length));var r=Number(t[0]);if(!Number.isInteger(r))throw new Wo.TypeException("".concat(n.name," expects an integer argument, could not parse '").concat(t[0],"' as integer"));return n.str="".concat(n.name,"(").concat(r,")"),n.n=r,n}return Ci(e,t),Ni(e,[{key:"call",value:function(t){return t.sort(function(t,e){return t["Seq Num"]-e["Seq Num"]}),t.slice(-this.n)}}])}(function(t){function e(){return Li(this,e),Ri(this,e)}return Ci(e,t),Ni(e,[{key:"asString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Gi)),Vi=function(t){function e(t){var n;return Li(this,e),(n=Ri(this,e)).fns=t,console.log("Clause Fn constructor got fns:",t),n}return Ci(e,t),Ni(e,[{key:"asString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=t+"   ";return this.fns.localFilters.forEach(function(t){return e+="".concat(t.asString(n),",\n")}),console.log("Clause Fn asString got output:",e),"".concat(t).concat(this.str,"(\n").concat(e.trimEnd(),"\n").concat(t,")")}}])}(Gi),Hi=function(t){function e(t){var n;return Li(this,e),(n=Ri(this,e,[t])).str="AND",n}return Ci(e,t),Ni(e,[{key:"call",value:function(t){return this.fns.localFilters.every(function(e){return e.call(t)})}}])}(Vi),Ki=function(t){function e(t){var n;return Li(this,e),(n=Ri(this,e,[t])).str="OR",n}return Ci(e,t),Ni(e,[{key:"call",value:function(t){return this.fns.localFilters.some(function(e){return e.call(t)})}}])}(Vi),$i=function(t){function e(t){var n;return Li(this,e),(n=Ri(this,e,[t])).str="XOR",n}return Ci(e,t),Ni(e,[{key:"call",value:function(t){var e,n=!1,r=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ji(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(this.fns.localFilters);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=!n&&o.call(t)||n&&!o.call(t)}}catch(t){r.e(t)}finally{r.f()}return n}}])}(Vi),Wi=function(t){function e(t){var n;return Li(this,e),(n=Ri(this,e,[t])).str="NOT",n}return Ci(e,t),Ni(e,[{key:"call",value:function(t){return!this.fns.localFilters[0].call(t)}}])}(Vi),qi=function(t){function e(){return Li(this,e),Ri(this,e,arguments)}return Ci(e,t),Ni(e,[{key:"asString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Gi),Ji=function(t){function e(t,n,r){var o;return Li(this,e),console.log("Received equipment fn args",t,n,r),(o=Ri(this,e)).hero=t.data,o.equipmentCounts=ar(n.list),o.str=(r?"p1":"p2")+".equipment(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ci(e,t),Ni(e,[{key:"call",value:function(t){var e=this.isPlayer1?t["P1 Equipment"]:t["P2 Equipment"],n=this.isPlayer1?t["P1 Picks"]:t["P2 Picks"],r=function(t,e,n){for(var r=0;r<e.length;r++)if(e[r]===t)return n[r];return null}(this.hero,n,e);if(!r)return!1;var o=ar(r);return Object.entries(this.equipmentCounts).every(function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||ji(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=e[0],r=e[1];return o[n]===r})}}],[{key:"fromFilterStr",value:function(t,n){var r=Wo.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Wo.SyntaxException("Invalid equipment function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!Ao.VALID_STRING_LITERAL_RE.test(r[0]))throw new Wo.TypeException("Invalid equipment function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));var o=/^\{[",'a-z\s]*\}$/i.test(r[1])?r[1]:"{".concat(r[1],"}"),i=null,a=null;try{i=new Ii.String(r[0],n,{types:["hero"]}),a=new Ii.Set(o,n,{types:["equipment"]})}catch(e){throw new Wo.TypeException("Invalid type in equipment function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending equipment fn args",i,a,c),new e(i,a,c)}}])}(qi),zi=function(t){function e(t,n,r){var o;return Li(this,e),console.log("Received artifact fn args",t,n,r),(o=Ri(this,e)).hero=t.data,o.artifactArr=function(t){return function(t){if(Array.isArray(t))return Di(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ji(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.data),o.str=(r?"p1":"p2")+".artifact(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ci(e,t),Ni(e,[{key:"call",value:function(t){var e=this.isPlayer1?t["P1 Artifacts"]:t["P2 Artifacts"],n=this.isPlayer1?t["P1 Picks"]:t["P2 Picks"],r=function(t,e,n){for(var r=0;r<e.length;r++)if(e[r]===t)return n[r];return null}(this.hero,n,e);return console.log("Got equipped Artifact: ".concat(r,", hero: ").concat(this.hero,", picks: ").concat(JSON.stringify(n),", artifacts: ").concat(JSON.stringify(e))),!!r&&this.artifactArr.some(function(t){return r.toLowerCase()===t.toLowerCase()})}}],[{key:"fromFilterStr",value:function(t,n){var r=Wo.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Wo.SyntaxException("Invalid artifact function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!Ao.anchorExp(Ao.VALID_STRING_LITERAL_RE).test(r[0]))throw new Wo.TypeException("Invalid artifact function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));var o=Ao.VALID_SET_RE.test(r[1])?r[1]:"{".concat(r[1],"}"),i=null,a=null;try{i=new Ii.String(r[0],n,{types:["hero"]}),a=new Ii.Set(o,n,{types:["artifact"]})}catch(e){throw console.error(e),new Wo.TypeException("Invalid type in artifact function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending artifact fn args",i,a,c),new e(i,a,c)}}])}(qi),Qi=function(t){function e(t,n,r){var o;return Li(this,e),console.log("Received CR-GEQ fn args",t.asString(),n.asString(),r),(o=Ri(this,e)).hero=t.data,o.crThreshold=n.data,o.str=(r?"p1":"p2")+".CR-GEQ(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ci(e,t),Ni(e,[{key:"call",value:function(t){var e=this,n=function(t,n){return n.includes(t[0])&&t[1]>=e.crThreshold&&t[0]===e.hero},r=this.isPlayer1?t[O].find(function(e){return n(e,t[j])}):t[O].find(function(e){return n(e,t[D])});return console.log("Got CR Result: ".concat(r,", hero: ").concat(this.hero,", minValue: ").concat(this.crThreshold)),!!r}}],[{key:"fromFilterStr",value:function(t,n){var r=Wo.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Wo.SyntaxException("Invalid artifact function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!Ao.VALID_STRING_LITERAL_RE.test(r[0]))throw new Wo.TypeException("Invalid CR-GEQ function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));if(!Ao.VALID_INT_LITERAL_RE.test(r[1]))throw new Wo.TypeException("Invalid CR-GEQ function call ; second argument must be a valid integer literal ; got: '".concat(r[1],"' from str: ").concat(t));var o=r[1],i=null,a=null;try{i=new Ii.String(r[0],n,{types:["hero"]}),a=new Ii.Int(o)}catch(e){throw new Wo.TypeException("Invalid type in CR-GEQ function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending CR fn args",i,a,c),new e(i,a,c)}}])}(qi),Yi=function(t){function e(t,n,r){var o;return Li(this,e),console.log("Received CR-LT fn args",t.asString(),n.asString(),r),(o=Ri(this,e)).hero=t.data,o.crThreshold=n.data,o.str=(r?"p1":"p2")+".CR-LT(".concat(t.asString(),", ").concat(n.asString(),")"),o.isPlayer1=r,o}return Ci(e,t),Ni(e,[{key:"call",value:function(t){var e=this,n=function(t,n){return n.includes(t[0])&&t[1]<e.crThreshold&&t[0]===e.hero},r=this.isPlayer1?t[O].find(function(e){return n(e,t[j])}):t[O].find(function(e){return n(e,t[D])});return console.log("Got CR Result: ".concat(r,", hero: ").concat(this.hero,", minValue: ").concat(this.crThreshold)),!!r}}],[{key:"fromFilterStr",value:function(t,n){var r=Wo.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==r.length)throw new Wo.SyntaxException("Invalid artifact function call ; accepts exactly 2 arguments ; got: [".concat(r,"] from str: ").concat(t));if(!Ao.VALID_STRING_LITERAL_RE.test(r[0]))throw new Wo.TypeException("Invalid CR-LT function call ; first argument must be a valid string literal ; got: '".concat(r[0],"' from str: ").concat(t));if(!Ao.VALID_INT_LITERAL_RE.test(r[1]))throw new Wo.TypeException("Invalid CR-LT function call ; second argument must be a valid integer literal ; got: '".concat(r[1],"' from str: ").concat(t));var o=r[1],i=null,a=null;try{i=new Ii.String(r[0],n,{types:["hero"]}),a=new Ii.Int(o)}catch(e){throw new Wo.TypeException("Invalid type in CR-LT function call; got str: ".concat(t," ; error: ").concat(e))}var c="p1"===t.split(".")[0];return console.log("Sending CR fn args",i,a,c),new e(i,a,c)}}])}(qi),Xi={and:Hi,or:Ki,xor:$i,not:Wi,"last-n":Ui,"p1.equipment":Ji,"p2.equipment":Ji,"p1.artifact":zi,"p2.artifact":zi,"p1.cr-geq":Qi,"p2.cr-geq":Qi,"p1.cr-lt":Yi,"p2.cr-lt":Yi};function Zi(t){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zi(t)}function ta(t,e){if(e instanceof Set)return e.has(t);if("object"===Zi(e)&&null!==e&&!Array.isArray(e)&&["start","end","endInclusive","type"].every(function(t){return e.hasOwnProperty(t)}))return t>=e.start&&(e.endInclusive?t<=e.end:t<e.end);if(Array.isArray(e))return e.includes(t);throw new Error("Invalid match pattern for 'in' operators; got: '".concat(t,"' and '").concat(JSON.stringify(e),"}' (").concat(e.constructor.name,")"))}var ea={">":function(t,e){return t>e},"<":function(t,e){return t<e},"=":function(t,e){return t===e},in:function(t,e){return ta(t,e)},">=":function(t,e){return t>=e},"<=":function(t,e){return t<=e},"!=":function(t,e){return t!==e},"!in":function(t,e){return!ta(t,e)}};function na(t){return na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(t)}function ra(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return oa(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(oa(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,oa(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,oa(f,"constructor",s),oa(s,"constructor",u),u.displayName="GeneratorFunction",oa(s,o,"GeneratorFunction"),oa(f),oa(f,o,"Generator"),oa(f,r,function(){return this}),oa(f,"toString",function(){return"[object Generator]"}),(ra=function(){return{w:i,m:p}})()}function oa(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}oa=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){oa(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},oa(t,e,n,r)}function ia(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function aa(t){return function(t){if(Array.isArray(t))return ha(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||pa(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ua(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,la(r.key),r)}}function sa(t,e,n){return e&&ua(t.prototype,e),n&&ua(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function la(t){var e=function(t){if("object"!=na(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=na(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==na(e)?e:e+""}function fa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=pa(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function pa(t,e){if(t){if("string"==typeof t)return ha(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(t,e):void 0}}function ha(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function da(t){return function(t,e){var n,r=fa(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.has(o))throw new Wo.SyntaxException("Invalid character within <".concat("Main Filter String","> ; ' ").concat(o," ' is not allowed; got string: '").concat(t,"'"))}}catch(t){r.e(t)}finally{r.f()}}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),qo),t.toLowerCase()}var ya=function(){return sa(function t(e,n){ca(this,t),this.str=e,this.fn=n},[{key:"call",value:function(t){return this.fn(t)}},{key:"asString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}();function ga(t,e,n,r){var o=null;try{o=e in ii.FIELD_EXTRACT_FN_MAP?new ii(e):function(t,e){if(console.log("Trying to Parse DataType: ".concat(t)),Ao.VALID_STRING_LITERAL_RE.test(t))return console.log("Parsing as StringType"),new Si(t,e);if(Ao.VALID_DATE_LITERAL_RE.test(t))return console.log("Parsing as DateType"),new Ei(t);if(Ao.VALID_INT_LITERAL_RE.test(t))return console.log("Parsing as IntType"),new Ai(t);if(Ao.VALID_BOOL_LITERAL_RE.test(t))return console.log("Parsing as BoolType"),new _i(t);if(/\{.*\}/.test(t))return console.log("Parsing as SetType"),new Ti(t,e);if(Ao.VALID_RANGE_LITERAL_RE.test(t))return console.log("Parsing as RangeType"),new Oi(t);if(Ao.VALID_DATA_WORD_LITERAL_RE.test(t))return console.log("Parsing as DataWord"),function(t,e){if(Ao.VALID_SEASON_LITERAL_RE.test(t)){var n=function(t){return t.toISOString().slice(0,10)};if(e.SeasonDetails.length<1)throw new Error("Did not recieve any season details; failed on: '".concat(t,"'"));if("current-season"===t){var r=ai(e.SeasonDetails.find(function(t){return"Active"===t.Status}).range,2),o=r[0],i=r[1];return new Oi("".concat(n(o),"...=").concat(n("N/A"===i?new Date:i)))}var a=Number(t.split("-")[1]),c=e.SeasonDetails.find(function(t){return t["Season Number"]===a});if(!c)throw new Error("Invalid season specified; ".concat(a," is not a valid season number; failed on str: '").concat(t,"'"));var u=ai(c.range,2),s=u[0],l=u[1];return new Oi("".concat(n(s),"...=").concat(n(l)))}}(t,e);if(console.log("Failed to parse DataType"),Ao.VALID_STRING_LITERAL_RE.test("'".concat(t,"'")))throw new Wo.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you forget to wrap string literals in double or single quotes?"));if(t.includes("'")&&t.includes('"'))throw new Wo.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you encase in mismatching quote types?"));if(t.includes(".=")||t.includes(".."))throw new Wo.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; were you trying to use a range? Ranges must be of the format x...y or x...=y and may only be int-int or date-date"));throw new Wo.SyntaxException("Invalid DataType declaration; could not parse to valid Field or Declared Data Type; got: '".concat(t,"'"))}(e,r)}catch(r){for(var i in ii.FIELD_EXTRACT_FN_MAP)if(e.includes(i)||i.includes(e))throw new Wo.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"], did you mean to use '").concat(i,"' as a field instead?"));throw console.error(r),new Wo.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"]; error: ").concat(r.message))}return o}var va=function(){function t(e){if(ca(this,t),e!==ma._)throw new Error("Cannot instantiate FilterSyntaxParser directly; use createAndParse method instead.")}return sa(t,[{key:"asString",value:function(){var t=aa(this.filters.localFilters);return t.push.apply(t,aa(this.filters.globalFilters)),"[\n".concat(t.map(function(t){return t.asString("   ")}).join(";\n"),"\n]")}},{key:"parseGlobalFilterFn",value:function(t,e){var n=Ao.anchorExp(Ao.VALID_GLOBAL_FILTER_RE);if(!n.test(e))throw new Wo.SyntaxException('Invalid global filter format; must follow the case insensitive regex format "'.concat(n.source,"\" ; got: '").concat(e,"'"));var r=Wo.tokenizeWithNestedEnclosures(e,",",1);if(t===Ui)return{localFilters:[],globalFilters:[new Ui(r)]};throw new Wo.SyntaxException("Global filter function ".concat(t.str," not mapped in parseGlobalFilterFn"))}},{key:"parseClauseFn",value:function(e,n){var r=this;console.log("Parsing clause fn:",e.str,n);var o=Wo.tokenizeWithNestedEnclosures(n,",",1).filter(function(t){return t.length>0});if(console.log("Got argArr:",o),e===$i&&o.length<2)throw new Wo.SyntaxException("XOR clause must have at least two arguments; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));if(e===Wi&&1!==o.length)throw new Wo.SyntaxException("NOT clause must have exactly one argument; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));var i=o.reduce(function(t,e){var n,o;return(n=t.localFilters).push.apply(n,aa(r.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,aa(r.parseFilters(e).globalFilters)),t},t.getEmptyFilters());if(i.globalFilters.length>0)throw new Wo.SyntaxException("Global filters not allowed in clause functions; got: ".concat(i.globalFilters,' from string: "').concat(n,'"'));if(e===Wi&&1!==i.localFilters.length)throw new Wo.SyntaxException("NOT clause must have exactly one argument; got: ".concat(i.length,' arguments from string: "').concat(n,'"'));return{localFilters:[new e(i)],globalFilters:[]}}},{key:"parseDirectFn",value:function(t,e){return{localFilters:[t.fromFilterStr(e,this.REFS)],globalFilters:[]}}},{key:"parseBaseFilter",value:function(t){console.log("Parsing base filter:",t);var e=Wo.tokenizeWithNestedEnclosures(t," ",0,!0);if(console.log("Got tokens: ",e,"; Length: ".concat(e.length)),3!==e.length)throw new Wo.SyntaxException("Invalid base filter format; all filters must be of the form: ['X', operator, 'Y']; got tokens: [".concat(e.join(", "),"]"));var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||pa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3),r=n[0],o=n[1],i=n[2];if(!ea[o])throw new Wo.SyntaxException('Invalid operator in base filter; got: "'.concat(o,'" as the operator in filter: [').concat(t,"]"));var a=ea[o];if(r=ga("left",r,t,this.REFS,this.SeasonDetails),i=ga("right",i,t,this.REFS,this.SeasonDetails),("in"===o||"!in"===o)&&!(i instanceof Ii.Set||i instanceof Ii.Range||i instanceof ii&&oi.has(i.str)))throw new Wo.TypeException("When using any 'in' or '!in' operator, the right side of the operator must be a Set, Range, or a Field composed of a set (i.e. p1.picks, p2.prebans, etc.); error found in filter: '".concat(t,"'"));if(i instanceof Ii.Range)if("Date"===i.data.type){if(!r.str.includes("date"))throw new Wo.TypeException("When using a Date Range, the left side of the operator must be a date field; ".concat(r.str," is not a date field; error found in filter: '").concat(t,"'"))}else if("Int"===i.data.type&&!ri.has(r.str))throw new Wo.TypeException("When using an Int Range, the left side of the operator must be an integer field; ".concat(r.str," is not an integer field; error found in filter: '").concat(t,"'"));if(i instanceof wi&&r instanceof wi)throw new Wo.SyntaxException("Either left or right side of filter must be a data field (a property of a battle); both ".concat(r," and ").concat(i,' are user declared data types in filter: "').concat(t,'"'));var c;c=r instanceof wi?function(t){return a(r.data,i.extractData(t))}:i instanceof wi?function(t){return a(r.extractData(t),i.data)}:function(t){return a(r.extractData(t),i.extractData(t))};var u="".concat(r.asString()," ").concat(o," ").concat(i.asString()),s=new ya(u,c);return console.log("Returning base local filter",[s.asString()]),{localFilters:[s],globalFilters:[]}}},{key:"parseFilters",value:function(e){var n=this;if(console.log('Parsing filter string: "'.concat(e||this.preParsedString,'"')),""===e)return console.log("Empty filter string; Returning empty filters"),t.getEmptyFilters();var r,o=(e=e.trim()).split(";").filter(function(t){return t.length>0}),i=fa(o);try{for(i.s();!(r=i.n()).done;){var a=r.value,c=Wo.getCharCounts(a);if(c["("]!==c[")"])throw new Wo.SyntaxException('Imbalanced parentheses in following string: "'.concat(a,'"'));if(c["{"]!==c["}"])throw new Wo.SyntaxException("Imbalanced braces ('{', '}') in following string: \"".concat(a,'"'))}}catch(t){i.e(t)}finally{i.f()}if(o.length>1)return console.log("Processing <".concat(o.length,"> filters; filters: ").concat(o)),o.reduce(function(t,e){var r,o;return(r=t.localFilters).push.apply(r,aa(n.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,aa(n.parseFilters(e).globalFilters)),t},t.getEmptyFilters());var u=o[0].trim();if(u.length<4)throw new Wo.SyntaxException("Filter string cannot be valid (less than 4 characters); got filter string: [".concat(u,"]"));var s=u.split("("),l=Xi[s[0]];if(console.log("Trying to look for Fn ; got string:",u),l){if(Ao.VALID_CLAUSE_FUNCTIONS_RE.test(u))return console.log("Found clause fn; dispatching to clause fn parser"),this.parseClauseFn(l,u);if(Ao.VALID_GLOBAL_FUNCTIONS_RE.test(u))return console.log("Found global filter fn; dispatching to global filter fn parser"),this.parseGlobalFilterFn(l,u);if(Ao.VALID_DIRECT_FUNCTIONS_RE.test(u))return this.parseDirectFn(l,u);throw new Error('could not parse filter string as Fn: "'.concat(e,'" ; did not map to any known function ; check filter-syntax page'))}return console.log("Did not find Fn; dispatching to base filter parser"),this.parseBaseFilter(u)}}],[{key:"getEmptyFilters",value:function(){return{localFilters:[],globalFilters:[]}}},{key:"createAndParse",value:(e=ra().m(function e(n){var r,o,i,a,c,u=arguments;return ra().w(function(e){for(;;)switch(e.n){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:null,o=u.length>2&&void 0!==u[2]?u[2]:null,console.log("Initialized parsing of string:",n),i=new t(ma._),a=r){e.n=2;break}return e.n=1,xe.getHeroManager();case 1:a=e.v;case 2:if(r=a,c=o){e.n=4;break}return e.n=3,$r.getSeasonDetails();case 3:c=e.v;case 4:return o=c,i.rawString=n,i.HM=r,e.n=5,yn.getArtifactLowercaseNameSet();case 5:return i.ARTIFACT_LOWERCASE_STRINGS_SET=e.v,console.log("Got Artifact Lowercase Strings Set"),console.log(i.ARTIFACT_LOWERCASE_STRINGS_SET),i.SeasonDetails=o,i.REFS={HM:i.HM,ARTIFACT_LOWERCASE_STRINGS_SET:i.ARTIFACT_LOWERCASE_STRINGS_SET,SeasonDetails:i.SeasonDetails},i.preParsedString=da(n),i.globalFilters=[],i.filters=i.parseFilters(i.preParsedString),console.log("Got Filters\n"),console.log(i.asString()),e.a(2,i)}},e)}),n=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(t){ia(i,r,o,a,c,"next",t)}function c(t){ia(i,r,o,a,c,"throw",t)}a(void 0)})},function(t){return n.apply(this,arguments)})}]);var e,n}(),ma={_:Symbol("internal")};const ba=va;function wa(t){return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(t)}function Sa(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ea(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Ea(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Aa(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return _a(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(_a(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,_a(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,_a(f,"constructor",s),_a(s,"constructor",u),u.displayName="GeneratorFunction",_a(s,o,"GeneratorFunction"),_a(f),_a(f,o,"Generator"),_a(f,r,function(){return this}),_a(f,"toString",function(){return"[object Generator]"}),(Aa=function(){return{w:i,m:p}})()}function _a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_a=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){_a(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},_a(t,e,n,r)}function Oa(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ta(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Oa(i,r,o,a,c,"next",t)}function c(t){Oa(i,r,o,a,c,"throw",t)}a(void 0)})}}function Ia(t,e,n){return(e=function(t){var e=function(t){if("object"!=wa(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=wa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wa(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ja=Ia(Ia(Ia(Ia(Ia({},e,Se.Keys.GLOBAL_USERS),i,Se.Keys.EU_USERS),o,Se.Keys.ASIA_USERS),r,Se.Keys.JPN_USERS),n,Se.Keys.KOR_USERS);function Da(t,e){return{id:t.nick_no,name:t.nick_nm,code:t.code,rank:t.rank,world_code:e}}function Ra(t){return ka.apply(this,arguments)}function ka(){return(ka=Ta(Aa().m(function t(e){var n;return Aa().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code from E7 server: ".concat(e)),t.n=1,ct.fetchUserJSON(e);case 1:if(n=t.v){t.n=2;break}return console.log("Could not get user map from E7 server for world code: ".concat(e)),t.a(2,null);case 2:return console.log("Got user map from E7 server for world code: ".concat(e)),t.a(2,Object.fromEntries(n.users.map(function(t){return[t.nick_no,Da(t,e)]})))}},t)}))).apply(this,arguments)}var Pa,Ca,Fa,xa,La,Ma={getUserMap:(La=Ta(Aa().m(function t(e){var n,r;return Aa().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code: ".concat(e)),t.n=1,Se.get(ja[e]);case 1:if(null===(n=t.v)){t.n=2;break}return console.log("Got user map from cache"),t.a(2,n);case 2:return t.n=3,Ra(e);case 3:return r=t.v,t.n=4,Se.cache(ja[e],r);case 4:return t.a(2,r)}},t)})),function(t){return La.apply(this,arguments)}),findUser:(xa=Ta(Aa().m(function e(n){var r,o,i,c,u,s,l,f,p,h,d,y,g,v,m,b,w;return Aa().w(function(e){for(;;)switch(e.n){case 0:if(r=!1,o=function(t){return a[t]},console.log("Attempting to find user: ".concat(JSON.stringify(n))),!n.id){e.n=12;break}i=Sa(t),e.p=1,i.s();case 2:if((c=i.n()).done){e.n=8;break}if(u=c.value,!n.world_code||n.world_code===u){e.n=3;break}return e.a(3,7);case 3:return e.n=4,this.getUserMap(u);case 4:if(s=e.v,(l=Object.values(s))&&0!==l.length){e.n=5;break}return console.log("User map had no users, falling back to flask server for world code: ".concat(o(u))),r=!0,e.a(3,7);case 5:if(!(f=l.find(function(t){return t.id===n.id}))){e.n=6;break}return console.log("Found user: ".concat(JSON.stringify(f)," in world code: ").concat(o(u))),e.a(2,{user:f,error:!1});case 6:console.log("Could not find user with ID: ".concat(n.id," in world code: ").concat(o(u)," from client-side means"));case 7:e.n=2;break;case 8:e.n=10;break;case 9:e.p=9,w=e.v,i.e(w);case 10:return e.p=10,i.f(),e.f(10);case 11:e.n=18;break;case 12:if(!n.name||!n.world_code){e.n=17;break}return p=[n.name,n.world_code],h=p[0],d=p[1],e.n=13,this.getUserMap(d);case 13:if(y=e.v,(g=Object.values(y))&&0!==g.length){e.n=14;break}console.log("User map had no users, falling back to flask server for world code: ".concat(o(d))),r=!0,e.n=16;break;case 14:if(v=h.toLowerCase(),m=g.find(function(t){return v===t.name.toLowerCase()}),!m){e.n=15;break}return console.log("Found user: ".concat(JSON.stringify(m)," in world code: ").concat(o(d))),e.a(2,{user:m,error:!1});case 15:console.log("Could not find user with ID: ".concat(n.id," in world code: ").concat(o(d)," from client-side means"));case 16:e.n=18;break;case 17:return console.error("Must pass a user object with either user.name and user.world_code or user.id to fetch user"),e.a(2,{user:null,error:"Must pass a user object with either user.name and user.world_code or user.id to fetch user"});case 18:if(!r){e.n=21;break}return console.log("Failed to find user through client-side means; falling back to flask server"),e.n=19,bt.fetchUser(n);case 19:if(!(b=e.v).error){e.n=20;break}return e.a(2,{user:null,error:b.error});case 20:return e.a(2,{user:b.user,error:!1});case 21:return e.a(2,{user:null,error:"Could not find user"});case 22:return e.a(2)}},e,this,[[1,9,10,11]])})),function(t){return xa.apply(this,arguments)}),setUser:(Fa=Ta(Aa().m(function t(e){return Aa().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.cache(Se.Keys.USER,e);case 1:return t.a(2)}},t)})),function(t){return Fa.apply(this,arguments)}),getUser:(Ca=Ta(Aa().m(function t(){return Aa().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.get(Se.Keys.USER);case 1:return t.a(2,t.v)}},t)})),function(){return Ca.apply(this,arguments)}),clearUserData:function(){var t=Ta(Aa().m(function t(){return Aa().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.clearUserData();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),clearUserDataLists:(Pa=Ta(Aa().m(function t(){return Aa().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.delete(Se.Keys.GLOBAL_USERS);case 1:return t.n=2,Se.delete(Se.Keys.EU_USERS);case 2:return t.n=3,Se.delete(Se.Keys.ASIA_USERS);case 3:return t.n=4,Se.delete(Se.Keys.JPN_USERS);case 4:return t.n=5,Se.delete(Se.Keys.KOR_USERS);case 5:return t.a(2)}},t)})),function(){return Pa.apply(this,arguments)})};const Na=Ma;function Ba(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ga(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ga(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ga(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ga(f,"constructor",s),Ga(s,"constructor",u),u.displayName="GeneratorFunction",Ga(s,o,"GeneratorFunction"),Ga(f),Ga(f,o,"Generator"),Ga(f,r,function(){return this}),Ga(f,"toString",function(){return"[object Generator]"}),(Ba=function(){return{w:i,m:p}})()}function Ga(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ga=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ga(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Ga(t,e,n,r)}function Ua(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var Va,Ha,Ka={HeroManager:xe,BattleManager:Lr,SeasonManager:$r,UserManager:Na,ClientCache:Se,ArtifactManager:yn,getFilters:(Va=Ba().m(function t(e){var n,r,o;return Ba().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Se.getFilterStr();case 1:if(n=t.v){t.n=2;break}return t.a(2,ba.getEmptyFilters());case 2:return t.n=3,$r.getSeasonDetails();case 3:return r=t.v,t.n=4,ba.createAndParse(n,e,r);case 4:return o=t.v,t.a(2,o.filters)}},t)}),Ha=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=Va.apply(t,e);function i(t){Ua(o,n,r,i,a,"next",t)}function a(t){Ua(o,n,r,i,a,"throw",t)}i(void 0)})},function(t){return Ha.apply(this,arguments)})};const $a=Ka;function Wa(t){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wa(t)}function qa(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ja(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ja(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ja(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,Ja(f,"constructor",s),Ja(s,"constructor",u),u.displayName="GeneratorFunction",Ja(s,o,"GeneratorFunction"),Ja(f),Ja(f,o,"Generator"),Ja(f,r,function(){return this}),Ja(f,"toString",function(){return"[object Generator]"}),(qa=function(){return{w:i,m:p}})()}function Ja(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ja=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ja(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Ja(t,e,n,r)}function za(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Qa(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){za(i,r,o,a,c,"next",t)}function c(t){za(i,r,o,a,c,"throw",t)}a(void 0)})}}function Ya(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Za(r.key),r)}}function Xa(t,e,n){return(e=Za(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Za(t){var e=function(t){if("object"!=Wa(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Wa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wa(e)?e:e+""}var tc={GLOBAL_SERVER:"Global Server",KOR_SERVER:"Korea Server",JPN_SERVER:"Japan Server",ASIA_SERVER:"Asia Server",EU_SERVER:"Europe Server",HEROES:"Heroes",ARTIFACTS:"Artifacts"},ec={keys:["name"],threshold:.2},nc={keys:["name"],threshold:.2},rc={keys:["name"],threshold:.2};function oc(t,e){return cr(t,e,null,ec)}function ic(t,e){return cr(t,e,null,nc)}function ac(t,e){return cr(t,e,null,rc)}var cc=function(){return function(t,e){return e&&Ya(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Xa(this,"DOMAIN_CACHE",{})},[{key:"get_domain",value:(a=Qa(qa().m(function t(a){var c,u;return qa().w(function(t){for(;;)switch(t.n){case 0:if(this.DOMAIN_CACHE[a]){t.n=10;break}u=a,t.n=u===tc.GLOBAL_SERVER?1:u===tc.KOR_SERVER?2:u===tc.JPN_SERVER?3:u===tc.ASIA_SERVER?4:u===tc.EU_SERVER?5:u===tc.HEROES?6:u===tc.ARTIFACTS?7:8;break;case 1:return this.DOMAIN_CACHE[a]=Na.getUserMap(e),t.a(3,8);case 2:return this.DOMAIN_CACHE[a]=Na.getUserMap(n),t.a(3,8);case 3:return this.DOMAIN_CACHE[a]=Na.getUserMap(r),t.a(3,8);case 4:return this.DOMAIN_CACHE[a]=Na.getUserMap(o),t.a(3,8);case 5:return this.DOMAIN_CACHE[a]=Na.getUserMap(i),t.a(3,8);case 6:return this.DOMAIN_CACHE[a]=xe.getHeroManager(),t.a(3,8);case 7:return this.DOMAIN_CACHE[a]=yn.getArtifactObjectList(),t.a(3,8);case 8:return t.n=9,this.DOMAIN_CACHE[a];case 9:c=t.v,Array.isArray(c)||(this.DOMAIN_CACHE[a]=a===tc.HEROES?c.heroes:Object.values(c));case 10:return t.n=11,this.DOMAIN_CACHE[a];case 11:return t.a(2,t.v)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"search",value:(t=Qa(qa().m(function t(e,n){var r,o;return qa().w(function(t){for(;;)switch(t.n){case 0:console.log("Searching ".concat(e," for ").concat(n)),o=e,t.n=o===tc.GLOBAL_SERVER?1:o===tc.KOR_SERVER?3:o===tc.JPN_SERVER?5:o===tc.ASIA_SERVER?7:o===tc.EU_SERVER?9:o===tc.HEROES?11:o===tc.ARTIFACTS?13:15;break;case 1:return t.n=2,this.get_domain(e);case 2:case 4:case 6:case 8:case 10:return r=t.v,t.a(2,ic(n,r));case 3:return t.n=4,this.get_domain(e);case 5:return t.n=6,this.get_domain(e);case 7:return t.n=8,this.get_domain(e);case 9:return t.n=10,this.get_domain(e);case 11:return t.n=12,this.get_domain(e);case 12:return r=t.v,t.a(2,oc(n,r));case 13:return t.n=14,this.get_domain(e);case 14:return r=t.v,t.a(2,ac(n,r));case 15:throw new Error("Unknown domain: ".concat(e));case 16:return t.a(2)}},t,this)})),function(e,n){return t.apply(this,arguments)})}]);var t,a}();function uc(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return sc(s,"_invoke",function(n,r,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!f&&s&&!o&&e<l.length;e++){var o,i=l[e],h=p.p,d=i[2];n>3?(o=d===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<d&&(o=n<3||i[0]>r||r>d)&&(i[4]=n,i[5]=r,p.n=d,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&h(l,d),c=l,u=d;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:f}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(sc(e={},r,function(){return this}),e),f=s.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,sc(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=s,sc(f,"constructor",s),sc(s,"constructor",u),u.displayName="GeneratorFunction",sc(s,o,"GeneratorFunction"),sc(f),sc(f,o,"Generator"),sc(f,r,function(){return this}),sc(f,"toString",function(){return"[object Generator]"}),(uc=function(){return{w:i,m:p}})()}function sc(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}sc=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){sc(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},sc(t,e,n,r)}function lc(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function fc(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){lc(i,r,o,a,c,"next",t)}function c(t){lc(i,r,o,a,c,"throw",t)}a(void 0)})}}function pc(t){return pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(t)}Xa(cc,"DOMAINS",tc),document.addEventListener("DOMContentLoaded",fc(uc().m(function t(){var e,n,r,o,i,a;return uc().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,$a.ClientCache.clearData();case 1:return t.n=2,$a.UserManager.getUserMap("world_global");case 2:return e=t.v,t.n=3,$a.HeroManager.getHeroManager();case 3:return t.v,t.n=4,$a.ArtifactManager.getArtifacts();case 4:return n=t.v,console.log("Got artifacts:",n,pc(n),n.length),console.log(cr("wolf",Object.values(e),10,{keys:["name"],distance:4})),r=new cc,t.n=5,r.search("Global Server","wolf");case 5:return o=t.v,t.n=6,yn.getArtifactObjectList();case 6:return i=t.v,console.log(i),t.n=7,r.search(cc.DOMAINS.ARTIFACTS,"elbris");case 7:a=t.v,console.log(o.map(function(t){return[t.item.name,t.item.id]})),console.log(a);case 8:return t.a(2)}},t)})))})();
//# sourceMappingURL=test.bundle.js.map