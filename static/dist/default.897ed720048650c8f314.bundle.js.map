{"version":3,"file":"default.897ed720048650c8f314.bundle.js","mappings":";;;;;;;;;;;;;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,yCAAyC,IAAI;AAC9E;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,UAAU,IAAI;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,CAAC;;AAEyC;;;;;;;;;;;;;;;;AChTQ;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,0DAAW;AACxB,oDAAoD,WAAW;AAC/D;AACA;AACA,kDAAkD,YAAY;AAC9D,0FAA0F,WAAW;AACrG;AACA;AACA,gDAAgD,cAAc,QAAQ,mBAAmB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;0BC3FrB,uKAAAA,CAAA,EAAAC,CAAA,EAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAA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E,CAAC;YAC/ED,OAAO,CAACC,GAAG,gBAAAiD,MAAA,CAAgBxB,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC,CAAE,CAAC;YAAC,OAAA0B,SAAA,CAAAvF,CAAA,IAC5C;cAAE6D,IAAI,EAAJA,IAAI;cAAEV,EAAE,EAAE;YAAI,CAAC;QAAA;MAAA,GAAAkC,QAAA;IAAA,CAC3B;IAAA,SAzBDF,SAASA,CAAAU,GAAA;MAAA,OAAAT,UAAA,CAAAtD,KAAA,OAAAD,SAAA;IAAA;IAAA,OAATsD,SAAS;EAAA;AA0Bb,CAAC;AAED,iEAAe7C,KAAK,E;;;;;;;;;;;;;;;;AC3FpB;AAC6B;AACe;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,oDAAoD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,YAAY,SAAS;AACrB;AACA;AACA,KAAK;AACL;AACA;AACA,eAAe,2CAAM;AACrB;AACA;AACA,yEAAyE;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC;AACA;AACA,2BAA2B,KAAK,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,+BAA+B,IAAI;AACnC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B,8BAA8B;AACzD;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B,8BAA8B;AACzD;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B,8BAA8B;AACzD;AACA,+BAA+B,KAAK;AACpC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,6CAA6C,MAAM,kBAAkB,cAAc,eAAe,YAAY;AAC9G;AACA;AACA;AACA,oCAAoC,MAAM,kBAAkB,cAAc,eAAe,cAAc,WAAW,uBAAuB,QAAQ,6BAA6B;AAC9K;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,4CAA4C,qDAAS;AACrD,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;;;;;;;ACtMoB;AACI;AACA;AACN;AACE;AACQ;AACP;AAChD;AACA,iBAAiB,2DAAW;AAC5B,mBAAmB,6DAAa;AAChC,mBAAmB,6DAAa;AAChC,iBAAiB,2DAAW;AAC5B,iBAAiB,yDAAW;AAC5B,qBAAqB,+DAAe;AACpC,iBAAiB,yDAAW;AAC5B;AAC0B;;;;;;;;;;;;;;;;;;AChBoB;AACR;AACA;AACtC;AACA;AACA,wBAAwB,uDAAK;AAC7B;AACA;AACA,wBAAwB,uDAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,yDAAW,KAAK,yDAAW;AACzD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,4BAA4B,yDAAW,KAAK,yDAAW;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA,KAAK;AACL;AACA,+BAA+B,yDAAW,KAAK,yDAAW;AAC1D;AACA;AACA;AACA;AACA;AACA,sEAAsE,UAAU;AAChF,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA;AACA,KAAK;AACL;AACA,cAAc,yDAAW,QAAQ,yDAAW;AAC5C,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,iEAAe,eAAe,EAAC;;;;;;;;;;;;;;;;;;;;;ACvEe;AACO;AAC2C;AACnB;AAC/B;AACvC;AACP,+DAA+D,wEAAc;AAC7E,gEAAgE,sEAAY;AAC5E,2EAA2E;AAC3E;AACA,+CAA+C,kBAAkB;AACjE;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB;AAChE;AACA;AACA;AACA,sCAAsC,iCAAiC;AACvE;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA,+BAA+B,yDAAW,KAAK,yDAAW;AAC1D,QAAQ,yDAAW,mBAAmB,yDAAW;AACjD;AACA,KAAK;AACL;AACA;AACA,cAAc,yDAAW,QAAQ,yDAAW;AAC5C,cAAc,yDAAW,QAAQ,yDAAW;AAC5C,cAAc,yDAAW,QAAQ,yDAAW;AAC5C,qDAAqD;AACrD,KAAK;AACL;AACA,cAAc,yDAAW,QAAQ,yDAAW;AAC5C,8DAA8D;AAC9D,KAAK;AACL;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,gDAAgD,UAAU,4BAA4B;AACtF,cAAc,yDAAW,OAAO,yDAAW;AAC3C,2DAA2D,+BAA+B,oBAAoB,eAAe;AAC7H;AACA,KAAK;AACL;AACA;AACA,6BAA6B,yDAAW,KAAK,yDAAW;AACxD;AACA,0BAA0B;AAC1B,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mBAAmB,SAAS,mBAAmB;AAC/F,+BAA+B,6EAAuB;AACtD;AACA,sDAAsD,mBAAmB;AACzE;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,mFAA6B;AAC1D,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA,+DAA+D;AAC/D;AACA,KAAK;AACL;AACA;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA,kCAAkC,6DAAY;AAC9C;AACA,qCAAqC,6DAAY;AACjD;AACA,mCAAmC,6DAAY;AAC/C;AACA,gCAAgC,6DAAY;AAC5C;AACA,uCAAuC,6DAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,uBAAuB,uDAAW;AAClC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA,uBAAuB,uDAAW;AAClC;AACA;AACA;AACA,aAAa;AACb,2DAA2D,uDAAW;AACtE;AACA;AACA;AACA;AACA,aAAa;AACb,2DAA2D,uDAAW;AACtE;AACA,KAAK;AACL;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;;;;ACtJe;AACQ;AACuC;AACzC;AAClD;AACA;AACA;AACA,oCAAoC,wDAAW;AAC/C,WAAW,uDAAW;AACtB,eAAe,uDAAW;AAC1B,WAAW,uDAAW;AACtB,eAAe,uDAAW;AAC1B,WAAW,uDAAW;AACtB,eAAe,uDAAW;AAC1B,WAAW,uDAAW;AACtB,eAAe,uDAAW;AAC1B;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA,mCAAmC,wDAAW;AAC9C,sCAAsC,4DAAe;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,6DAAiB;AACxH;AACA;AACA;AACA;AACA;AACA,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW,aAAa,mEAAuB;AACxD,SAAS,uDAAW;AACpB,SAAS,uDAAW,aAAa,mEAAuB;AACxD,SAAS,uDAAW,aAAa,8DAAW;AAC5C,SAAS,uDAAW,aAAa,8DAAW;AAC5C,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB;AACA;AACA,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB,SAAS,uDAAW;AACpB;AACA,iGAAiG;AACjG;AACA;AACA;AACA;AACA,6BAA6B,4DAAe;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,qDAAqD,uDAAW;AAChE;AACkE;;;;;;;;;;;;;;;;;;;;;AC7G/B;AACC;AACgD;AACzB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,oEAAoB;AACjC;AACA,yBAAyB,oEAAoB;AAC7C;AACA,gBAAgB;AAChB;AACA;AACA;AACA,iBAAiB,UAAU,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,iBAAiB,UAAU,eAAe;AAC1C;AACA;AACA;AACA;AACA;AACA,mDAAmD,yEAAsB;AACzE;AACA,cAAc,qDAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,yEAAkB;AAC/C;AACA;AACA,sBAAsB,qDAAM,6CAA6C,IAAI,IAAI,oEAAoE,WAAW;AAChK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM,8CAA8C,IAAI;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAM,8CAA8C,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qDAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,2CAAO;AACtB;AACA;AACA,KAAK;AACL;AACA,eAAe,2CAAO;AACtB;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qDAAM,4CAA4C,IAAI,IAAI;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,2CAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,yEAAsB;AACzE;AACA;AACA;AACA;AACA;AACA,mBAAmB,qDAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,KAAK,UAAU,UAAU;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,KAAK,UAAU,UAAU;AAC/E;AACA;AACA;AACA,sBAAsB,qDAAM,0CAA0C,IAAI,IAAI;AAC9E;AACA,2BAA2B,EAAE,kCAAkC;AAC/D;AACA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C,QAAQ,2CAAO;AACf;AACA;AACA;AACA,aAAa,2CAAO;AACpB;AACA;AACA;AACA,aAAa,2CAAO;AACpB;AACA;AACA;AACA,aAAa,2CAAO;AACpB;AACA;AACA;AACA,aAAa,2CAAO;AACpB;AACA;AACA;AACA,aAAa,2CAAO;AACpB;AACA;AACA;AACA,aAAa,2CAAO;AACpB;AACA,gDAAgD,yEAAsB;AACtE;AACA,aAAa,2CAAO;AACpB;AACA;AACA;AACA,cAAc,qDAAM,2CAA2C,OAAO,IAAI;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,oEAAoB;AAC9C;AACA;AACA;AACgD;;;;;;;;;;;;;;;;;AC/RJ;AACR;AACpC;AACO;AACP,+BAA+B,oDAAW;AAC1C,UAAU,qDAAM,4BAA4B,oDAAW;AACvD;AACA,iCAAiC,oDAAW;AAC5C,wCAAwC,oDAAW;AACnD,iCAAiC,oDAAW;AAC5C,yCAAyC,oDAAW;AACpD,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,qCAAqC,oDAAW;AAChD,qCAAqC,oDAAW;AAChD,qCAAqC,oDAAW;AAChD,qCAAqC,oDAAW;AAChD;AACA,kBAAkB,oDAAW;AAC7B,kBAAkB,oDAAW;AAC7B;AACA,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,mCAAmC,oDAAW;AAC9C,oCAAoC,oDAAW;AAC/C,oCAAoC,oDAAW;AAC/C,oCAAoC,oDAAW;AAC/C,oCAAoC,oDAAW;AAC/C,uCAAuC,oDAAW;AAClD,uCAAuC,oDAAW;AAClD,iCAAiC,oDAAW;AAC5C,iCAAiC,oDAAW;AAC5C,wCAAwC,oDAAW;AACnD,0CAA0C,oDAAW;AACrD,gCAAgC,oDAAW;AAC3C,kCAAkC,oDAAW;AAC7C,qCAAqC,oDAAW;AAChD;;;;;;;;;;;;;;;;;;AC5CqD;AAC9C,2CAA2C,eAAe;AACjE;AACO;AACA,yEAAyE,6DAAiB;;;;;;;;;;;;;;;;;;;;;;;ACJ/C;AACR;AACJ;AACQ;AACgD;AACrB;AAClC;AACU;AACjD;AACA;AACA;AACA,sBAAsB,wDAAM,8CAA8C,QAAQ,IAAI,IAAI,MAAM,kBAAkB,eAAe,IAAI;AACrI;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,uBAAuB,oEAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uDAAY;AACrC,sBAAsB,wDAAM,kEAAkE,OAAO,cAAc,gBAAgB,IAAI;AACvI;AACA;AACA,8CAA8C,yDAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,yBAAyB,uDAAY;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA,wCAAwC,qDAAW;AACnD;AACA;AACA,oCAAoC,uDAAa;AACjD;AACA;AACA,qDAAqD,yDAAe;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kEAAY;AACnC,qBAAqB,oDAAoD,MAAM;AAC/E;AACA;AACA,gCAAgC,yDAAW,KAAK,yDAAW;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,2CAA2C;AAC3C;AACA;AACA,kEAAkE;AAClE,qBAAqB,wDAAM;AAC3B;AACA,iBAAiB,wDAAa;AAC9B,iBAAiB,wDAAa;AAC9B,iBAAiB,wDAAa;AAC9B,iBAAiB,wDAAa;AAC9B;AACA,4BAA4B,qDAAU;AACtC,iBAAiB,wDAAa;AAC9B,4BAA4B,8CAAG;AAC/B,iBAAiB,wDAAa;AAC9B,iBAAiB,wDAAa;AAC9B,iBAAiB,wDAAa;AAC9B,4BAA4B,qDAAU;AACtC;AACA,oBAAoB,8CAAO;AAC3B,8BAA8B,wDAAM,kGAAkG,OAAO,IAAI;AACjJ;AACA,4BAA4B,8CAAG;AAC/B;AACA;AACA;AACwB;;;;;;;;;;;;;;;;ACrIc;AACtC;AACA;AACA,wBAAwB;AACxB,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,6CAA6C;AAC7C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,MAAM,KAAK;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa,UAAU;AACvB,YAAY,iBAAiB;AAC7B,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,oBAAoB,kBAAkB;AACtC;AACA,yCAAyC,MAAM,cAAc,IAAI,kBAAkB,UAAU,UAAU,OAAO;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gHAAgH,IAAI,eAAe,MAAM,IAAI;AAC7I;AACA;AACA,gHAAgH,IAAI,eAAe,MAAM;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gDAAgD,kBAAkB;AAClI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA,SAAS,8CAAO;AAChB,iDAAiD,6CAA6C,8CAAO,yBAAyB,GAAG,QAAQ,QAAQ;AACjJ;AACA;AACA;AACA;AACA,iDAAiD,qCAAqC,QAAQ,QAAQ;AACtG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,eAAe,oBAAoB,mCAAmC,QAAQ;AAC/H;AACA,gCAAgC,sBAAsB,EAAE,sBAAsB;AAC9E;AACA;AACA;AACA;AACA,sCAAsC,OAAO,KAAK,SAAS;AAC3D;AACA;AACA;AACA;AACA;AACA,mCAAmC,OAAO,IAAI,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,MAAM,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AC/JiC;AACX;AACG;AAC0B;AAChB;AACrB;AAC4B;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kEAAY;AAC/C,gDAAgD,uBAAuB;AACvE;AACA,kBAAkB,OAAO,EAAE,YAAY,KAAK,kBAAkB,IAAI,OAAO;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,qDAAM,8CAA8C,6BAA6B,QAAQ,SAAS;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oDAAW,oBAAoB,oDAAW;AACjF;AACA;AACA;AACA,kBAAkB,OAAO,EAAE,UAAU,EAAE,YAAY,GAAG,kBAAkB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,qDAAM;AAC3B;AACA,sBAAsB,qDAAM,6CAA6C,8BAA8B,QAAQ,KAAK,cAAc,IAAI;AACtI;AACA;AACA;AACA,sBAAsB,qDAAM,2CAA2C,iDAAiD,QAAQ,QAAQ,cAAc,IAAI;AAC1J;AACA,yBAAyB,yDAAa;AACtC,kCAAkC,uDAAe;AACjD,sBAAsB,qDAAM,2CAA2C,sDAAsD,QAAQ,QAAQ,cAAc,IAAI;AAC/J;AACA,4BAA4B,wDAAY,+BAA+B,yEAAsB;AAC7F;AACA;AACA;AACA,8CAA8C,oDAAW;AACzD,+BAA+B,eAAe,EAAE,qBAAqB,EAAE,iBAAiB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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;AACvD;AACA;AACA;AACA,8CAA8C,EAAE,QAAQ,WAAW,WAAW,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACsF;;;;;;;;;;;;;;;;;;;;;ACjE5C;AACoC;AACF;AACzC;AAC5B;AACP;AACA;AACA;AACA,eAAe,qDAAW;AAC1B;AACA;AACA;AACA;AACA;AACA,oCAAoC,KAAK,aAAa,mDAAU;AAChE,eAAe,mDAAU;AACzB;AACA;AACA;AACA;AACA;AACA,eAAe,0EAAiC;AAChD;AACA;AACA;AACA;AACA;AACA,eAAe,qFAA+B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,IAAI;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2CAAO;AACxB,mDAAmD,IAAI;AACvD;AACA;AACA,iBAAiB,2CAAO;AACxB,wDAAwD,IAAI;AAC5D;AACA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;AACA,oCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACO;AACP;AACA;AACA,8CAA8C,KAAK,OAAO,mBAAmB,KAAK,OAAO;AACzF;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACjF8C;AACM;AACd;AACA;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,uBAAuB;AACvB,wBAAwB;AACxB,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT,oEAAoE;AACpE,6CAA6C;AAC7C,oBAAoB,iBAAiB;AACrC,sBAAsB,kDAAM;AAC5B,4BAA4B,aAAa;AACzC,2BAA2B,kDAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qDAAS;AAClD,wCAAwC,yDAAW,KAAK,yDAAW;AACnE;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0BAA0B,kDAAM;AAChC;AACA;AACA;AACA;AACA,6CAA6C;AAC7C,yCAAyC;AACzC;AACA,KAAK;AACL,6CAA6C,qDAAS;AACtD,gCAAgC,uDAAK,4BAA4B,uDAAK;AACtE,yCAAyC;AACzC;AACA,uDAAuD,MAAM;AAC7D;AACA,KAAK;AACL,qDAAqD,qDAAS;AAC9D;AACA;AACA,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,yDAAW,QAAQ,yDAAW;AAC5C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzKpB;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,kDAAkD;AAClD;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACA;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA;AACA;AACA;AACA;AACO;;;;;;;;;;;;;;;;AChMmE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA,6BAA6B,eAAe,WAAW;AACvD;AACA;AACA,6BAA6B,eAAe;AAC5C;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,yBAAyB,mBAAmB;AAC5C,oBAAoB,qBAAqB;AACzC,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA,mDAAmD;AACnD,gCAAgC,mFAAoB;AACpD,wCAAwC,uCAAuC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,4CAA4C;AACzF,6CAA6C,4CAA4C;AACzF,6CAA6C,4CAA4C;AACzF;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,oBAAoB,EAAE,IAAI,EAAE,IAAI,EAAE;AAClC,wBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA,uCAAuC,eAAe;AACtD;AACA;AACA,sCAAsC,iBAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,IAAI;AAClD;AACA;AACA,wCAAwC,WAAW,GAAG,IAAI,GAAG,KAAK;AAClE,sCAAsC,WAAW,GAAG,UAAU;AAC9D;AACA,8BAA8B,SAAS,OAAO,eAAe,OAAO,eAAe,GAAG,oBAAoB;AAC1G,+BAA+B,IAAI,aAAa,IAAI,GAAG,KAAK,aAAa,KAAK;AAC9E,wCAAwC,gBAAgB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,MAAM,oBAAoB,UAAU;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA,6BAA6B,EAAE,EAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACmB;;;;;;;;;;;;;;;;;;;ACjL2B;AACR;AAC8B;AAC/B;AACrC;AACA;AACA,6BAA6B,uDAAK;AAClC;AACA,+DAA+D,aAAa;AAC5E;AACA;AACA;AACA,mFAAmF,gBAAgB;AACnG;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,gEAAoB;AACpE,4CAA4C,gEAAoB;AAChE;AACA;AACA;AACA;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,0DAA0D,gEAAoB;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,yDAAW,OAAO,yDAAW;AAC3C;AACA,KAAK;AACL;AACA,6BAA6B,yDAAW,KAAK,yDAAW;AACxD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,cAAc,yDAAW,QAAQ,yDAAW;AAC5C;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,iCAAiC,uDAAW;AAC5C,iBAAiB,8CAAO;AACxB;AACA;AACA,mCAAmC,uDAAW;AAC9C;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,iEAAe,aAAa,EAAC;;;;;;;;;;;;;;;;;ACvFe;AAC+D;AAC3G,2DAA2D,uDAAW;AACtE,sEAAsE,uDAAW;AACjF,wEAAwE,uDAAW;AACnF,8BAA8B,uDAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,uDAAW;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,uDAAW;AACvB,cAAc,uDAAW;AACzB;AACA,YAAY,uDAAW;AACvB,cAAc,uDAAW;AACzB,cAAc,uDAAW;AACzB,6DAA6D,uDAAW;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B,SAAS,iEAAqB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,uDAAW;AAChC,qBAAqB,uDAAW;AAChC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,wDAAW;AAChC;AACA;AACA,wDAAwD,uDAAW;AACnE;AACA;AACA;AACA;AACA;AACA,qBAAqB,wDAAW;AAChC;AACA;AACA,uDAAuD,uDAAW;AAClE;AACA;AACA;AACA;AACA,oBAAoB,iEAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,uDAAW;AACzB,sBAAsB;AACtB,uBAAuB,uDAAW;AAClC;AACA,8BAA8B;AAC9B,iCAAiC,uDAAW;AAC5C;AACA;AACA;AACA,qBAAqB,wDAAW,2CAA2C,wDAAW;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,oCAAoC,UAAU;AAC9C;AACA;AACA;AACA;AACA;AACA,+CAA+C,uDAAW;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,uDAAW;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,MAAM;AAC3B;AACA;AACA,qBAAqB,MAAM,IAAI,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,mEAAuB;AACzD,kCAAkC,sDAAU;AAC5C;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;;;;;;;;;;;ACtUgD;AAC9B;AACR;AACA;AACtC;AACA,KAAK,2DAAe,UAAU,yDAAW;AACzC,KAAK,2DAAe,MAAM,yDAAW;AACrC,KAAK,2DAAe,QAAQ,yDAAW;AACvC,KAAK,2DAAe,OAAO,yDAAW;AACtC,KAAK,2DAAe,OAAO,yDAAW;AACtC;AACO;AACP;AACA,uCAAuC;AACvC;AACA;AACA,uCAAuC;AACvC;AACA;AACA,uCAAuC;AACvC;AACA;AACA,uCAAuC;AACvC;AACA;AACA,uCAAuC;AACvC;AACA;AACA,uCAAuC;AACvC;AACA,6BAA6B,mEAAuB;AACpD,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,WAAW;AAC9E,8BAA8B,uDAAK;AACnC;AACA,6EAA6E,WAAW;AACxF;AACA;AACA,+DAA+D,WAAW;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,gCAAgC;AAC7C;AACA;AACA,oDAAoD,WAAW;AAC/D,gCAAgC,yDAAW;AAC3C;AACA;AACA;AACA;AACA;AACA,UAAU,yDAAW;AACrB;AACA;AACA,iCAAiC,mEAAuB;AACxD;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,2FAA2F,wBAAwB;AACnH,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB,gBAAgB,OAAO;AACvB;AACA;AACA,gDAAgD,2BAA2B;AAC3E;AACA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C,wBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA,2BAA2B,uDAAK;AAChC;AACA;AACA;AACA;AACA;AACA,4DAA4D,YAAY,aAAa,gCAAgC;AACrH;AACA;AACA;AACA,gEAAgE,uBAAuB;AACvF,KAAK;AACL;AACA,cAAc,yDAAW,OAAO,yDAAW;AAC3C,KAAK;AACL;AACA,2BAA2B,yDAAW,KAAK,yDAAW;AACtD,cAAc,yDAAW,mBAAmB,yDAAW;AACvD;AACA,KAAK;AACL;AACA,cAAc,yDAAW;AACzB,KAAK;AACL;AACA,cAAc,yDAAW;AACzB,KAAK;AACL;AACA,iEAAe,WAAW,EAAC;;;;;;;;;;;;;;;;;;AC7J3B;AACA;AACA;;AAEA;AACA;AACmD;AACoB;AACvB;AACO;AACvD;AACA,oBAAoB,yDAAa;AACjC,uCAAuC,yDAAa;AACpD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,mBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,0BAA0B;AACjE;AACA;AACA;AACA,4DAA4D,SAAS;AACrE;AACA;AACA;AACA;AACA,uBAAuB,4DAAc;AACrC;AACA,yCAAyC;AACzC;AACA,wBAAwB,4DAAc;AACtC,4BAA4B,4DAAc;AAC1C;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW,GAAG,QAAQ,GAAG,mBAAmB,EAAE,UAAU;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,MAAM,UAAU,0BAA0B;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yDAAa;AAC7C,oDAAoD,yDAAa,SAAS,eAAe,oBAAoB;AAC7G;AACA,oBAAoB,IAAI,yDAAa,SAAS;AAC9C,YAAY,yDAAa;AACzB,6EAA6E,IAAI,WAAW,yDAAa,IAAI,QAAQ,gBAAgB;AACrI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA,2BAA2B,yDAAa;AACxC,wDAAwD,yDAAa,SAAS,uBAAuB,YAAY,WAAW,EAAE;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,oEAAkB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,uDAAW;AACvE,gEAAgE,uDAAW;AAC3E;AACA,2EAA2E,EAAE,gCAAgC;AAC7G;AACA;AACA,+EAA+E,EAAE,oCAAoC;AACrH;AACA;AACA,kCAAkC,mEAAuB;AACzD,+EAA+E,OAAO;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yDAAa;AACrB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;;;;;;;;;;;;;;;AC5IO;AACP;AACA;AACA;AACA,8DAA8D,MAAM;AACpE;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;;;;;;ACZmD;AACnD;AACA;AACA,cAAc,4DAAc;AAC5B,cAAc,4DAAc;AAC5B;AACA,KAAK;AACL;AACA,qBAAqB,4DAAc;AACnC,KAAK;AACL;AACuB;;;;;;;;;;;;;;ACXyC;AAChE;AACA,UAAU,yEAAW;AACrB;AACA;;;;;;;;;;;;;;;;;;ACJiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,yDAAW,KAAK,yDAAW;AAClD;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,cAAc,yDAAW,OAAO,yDAAW;AAC3C,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;A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AChD;AACA;AACA,qCAAqC,+CAAI;AACzC;AACA;AACA,kCAAkC,+CAAI;AACtC;AACA;AACA,8CAA8C,+CAAI;AAClD;AACA;AACA,gDAAgD,+CAAI;AACpD;AACA;AACA,wCAAwC,+CAAI;AAC5C;AACA;AACA,mCAAmC,+CAAI;AACvC;AACA;AACA,iCAAiC,+CAAI;AACrC;AACA;AACA,qCAAqC,+CAAI;AACzC;AACA;AACA,+CAA+C,+CAAI;AACnD;AACA;AACA,wCAAwC,+CAAI;AAC5C;AACA;AACA;AACA,YAAY,+CAAI;AAChB;AACA;AACA,+CAA+C,+CAAI;AACnD;AACA;AACA,8CAA8C,+CAAI;AAClD;AACA;AACA,0CAA0C,+CAAI;AAC9C;AACA;AACA,oCAAoC,+CAAI;AACxC;AACA;AACA,sCAAsC,+CAAI;AAC1C;AACA;AACA,oCAAoC,+CAAI;AACxC;AACA;AACA,mCAAmC,+CAAI;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,+CAAI;AAC/C;AACA;AACA;AACA,yCAAyC,+CAAI;AAC7C;AACA;AACA;AACA,yCAAyC,+CAAI;AAC7C;AACA;AACA;AACA,4CAA4C,+CAAI;AAChD;AACA;AACA;AACA,oCAAoC,+CAAI;AACxC;AACA;AACA;AACA,kCAAkC,+CAAI;AACtC;AACA;AACA;AACA,sCAAsC,+CAAI;AAC1C;AACA;AACA;AACA,0CAA0C,+CAAI;AAC9C;AACA;AACA;AACA,iDAAiD,+CAAI;AACrD;AACA;AACA;AACA;AACA;AACA,yCAAyC,+CAAI;AAC7C;AACA;AACA;AACA;AACA,YAAY,+CAAI;AAChB;AACA;AACA;AACA,sCAAsC,+CAAI;AAC1C;AACA;AACA;AACA,iDAAiD,+CAAI;AACrD;AACA;AACA;AACA;AACA;AACA,wDAAwD,+CAAI;AAC5D;AACA;AACA;AACA,gDAAgD,+CAAI;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","sources":["webpack://e7-rta-archive/./node_modules/idb/build/index.js","webpack://e7-rta-archive/./static/assets/js/apis/e7-API.ts","webpack://e7-rta-archive/./static/assets/js/apis/py-API.js","webpack://e7-rta-archive/./static/assets/js/cache-manager.ts","webpack://e7-rta-archive/./static/assets/js/content-manager.ts","webpack://e7-rta-archive/./static/assets/js/e7/artifact-manager.ts","webpack://e7-rta-archive/./static/assets/js/e7/battle-manager.ts","webpack://e7-rta-archive/./static/assets/js/e7/battle-transform.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/base-elements.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/field-extract-map.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/filter-parse-references.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/filter-parser.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/filter-utils.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/functions.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/operators.ts","webpack://e7-rta-archive/./static/assets/js/e7/filter-parsing/string-literal-parse.ts","webpack://e7-rta-archive/./static/assets/js/e7/hero-manager.ts","webpack://e7-rta-archive/./static/assets/js/e7/references.ts","webpack://e7-rta-archive/./static/assets/js/e7/regex.ts","webpack://e7-rta-archive/./static/assets/js/e7/season-manager.ts","webpack://e7-rta-archive/./static/assets/js/e7/stats-builder -  old.ts","webpack://e7-rta-archive/./static/assets/js/e7/user-manager.ts","webpack://e7-rta-archive/./static/assets/js/export-import-data-tools.ts","webpack://e7-rta-archive/./static/assets/js/html-safe.ts","webpack://e7-rta-archive/./static/assets/js/lang-manager.ts","webpack://e7-rta-archive/./static/assets/js/pages/default.ts","webpack://e7-rta-archive/./static/assets/js/pages/orchestration/inter-page-manager.ts","webpack://e7-rta-archive/./static/assets/js/pages/orchestration/page-state-manager.js","webpack://e7-rta-archive/./static/assets/js/pages/orchestration/text-controller.js","webpack://e7-rta-archive/./static/assets/js/pages/page-utilities/doc-element-references.ts","webpack://e7-rta-archive/./static/assets/js/pages/page-utilities/nav-bar-utils.ts","webpack://e7-rta-archive/./static/assets/js/pages/page-utilities/page-state-references.js","webpack://e7-rta-archive/./static/assets/js/pages/page-utilities/page-utils.js","webpack://e7-rta-archive/./static/assets/js/str-functions.ts","webpack://e7-rta-archive/webpack/bootstrap","webpack://e7-rta-archive/webpack/runtime/async module","webpack://e7-rta-archive/webpack/runtime/define property getters","webpack://e7-rta-archive/webpack/runtime/hasOwnProperty shorthand","webpack://e7-rta-archive/webpack/runtime/make namespace object","webpack://e7-rta-archive/webpack/before-startup","webpack://e7-rta-archive/webpack/startup","webpack://e7-rta-archive/webpack/after-startup"],"sourcesContent":["const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst transactionDoneMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    // This mapping exists in reverseTransformCache but doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(this.request);\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nconst advanceMethodProps = ['continue', 'continuePrimaryKey', 'advance'];\nconst methodMap = {};\nconst advanceResults = new WeakMap();\nconst ittrProxiedCursorToOriginalProxy = new WeakMap();\nconst cursorIteratorTraps = {\n    get(target, prop) {\n        if (!advanceMethodProps.includes(prop))\n            return target[prop];\n        let cachedFunc = methodMap[prop];\n        if (!cachedFunc) {\n            cachedFunc = methodMap[prop] = function (...args) {\n                advanceResults.set(this, ittrProxiedCursorToOriginalProxy.get(this)[prop](...args));\n            };\n        }\n        return cachedFunc;\n    },\n};\nasync function* iterate(...args) {\n    // tslint:disable-next-line:no-this-assignment\n    let cursor = this;\n    if (!(cursor instanceof IDBCursor)) {\n        cursor = await cursor.openCursor(...args);\n    }\n    if (!cursor)\n        return;\n    cursor = cursor;\n    const proxiedCursor = new Proxy(cursor, cursorIteratorTraps);\n    ittrProxiedCursorToOriginalProxy.set(proxiedCursor, cursor);\n    // Map this double-proxy back to the original, so other cursor methods work.\n    reverseTransformCache.set(proxiedCursor, unwrap(cursor));\n    while (cursor) {\n        yield proxiedCursor;\n        // If one of the advancing methods was not called, call continue().\n        cursor = await (advanceResults.get(proxiedCursor) || cursor.continue());\n        advanceResults.delete(proxiedCursor);\n    }\n}\nfunction isIteratorProp(target, prop) {\n    return ((prop === Symbol.asyncIterator &&\n        instanceOfAny(target, [IDBIndex, IDBObjectStore, IDBCursor])) ||\n        (prop === 'iterate' && instanceOfAny(target, [IDBIndex, IDBObjectStore])));\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get(target, prop, receiver) {\n        if (isIteratorProp(target, prop))\n            return iterate;\n        return oldTraps.get(target, prop, receiver);\n    },\n    has(target, prop) {\n        return isIteratorProp(target, prop) || oldTraps.has(target, prop);\n    },\n}));\n\nexport { deleteDB, openDB, unwrap, wrap };\n","import { WORLD_CODES } from \"../e7/references.ts\";\nconst HERO_URL = \"https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json\";\nconst ARTIFACT_URL = \"https://static.smilegatemegaport.com/gameRecord/epic7/epic7_artifact.json\";\nasync function fetchE7Data(url) {\n    try {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`HTTP error: status: ${response.status}`);\n        }\n        const data = await response.json();\n        console.log(\"Fetched data from E7 Server; keys:\", Object.keys(data));\n        return data;\n    }\n    catch (error) {\n        console.error(\"Error fetching global user data:\", error);\n        return null;\n    }\n}\nasync function fetchHeroJSON(lang = null) {\n    console.log(`Fetching hero data (lang=${lang ?? \"all\"}) from E7 Server...`);\n    let data = await fetchE7Data(HERO_URL);\n    if (!data) {\n        return null;\n    }\n    if (lang && data[lang]) {\n        data = data[lang];\n    }\n    else if (lang && !data[lang]) {\n        console.error(\"Could not find hero data for language:\", lang);\n        data = null;\n    }\n    return data;\n}\nasync function fetchArtifactJSON(lang = null) {\n    console.log(`Fetching hero data (lang=${lang ?? \"all\"}) from E7 Server...`);\n    let data = await fetchE7Data(ARTIFACT_URL);\n    let output = null;\n    if (data && lang && typeof data === \"object\" && lang in data) {\n        let record = data;\n        if (Array.isArray(record[lang])) {\n            return output = record[lang];\n        }\n    }\n    return output;\n}\nasync function fetchUserJSON(world_code) {\n    world_code = world_code.replace(\"world_\", \"\");\n    if (![...WORLD_CODES].some((code) => code.replace(\"world_\", \"\") === world_code)) {\n        console.error(`Could not find world code: ${world_code}`);\n        return null;\n    }\n    console.log(`Fetching users for world code: ${world_code} from E7 Server...`);\n    const url = `https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_${world_code}.json`;\n    const data = await fetchE7Data(url);\n    if (data && typeof data === \"object\" && \"users\" in data && Array.isArray(data.users)) {\n        console.log(`Got user data for world: ${world_code} ; Found ${data.users.length} users`);\n    }\n    return data;\n}\nasync function fetchInfo(uid, worldCode, lang = \"en\") {\n    const url = \"https://epic7.onstove.com/gg/gameApi/getUserInfo\";\n    const payload = new URLSearchParams({\n        nick_no: uid,\n        world_code: worldCode,\n        lang: lang,\n    });\n    try {\n        const resp = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\n            },\n            body: payload.toString(),\n        });\n        if (!resp.ok) {\n            console.error(\"Error fetching battle list:\", resp.status, resp.statusText);\n            return null;\n        }\n        const data = await resp.json();\n        return data;\n    }\n    catch (err) {\n        console.error(\"Request failed:\", err);\n        return null;\n    }\n}\nlet E7API = {\n    fetchHeroJSON: fetchHeroJSON,\n    fetchUserJSON: fetchUserJSON,\n    fetchArtifactJSON: fetchArtifactJSON,\n    fetchInfo: fetchInfo\n};\nexport default E7API;\n","const RS_BATTLE_URL = '/api/rs_get_battle_data';\r\nconst HERO_URL = '/api/get_hero_data';\r\nconst USER_URL = '/api/get_user_data';\r\nconst SEASON_URL = '/api/get_season_details';\r\nconst ARTIFACT_JSON_URL = '/api/get_artifact_json';\r\n\r\nlet PYAPI = {\r\n\r\n    test: function(data) {\r\n        // test the fetching works properly\r\n        console.log('Got data in test:', data.rank_plot);\r\n    },\r\n\r\n    fetchFromPython: async function (url) {\r\n        let response = await fetch(url);\r\n        if (!response.ok) {\r\n            console.log(\"Retrying Fetch...\");\r\n            response = await fetch(url);\r\n        }\r\n        const data = await response.json();\r\n        return data? data : null;\r\n    },\r\n\r\n    fetchHeroData: async function () {\r\n        return await this.fetchFromPython(HERO_URL);\r\n    },\r\n\r\n    // uses the new API endpoint that utilizes Rust for fetching and processing the battles\r\n    rsFetchBattleData: async function (user) {\r\n        if (!user) {\r\n            throw new Error(\"Must pass user to fetch battles data\");\r\n        }\r\n        return await fetch(RS_BATTLE_URL, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ user: user })\r\n          })\r\n    },\r\n\r\n    fetchSeasonDetails: async function () {\r\n        const response = await fetch(SEASON_URL);\r\n        const data = await response.json();\r\n        if (data.success) {\r\n            const seasonDetails = JSON.parse(data.seasonDetails);\r\n            return { seasonDetails: seasonDetails, error: false};\r\n        } else {\r\n            return { seasonDetails: null, error: data.error};\r\n        }\r\n    },\r\n\r\n    fetchArtifactJson: async function () {\r\n        const response = await fetch(ARTIFACT_JSON_URL);\r\n        const data = await response.json();\r\n        if (data.success) {\r\n            const artifactJson = JSON.parse(data.artifactJson);\r\n            return artifactJson\r\n        } else {\r\n            return null\r\n        }\r\n    },\r\n\r\n    fetchUser: async function (userData) {\r\n        if ((!userData.name || !userData.world_code) && !userData.id) {\r\n            throw new Error(\"Must pass a user object with either user.name and user.world_code or user.id to fetch user\");\r\n        }\r\n        const response = await fetch(USER_URL, {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ userData })\r\n        })\r\n        const data = await response.json();\r\n        if (!response.ok) {\r\n            throw new Error(`Flask server error: ${data.error}`);\r\n        }\r\n        if (!data.foundUser) {\r\n            if (!userData.world_code) {\r\n                return { user: null, ok: true};\r\n            }\r\n            return { user: null, ok: true};\r\n        } \r\n        const user = data.user;\r\n        console.log(\"Server communication successful; received response data for user\");\r\n        console.log(`Found user: ${JSON.stringify(user)}`);\r\n        return { user, ok: true};\r\n    },\r\n};\r\n\r\nexport default PYAPI;","// static/app.js\nimport { openDB } from 'idb';\nimport { LANGUAGES } from './e7/references';\nasync function clearStore(db, storeName) {\n    const tx = db.transaction(storeName, 'readwrite');\n    const store = tx.objectStore(storeName);\n    store.clear();\n    await tx.done;\n}\n;\nconst USER_DATA_KEYS = {\n    USER: \"current-user\",\n    BATTLES: \"battles\",\n    RAW_UPLOAD: \"raw-upload\",\n    UPLOADED_BATTLES: \"uploaded-battles\",\n    FILTERED_BATTLES: \"filtered-battles\",\n    STATS: \"stats\",\n    FILTER_STR: \"filter-str\",\n};\nconst SERVER_USER_LISTS_KEYS = {\n    GLOBAL_USERS: \"global-users\",\n    EU_USERS: \"eu-users\",\n    ASIA_USERS: \"asia-users\",\n    JPN_USERS: \"jpn-users\",\n    KOR_USERS: \"kor-users\",\n};\nconst REFERENCE_DATA_KEYS = {\n    ...SERVER_USER_LISTS_KEYS,\n    ARTIFACTS: \"artifacts\", // map of artifact codes to names\n    ARTIFACTS_LOWERCASE_NAMES_MAP: \"artifacts-lowercase-names-map\", // map of artifact lowercase names to original names\n    ARTIFACT_OBJECT_LIST: \"artifact-object-list\", // list of artifact objects with id and name fields\n    HERO_MANAGER: \"hero-manager\",\n    SEASON_DETAILS: \"season-details\",\n};\nconst Keys = {\n    ...USER_DATA_KEYS,\n    ...REFERENCE_DATA_KEYS,\n    LANG: \"lang\",\n    AUTO_ZOOM_FLAG: \"auto-zoom\",\n    AUTO_QUERY_FLAG: \"auto-query\",\n    ID_SEARCH_FLAG: \"id-search\",\n    ARTIFACTS: \"artifacts\",\n    ARTIFACTS_LOWERCASE_NAMES_MAP: \"artifacts-lowercase-names-map\",\n    ARTIFACT_OBJECT_LIST: \"artifact-object-list\",\n    HOME_PAGE_STATE: \"home-page-state\",\n    INTER_PAGE_MANAGER: \"inter-page-manager\",\n};\nconst DEFAULT_TIMEOUT = 1000 * 60 * 60 * 24 * 2; // 2 days\nconst REFERENCE_DATA_TIMEOUT = 1000 * 60 * 60 * 24; // 1 day\nconst REFERENCE_DATA_KEY_LIST = Object.values(REFERENCE_DATA_KEYS);\nfunction getCacheTimeout(key) {\n    return (REFERENCE_DATA_KEY_LIST.includes(key))\n        ? REFERENCE_DATA_TIMEOUT\n        : DEFAULT_TIMEOUT;\n}\nfunction makeTimeoutData(key) {\n    return [Date.now(), getCacheTimeout(key)];\n}\nlet ClientCache = {\n    consts: {\n        DB_NAME: 'E7ArenaStatsClientDB',\n        DB_VERSION: 1,\n        STORE_NAME: 'DataStore',\n        META_STORE_NAME: 'MetaStore',\n        CACHE_TIMEOUT: 1000 * 60 * 60 * 24 * 2, // 2 day cache timeout\n    },\n    Keys: { ...Keys },\n    MetaKeys: {\n        TIMESTAMP: \"timestamp\",\n    },\n    loaded_UM: new Set(),\n    openDB: async () => {\n        return openDB(ClientCache.consts.DB_NAME, ClientCache.consts.DB_VERSION, {\n            upgrade(db) {\n                if (db.objectStoreNames.contains(ClientCache.consts.STORE_NAME)) {\n                    db.deleteObjectStore(ClientCache.consts.STORE_NAME); //  clear old store\n                    console.log('Old store deleted');\n                }\n                if (!db.objectStoreNames.contains(ClientCache.consts.STORE_NAME)) {\n                    console.log('Created data store');\n                    db.createObjectStore(ClientCache.consts.STORE_NAME);\n                }\n                if (!db.objectStoreNames.contains(ClientCache.consts.META_STORE_NAME)) {\n                    console.log('Created meta data store');\n                    db.createObjectStore(ClientCache.consts.META_STORE_NAME);\n                }\n            }\n        });\n    },\n    get: async function (key) {\n        const db = await this.openDB();\n        const result = await db.get(this.consts.STORE_NAME, key);\n        if (result) {\n            console.log(`Found ${key} in cache`);\n        }\n        else {\n            console.log(`${key} not found in cache; returning null`);\n            return null;\n        }\n        const useCache = await this.checkCacheTimeout(key);\n        if (useCache) {\n            return result;\n        }\n        else {\n            return null;\n        }\n    },\n    cache: async function (key, data) {\n        console.log(`Caching ${key}`);\n        const db = await this.openDB();\n        await db.put(this.consts.STORE_NAME, data, key);\n        await this.setTimeoutData(key, makeTimeoutData(key));\n    },\n    delete: async function (key) {\n        const db = await this.openDB();\n        await db.delete(this.consts.STORE_NAME, key);\n        await this.deleteTimestamp(key);\n    },\n    deleteDB: async function () {\n        await indexedDB.deleteDatabase(this.consts.DB_NAME);\n        console.log('Database deleted');\n    },\n    getTimeoutData: async function (key) {\n        const db = await this.openDB();\n        const metakey = `${key + this.MetaKeys.TIMESTAMP}`;\n        const timestamp = await db.get(this.consts.META_STORE_NAME, metakey);\n        return timestamp ?? 0;\n    },\n    setTimeoutData: async function (key, timestamp) {\n        const db = await this.openDB();\n        const metakey = `${key + this.MetaKeys.TIMESTAMP}`;\n        await db.put(this.consts.META_STORE_NAME, timestamp, metakey);\n    },\n    setTimeoutDataNow: async function (key) {\n        const timeoutData = makeTimeoutData(key);\n        await this.setTimeoutData(key, timeoutData);\n    },\n    deleteTimestamp: async function (key) {\n        const db = await this.openDB();\n        const metakey = `${key + this.MetaKeys.TIMESTAMP}`;\n        await db.delete(this.consts.META_STORE_NAME, metakey);\n        console.log(`Deleted ${key} from cache`);\n    },\n    clearData: async function () {\n        const db = await this.openDB();\n        await clearStore(db, this.consts.STORE_NAME);\n        await clearStore(db, this.consts.META_STORE_NAME);\n        console.log('All data cleared from data cache and meta data cache');\n    },\n    clearUserData: async function () {\n        const toDelete = Object.values(USER_DATA_KEYS);\n        await Promise.all(toDelete.map(key => this.delete(key)));\n        console.log(\"User data cleared from data cache\");\n    },\n    clearUserLists: async function () {\n        const toDelete = Object.values(SERVER_USER_LISTS_KEYS);\n        await Promise.all(toDelete.map(key => this.delete(key)));\n        console.log(\"User lists cleared from data cache\");\n    },\n    clearSeasonData: async function () {\n        await this.delete(Keys.SEASON_DETAILS);\n        console.log(\"Season data cleared from data cache\");\n    },\n    clearReferenceData: async function () {\n        const toDelete = Object.values(REFERENCE_DATA_KEYS);\n        await Promise.all(toDelete.map(key => this.delete(key)));\n        console.log(\"Reference data cleared from data cache\");\n    },\n    checkCacheTimeout: async function (key) {\n        const timeoutData = await this.getTimeoutData(key);\n        const currentTime = Date.now();\n        if (!timeoutData || (currentTime - timeoutData[0] > timeoutData[1])) {\n            console.log(`Cache timeout for ${key}; Timeout Record: ${timeoutData}; currentTime: ${currentTime}`);\n            await this.delete(key);\n            return false;\n        }\n        console.log(`Cache ok for ${key}; Timeout Record: ${timeoutData}; currentTime: ${currentTime}; timeout: ${getCacheTimeout(key)}; diff: ${currentTime - timeoutData[0]}`);\n        return true;\n    },\n    getFilterStr: async function () {\n        return await this.get(Keys.FILTER_STR);\n    },\n    setFilterStr: async function (filterStr) {\n        await this.cache(Keys.FILTER_STR, filterStr);\n    },\n    getLang: async function () {\n        return await this.get(Keys.LANG) ?? LANGUAGES.CODES.EN;\n    },\n    setLang: async function (lang) {\n        await this.cache(Keys.LANG, lang);\n    },\n    getStats: async function () {\n        return await this.get(Keys.STATS);\n    },\n    setStats: async function (stats) {\n        await this.cache(Keys.STATS, stats);\n    },\n};\nexport default ClientCache;\n","import HeroManager from \"./e7/hero-manager.ts\";\nimport BattleManager from \"./e7/battle-manager.ts\";\nimport SeasonManager from \"./e7/season-manager.ts\";\nimport ClientCache from \"./cache-manager.ts\";\nimport UserManager from \"./e7/user-manager.ts\";\nimport ArtifactManager from \"./e7/artifact-manager.ts\";\nimport { LangManager } from \"./lang-manager.ts\";\nlet ContentManager = {\n    HeroManager: HeroManager,\n    BattleManager: BattleManager,\n    SeasonManager: SeasonManager,\n    UserManager: UserManager,\n    ClientCache: ClientCache,\n    ArtifactManager: ArtifactManager,\n    LangManager: LangManager,\n};\nexport { ContentManager };\n","import ClientCache from \"../cache-manager.ts\";\nimport E7API from \"../apis/e7-API.ts\";\nimport PYAPI from \"../apis/py-API.js\";\nasync function getArtifactCodeToNameMap() {\n    console.log(`Getting artifact map from E7 server...`);\n    let rawJSON = await E7API.fetchArtifactJSON(\"en\");\n    if (rawJSON === null) {\n        console.log(`Getting artifact map from flask server...`);\n        rawJSON = await PYAPI.fetchArtifactJson();\n    }\n    if (rawJSON === null) {\n        console.error(`Could not get artifact Json map from E7 server or flask server`);\n        return null;\n    }\n    console.log(`Got artifact Json for language: 'en'`);\n    return Object.fromEntries(rawJSON\n        .filter((artifact) => artifact.name !== null)\n        .map((artifact) => [artifact.code, artifact.name]));\n}\nlet ArtifactManager = {\n    async getArtifactCodeToNameMap() {\n        let artifacts = await ClientCache.get(ClientCache.Keys.ARTIFACTS);\n        if (!artifacts) {\n            artifacts = await this.fetchAndCacheArtifacts();\n        }\n        return artifacts;\n    },\n    getArtifactLowercaseNameMap: async function () {\n        let artiMap = await ClientCache.get(ClientCache.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP);\n        if (artiMap !== null) {\n            console.log(\"Got artifact lowercase name map from cache\");\n            return artiMap;\n        }\n        const artifacts = await this.getArtifactCodeToNameMap();\n        artiMap = Object.fromEntries(Object.values(artifacts)\n            .filter((name) => name !== null)\n            .map((name) => {\n            return [name.toLowerCase(), name];\n        }));\n        await ClientCache.cache(ClientCache.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP, artiMap);\n        return artiMap;\n    },\n    getArtifactObjectList: async function () {\n        let objectList = await ClientCache.get(ClientCache.Keys.ARTIFACT_OBJECT_LIST);\n        if (objectList !== null) {\n            console.log(\"Got artifact object list from cache\");\n            return objectList;\n        }\n        const artifacts = await this.getArtifactCodeToNameMap();\n        objectList = Object.entries(artifacts).map(([id, name]) => ({ id, name }));\n        await ClientCache.cache(ClientCache.Keys.ARTIFACT_OBJECT_LIST, objectList);\n        return objectList;\n    },\n    fetchAndCacheArtifacts: async function () {\n        console.log(`ArtifactManager not found in cache, fetching from server and caching it`);\n        const artifactMap = await getArtifactCodeToNameMap();\n        if (artifactMap === null) {\n            return {};\n        }\n        await ClientCache.cache(ClientCache.Keys.ARTIFACTS, artifactMap);\n        console.log(`Cached ArtifactManager using raw data recieved from server`);\n        return artifactMap;\n    },\n    clearArtifactData: async function () {\n        await ClientCache.delete(ClientCache.Keys.ARTIFACTS);\n    },\n    // will fall back to the code if the name is not found\n    convertCodeToName: function (code, artifacts) {\n        return artifacts[code] || code;\n    },\n};\nexport default ArtifactManager;\n","import ClientCache from \"../cache-manager.ts\";\nimport StatsBuilder from \"./stats-builder -  old.ts\";\nimport { buildFormattedBattleMap, parsedCSVToFormattedBattleMap, } from \"./battle-transform.ts\";\nimport { StandardFilter, GlobalFilter } from \"./filter-parsing/functions.ts\";\nimport { COLUMNS_MAP } from \"./references.ts\";\nexport async function applyFilters(battleList, filters) {\n    const localFilterList = filters.filter((f) => f instanceof StandardFilter);\n    const globalFilterList = filters.filter((f) => f instanceof GlobalFilter);\n    // apply global filters (filters that require context of all battles); these are always applied before local filters in order of appearance\n    for (let filter of globalFilterList) {\n        console.log(`Applying global filter: ${filter.asString()}`);\n        battleList = filter.call(battleList);\n    }\n    // apply local filters (filters that can be resolved on each battle without context of other battles)\n    for (let filter of localFilterList) {\n        console.log(`Applying local filter: ${filter.asString()}`);\n        battleList = battleList.filter((b) => {\n            // console.log(`Filtering battle:`, b);\n            const result = filter.call(b);\n            // console.log(`Result: ${result ? \"included\" : \"excluded\"}`);\n            return result;\n        });\n    }\n    return battleList;\n}\nlet BattleManager = {\n    loaded_servers: new Set(),\n    // gets battles (upload and/or queried) and returns as list in clean format; used directly to populate battles table\n    getBattles: async function () {\n        console.log(\"Getting battles\");\n        const battles = (await ClientCache.get(ClientCache.Keys.BATTLES)) ?? null;\n        ClientCache.setTimeoutDataNow(ClientCache.Keys.BATTLES);\n        return battles;\n    },\n    // Removes all user battle data from cache, should be called when user is switched out\n    removeBattles: async function () {\n        await ClientCache.delete(ClientCache.Keys.BATTLES);\n        await ClientCache.delete(ClientCache.Keys.UPLOADED_BATTLES);\n        await ClientCache.delete(ClientCache.Keys.FILTERED_BATTLES);\n        console.log(\"Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']\");\n    },\n    removeFilteredBattles: async function () {\n        await ClientCache.delete(ClientCache.Keys.FILTERED_BATTLES);\n        console.log(\"Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']\");\n    },\n    applyFilters: applyFilters,\n    /* after battles are set in cache, applies filters to the battles and stores filtered arr in cache under filtered\n  battle key all battles are stored in their clean format, not numerical format; convert after to compute metrics */\n    applyFiltersToCachedBattles: async function (filters) {\n        let battles = await this.getBattles() ?? {};\n        const filteredBattles = await this.applyFilters(Object.values(battles), filters);\n        console.log(`Caching filtered battles ; total = ${Object.keys(battles).length}`);\n        await ClientCache.cache(ClientCache.Keys.FILTERED_BATTLES, battles);\n        console.log(`Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <${filters.length}> filters`);\n        return battles;\n    },\n    //takes in list of battles then converts to dict and then adds to cached battles\n    extendBattles: async function (cleanBattleMap) {\n        let oldDict = (await ClientCache.get(ClientCache.Keys.BATTLES)) ?? {};\n        // new battles automatically overwrite old ones if they share same seq_num\n        const newDict = { ...oldDict, ...this.sortBattlesObj(cleanBattleMap) };\n        await ClientCache.cache(ClientCache.Keys.BATTLES, newDict);\n        console.log(\"Extended user data in cache\");\n        return newDict;\n    },\n    //Takes queried battles, clean format and extend in cache\n    cacheQuery: async function (battleList, HeroDicts, artifacts) {\n        if (!battleList) {\n            console.log(\"No query battles provided to cacheQuery\");\n            return [];\n        }\n        console.log(`Caching queried battles: ${battleList.length} battles; modified [BATTLES];`, battleList);\n        const cleanBattleMap = buildFormattedBattleMap(battleList, HeroDicts, artifacts);\n        const battles = await this.extendBattles(cleanBattleMap);\n        console.log(\"Cached queried battles in cache; modified [BATTLES];\");\n        return battles;\n    },\n    //Takes uploaded battles and sets as battles in cache, should be called before attempting to get battles if upload exists\n    cacheUpload: async function (rawParsedBattleList, HeroDicts) {\n        if (!rawParsedBattleList) {\n            console.error(\"No uploaded battles provided to cacheUpload\");\n            return {};\n        }\n        const cleanBattles = parsedCSVToFormattedBattleMap(rawParsedBattleList, HeroDicts);\n        await ClientCache.cache(ClientCache.Keys.UPLOADED_BATTLES, cleanBattles);\n        let battles = await this.extendBattles(cleanBattles);\n        console.log(\"Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]\");\n        return battles;\n    },\n    getStats: async function (battles, filters, HeroDicts) {\n        console.log(\"Getting stats\");\n        const numFilters = filters.length;\n        console.log(`Applying ${numFilters} filters`);\n        const battlesList = Object.values(battles);\n        const filteredBattles = await this.applyFiltersToCachedBattles(filters);\n        const filteredBattlesList = Object.values(filteredBattles);\n        const areFiltersApplied = numFilters > 0;\n        console.log(\"Getting preban stats\");\n        const prebanStats = await StatsBuilder.getPrebanStats(filteredBattlesList, HeroDicts);\n        console.log(\"Getting first pick stats\");\n        const firstPickStats = await StatsBuilder.getFirstPickStats(filteredBattlesList, HeroDicts);\n        console.log(\"Getting general stats\");\n        const generalStats = await StatsBuilder.getGeneralStats(filteredBattlesList);\n        console.log(\"Getting hero stats\");\n        const heroStats = await StatsBuilder.getHeroStats(filteredBattlesList, HeroDicts);\n        console.log(\"Getting server stats\");\n        const performanceStats = await StatsBuilder.getPerformanceStats(filteredBattlesList);\n        console.log(\"Returning stats\");\n        return {\n            battles: battlesList,\n            filteredBattlesObj: filteredBattles,\n            prebanStats: prebanStats,\n            generalStats: generalStats,\n            firstPickStats: firstPickStats,\n            playerHeroStats: heroStats.playerHeroStats,\n            enemyHeroStats: heroStats.enemyHeroStats,\n            performanceStats: performanceStats,\n            numFilters: numFilters,\n            areFiltersApplied: areFiltersApplied,\n        };\n    },\n    sortBattlesList: function (battlesList, asc = true) {\n        const cmpCol = COLUMNS_MAP.DATE_TIME;\n        if (asc) {\n            return battlesList.sort((a, b) => {\n                return +new Date(a[cmpCol]) - +new Date(b[cmpCol]);\n            });\n        }\n        else {\n            return battlesList.sort((a, b) => {\n                return +new Date(b[cmpCol]) - +new Date(a[cmpCol]);\n            });\n        }\n    },\n    sortBattlesObj: function (battlesObj, asc = true) {\n        const cmpCol = COLUMNS_MAP.DATE_TIME;\n        if (asc) {\n            let sorted = Object.values(battlesObj).sort((a, b) => {\n                return +new Date(a[cmpCol]) - +new Date(b[cmpCol]);\n            });\n            return Object.fromEntries(sorted.map((b) => [b[COLUMNS_MAP.SEQ_NUM], b]));\n        }\n        else {\n            let sorted = Object.values(battlesObj).sort((a, b) => {\n                return +new Date(b[cmpCol]) - +new Date(a[cmpCol]);\n            });\n            return Object.fromEntries(sorted.map((b) => [b[COLUMNS_MAP.SEQ_NUM], b]));\n        }\n    },\n};\nexport default BattleManager;\n","import HeroManager from \"./hero-manager.ts\";\nimport ArtifactManager from \"./artifact-manager.ts\";\nimport { EQUIPMENT_SET_MAP, COLUMNS_MAP, WORLD_CODE_TO_CLEAN_STR, } from \"./references.ts\";\nimport { toTitleCase } from \"../str-functions.ts\";\n// takes in cleaned battle row (including from uploaded file or in formatBattleAsRow)\n// and adds fields representing sets heroes as prime products\nfunction addPrimeFields(battle, HeroDicts) {\n    const getChampPrime = (name) => HeroManager.getHeroByName(name, HeroDicts)?.prime ?? HeroDicts.Fodder.prime;\n    battle[COLUMNS_MAP.P1_PICKS_PRIMES] =\n        battle[COLUMNS_MAP.P1_PICKS].map(getChampPrime);\n    battle[COLUMNS_MAP.P2_PICKS_PRIMES] =\n        battle[COLUMNS_MAP.P2_PICKS].map(getChampPrime);\n    battle[COLUMNS_MAP.P1_PREBANS_PRIMES] =\n        battle[COLUMNS_MAP.P1_PREBANS].map(getChampPrime);\n    battle[COLUMNS_MAP.P2_PREBANS_PRIMES] =\n        battle[COLUMNS_MAP.P2_PREBANS].map(getChampPrime);\n}\nconst P1 = \"p1\";\nconst P2 = \"p2\";\n// takes raw battle from array returned by rust battle array call to flask-server; formats into row to populate table\nfunction formatBattleAsRow(raw, HeroDicts, artifacts) {\n    // Make functions used to convert the identifier strings in the E7 data into human readable names\n    const getChampName = (code) => HeroManager.getHeroByCode(code, HeroDicts)?.name ?? HeroDicts.Fodder.name;\n    const getArtifactName = (code) => ArtifactManager.convertCodeToName(code, artifacts) || \"None\";\n    const checkBanned = (player, index) => {\n        // used to check if artifact is null because banned or because not equipped\n        if (player === P1) {\n            return raw.p2_postban === raw.p1_picks[index];\n        }\n        else {\n            return raw.p1_postban === raw.p2_picks[index];\n        }\n    };\n    const formatArtifacts = (player, artiArr) => artiArr.map((code, index) => code ? getArtifactName(code) : checkBanned(player, index) ? \"n/a\" : \"None\");\n    function formatCRBar(crBar) {\n        return crBar.map((entry) => entry && entry.length == 2\n            ? [getChampName(entry[0]), entry[1]]\n            : [\"n/a\", 0]);\n    }\n    // Fall back to the code if the equipment set is not defined in references\n    const formatEquipment = (equipArr) => equipArr.map((heroEquipList) => heroEquipList.map((equip) => EQUIPMENT_SET_MAP[equip] || equip));\n    const firstTurnHero = raw.cr_bar.find((entry) => entry[1] === 100);\n    const p1TookFirstTurn = firstTurnHero\n        ? raw.p1_picks.includes(firstTurnHero[0])\n        : false;\n    const battle = {\n        [COLUMNS_MAP.SEASON]: raw.season_name || \"None\",\n        [COLUMNS_MAP.SEASON_CODE]: raw.season_code || \"None\",\n        [COLUMNS_MAP.DATE_TIME]: raw.date_time,\n        [COLUMNS_MAP.SECONDS]: raw.seconds,\n        [COLUMNS_MAP.TURNS]: raw.turns,\n        [COLUMNS_MAP.SEQ_NUM]: raw.seq_num,\n        [COLUMNS_MAP.P1_ID]: raw.p1_id.toString(),\n        [COLUMNS_MAP.P1_SERVER]: WORLD_CODE_TO_CLEAN_STR[raw.p1_server] || raw.p1_server || \"None\",\n        [COLUMNS_MAP.P2_ID]: raw.p2_id.toString(),\n        [COLUMNS_MAP.P2_SERVER]: WORLD_CODE_TO_CLEAN_STR[raw.p2_server] || raw.p2_server || \"None\",\n        [COLUMNS_MAP.P1_LEAGUE]: toTitleCase(raw.p1_league) || \"None\",\n        [COLUMNS_MAP.P2_LEAGUE]: toTitleCase(raw.p2_league) || \"None\",\n        [COLUMNS_MAP.P1_POINTS]: raw.p1_win_score,\n        [COLUMNS_MAP.POINT_GAIN]: raw.p1_point_delta || null,\n        [COLUMNS_MAP.WIN]: raw.win === 1 ? true : false,\n        [COLUMNS_MAP.FIRST_PICK]: raw.first_pick === 1 ? true : false,\n        [COLUMNS_MAP.FIRST_TURN]: p1TookFirstTurn ? true : false,\n        [COLUMNS_MAP.FIRST_TURN_HERO]: firstTurnHero\n            ? getChampName(firstTurnHero[0])\n            : \"n/a\",\n        [COLUMNS_MAP.CR_BAR]: formatCRBar(raw.cr_bar),\n        [COLUMNS_MAP.P1_PREBANS]: raw.p1_prebans.map(getChampName),\n        [COLUMNS_MAP.P2_PREBANS]: raw.p2_prebans.map(getChampName),\n        [COLUMNS_MAP.P1_PICKS]: raw.p1_picks.map(getChampName),\n        [COLUMNS_MAP.P2_PICKS]: raw.p2_picks.map(getChampName),\n        [COLUMNS_MAP.P1_POSTBAN]: getChampName(raw.p1_postban),\n        [COLUMNS_MAP.P2_POSTBAN]: getChampName(raw.p2_postban),\n        [COLUMNS_MAP.P1_EQUIPMENT]: formatEquipment(raw.p1_equipment),\n        [COLUMNS_MAP.P2_EQUIPMENT]: formatEquipment(raw.p2_equipment),\n        [COLUMNS_MAP.P1_ARTIFACTS]: formatArtifacts(P1, raw.p1_artifacts),\n        [COLUMNS_MAP.P2_ARTIFACTS]: formatArtifacts(P2, raw.p2_artifacts),\n        [COLUMNS_MAP.P1_MVP]: getChampName(raw.p1_mvp),\n        [COLUMNS_MAP.P2_MVP]: getChampName(raw.p2_mvp),\n    };\n    // finally take the array hero array fields and compute the prime products after converting; will be used to compute statistics more easily\n    addPrimeFields(battle, HeroDicts);\n    return battle;\n}\nfunction buildFormattedBattleMap(rawBattles, HeroDicts, artifacts) {\n    artifacts = artifacts ?? ArtifactManager.getArtifactCodeToNameMap();\n    let entries = [];\n    for (const rawBattle of rawBattles) {\n        let battle = formatBattleAsRow(rawBattle, HeroDicts, artifacts);\n        entries.push([battle[\"Seq Num\"], battle]);\n    }\n    return Object.fromEntries(entries);\n}\nfunction castRawUploadBattle(raw) {\n    return Object.fromEntries(Object.entries(raw).map(([column, value]) => [\n        column,\n        JSON.parse(value),\n    ]));\n}\n// takes output of CSV parse and parses the list rows and ensures types are correct\nfunction parsedCSVToFormattedBattleMap(rawRowsArr, HeroDicts) {\n    const rows = rawRowsArr.map((row) => {\n        const formattedRow = castRawUploadBattle(row);\n        console.log(\"Formatted Row: \", formattedRow);\n        addPrimeFields(formattedRow, HeroDicts);\n        return formattedRow;\n    });\n    return Object.fromEntries(rows.map((row) => [row[COLUMNS_MAP.SEQ_NUM], row]));\n}\nexport { buildFormattedBattleMap, parsedCSVToFormattedBattleMap };\n","import { RegExps } from \"../regex\";\nimport Futils from \"./filter-utils\";\nimport { parseStringLiteral, STRING_LITERAL_PARSERS } from \"./string-literal-parse\";\nimport { FIELD_EXTRACT_FN_MAP } from \"./field-extract-map\";\nconst COLLECTION_FIELDS_SET = new Set([\n    \"p1.picks\",\n    \"p2.picks\",\n    \"p1.prebans\",\n    \"p2.prebans\",\n    \"prebans\",\n]);\nconst BaseEltTypes = {\n    FIELD: \"FIELD\",\n    RANGE: \"RANGE\",\n    SET: \"SET\",\n    INT: \"INT\",\n    DATE: \"DATE\",\n    BOOL: \"BOOL\",\n    STRING: \"STRING\",\n};\nclass BaseElement {\n}\nclass Field extends BaseElement {\n    type = BaseEltTypes.FIELD;\n    rawString;\n    extractFn;\n    constructor(str) {\n        super();\n        this.rawString = str;\n        if (!FIELD_EXTRACT_FN_MAP[str])\n            throw new Error(\"Invalid field\");\n        this.extractFn = FIELD_EXTRACT_FN_MAP[str];\n    }\n    getData() { throw new Error(\"Not implemented for Field\"); }\n    extractData(battle) {\n        return this.extractFn(battle);\n    }\n    asString() { return `${this.rawString}`; }\n}\nclass Literal extends BaseElement {\n    rawString;\n    constructor(str) {\n        super();\n        this.rawString = str;\n    }\n    getData() {\n        return this.data;\n    }\n    extractData(battle) { throw new Error(\"Not implemented for Literals\"); }\n    asString() { return `${this.fmtString}`; }\n}\nclass StringLiteral extends Literal {\n    type = BaseEltTypes.STRING;\n    fmtString;\n    data;\n    constructor(str, REFS, parsers = Object.values(STRING_LITERAL_PARSERS)) {\n        super(str);\n        str = Futils.trimSurroundingQuotes(str);\n        this.data = this.processString(str, REFS, parsers);\n        this.fmtString = this.data;\n    }\n    /**\n     * Processes a string literal and returns the parsed string.\n     * If the string could not be parsed, throws a ValidationError.\n     * @param str the string to parse\n     * @param REFS the FilterReferences to use for parsing\n     * @param parsers an array of StringLiteralParser to use for parsing\n     * @returns the parsed string\n     * @throws ValidationError if the string could not be parsed\n     */\n    processString(str, REFS, parsers) {\n        const parsedString = parseStringLiteral(str, REFS, parsers);\n        if (!parsedString) {\n            const parsersStr = parsers.map((parser) => parser.parserType).join(\", \");\n            throw new Futils.ValidationError(`Invalid string literal: '${str}' ; could not be parsed as a valid instance of any of the following: [${parsersStr}]`);\n        }\n        return parsedString;\n    }\n}\nclass IntLiteral extends Literal {\n    type = BaseEltTypes.INT;\n    fmtString;\n    data;\n    constructor(str) {\n        super(str);\n        this.data = this.processString(str);\n        this.fmtString = str;\n    }\n    processString(str) {\n        const num = parseInt(str);\n        if (isNaN(num)) {\n            throw new Futils.ValidationError(`Invalid integer literal: '${str}'`);\n        }\n        return num;\n    }\n}\nclass BoolLiteral extends Literal {\n    type = BaseEltTypes.BOOL;\n    fmtString;\n    data;\n    constructor(str) {\n        super(str);\n        this.data = this.processString(str);\n        this.fmtString = str;\n    }\n    processString(str) {\n        if (str === \"true\")\n            return true;\n        if (str === \"false\")\n            return false;\n        throw new Futils.ValidationError(`Invalid boolean literal: '${str}'`);\n    }\n}\nclass DateLiteral extends Literal {\n    type = BaseEltTypes.DATE;\n    fmtString;\n    data;\n    constructor(str) {\n        super(str);\n        this.data = this.processString(str);\n        this.fmtString = str;\n    }\n    processString(str) {\n        return Futils.parseDate(str).getTime();\n    }\n}\nclass RangeData {\n    start;\n    end;\n    endInclusive;\n    constructor(start, end, endInclusive) {\n        this.start = start;\n        this.end = end;\n        this.endInclusive = endInclusive;\n    }\n    has(value) {\n        if (typeof value === \"number\" && typeof this.start === \"number\" && typeof this.end === \"number\") {\n            // number case\n            if (value < this.start)\n                return false;\n            if (value > this.end)\n                return false;\n            return value === this.end ? this.endInclusive : true;\n        }\n        return false;\n    }\n    includes(value) {\n        return this.has(value);\n    }\n}\nconst RANGE_ELT_PARSERS = [\n    (str) => {\n        return RegExps.DATE_LITERAL_RE.test(str)\n            ? new DateLiteral(str)\n            : null;\n    },\n    (str) => {\n        return RegExps.INT_LITERAL_RE.test(str)\n            ? new IntLiteral(str)\n            : null;\n    },\n];\nfunction tryParseRange(start, end, endInclusive, parser) {\n    let parsedStart = parser(start);\n    let parsedEnd = parser(end);\n    if (parsedStart === null || parsedEnd === null)\n        return null;\n    return new RangeData(parsedStart.data, parsedEnd.data, endInclusive);\n}\nclass RangeLiteral extends Literal {\n    type = BaseEltTypes.RANGE;\n    fmtString;\n    data;\n    constructor(str, REFS) {\n        super(str);\n        this.fmtString = str;\n        this.data = this.processString(str, REFS);\n    }\n    processString(str, REFS) {\n        const split = str.split(\"...\");\n        const start = split[0];\n        let endInclusive = split[1].charAt(0) === \"=\";\n        const end = split[1].slice(endInclusive ? 1 : 0);\n        for (const parser of RANGE_ELT_PARSERS) {\n            const parsedRangeData = tryParseRange(start, end, endInclusive, parser);\n            if (parsedRangeData !== null) {\n                console.log(\"Parsed Range literal:\", parsedRangeData);\n                return parsedRangeData;\n            }\n        }\n        throw new Futils.ValidationError(`Invalid range literal: '${str}' ; ranges must be homogenous and of the format x...y or x...=y for the types: [Date, Integer]`);\n    }\n}\nconst SET_ELT_PARSERS = [\n    ...RANGE_ELT_PARSERS\n];\nconst SET_STRING_PARSER = (str, REFS, parsers) => {\n    return RegExps.STRING_RE.test(str)\n        ? new StringLiteral(str, REFS, parsers)\n        : null;\n};\nclass SetLiteral extends Literal {\n    type = BaseEltTypes.SET;\n    fmtString;\n    data;\n    constructor(str, REFS, parsers = Object.values(STRING_LITERAL_PARSERS)) {\n        super(str);\n        this.fmtString = str;\n        this.data = this.processString(str, REFS, parsers);\n    }\n    processString(str, REFS, parsers) {\n        let args = Futils.tokenizeWithNestedEnclosures(str, \",\", 1, true);\n        args = args.filter((arg) => arg !== \"\");\n        const parsedSet = new Set();\n        for (const arg of args) {\n            let parsedElt = null;\n            for (const parser of SET_ELT_PARSERS) {\n                parsedElt = parser(arg);\n                if (parsedElt) {\n                    console.log(`Parsed literal: ${arg} and got ${parsedElt}`);\n                    parsedSet.add(parsedElt.data);\n                    break;\n                }\n            }\n            if (parsedElt)\n                continue;\n            parsedElt = SET_STRING_PARSER(arg, REFS, parsers);\n            if (parsedElt) {\n                console.log(`Parsed string literal: ${arg} and got ${parsedElt}`);\n                parsedSet.add(parsedElt.data);\n                continue;\n            }\n            throw new Futils.ValidationError(`Invalid set element: '${str}' ; could not be parsed as a valid instance of any of the following types: [Date, Integer, String]`);\n        }\n        this.fmtString = `{${Array.from(parsedSet).join(\", \")}}`;\n        return parsedSet;\n    }\n}\nfunction parseBaseElement(string, REFS) {\n    console.log(`Parsing string: ${string}`);\n    if (RegExps.STRING_LITERAL_RE.test(string)) {\n        console.log(`Parsing as StringLiteral`);\n        return new StringLiteral(string, REFS);\n    }\n    else if (RegExps.INT_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as IntLiteral\");\n        return new IntLiteral(string);\n    }\n    else if (RegExps.BOOL_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as BoolLiteral\");\n        return new BoolLiteral(string);\n    }\n    else if (RegExps.DATE_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as DateLiteral\");\n        return new DateLiteral(string);\n    }\n    else if (RegExps.RANGE_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as RangeLiteral\");\n        return new RangeLiteral(string, REFS);\n    }\n    else if (RegExps.SET_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as SetLiteral\");\n        return new SetLiteral(string, REFS);\n    }\n    else if (RegExps.SEASON_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as SeasonLiteral\");\n        return new StringLiteral(string, REFS, [STRING_LITERAL_PARSERS.Season]);\n    }\n    else if (RegExps.FIELD_WORD_LITERAL_RE.test(string)) {\n        console.log(\"Parsing as Field\");\n        return new Field(string);\n    }\n    throw new Futils.ValidationError(`Invalid base element: '${string}' ; could not be parsed as a Field or Literal.`);\n}\nconst BaseElements = {\n    StringLiteral: StringLiteral,\n    IntLiteral: IntLiteral,\n    BoolLiteral: BoolLiteral,\n    DateLiteral: DateLiteral,\n    RangeLiteral: RangeLiteral,\n    SetLiteral: SetLiteral,\n    Field: Field,\n    BaseEltTypes: BaseEltTypes,\n    FIELD_EXTRACT_FN_MAP: FIELD_EXTRACT_FN_MAP,\n    parseBaseElement: parseBaseElement,\n    COLLECTION_FIELDS_SET: COLLECTION_FIELDS_SET\n};\nexport { BaseElements, BaseElement, RangeData };\n","import { COLUMNS_MAP } from \"../references\";\nimport Futils from \"./filter-utils\";\n// FNS that take in a clean format battle and return the appropriate data\nexport const FIELD_EXTRACT_FN_MAP = {\n    \"date\": (battle) => battle[COLUMNS_MAP.DATE_TIME]\n        ? Futils.castStringToUTCDate(battle[COLUMNS_MAP.DATE_TIME].split(\" \")[0]).getTime()\n        : \"N/A\",\n    \"season\": (battle) => battle[COLUMNS_MAP.SEASON_CODE],\n    \"is-first-pick\": (battle) => battle[COLUMNS_MAP.FIRST_PICK] ? true : false,\n    \"is-win\": (battle) => battle[COLUMNS_MAP.WIN] ? true : false,\n    \"victory-points\": (battle) => battle[COLUMNS_MAP.P1_POINTS],\n    \"p1.picks\": (battle) => battle[COLUMNS_MAP.P1_PICKS],\n    \"p2.picks\": (battle) => battle[COLUMNS_MAP.P2_PICKS],\n    \"p1.prebans\": (battle) => battle[COLUMNS_MAP.P1_PREBANS],\n    \"p2.prebans\": (battle) => battle[COLUMNS_MAP.P2_PREBANS],\n    \"p1.postban\": (battle) => battle[COLUMNS_MAP.P1_POSTBAN],\n    \"p2.postban\": (battle) => battle[COLUMNS_MAP.P2_POSTBAN],\n    \"prebans\": (battle) => [\n        ...battle[COLUMNS_MAP.P1_PREBANS],\n        ...battle[COLUMNS_MAP.P2_PREBANS],\n    ],\n    \"p1.pick1\": (battle) => battle[COLUMNS_MAP.P1_PICKS][0],\n    \"p1.pick2\": (battle) => battle[COLUMNS_MAP.P1_PICKS][1],\n    \"p1.pick3\": (battle) => battle[COLUMNS_MAP.P1_PICKS][2],\n    \"p1.pick4\": (battle) => battle[COLUMNS_MAP.P1_PICKS][3],\n    \"p1.pick5\": (battle) => battle[COLUMNS_MAP.P1_PICKS][4],\n    \"p2.pick1\": (battle) => battle[COLUMNS_MAP.P2_PICKS][0],\n    \"p2.pick2\": (battle) => battle[COLUMNS_MAP.P2_PICKS][1],\n    \"p2.pick3\": (battle) => battle[COLUMNS_MAP.P2_PICKS][2],\n    \"p2.pick4\": (battle) => battle[COLUMNS_MAP.P2_PICKS][3],\n    \"p2.pick5\": (battle) => battle[COLUMNS_MAP.P2_PICKS][4],\n    \"p1.league\": (battle) => battle[COLUMNS_MAP.P1_LEAGUE],\n    \"p2.league\": (battle) => battle[COLUMNS_MAP.P2_LEAGUE],\n    \"p1.server\": (battle) => battle[COLUMNS_MAP.P1_SERVER],\n    \"p2.server\": (battle) => battle[COLUMNS_MAP.P2_SERVER],\n    \"p1.id\": (battle) => Number(battle[COLUMNS_MAP.P1_ID]),\n    \"p2.id\": (battle) => Number(battle[COLUMNS_MAP.P2_ID]),\n    \"p1.mvp\": (battle) => battle[COLUMNS_MAP.P1_MVP],\n    \"p2.mvp\": (battle) => battle[COLUMNS_MAP.P2_MVP],\n    \"is-first-turn\": (battle) => battle[COLUMNS_MAP.FIRST_TURN] ? true : false,\n    \"first-turn-hero\": (battle) => battle[COLUMNS_MAP.FIRST_TURN_HERO],\n    \"turns\": (battle) => battle[COLUMNS_MAP.TURNS],\n    \"seconds\": (battle) => battle[COLUMNS_MAP.SECONDS],\n    \"point-gain\": (battle) => battle[COLUMNS_MAP.POINT_GAIN],\n};\n","import { EQUIPMENT_SET_MAP } from \"../references.ts\";\nexport const ACCEPTED_CHARS = new Set(`'\"(),_-.=; ><!1234567890{}~` +\n    `abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`);\nexport const PRINT_PREFIX = \"   \";\nexport const EQUIPMENT_LOWERCASE_STRINGS_MAP = Object.fromEntries(Object.values(EQUIPMENT_SET_MAP).map((v) => [v.toLowerCase(), v]));\n","import ArtifactManager from \"../artifact-manager\";\nimport HeroManager from \"../hero-manager\";\nimport { RegExps } from \"../regex.ts\";\nimport SeasonManager from \"../season-manager\";\nimport { FNS, FN_STR_MAP, FUNCTION_STRS, GlobalFilter, StandardFilter } from \"./functions.ts\";\nimport { ACCEPTED_CHARS, PRINT_PREFIX } from \"./filter-parse-references\";\nimport Futils from \"./filter-utils.ts\";\nimport ClientCache from \"../../cache-manager.ts\";\nfunction validateChars(str, charSet, objName) {\n    for (let char of str) {\n        if (!charSet.has(char)) {\n            throw new Futils.SyntaxException(`Invalid character within <${objName}> ; ' ${char} ' is not allowed; got string: '${str}'`);\n        }\n    }\n}\nfunction preParse(str) {\n    str = str.replace(/[\\n\\t\\r]/g, \" \").replace(/\\s+/g, \" \"); // replace newlines with spaces and remove multiple spaces\n    validateChars(str, ACCEPTED_CHARS, \"Main Filter String\");\n    str = str.toLowerCase();\n    return str;\n}\nfunction getEmptyFilters() {\n    return [];\n}\nfunction validateClauseBody(filters, str) {\n    for (const f of filters) {\n        if (f instanceof GlobalFilter) {\n            throw new Futils.SyntaxException(`Global filters not allowed in clause functions; got: ${f.asString()} from string: \"${str}\"`);\n        }\n    }\n    return filters.filter((f) => f instanceof StandardFilter);\n}\nfunction sortFilters(filters) {\n    const globalFilters = [];\n    const standardFilters = [];\n    for (const f of filters) {\n        if (f instanceof GlobalFilter) {\n            globalFilters.push(f);\n        }\n        else {\n            standardFilters.push(f);\n        }\n    }\n    return [...globalFilters, ...standardFilters];\n}\nclass FilterParser {\n    _filters;\n    rawString;\n    preParsedString;\n    references;\n    constructor() {\n        this._filters = getEmptyFilters();\n        this.rawString = \"\";\n        this.preParsedString = \"\";\n        this.references = {\n            HeroDicts: null,\n            ARTIFACT_LOWERCASE_STRINGS_MAP: {},\n            SEASON_DETAILS: [],\n        };\n    }\n    async addReferences(HeroDicts = null) {\n        HeroDicts = HeroDicts || (await HeroManager.getHeroDicts());\n        if (HeroDicts === null)\n            throw new Error(\"Hero Manager could not be retrieved to parse filters.\");\n        const seasonDetails = await SeasonManager.getSeasonDetails();\n        if (seasonDetails === null)\n            throw new Error(\"Season Details could not be retrieved to parse filters.\");\n        const ARTIFACT_LOWERCASE_STRINGS_MAP = await ArtifactManager.getArtifactLowercaseNameMap();\n        this.references = {\n            HeroDicts: HeroDicts,\n            ARTIFACT_LOWERCASE_STRINGS_MAP: ARTIFACT_LOWERCASE_STRINGS_MAP,\n            SEASON_DETAILS: seasonDetails,\n        };\n    }\n    getFilters() {\n        return sortFilters(this._filters);\n    }\n    asString() {\n        const prefix = PRINT_PREFIX;\n        return `[\\n${this._filters.map((f) => f.asString(prefix)).join(\";\\n\")};\\n]`;\n    }\n    static async getFiltersFromCache(HeroDicts = null) {\n        const filterStr = await ClientCache.get(ClientCache.Keys.FILTER_STR);\n        if (filterStr === null)\n            return [];\n        let parser = await this.fromFilterStr(filterStr, HeroDicts);\n        return parser.getFilters();\n    }\n    static async fromFilterStr(filterStr, HeroDicts = null) {\n        const parser = new FilterParser();\n        parser.rawString = filterStr;\n        await parser.addReferences(HeroDicts);\n        parser.preParsedString = preParse(filterStr);\n        parser._filters = parser.parse(parser.preParsedString);\n        return parser;\n    }\n    parseList(filterStrs) {\n        return filterStrs.reduce((acc, str) => {\n            acc.push(...this.parse(str));\n            return acc;\n        }, getEmptyFilters());\n    }\n    parse(str) {\n        str = str.trim();\n        if (str === \"\")\n            return getEmptyFilters();\n        if (str.includes(\";\")) {\n            const filterStrs = str.split(\";\");\n            return this.parseList(filterStrs);\n        }\n        const fnStr = str.split(\"(\")[0].replace(/p[1-2]\\./i, \"\"); // \n        const args = Futils.tokenizeWithNestedEnclosures(str, \",\", 1, true);\n        switch (fnStr) {\n            case FUNCTION_STRS.AND:\n            case FUNCTION_STRS.OR:\n            case FUNCTION_STRS.NOT:\n            case FUNCTION_STRS.XOR:\n                const filters = validateClauseBody(this.parseList(args), str);\n                return [new FN_STR_MAP[fnStr](...filters)];\n            case FUNCTION_STRS.LAST_N:\n                return [new FNS.LAST_N(str)];\n            case FUNCTION_STRS.EQUIPMENT:\n            case FUNCTION_STRS.ARTIFACT:\n            case FUNCTION_STRS.CR:\n                return [new FN_STR_MAP[fnStr](str, this.references)];\n            default:\n                if (RegExps.FUNCTION_CALL_RE.test(str)) {\n                    throw new Futils.SyntaxException(`Filter String is not a valid function call but a parenthese block was detected; got: ${str}`);\n                }\n                return [new FNS.BASE_FILTER(str, this.references)];\n        }\n    }\n}\nexport { FilterParser };\n","import { RegExps } from \"../regex.ts\";\nclass SyntaxException extends Error {\n    constructor(message) {\n        super(message); // Pass message to base Error\n        this.name = \"Filter Syntax Exception\"; // Set error name\n    }\n}\nclass TypeException extends Error {\n    constructor(message) {\n        super(message); // Pass message to base Error\n        this.name = \"Filter Type Exception\"; // Set error name\n    }\n}\nclass ValidationError extends Error {\n    constructor(message) {\n        super(message); // Pass message to base Error\n        this.name = \"Filter Validation Error\"; // Set error name\n    }\n}\nconst ENCLOSURE_MAP = {\n    \"(\": \")\",\n    \"{\": \"}\",\n    '\"': '\"',\n    \"'\": \"'\",\n};\nconst ENCLOSURE_IGNORE = {\n    // if we are in a string enclosure, don't look for other quotes\n    \"'\": '\"',\n    '\"': \"'\",\n};\nconst REVERSE_ENCLOSURE_MAP = Object.fromEntries(Object.entries(ENCLOSURE_MAP)\n    .filter(([k, v]) => k !== v)\n    .map(([k, v]) => [v, k]));\n/**\n * Tokenize a string into an array of strings, ignoring any enclosures up to a given level.\n * @param {string} input - The string to tokenize.\n * @param {string} [splitChars=\" \"] - The characters to split on.\n * @param {number} [enclosureLevel=0] - The level of enclosure to ignore.\n * @param {boolean} [trim=true] - Whether to trim the tokens.\n * @returns {string[]} An array of strings, each representing a token in the input string.\n * @throws {SyntaxException} If there is an unbalanced closing character in the input string.\n * @throws {Error} If there are any unresolved characters from the enclosure stack after tokenizing.\n */\nfunction tokenizeWithNestedEnclosures(input, splitChars = \" \", enclosureLevel = 0, trim = true) {\n    const tokens = [];\n    let current = \"\";\n    let stack = [];\n    for (let i = 0; i < input.length; i++) {\n        const char = input[i];\n        //console.log(`Processing char ${char} at position ${i}; current string: ${current}; tokens: ${tokens}`);\n        if (splitChars.includes(char) && stack.length === enclosureLevel) {\n            if (current) {\n                tokens.push(trim ? current.trim() : current);\n                current = \"\";\n            }\n        }\n        else {\n            if (REVERSE_ENCLOSURE_MAP[char]) {\n                // found a closing brace or parenthesis\n                const expected = REVERSE_ENCLOSURE_MAP[char];\n                if (stack.length > enclosureLevel) {\n                    current += char;\n                }\n                if (stack[stack.length - 1] === expected) {\n                    stack.pop();\n                }\n                else {\n                    const charCounts = getCharCounts(input);\n                    if ((charCounts[\"'\"] || 0) % 2 !== 0 ||\n                        (charCounts['\"'] || 0) % 2 !== 0) {\n                        throw new SyntaxException(`Error tokenizing: Unbalanced closing character at position ${i}; got string: '${input}' ; if a str type has quote characters in it, wrap it in the opposite quote character.`);\n                    }\n                    else {\n                        throw new SyntaxException(`Error tokenizing: Unbalanced closing character at position ${i}; got string: '${input}'`);\n                    }\n                }\n            }\n            else {\n                if (stack.length >= enclosureLevel) {\n                    // we are beyond the level of enclosure we are ignoring so add to current string\n                    current += char;\n                }\n                if (ENCLOSURE_MAP[char] &&\n                    (!ENCLOSURE_IGNORE[char] ||\n                        stack[stack.length - 1] !== ENCLOSURE_IGNORE[char])) {\n                    if (stack[stack.length - 1] === ENCLOSURE_MAP[char] && // matching quote to end the enclosure\n                        char === ENCLOSURE_MAP[char]) {\n                        stack.pop();\n                    }\n                    else {\n                        stack.push(char); // add new enclosure level\n                    }\n                }\n            }\n        }\n    }\n    if (stack.length > 0) {\n        throw new Error(`Unbalanced enclosures in input string; unresolved characters from enclosure stack: [ ${stack.join(\", \")} ]`);\n    }\n    if (current) {\n        tokens.push(trim ? current.trim() : current);\n    }\n    return tokens;\n}\nfunction getCharCounts(str) {\n    const counts = {};\n    for (const char of str) {\n        counts[char] = (counts[char] || 0) + 1;\n    }\n    return counts;\n}\nfunction castStringToUTCDate(dateStr) {\n    return new Date(`${dateStr}T00:00:00Z`);\n}\nfunction parseDate(dateStr) {\n    if (!RegExps.DATE_LITERAL_RE.test(dateStr)) {\n        throw new SyntaxException(`Invalid date; must be in the format: YYYY-MM-DD ( regex: ${RegExps.DATE_LITERAL_RE.source} ); got: '${dateStr}'`);\n    }\n    const date = castStringToUTCDate(dateStr);\n    // Check if valid date\n    if (isNaN(date.getTime())) {\n        throw new SyntaxException(`Invalid date; could not be parsed as a valid date; got: '${dateStr}'`);\n    }\n    // Check if parsed date matches passed in string\n    const dateString = date.toISOString().split(\"T\")[0];\n    const [year, month, day] = dateString.split(\"-\").map(Number);\n    if (date.getUTCFullYear() !== year ||\n        date.getUTCMonth() + 1 !== month ||\n        date.getUTCDate() !== day) {\n        throw new SyntaxException(`Invalid date; parsed date: ${date.toISOString()} does not match passed in string: ${dateStr}`);\n    }\n    console.log(`Parsed date: ${date.toISOString()} ; ${date.constructor.name}`);\n    return date;\n}\nfunction tryConvert(convertFnc, typeName, value, errMSG = null) {\n    if (errMSG === null) {\n        errMSG = `Could not convert ${value} to ${typeName}`;\n    }\n    try {\n        return convertFnc(value);\n    }\n    catch (err) {\n        throw new TypeException(`${errMSG}: ${err.message}`);\n    }\n}\nfunction trimSurroundingQuotes(str) {\n    return str.replace(/^\"(.*)\"$/, \"$1\").replace(/^'(.*)'$/, \"$1\");\n}\nlet Futils = {\n    SyntaxException: SyntaxException,\n    TypeException: TypeException,\n    ValidationError: ValidationError,\n    getCharCounts: getCharCounts,\n    tokenizeWithNestedEnclosures: tokenizeWithNestedEnclosures,\n    parseDate: parseDate,\n    tryConvert: tryConvert,\n    trimSurroundingQuotes: trimSurroundingQuotes,\n    castStringToUTCDate,\n};\nexport default Futils;\n","import { strArrToCountMap } from \"../../str-functions\";\nimport { COLUMNS_MAP } from \"../references\";\nimport { BaseElements } from \"./base-elements\";\nimport { CompareOperator, parseOperator, InOperator } from \"./operators\";\nimport { PRINT_PREFIX } from \"./filter-parse-references\";\nimport Futils from \"./filter-utils\";\nimport { STRING_LITERAL_PARSERS } from \"./string-literal-parse\";\nconst FUNCTION_STRS = {\n    AND: \"and\",\n    OR: \"or\",\n    XOR: \"xor\",\n    NOT: \"not\",\n    LAST_N: \"last-n\",\n    EQUIPMENT: \"equipment\",\n    ARTIFACT: \"artifact\",\n    CR: \"cr\",\n    BASE_FILTER: \"base-filter\",\n};\nconst FN_TYPES = {\n    CLAUSE_FN: \"CLAUSE_FN\",\n    HERO_LIST_FN: \"HERO_LIST_FN\",\n    GLOBAL_FN: \"GLOBAL_FN\",\n    BASE_FILTER: \"BASE_FILTER\",\n};\nclass Fn {\n}\nclass StandardFilter extends Fn {\n}\nclass ClauseFn extends StandardFilter {\n    fnType = FN_TYPES.CLAUSE_FN;\n    fns = [];\n    constructor(...fns) {\n        super();\n        this.fns = fns;\n    }\n    asString(prefix = \"\") {\n        let strBody = \"\";\n        const newPrefix = prefix + PRINT_PREFIX;\n        this.fns.forEach((fn) => (strBody += `${fn.asString(newPrefix)},\\n`));\n        console.log(\"Clause Fn asString got strBody:\", strBody);\n        return `${prefix}${this.fnName}(\\n${strBody.trimEnd()}\\n${prefix})`;\n    }\n}\nclass AND extends ClauseFn {\n    fnName = FUNCTION_STRS.AND;\n    fnType = FN_TYPES.CLAUSE_FN;\n    call(battle) {\n        return this.fns.every((fn) => fn.call(battle));\n    }\n}\nclass OR extends ClauseFn {\n    fnName = FUNCTION_STRS.OR;\n    fnType = FN_TYPES.CLAUSE_FN;\n    call(battle) {\n        return this.fns.some((fn) => fn.call(battle));\n    }\n}\nclass XOR extends ClauseFn {\n    fnName = FUNCTION_STRS.XOR;\n    fnType = FN_TYPES.CLAUSE_FN;\n    call(battle) {\n        let result = false;\n        for (let fn of this.fns) {\n            result = (!result && fn.call(battle)) || (result && !fn.call(battle));\n        }\n        return result;\n    }\n}\nclass NOT extends ClauseFn {\n    fnName = FUNCTION_STRS.NOT;\n    fnType = FN_TYPES.CLAUSE_FN;\n    constructor(...fns) {\n        super(...fns);\n        if (this.fns.length !== 1) {\n            throw new Futils.SyntaxException(`Invalid NOT function call ; accepts exactly 1 argument ; got: [${this.fns}]`);\n        }\n    }\n    call(battle) {\n        return !this.fns[0].call(battle);\n    }\n}\nclass HeroListFn extends StandardFilter {\n    fnType = FN_TYPES.HERO_LIST_FN;\n    getHeroes(battle) {\n        return this.isPlayer1 ? battle[COLUMNS_MAP.P1_PICKS] : battle[COLUMNS_MAP.P2_PICKS];\n    }\n    asString(prefix = \"\") {\n        const playerStr = this.isPlayer1 ? \"p1.\" : \"p2.\";\n        return `${prefix}${playerStr}${this.fnName}(${this.argFmtString})`;\n    }\n}\nclass CRFn extends HeroListFn {\n    fnName = FUNCTION_STRS.CR;\n    fnType = FN_TYPES.HERO_LIST_FN;\n    heroName;\n    crThreshold = 0;\n    operator;\n    targetField;\n    isPlayer1 = false;\n    argFmtString;\n    constructor(str, REFS) {\n        super();\n        const splitChar = str.includes(\",\") ? \",\" : \" \";\n        const args = Futils.tokenizeWithNestedEnclosures(str, splitChar, 1, true);\n        if (args.length !== 3) {\n            throw new Futils.SyntaxException(`Invalid CR function call ; accepts exactly 3 arguments ; got: [${args}] from str: ${str}`);\n        }\n        const threshold = parseInt(args[2]);\n        if (isNaN(threshold)) {\n            throw new Futils.TypeException(`Invalid CR function call ; third argument must be a valid integer literal ; got: '${args[2]}' from str: ${str}`);\n        }\n        const operator = parseOperator(args[1]);\n        if (!(operator instanceof CompareOperator)) {\n            throw new Futils.TypeException(`Invalid CR function call ; second argument must be a valid comparison operator ; got: '${args[1]}' from str: ${str}`);\n        }\n        this.heroName = new BaseElements.StringLiteral(args[0], REFS, [STRING_LITERAL_PARSERS.Hero]).data;\n        this.crThreshold = threshold;\n        this.operator = operator;\n        this.isPlayer1 = str.includes(\"p1.\");\n        this.targetField = (battle) => battle[COLUMNS_MAP.CR_BAR];\n        this.argFmtString = `${this.heroName} ${this.operator.opStr} ${this.crThreshold}`;\n    }\n    call(battle) {\n        // console.log(\"Calling CR function on battle: \", battle);\n        const heroes = this.getHeroes(battle);\n        const crBar = this.targetField(battle);\n        const heroCr = crBar.find((entry) => entry[0] === this.heroName);\n        // console.log(\"Called CR function; Got: \", heroes, crBar, heroCr, \"Filtering using operator: \", this.operator);\n        if (!heroCr) {\n            return false;\n        }\n        else if (!heroes.includes(this.heroName)) {\n            return false;\n        }\n        // console.log(\"Returning value: \", this.operator.call(heroCr[1], this.crThreshold));\n        return this.operator.call(heroCr[1], this.crThreshold);\n    }\n}\n/**\n * Returns true if all the equipment counts in target are matched or exceeded in the instance.\n * In other words, target is a subset of instance.\n * If a hero has additional equipment, the function will still return true\n * @param target the target object to check against\n * @param instance the object to check\n * @returns boolean indicating if all the equipment counts in target are present in instance\n */\nfunction validateEquipmentCounts(target, instance) {\n    for (const key in target) {\n        if (target[key] > (instance[key] || 0)) {\n            return false;\n        }\n    }\n    return true;\n}\n// TODO: consolidate code with ArtifactFn where possible to reduce duplication\nclass EquipmentFn extends HeroListFn {\n    fnName = FUNCTION_STRS.EQUIPMENT;\n    fnType = FN_TYPES.HERO_LIST_FN;\n    heroName;\n    targetEquipCounts;\n    isPlayer1 = false;\n    argFmtString;\n    targetField;\n    constructor(str, REFS) {\n        super();\n        const args = Futils.tokenizeWithNestedEnclosures(str, \",\", 1, true);\n        if (args.length !== 2) {\n            throw new Futils.SyntaxException(`Invalid equipment function call ; accepts exactly 2 arguments ; got: [${args}] from str: ${str}`);\n        }\n        const equipmentSetStr = args[1].includes(\"{\") ? args[1] : `{${args[1]}}`;\n        let equipmentList = Futils.tokenizeWithNestedEnclosures(equipmentSetStr, \",\", 1, true);\n        equipmentList = equipmentList.map((equip) => new BaseElements.StringLiteral(equip, REFS, [STRING_LITERAL_PARSERS.Equipment]).data);\n        this.targetEquipCounts = strArrToCountMap(equipmentList);\n        this.heroName = new BaseElements.StringLiteral(args[0], REFS, [STRING_LITERAL_PARSERS.Hero]).data;\n        this.isPlayer1 = str.includes(\"p1.\");\n        this.argFmtString = `${this.heroName}, {${equipmentList.join(\",\")}}`;\n        this.targetField = (battle) => this.isPlayer1 ? battle[COLUMNS_MAP.P1_EQUIPMENT] : battle[COLUMNS_MAP.P2_EQUIPMENT];\n    }\n    call(battle) {\n        const heroes = this.getHeroes(battle);\n        const heroEq = this.targetField(battle);\n        for (let i = 0; i < heroes.length; i++) {\n            if (heroes[i] === this.heroName) {\n                const counts = strArrToCountMap(heroEq[i]);\n                return validateEquipmentCounts(this.targetEquipCounts, counts);\n            }\n        }\n        return false;\n    }\n}\nclass ArtifactFn extends HeroListFn {\n    fnName = FUNCTION_STRS.ARTIFACT;\n    fnType = FN_TYPES.HERO_LIST_FN;\n    heroName;\n    targetArtifacts;\n    isPlayer1 = false;\n    argFmtString;\n    targetField;\n    constructor(str, REFS) {\n        super();\n        const args = Futils.tokenizeWithNestedEnclosures(str, \",\", 1, true);\n        if (args.length !== 2) {\n            throw new Futils.SyntaxException(`Invalid artifact function call ; accepts exactly 2 arguments ; got: [${args}] from str: ${str}`);\n        }\n        const artifactSetStr = args[1].includes(\"{\") ? args[1] : `{${args[1]}}`;\n        let artifactList = Futils.tokenizeWithNestedEnclosures(artifactSetStr, \",\", 1, true);\n        artifactList = artifactList.map((artifact) => new BaseElements.StringLiteral(artifact, REFS, [STRING_LITERAL_PARSERS.Artifact]).data);\n        this.targetArtifacts = artifactList;\n        this.heroName = new BaseElements.StringLiteral(args[0], REFS, [STRING_LITERAL_PARSERS.Hero]).data;\n        this.isPlayer1 = str.includes(\"p1.\");\n        this.argFmtString = `${this.heroName}, {${artifactList.join(\", \")}}`;\n        this.targetField = (battle) => this.isPlayer1 ? battle[COLUMNS_MAP.P1_ARTIFACTS] : battle[COLUMNS_MAP.P2_ARTIFACTS];\n    }\n    call(battle) {\n        const heroes = this.getHeroes(battle);\n        const heroArtifacts = this.targetField(battle);\n        for (let i = 0; i < heroes.length; i++) {\n            if (heroes[i] === this.heroName) {\n                return this.targetArtifacts.some((artifact) => heroArtifacts[i].includes(artifact));\n            }\n        }\n        return false;\n    }\n}\nclass GlobalFilter extends Fn {\n    fnType = FN_TYPES.GLOBAL_FN;\n    asString(prefix = \"\") {\n        return `${prefix}${this.fnName}(${this.argFmtString})`;\n    }\n}\nclass LastNFn extends GlobalFilter {\n    fnName = FUNCTION_STRS.LAST_N;\n    fnType = FN_TYPES.GLOBAL_FN;\n    argFmtString;\n    n;\n    constructor(str) {\n        super();\n        const args = Futils.tokenizeWithNestedEnclosures(str, \",\", 1, true);\n        if (args.length !== 1) {\n            throw new Futils.SyntaxException(`Invalid last-n function call ; accepts exactly 1 argument ; got: [${args}] from str: ${str}`);\n        }\n        this.n = new BaseElements.IntLiteral(args[0]).data;\n        this.argFmtString = `${this.n}`;\n    }\n    call(battles) {\n        return battles.slice(-this.n);\n    }\n}\nfunction isCollection(baseElt) {\n    return BaseElements.COLLECTION_FIELDS_SET.has(baseElt.rawString);\n}\nfunction validateBaseFilterTypes(left, op, right) {\n    const str = `${left.asString()} ${op.opStr} ${right.asString()}`;\n    if (left instanceof BaseElements.Field && right instanceof BaseElements.Field) {\n        throw new Futils.ValidationError(`Invalid base filter; fields cannot be compared with other fields ; got string: [${str}]`);\n    }\n    else if (!(left.type === BaseElements.BaseEltTypes.FIELD) && !(right.type === BaseElements.BaseEltTypes.FIELD)) {\n        throw new Futils.ValidationError(`Invalid base filter; every base filter must have at least one field ; got string: [${str}]`);\n    }\n    else if (op instanceof InOperator && !(isCollection(right) || right instanceof BaseElements.RangeLiteral || right instanceof BaseElements.SetLiteral)) {\n        throw new Futils.ValidationError(`Invalid base filter; 'in' operators can only be used with Ranges, Sets, or Fields that correspond to sets like 'p1.picks' ; got string: [${str}]`);\n    }\n    return true;\n}\nclass BaseFilter extends StandardFilter {\n    fnType = FN_TYPES.BASE_FILTER;\n    fnName = FUNCTION_STRS.BASE_FILTER;\n    fmtString;\n    fn;\n    constructor(str, REFS) {\n        super();\n        const tokens = Futils.tokenizeWithNestedEnclosures(str, \" \", 0, true);\n        if (tokens.length !== 3) {\n            throw new Futils.SyntaxException(`Invalid base filter; filters must have 3 tokens and be of the form: ['X', operator, 'Y']; got tokens: [${tokens}] from str: ${str}`);\n        }\n        let [leftStr, opStr, rightStr] = tokens;\n        console.log(`PARSING BASE FILTER: Left: ${leftStr}, Op: ${opStr}, Right: ${rightStr}`);\n        const operator = parseOperator(opStr);\n        const left = BaseElements.parseBaseElement(leftStr, REFS);\n        const right = BaseElements.parseBaseElement(rightStr, REFS);\n        console.log(`PARSED BASE FILTER: Left: ${left.asString()}, Op: ${opStr}, Right: ${right.asString()}`);\n        validateBaseFilterTypes(left, operator, right);\n        if (left instanceof BaseElements.Field && !(right instanceof BaseElements.Field)) {\n            this.fn = (battle) => operator.call(left.extractData(battle), right.getData());\n        }\n        else if (!(left instanceof BaseElements.Field) && right instanceof BaseElements.Field) {\n            this.fn = (battle) => operator.call(left.getData(), right.extractData(battle));\n        }\n        else {\n            throw new Futils.ValidationError(\"Invalid base filter; filters must contain a Field and a Literal; got: \" + str);\n        }\n        this.fmtString = `${left.asString()} ${opStr} ${right.asString()}`;\n    }\n    call(b) {\n        return this.fn(b);\n    }\n    asString(prefix = \"\") {\n        return `${prefix}${this.fmtString}`;\n    }\n}\nconst FN_STR_MAP = {\n    [FUNCTION_STRS.BASE_FILTER]: BaseFilter,\n    [FUNCTION_STRS.AND]: AND,\n    [FUNCTION_STRS.OR]: OR,\n    [FUNCTION_STRS.NOT]: NOT,\n    [FUNCTION_STRS.XOR]: XOR,\n    [FUNCTION_STRS.LAST_N]: LastNFn,\n    [FUNCTION_STRS.EQUIPMENT]: EquipmentFn,\n    [FUNCTION_STRS.ARTIFACT]: ArtifactFn,\n    [FUNCTION_STRS.CR]: CRFn,\n};\nconst FNS = {\n    AND: AND,\n    OR: OR,\n    NOT: NOT,\n    XOR: XOR,\n    LAST_N: LastNFn,\n    EQUIPMENT: EquipmentFn,\n    ARTIFACT: ArtifactFn,\n    CR: CRFn,\n    BASE_FILTER: BaseFilter,\n};\nexport { StandardFilter, GlobalFilter, FNS, FN_STR_MAP, FUNCTION_STRS };\n","import { RangeData } from \"./base-elements\";\nfunction collectionToString(collection) {\n    if (collection instanceof Set) {\n        return Array.from(collection).join(\", \");\n    }\n    else if (collection instanceof RangeData) {\n        return `Range[ start: ${collection.start}, end: ${collection.end}, incl: ${collection.endInclusive} ]`;\n    }\n    else {\n        return collection.join(\", \");\n    }\n}\nconst COMPARISON_OPERATORS = {\n    \">\": (a, b) => a > b,\n    \"<\": (a, b) => a < b,\n    \"=\": (a, b) => a === b,\n    \">=\": (a, b) => a >= b,\n    \"<=\": (a, b) => a <= b,\n    \"!=\": (a, b) => a !== b,\n};\nconst OPERATOR_TYPES = {\n    IN: \"in\",\n    COMPARE: \"compare\",\n};\nclass Operator {\n}\nclass InOperator extends Operator {\n    type = OPERATOR_TYPES.IN;\n    opStr;\n    negate = false;\n    constructor(negate = false) {\n        super();\n        this.negate = negate;\n        this.opStr = this.negate ? \"!in\" : \"in\";\n    }\n    call(a, b) {\n        const contains = Array.isArray(b) ? b.includes(a) : b.has(a);\n        // console.log(`IN OPER: Left: ${a}, Op: ${this.opStr}, Right: ${collectionToString(b)}; Result: ${contains}`);\n        return this.negate ? !contains : contains;\n    }\n}\nclass CompareOperator extends Operator {\n    type = OPERATOR_TYPES.COMPARE;\n    opStr;\n    compareFn;\n    constructor(opStr) {\n        super();\n        this.opStr = opStr;\n        this.compareFn = COMPARISON_OPERATORS[opStr];\n        if (!this.compareFn) {\n            throw new Error(`Unknown operator: ${opStr}`);\n        }\n    }\n    call(a, b) {\n        // console.log(`COMPARE OPER: Left: ${a}, Op: ${this.opStr}, Right: ${b}`);\n        return this.compareFn(a, b);\n    }\n}\nfunction parseOperator(opStr) {\n    switch (opStr) {\n        case \"in\": return new InOperator();\n        case \"!in\": return new InOperator(true);\n        default: return new CompareOperator(opStr);\n    }\n}\nexport { COMPARISON_OPERATORS, parseOperator, Operator, CompareOperator, InOperator };\n","import HeroManager from \"../hero-manager\";\nimport { LEAGUE_MAP, WORLD_CODE_LOWERCASE_TO_CLEAN_STR } from \"../references\";\nimport { EQUIPMENT_LOWERCASE_STRINGS_MAP } from \"./filter-parse-references\";\nimport { RegExps } from \"../regex\";\nexport class StringLiteralParser {\n}\nclass HeroParser extends StringLiteralParser {\n    parse(str, REFS) {\n        return HeroManager.getHeroByName(str, REFS.HeroDicts)?.name ?? null;\n    }\n    parserType = \"Hero\";\n}\nclass LeagueParser extends StringLiteralParser {\n    parse(str) {\n        console.log(`Parsing str: ${str} using map:`, LEAGUE_MAP);\n        return LEAGUE_MAP[str];\n    }\n    parserType = \"League\";\n}\nclass ServerParser extends StringLiteralParser {\n    parse(str) {\n        return WORLD_CODE_LOWERCASE_TO_CLEAN_STR[str];\n    }\n    parserType = \"Server\";\n}\nclass EquipmentParser extends StringLiteralParser {\n    parse(str) {\n        return EQUIPMENT_LOWERCASE_STRINGS_MAP[str.toLowerCase()];\n    }\n    parserType = \"Equipment\";\n}\nclass ArtifactParser extends StringLiteralParser {\n    parse(str, REFS) {\n        return REFS.ARTIFACT_LOWERCASE_STRINGS_MAP[str.toLowerCase()];\n    }\n    parserType = \"Artifact\";\n}\nclass SeasonCodeParser extends StringLiteralParser {\n    parse(str, REFS) {\n        console.log(`Parsing season code: ${str}`);\n        let seasonNum;\n        if (str === \"current-season\") {\n            return REFS.SEASON_DETAILS[0].Code;\n        }\n        else if (str === \"last-season\") {\n            return REFS.SEASON_DETAILS[1].Code;\n        }\n        else if (RegExps.SEASON_LITERAL_RE.test(str)) {\n            console.log(`Parsing season literal: ${str}`);\n            seasonNum = str.split(\"-\").at(-1);\n        }\n        else if (RegExps.SEASON_CODE_LITERAL_RE.test(str)) {\n            console.log(`Parsing season code literal: ${str}`);\n            seasonNum = str.split(\"_ss\").at(-1);\n        }\n        else {\n            return null;\n        }\n        console.log(`Season num: ${seasonNum}`);\n        const seasonNums = REFS.SEASON_DETAILS.map((season) => season.Code.split(\"_\").at(-1));\n        console.log(`Season nums: ${seasonNums}`);\n        return REFS.SEASON_DETAILS.find((season) => season.Code.split(\"_ss\").at(-1) === seasonNum)?.Code;\n    }\n    parserType = \"Season Code\";\n}\nexport function parseStringLiteral(str, REFS, parsers) {\n    for (const parser of parsers) {\n        const parsed = parser.parse(str, REFS);\n        console.log(`Parsed string literal: ${str} with ${parser.parserType} as ${parsed}`);\n        if (parsed)\n            return parsed;\n    }\n    return null;\n}\nexport const STRING_LITERAL_PARSERS = {\n    Hero: new HeroParser(),\n    League: new LeagueParser(),\n    Server: new ServerParser(),\n    Equipment: new EquipmentParser(),\n    Artifact: new ArtifactParser(),\n    Season: new SeasonCodeParser(),\n};\n","import ClientCache from \"../cache-manager.ts\";\nimport { LANGUAGES, PRIMES } from \"./references.ts\";\nimport PYAPI from \"../apis/py-API.js\";\nimport E7API from \"../apis/e7-API.ts\";\nconst FODDER_NAME = \"~Fodder\";\nconst EMPTY_NAME = \"~Empty\";\nfunction getEmptyHero() {\n    return {\n        attribute_cd: \"N/A\",\n        code: \"N/A\",\n        grade: \"N/A\",\n        job_cd: \"N/A\",\n        name: \"N/A\",\n        prime: 1,\n    };\n}\nfunction getEmptyHeroManager() {\n    return {\n        heroes: [],\n        Empty: getEmptyHero(),\n        Fodder: getEmptyHero(),\n        name_lookup: {},\n        code_lookup: {},\n        prime_lookup: {},\n        prime_pair_lookup: {},\n    };\n}\n// This function adds two heroes to the Hero Manager to account for fodder champions and empty picks/prebans\nfunction addNonHeroes(HeroDicts) {\n    const next_index = HeroDicts.heroes.length;\n    const Empty = {\n        attribute_cd: \"N/A\",\n        code: \"N/A\",\n        grade: \"N/A\",\n        job_cd: \"N/A\",\n        name: EMPTY_NAME,\n        prime: 1,\n    };\n    const Fodder = {\n        attribute_cd: \"N/A\",\n        code: \"N/A\",\n        grade: \"2/3\",\n        job_cd: \"N/A\",\n        name: FODDER_NAME,\n        prime: PRIMES[next_index],\n    };\n    HeroDicts.heroes.push(Empty);\n    HeroDicts.heroes.push(Fodder);\n    HeroDicts.Fodder = Fodder;\n    HeroDicts.Empty = Empty;\n    return HeroDicts;\n}\n// add lookup dicts to the hero manager so that we can perform efficient lookups\nfunction addDicts(HeroDicts) {\n    console.log(\"Adding Lookup Dicts\");\n    console.log(\"\\tAdding name lookup\");\n    HeroDicts.name_lookup = HeroDicts.heroes.reduce((acc, hero) => {\n        acc[hero.name.toLowerCase().replace(/\\s+/g, \"\")] = hero;\n        return acc;\n    }, {});\n    console.log(\"\\tAdding prime lookup\");\n    HeroDicts.prime_lookup = HeroDicts.heroes.reduce((acc, hero) => {\n        acc[hero.prime] = hero;\n        return acc;\n    }, {});\n    console.log(\"\\tAdding code lookup\");\n    HeroDicts.code_lookup = HeroDicts.heroes.reduce((acc, hero) => {\n        acc[hero.code] = hero;\n        return acc;\n    }, {});\n    console.log(\"\\tAdding prime pair lookup\");\n    let prime_pair_lookup = HeroDicts.heroes.reduce((acc, hero) => {\n        acc[hero.prime] = hero.name;\n        return acc;\n    }, {});\n    const numKeys = Object.keys(HeroDicts.prime_lookup).length - 1; // subtract 1 since we don't consider Empty hero\n    console.log(\"\\tAdding prime pair lookup; primes to process\", numKeys);\n    for (let i = 0; i < numKeys - 1; i++) {\n        const prime = PRIMES[i];\n        for (let j = i + 1; j < numKeys; j++) {\n            const prime2 = PRIMES[j];\n            const product = prime * prime2;\n            const name1 = HeroDicts.prime_lookup[prime].name;\n            const name2 = HeroDicts.prime_lookup[prime2].name;\n            prime_pair_lookup[product] = [name1, name2].sort().join(\", \");\n        }\n    }\n    //capture case where two fodder heroes\n    prime_pair_lookup[HeroDicts.Fodder.prime * HeroDicts.Fodder.prime] = [\n        HeroDicts.Fodder.name,\n        HeroDicts.Fodder.name,\n    ].join(\", \");\n    //set prime pair lookup dict in HeroDicts and return\n    HeroDicts.prime_pair_lookup = prime_pair_lookup;\n    return HeroDicts;\n}\nlet HeroManager = {\n    getHeroDicts: async function (lang = LANGUAGES.CODES.EN) {\n        const cachedHeroManager = await ClientCache.get(ClientCache.Keys.HERO_MANAGER);\n        if (cachedHeroManager) {\n            return cachedHeroManager;\n        }\n        return this.fetchAndCacheHeroManager(lang);\n    },\n    createHeroManager: function (rawHeroList) {\n        // add prime identifier to each hero so that we can represent a set as a product of primes\n        for (let [index, heroData] of rawHeroList.entries()) {\n            const prime = PRIMES[index];\n            heroData.prime = prime;\n        }\n        let HeroDicts = getEmptyHeroManager();\n        HeroDicts.heroes = rawHeroList;\n        HeroDicts = addNonHeroes(HeroDicts); //should not be called again\n        HeroDicts = addDicts(HeroDicts); // Must come after addNonHeroes so that empty/fodder are added to the dicts\n        return HeroDicts;\n    },\n    fetchHeroManager: async function (lang = LANGUAGES.CODES.EN) {\n        const heroJSON = (await E7API.fetchHeroJSON()) ?? (await PYAPI.fetchHeroData());\n        const heroList = heroJSON[lang]; //get english hero list\n        const HeroDicts = this.createHeroManager(heroList);\n        console.log(`Created HeroManager of language ${lang} using raw data received from server`);\n        return HeroDicts;\n    },\n    fetchAndCacheHeroManager: async function (lang = LANGUAGES.CODES.EN) {\n        console.log(\"HeroManager not found in cache, fetching from server and caching it\");\n        const HeroDicts = await this.fetchHeroManager(lang);\n        await ClientCache.cache(ClientCache.Keys.HERO_MANAGER, HeroDicts);\n        console.log(\"Cached HeroManager using raw data recieved from server\");\n        console.log(HeroDicts);\n        return HeroDicts;\n    },\n    deleteHeroManager: async function () {\n        await ClientCache.delete(ClientCache.Keys.HERO_MANAGER);\n        console.log(\"Removed hero manager from cache\");\n    },\n    getHeroByName: function (name, HeroDicts) {\n        if (!HeroDicts) {\n            throw new Error(\"HeroManager instance must be passed to lookup functions\");\n        }\n        else if (!name) {\n            return HeroDicts.Empty;\n        }\n        const normalizedName = name.toLowerCase().replace(/\\s+/g, \"\");\n        return HeroDicts.name_lookup[normalizedName] ?? null;\n    },\n    getHeroByPrime: function (prime, HeroDicts) {\n        if (!HeroDicts) {\n            throw new Error(\"HeroManager instance must be passed to lookup functions\");\n        }\n        return HeroDicts.prime_lookup[prime] ?? null;\n    },\n    getHeroByCode: function (code, HeroDicts) {\n        if (!HeroDicts) {\n            throw new Error(\"HeroManager instance must be passed to lookup functions\");\n        }\n        else if (!code) {\n            return HeroDicts.Empty;\n        }\n        return HeroDicts.code_lookup[code] ?? null;\n    },\n    getPairNamesByProduct: function (product, HeroDicts) {\n        if (!HeroDicts) {\n            throw new Error(\"HeroManager instance must be passed to lookup functions\");\n        }\n        return HeroDicts.prime_pair_lookup[product];\n    },\n    EMPTY_NAME: EMPTY_NAME,\n    FODDER_NAME: FODDER_NAME,\n};\nexport default HeroManager;\n","export const LANGUAGES = {\n    CODES: {\n        DE: \"de\",\n        KO: \"ko\",\n        PT: \"pt\",\n        TH: \"th\",\n        ZH_TW: \"zh-TW\",\n        JA: \"ja\",\n        EN: \"en\",\n        FR: \"fr\",\n        ZH_CN: \"zh-CN\",\n        ES: \"es\",\n    },\n    NAMES: {\n        DE: \"German\",\n        KO: \"Korean\",\n        PT: \"Portuguese\",\n        TH: \"Thai\",\n        ZH_TW: \"Chinese (Traditional, Taiwan)\",\n        JA: \"Japanese\",\n        EN: \"English\",\n        FR: \"French\",\n        ZH_CN: \"Chinese (Simplified, China)\",\n        ES: \"Spanish\",\n    }\n};\nexport const WORLD_CODES = new Set([\n    \"world_kor\",\n    \"world_global\",\n    \"world_jpn\",\n    \"world_asia\",\n    \"world_eu\",\n]);\nexport const WORLD_CODE_ENUM = {\n    GLOBAL: \"world_global\",\n    KOR: \"world_kor\",\n    JPN: \"world_jpn\",\n    ASIA: \"world_asia\",\n    EU: \"world_eu\",\n};\nexport const WORLD_CODE_TO_CLEAN_STR = {\n    [WORLD_CODE_ENUM.GLOBAL]: \"Global\",\n    [WORLD_CODE_ENUM.KOR]: \"Korea\",\n    [WORLD_CODE_ENUM.JPN]: \"Japan\",\n    [WORLD_CODE_ENUM.ASIA]: \"Asia\",\n    [WORLD_CODE_ENUM.EU]: \"Europe\",\n};\nexport const CLEAN_STR_TO_WORLD_CODE = {\n    [WORLD_CODE_TO_CLEAN_STR.world_global]: WORLD_CODE_ENUM.GLOBAL,\n    [WORLD_CODE_TO_CLEAN_STR.world_kor]: WORLD_CODE_ENUM.KOR,\n    [WORLD_CODE_TO_CLEAN_STR.world_jpn]: WORLD_CODE_ENUM.JPN,\n    [WORLD_CODE_TO_CLEAN_STR.world_asia]: WORLD_CODE_ENUM.ASIA,\n    [WORLD_CODE_TO_CLEAN_STR.world_eu]: WORLD_CODE_ENUM.EU,\n};\nexport const WORLD_CODE_LOWERCASE_TO_CLEAN_STR = Object.fromEntries(Object.values(WORLD_CODE_TO_CLEAN_STR).map((v) => [v.toLowerCase(), v]));\nexport const EQUIPMENT_SET_MAP = {\n    set_speed: \"Speed\",\n    set_acc: \"Hit\",\n    set_cri: \"Critical\",\n    set_res: \"Resist\",\n    set_def: \"Defense\",\n    set_att: \"Attack\",\n    set_max_hp: \"Health\",\n    set_cri_dmg: \"Destruction\",\n    set_coop: \"Unity\",\n    set_immune: \"Immunity\",\n    set_rage: \"Rage\",\n    set_vampire: \"Lifesteal\",\n    set_shield: \"Protection\",\n    set_revenge: \"Revenge\",\n    set_penetrate: \"Penetration\",\n    set_torrent: \"Torrent\",\n    set_counter: \"Counter\",\n    set_scar: \"Injury\",\n};\nexport const ONE_DAY_MILLISECONDS = 1000 * 60 * 60 * 24; // milliseconds\nexport const LEAGUE_MAP = {\n    bronze: \"Bronze\",\n    silver: \"Silver\",\n    gold: \"Gold\",\n    master: \"Master\",\n    challenger: \"Challenger\",\n    champion: \"Champion\",\n    warlord: \"Warlord\",\n    emperor: \"Emperor\",\n    legend: \"Legend\",\n};\nexport const COLUMNS_MAP = {\n    SEASON: \"Season\",\n    SEASON_CODE: \"Season Code\",\n    DATE_TIME: \"Date/Time\",\n    SECONDS: \"Seconds\",\n    TURNS: \"Turns\",\n    SEQ_NUM: \"Seq Num\",\n    P1_ID: \"P1 ID\",\n    P1_SERVER: \"P1 Server\",\n    P2_ID: \"P2 ID\",\n    P2_SERVER: \"P2 Server\",\n    P1_LEAGUE: \"P1 League\",\n    P2_LEAGUE: \"P2 League\",\n    P1_POINTS: \"P1 Points\",\n    POINT_GAIN: \"Point Gain\",\n    WIN: \"Win\",\n    FIRST_PICK: \"First Pick\",\n    FIRST_TURN: \"First Turn\",\n    FIRST_TURN_HERO: \"First Turn Hero\",\n    CR_BAR: \"CR Bar\",\n    P1_PREBANS: \"P1 Prebans\",\n    P2_PREBANS: \"P2 Prebans\",\n    P1_PICKS: \"P1 Picks\",\n    P2_PICKS: \"P2 Picks\",\n    P1_POSTBAN: \"P1 Postban\",\n    P2_POSTBAN: \"P2 Postban\",\n    P1_EQUIPMENT: \"P1 Equipment\",\n    P2_EQUIPMENT: \"P2 Equipment\",\n    P1_ARTIFACTS: \"P1 Artifacts\",\n    P2_ARTIFACTS: \"P2 Artifacts\",\n    P1_MVP: \"P1 MVP\",\n    P2_MVP: \"P2 MVP\",\n    P1_PICKS_PRIMES: \"P1 Picks Primes\",\n    P2_PICKS_PRIMES: \"P2 Picks Primes\",\n    P1_PREBANS_PRIMES: \"P1 Prebans Primes\",\n    P2_PREBANS_PRIMES: \"P2 Prebans Primes\",\n};\nexport const CSVHeaders = Object.values(COLUMNS_MAP).filter(h => !h.toLowerCase().includes(\"prime\"));\nexport const ExportColumns = Object.values(COLUMNS_MAP).filter(h => !h.toLowerCase().includes(\"prime\"));\nexport const ARRAY_COLUMNS = [\n    COLUMNS_MAP.P1_EQUIPMENT,\n    COLUMNS_MAP.P2_EQUIPMENT,\n    COLUMNS_MAP.P1_ARTIFACTS,\n    COLUMNS_MAP.P2_ARTIFACTS,\n    COLUMNS_MAP.CR_BAR,\n    COLUMNS_MAP.P1_PREBANS,\n    COLUMNS_MAP.P2_PREBANS,\n    COLUMNS_MAP.P1_PICKS,\n    COLUMNS_MAP.P2_PICKS,\n];\nexport const BOOLS_COLS = [\n    COLUMNS_MAP.FIRST_PICK,\n    COLUMNS_MAP.FIRST_TURN,\n    COLUMNS_MAP.WIN,\n];\nexport const INT_COLUMNS = [\n    COLUMNS_MAP.SECONDS,\n    COLUMNS_MAP.TURNS,\n    COLUMNS_MAP.P1_POINTS,\n    COLUMNS_MAP.POINT_GAIN,\n];\nexport const TITLE_CASE_COLUMNS = [\n    COLUMNS_MAP.P1_LEAGUE,\n    COLUMNS_MAP.P2_LEAGUE,\n];\nexport const HERO_STATS_COLUMN_MAP = {\n    HERO_NAME: \"Hero Name\",\n    BATTLES: \"Battles\",\n    PICK_RATE: \"Pick Rate\",\n    WINS: \"Wins\",\n    WIN_RATE: \"Win rate\",\n    POSTBANS: \"Postbans\",\n    POSTBAN_RATE: \"Postban Rate\",\n    SUCCESS_RATE: \"Success Rate\", // success rate indicates a win or a postban\n    PLUS_MINUS: \"+/-\",\n    POINT_GAIN: \"Point Gain\",\n    AVG_CR: \"Avg CR\",\n    FIRST_TURNS: \"First Turns\",\n    FIRST_TURN_RATE: \"First Turn Rate\",\n};\nexport const E7_STOVE_HOME_URL = \"https://epic7.onstove.com\";\nexport const E7_GG_HOME_URL = E7_STOVE_HOME_URL + \"/gg\";\n/**\n * Generates a list of all prime numbers up to and including the given limit.\n *\n * Uses the Sieve of Eratosthenes algorithm to generate the list.\n *\n * Primes are used to represent as prime identifier allowing us to represent a set as a product of primes\n *\n * @param {number} limit - The upper limit of the prime numbers to generate. Must be a positive integer.\n * @returns {number[]} - A list of all prime numbers up to and including the given limit.\n */\nfunction getPrimes(limit) {\n    const sieve = new Uint8Array(limit + 1);\n    const primes = [];\n    for (let i = 2; i <= limit; i++) {\n        if (!sieve[i]) {\n            primes.push(i);\n            for (let j = i * i; j <= limit; j += i) {\n                sieve[j] = 1;\n            }\n        }\n    }\n    return primes;\n}\nexport const PRIMES = getPrimes(30000);\n","import { FIELD_EXTRACT_FN_MAP } from \"./filter-parsing/field-extract-map\";\n/**\n * Returns a new RegExp object that matches if the input pattern matches the beginning of a string\n * and is followed by either a comma, closing parenthesis, whitespace, or the end of the string.\n *\n * Used for syntax highlighting in CodeMirror\n *\n * @param {RegExp} pattern - Pattern to pad with the above requirements.\n * @param {string} [flags=\"i\"] - Flags to use in the resulting RegExp object. Defaults to case-insensitive matching.\n * @returns {RegExp} A new RegExp object that matches if the input pattern matches the beginning of a string\n *                   and is followed by either a comma, closing parenthesis, whitespace, or the end of the string.\n */\nfunction padRegex(pattern, flags = \"i\") {\n    return new RegExp(`^(?:${pattern.source})(?=[,)\\\\s;]|$)`, flags);\n}\nfunction anchorExp(pattern, flags = \"i\") {\n    return new RegExp(`^(?:${pattern.source})$`, flags);\n}\n/**\n * Combines multiple regex patterns into a single regex that matches any of the given patterns.\n *\n * @param {RegExp[]} patterns - An array of regular expression objects to combine.\n * @param {string} [flags=\"i\"] - The flags for the resulting RegExp object. Defaults to case-insensitive matching.\n * @returns {RegExp} A new RegExp object that matches if any of the supplied patterns match.\n * @throws {Error} If no patterns are provided.\n */\nfunction orRegex(patterns, flags = \"i\") {\n    if (patterns.length < 1)\n        throw new Error(\"orRegex must have at least one pattern\");\n    let regExStr = `(?:${patterns[0].source})`;\n    for (let i = 1; i < patterns.length; i++) {\n        regExStr += `|(?:${patterns[i].source})`;\n    }\n    return new RegExp(regExStr, flags);\n}\nconst escapeRegex = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\nconst FIELD_WORDS = Object.keys(FIELD_EXTRACT_FN_MAP);\nconst FIELD_WORD_RE = new RegExp(`^(?:${FIELD_WORDS.map(escapeRegex).join(\"|\")})`, \"i\");\nconst CLAUSE_FUNCTIONS = [\"and\", \"or\", \"xor\", \"not\"];\nconst GLOBAL_FUNCTIONS = [\"last-n\"];\nconst DIRECT_FUNCTIONS = [\n    \"p1.equipment\",\n    \"p2.equipment\",\n    \"p1.artifact\",\n    \"p2.artifact\",\n    \"p1.cr\",\n    \"p2.cr\",\n];\nconst CLAUSE_FUNCTIONS_RE = new RegExp(`(?:${CLAUSE_FUNCTIONS.map(escapeRegex).join(\"|\")})(?=\\\\()`, \"i\");\nconst GLOBAL_FUNCTIONS_RE = new RegExp(`(?:${GLOBAL_FUNCTIONS.map(escapeRegex).join(\"|\")})(?=\\\\()`, \"i\");\nconst DIRECT_FUNCTIONS_RE = new RegExp(`(?:${DIRECT_FUNCTIONS.map(escapeRegex).join(\"|\")})(?=\\\\()`, \"i\");\nconst FUNCTIONS_RE = orRegex([\n    CLAUSE_FUNCTIONS_RE,\n    GLOBAL_FUNCTIONS_RE,\n    DIRECT_FUNCTIONS_RE,\n]);\nconst STRING_RE = /.*/i; // matches any string\nconst DATE_RE = /\\d{4}-\\d{2}-\\d{2}/;\nconst EMPTY_SET_RE = /\\{\\s*\\}/;\nconst INT_RE = /-?\\d+/;\nconst SEASON_RE = /season-[1-9]+[0-9]*f?|current-season|last-season/i;\nconst SEASON_CODE_RE = /pvp_rta_ss[1-9]+[0-9]*f?/i;\nconst GLOBAL_FILTER_RE = /last-n\\(\\d+\\)/i;\nconst DATE_LITERAL_RE = new RegExp(`^${DATE_RE.source}$`, \"i\");\nconst INT_LITERAL_RE = /^-?\\d+$/;\nconst BOOL_LITERAL_RE = /^(true|false)$/i;\nconst DATA_WORD_RE = new RegExp(`(?:${SEASON_RE.source})`, \"i\");\n//consts without RE are used for injecting into regex patterns\nconst STR = STRING_RE.source;\nconst INT = INT_RE.source;\nconst DATE = DATE_RE.source;\nconst FIELD_WORD = FIELD_WORD_RE.source;\nconst DATA_WORD = DATA_WORD_RE.source;\nconst QUOTED_STRING_RE = new RegExp(`([\"'])(${STR})\\\\1`, \"i\");\nconst STRING_LITERAL_RE = anchorExp(QUOTED_STRING_RE);\nconst QUOTED_STR = QUOTED_STRING_RE.source;\nconst SET_ELEMENT_RE = new RegExp(`(?:${QUOTED_STR}|${STR}|${DATE})`, \"i\");\nconst DATAFIELD_RE = new RegExp(`(?:${FIELD_WORD}|${DATA_WORD})`, \"i\");\nconst SETELT = SET_ELEMENT_RE.source;\nconst SET_RE = new RegExp(`\\\\{\\\\s*(?:${SETELT}\\\\s*)(?:,\\\\s*${SETELT}\\\\s*)*,?\\\\s*\\\\}|${EMPTY_SET_RE.source}`, \"i\");\nconst RANGE_RE = new RegExp(`${INT}\\\\.\\\\.\\\\.=?${INT}|${DATE}\\\\.\\\\.\\\\.=?${DATE}`);\nconst RANGE_LITERAL_RE = new RegExp(`^${RANGE_RE.source}$`);\nconst FUNCTION_CALL_RE = /\\(.*\\)/i;\n// used by CodeMirror for syntax highlighting\nfunction tokenMatch(stream) {\n    if (stream.match(FUNCTIONS_RE)) {\n        console.log(\"Matched stream as clause:\", stream);\n        return \"keyword\";\n    }\n    if (stream.match(/\\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\\s+)/i)) {\n        console.log(\"Matched stream as operator:\", stream);\n        return \"operator\";\n    }\n    if (stream.match(new RegExp(`[a-z0-9.\"'}=)-]${DATAFIELD_RE.source}(?=[,)\\\\s;]|$)`, \"i\"))) {\n        console.log(\"Matched stream as field with preceding fragment:\", stream);\n        return null;\n    }\n    if (stream.match(padRegex(FIELD_WORD_RE))) {\n        console.log(\"Matched stream as Data Field:\", stream);\n        return \"field\";\n    }\n    if (stream.match(padRegex(DATA_WORD_RE))) {\n        console.log(\"Matched stream as Data Field:\", stream);\n        return \"declared-data\";\n    }\n    if (stream.match(padRegex(QUOTED_STRING_RE))) {\n        console.log(\"Matched stream as string:\", stream);\n        return \"string\";\n    }\n    if (stream.match(padRegex(SET_RE))) {\n        console.log(\"Matched stream as set:\", stream);\n        return \"set\";\n    }\n    if (stream.match(padRegex(RANGE_RE))) {\n        console.log(\"Matched stream as range:\", stream);\n        return \"range\";\n    }\n    if (stream.match(/[^(,\\s;.=0-9\\-]+\\d+/i)) {\n        console.log(\"Matched stream as non-num null\", stream);\n        return null;\n    }\n    if (stream.match(padRegex(INT_RE))) {\n        console.log(\"Matched stream as number:\", stream);\n        return \"declared-data\";\n    }\n    if (stream.match(padRegex(DATE_RE))) {\n        console.log(\"Matched stream as date:\", stream);\n        return \"declared-data\";\n    }\n    if (stream.match(/(?:^|\\s)(?:true|false)(?=[,)\\s;]|$)/i)) {\n        console.log(\"Matched stream as bool:\", stream);\n        return \"declared-data\";\n    }\n    if (stream.match(/[\\(\\)\\{\\}\\;\\,]/)) {\n        console.log(\"Matched stream as bracket:\", stream);\n        return \"bracket\";\n    }\n    stream.next();\n    console.log(\"Matched stream as null:\", stream);\n    return null;\n}\nlet RegExps = {\n    STRING_RE: STRING_RE,\n    DATE_RE: DATE_RE,\n    INT_RE: INT_RE,\n    EMPTY_SET_RE: EMPTY_SET_RE,\n    SET_ELEMENT_RE: SET_ELEMENT_RE,\n    SET_RE: SET_RE,\n    SET_LITERAL_RE: anchorExp(SET_RE),\n    STRING_LITERAL_RE: STRING_LITERAL_RE,\n    DATE_LITERAL_RE: DATE_LITERAL_RE,\n    INT_LITERAL_RE: INT_LITERAL_RE,\n    BOOL_LITERAL_RE: BOOL_LITERAL_RE,\n    RANGE_RE: RANGE_RE,\n    RANGE_LITERAL_RE: RANGE_LITERAL_RE,\n    SEASON_RE: SEASON_RE,\n    SEASON_LITERAL_RE: anchorExp(SEASON_RE),\n    SEASON_CODE_RE: SEASON_CODE_RE,\n    SEASON_CODE_LITERAL_RE: anchorExp(SEASON_CODE_RE),\n    DATA_WORD_RE: DATA_WORD_RE,\n    DATA_WORD_LITERAL_RE: anchorExp(DATA_WORD_RE),\n    FIELD_WORD_RE: FIELD_WORD_RE,\n    FIELD_WORD_LITERAL_RE: anchorExp(FIELD_WORD_RE),\n    DATAFIELD_RE: DATAFIELD_RE,\n    GLOBAL_FILTER_RE: GLOBAL_FILTER_RE,\n    ANCHORED_STR_LITERAL_RE: anchorExp(STRING_LITERAL_RE),\n    CLAUSE_FUNCTIONS_RE: CLAUSE_FUNCTIONS_RE,\n    DIRECT_FUNCTIONS_RE: DIRECT_FUNCTIONS_RE,\n    GLOBAL_FUNCTIONS_RE: GLOBAL_FUNCTIONS_RE,\n    FUNCTIONS_RE: FUNCTIONS_RE,\n    FUNCTION_CALL_RE: FUNCTION_CALL_RE,\n    padRegex: padRegex,\n    anchorExp: anchorExp,\n    tokenMatch: tokenMatch,\n    orRegex: orRegex,\n    escapeRegex: escapeRegex,\n};\nexport { RegExps };\n","import ClientCache from \"../cache-manager.ts\";\nimport PYAPI from \"../apis/py-API.js\";\nimport { COLUMNS_MAP, ONE_DAY_MILLISECONDS } from \"./references.ts\";\nimport { RegExps } from \"./regex.ts\";\nlet SeasonManager = {\n    fetchAndCacheSeasonDetails: async function () {\n        const result = await PYAPI.fetchSeasonDetails();\n        if (result.error) {\n            throw new Error(`Could not fetch season details: ${result.error}`);\n        }\n        const seasonDetails = result.seasonDetails;\n        seasonDetails.forEach((season) => {\n            season.range = [season[\"Start\"], season[\"End\"]].map((d) => new Date(`${d.split(\" \")[0]}T00:00:00`));\n            season[\"Season Number\"] = String(season[\"Season Number\"]);\n        });\n        seasonDetails.sort((a, b) => parseInt(a[\"Season Number\"]) - parseInt(b[\"Season Number\"]));\n        // add pre seasons\n        const preSeasonFilled = [seasonDetails[0]];\n        let lastSeason = seasonDetails[0];\n        seasonDetails.slice(1).forEach((season) => {\n            const [start, end] = [\n                new Date(+lastSeason.range[1] + ONE_DAY_MILLISECONDS),\n                new Date(+season.range[0] - ONE_DAY_MILLISECONDS),\n            ];\n            const seasonNumStr = lastSeason[\"Season Number\"] + \"f\";\n            const preSeason = {\n                \"Season Number\": seasonNumStr,\n                Code: \"pvp_rta_ss\" + seasonNumStr,\n                Season: `Pre ${season[\"Season\"]}`,\n                Start: start.toISOString().slice(0, 10),\n                End: end.toISOString().slice(0, 10),\n                Status: \"Complete\",\n                range: [start, end],\n            };\n            preSeasonFilled.push(preSeason);\n            preSeasonFilled.push(season);\n            lastSeason = season;\n        });\n        // add another pre season if current season is complete\n        if (lastSeason.range[1] < new Date()) {\n            const start = new Date(+lastSeason.range[1] + ONE_DAY_MILLISECONDS);\n            const seasonNumStr = lastSeason[\"Season Number\"] + \"f\";\n            const preSeason = {\n                \"Season Number\": seasonNumStr,\n                Code: \"pvp_rta_ss\" + seasonNumStr,\n                Season: `Active Pre-Season`,\n                Start: start.toISOString().slice(0, 10),\n                End: \"N/A\",\n                Status: \"Active\",\n                range: [start, new Date()],\n            };\n            preSeasonFilled.push(preSeason);\n        }\n        preSeasonFilled.reverse();\n        await ClientCache.cache(ClientCache.Keys.SEASON_DETAILS, preSeasonFilled);\n        return preSeasonFilled;\n    },\n    getSeasonDetails: async function () {\n        const cached = await ClientCache.get(ClientCache.Keys.SEASON_DETAILS);\n        if (cached) {\n            return cached;\n        }\n        return await SeasonManager.fetchAndCacheSeasonDetails();\n    },\n    clearSeasonDetails: async function () {\n        await ClientCache.delete(ClientCache.Keys.SEASON_DETAILS);\n        console.log(\"Season details cleared from data cache\");\n    },\n    getSeasonNumFromCode: function (seasonCode) {\n        return seasonCode.split(\"_\")[-1];\n    },\n    reaquireIfNeeded: async function (battle) {\n        const seasonDetails = await SeasonManager.getSeasonDetails();\n        const seasonCodes = new Set(seasonDetails.map((s) => s.Code));\n        battle.forEach((b) => {\n            const seasonCode = b[COLUMNS_MAP.SEASON_CODE];\n            if (!RegExps.SEASON_CODE_LITERAL_RE.test(seasonCode)) {\n                console.error(\"Battle contains invalid season code:\", seasonCode, b);\n            }\n            if (!seasonCodes.has(b[COLUMNS_MAP.SEASON_CODE])) {\n                SeasonManager.fetchAndCacheSeasonDetails();\n                console.log(\"Reacquired season details due to missing season code:\", seasonCode);\n                return;\n            }\n        });\n    },\n};\nexport default SeasonManager;\n","import HeroManager from \"./hero-manager.ts\";\nimport { WORLD_CODE_TO_CLEAN_STR, COLUMNS_MAP, HERO_STATS_COLUMN_MAP, LEAGUE_MAP, } from \"./references.ts\";\nconst getWins = (battleList) => battleList.filter((b) => b[COLUMNS_MAP.WIN]);\nconst getFirstPickSubset = (battleList) => battleList.filter((b) => b[COLUMNS_MAP.FIRST_PICK]);\nconst getSecondPickSubset = (battleList) => battleList.filter((b) => !b[COLUMNS_MAP.FIRST_PICK]);\nconst isIncomplete = (b) => b[COLUMNS_MAP.TURNS] === 0;\nconst NA = \"N/A\";\nfunction toPercent(value) {\n    return (value * 100).toFixed(2) + \"%\";\n}\nfunction divideToPercentString(a, b) {\n    return b !== 0 ? toPercent(a / b) : toPercent(0);\n}\nfunction getCR(battle, heroName) {\n    const entry = battle[COLUMNS_MAP.CR_BAR].find((entry) => entry[0] === heroName);\n    return entry ? entry[1] : null;\n}\nfunction queryStats(battleList, totalBattles, heroName) {\n    const gamesWon = getWins(battleList).length;\n    const gamesAppeared = battleList.length;\n    const appearanceRate = totalBattles !== 0 ? gamesAppeared / totalBattles : 0;\n    const winRate = gamesAppeared !== 0 ? gamesWon / gamesAppeared : 0;\n    const postBanned = battleList.reduce((acc, b) => acc +\n        +(b[COLUMNS_MAP.P1_POSTBAN] === heroName ||\n            b[COLUMNS_MAP.P2_POSTBAN] === heroName), 0);\n    const successes = battleList.reduce((acc, b) => acc +\n        +(b[COLUMNS_MAP.WIN] ||\n            b[COLUMNS_MAP.P1_POSTBAN] === heroName ||\n            b[COLUMNS_MAP.P2_POSTBAN] === heroName), 0);\n    const pointGain = battleList.reduce((acc, b) => acc + (b[COLUMNS_MAP.POINT_GAIN] || 0), 0);\n    let gamesConsidered = 0;\n    let crTotal = 0;\n    let firstTurns = 0;\n    for (const battle of battleList) {\n        const cr = getCR(battle, heroName);\n        if (cr !== null && cr !== 0) {\n            gamesConsidered += 1;\n            crTotal += cr;\n            if (cr === 100) {\n                firstTurns += 1;\n            }\n        }\n    }\n    const avgCR = divideToPercentString(crTotal / 100, gamesConsidered);\n    return {\n        [HERO_STATS_COLUMN_MAP.HERO_NAME]: heroName,\n        [HERO_STATS_COLUMN_MAP.BATTLES]: gamesAppeared,\n        [HERO_STATS_COLUMN_MAP.PICK_RATE]: toPercent(appearanceRate),\n        [HERO_STATS_COLUMN_MAP.WINS]: gamesWon,\n        [HERO_STATS_COLUMN_MAP.WIN_RATE]: toPercent(winRate),\n        [HERO_STATS_COLUMN_MAP.POSTBANS]: postBanned,\n        [HERO_STATS_COLUMN_MAP.POSTBAN_RATE]: divideToPercentString(postBanned, gamesAppeared),\n        [HERO_STATS_COLUMN_MAP.SUCCESS_RATE]: divideToPercentString(successes, gamesAppeared),\n        [HERO_STATS_COLUMN_MAP.PLUS_MINUS]: 2 * gamesWon - gamesAppeared,\n        [HERO_STATS_COLUMN_MAP.POINT_GAIN]: pointGain,\n        [HERO_STATS_COLUMN_MAP.AVG_CR]: avgCR,\n        [HERO_STATS_COLUMN_MAP.FIRST_TURNS]: firstTurns,\n        [HERO_STATS_COLUMN_MAP.FIRST_TURN_RATE]: divideToPercentString(firstTurns, gamesConsidered),\n    };\n}\nfunction getPrimes(battleList, isP1 = true) {\n    const primeSet = new Set();\n    for (const battle of Object.values(battleList)) {\n        const picks = isP1\n            ? battle[COLUMNS_MAP.P1_PICKS_PRIMES]\n            : battle[COLUMNS_MAP.P2_PICKS_PRIMES];\n        picks.forEach((element) => {\n            primeSet.add(element);\n        });\n    }\n    return primeSet;\n}\nfunction getHeroStats(battleList, HeroDicts) {\n    if (battleList.length === 0) {\n        return { playerHeroStats: [], enemyHeroStats: [] };\n    }\n    const totalBattles = battleList.length;\n    const playerPrimes = getPrimes(battleList, true);\n    const enemyPrimes = getPrimes(battleList, false);\n    const playerHeroStats = [];\n    const enemyHeroStats = [];\n    for (const prime of playerPrimes) {\n        const hero = HeroManager.getHeroByPrime(prime, HeroDicts);\n        if (!hero)\n            continue;\n        const playerSubset = battleList.filter((b) => b[COLUMNS_MAP.P1_PICKS_PRIMES].includes(prime));\n        if (playerSubset.length > 0) {\n            playerHeroStats.push(queryStats(playerSubset, totalBattles, hero.name));\n        }\n    }\n    for (const prime of enemyPrimes) {\n        const hero = HeroManager.getHeroByPrime(prime, HeroDicts);\n        if (!hero)\n            continue;\n        const enemySubset = battleList.filter((b) => b[COLUMNS_MAP.P2_PICKS_PRIMES].includes(prime));\n        if (enemySubset.length > 0) {\n            enemyHeroStats.push(queryStats(enemySubset, totalBattles, hero.name));\n        }\n    }\n    const nameCol = HERO_STATS_COLUMN_MAP.HERO_NAME;\n    return {\n        playerHeroStats: playerHeroStats.sort((b1, b2) => b1[nameCol].localeCompare(b2[nameCol])),\n        enemyHeroStats: enemyHeroStats.sort((b1, b2) => b1[nameCol].localeCompare(b2[nameCol])),\n    };\n}\nfunction getFirstPickStats(battleList, HeroDicts) {\n    battleList = getFirstPickSubset(Object.values(battleList));\n    if (battleList.length === 0) {\n        return [];\n    }\n    const totalBattles = battleList.length;\n    const grouped = {};\n    for (const b of battleList) {\n        if (b[COLUMNS_MAP.P1_PICKS_PRIMES].length === 0)\n            continue; // skip any battle where player didn't get to pick a first unit\n        const hero = b[COLUMNS_MAP.P1_PICKS_PRIMES][0];\n        if (!(hero in grouped))\n            grouped[hero] = { wins: 0, appearances: 0 };\n        grouped[hero].wins += +b[COLUMNS_MAP.WIN];\n        grouped[hero].appearances += 1;\n    }\n    const result = Object.entries(grouped).map(([prime, stats]) => {\n        const name = HeroManager.getHeroByPrime(prime, HeroDicts)?.name ?? HeroManager.EMPTY_NAME;\n        return {\n            hero: name,\n            wins: stats.wins,\n            appearances: stats.appearances,\n            win_rate: toPercent(stats.wins / stats.appearances),\n            appearance_rate: toPercent(stats.appearances / totalBattles),\n            \"+/-\": 2 * stats.wins - stats.appearances,\n        };\n    });\n    result.sort((a, b) => b.appearances - a.appearances);\n    return result;\n}\nfunction getPrebanStats(battleList, HeroDicts) {\n    //console.log(`Got HeroDicts: ${HeroDicts}`);\n    const emptyPrime = HeroDicts.Empty.prime;\n    if (battleList.length === 0) {\n        return [];\n    }\n    function getValidPrimes(index) {\n        const primes = battleList.map((b) => b[COLUMNS_MAP.P1_PREBANS_PRIMES][index]).filter((p) => p !== null);\n        return new Set(primes);\n    }\n    const preban1Set = getValidPrimes(0);\n    const preban2Set = getValidPrimes(1);\n    const prebanSet = new Set([...preban1Set, ...preban2Set]);\n    let prebans = [];\n    for (const prime of prebanSet) {\n        prebans.push(prime);\n    }\n    for (const a of prebanSet) {\n        for (const b of prebanSet) {\n            if (a < b)\n                prebans.push(a * b);\n        }\n    }\n    const totalBattles = battleList.length;\n    const output = [];\n    for (const preban of prebans) {\n        const filtered = battleList.filter((b) => b[COLUMNS_MAP.P1_PREBANS_PRIMES].includes(preban));\n        const appearances = filtered.length;\n        if (appearances < 1) {\n            continue;\n        }\n        const wins = filtered.reduce((acc, b) => acc + +b.Win, 0);\n        const appearanceRate = totalBattles > 0 ? appearances / totalBattles : 0;\n        const winRate = appearances > 0 ? wins / appearances : 0;\n        const plusMinus = 2 * wins - appearances;\n        output.push({\n            preban: HeroDicts.prime_pair_lookup[preban],\n            wins: wins,\n            appearances: appearances,\n            appearance_rate: toPercent(appearanceRate),\n            win_rate: toPercent(winRate),\n            \"+/-\": plusMinus,\n        });\n    }\n    output.sort((a, b) => b.appearances - a.appearances);\n    return output;\n}\nfunction secondsToTimeStr(inputSeconds) {\n    let timeStr;\n    const mins = Math.floor(inputSeconds / 60);\n    const secs = (inputSeconds % 60).toFixed(1);\n    if (mins === 0) {\n        timeStr = `${secs} secs`;\n    }\n    else {\n        timeStr = `${mins} : ${secs}s`;\n    }\n    return timeStr;\n}\nfunction getGeneralStats(battleList) {\n    battleList.sort((b1, b2) => new Date(b1[\"Date/Time\"]).getTime() - new Date(b2[\"Date/Time\"]).getTime());\n    const totalBattles = battleList.length;\n    const totalGain = battleList.reduce((acc, b) => acc + (b[\"Point Gain\"] || 0), 0);\n    const avgPPG = totalBattles > 0 ? totalGain / totalBattles : 0;\n    const totalTurns = battleList.reduce((acc, b) => acc + b[\"Turns\"], 0);\n    const avgTurns = totalBattles > 0 ? totalTurns / totalBattles : 0;\n    const maxTurns = battleList.length > 0 ? Math.max(...battleList.map((b) => b[\"Turns\"])) : 0;\n    const totalSeconds = battleList.reduce((acc, b) => acc + b[\"Seconds\"], 0);\n    const avgSeconds = totalBattles > 0 ? totalSeconds / totalBattles : 0;\n    const maxSeconds = battleList.length > 0\n        ? Math.max(...battleList.map((b) => b[\"Seconds\"]))\n        : 0;\n    let avgTimeStr = secondsToTimeStr(avgSeconds);\n    let maxTimeStr = secondsToTimeStr(maxSeconds);\n    const totalFirstTurnGames = battleList.reduce((acc, b) => acc + +b[\"First Turn\"], 0);\n    // create subsets for first pick and second pick battles\n    const fpBattles = getFirstPickSubset(battleList);\n    const spBattles = getSecondPickSubset(battleList);\n    // get counts for first pick and second pick battles\n    const fpCount = fpBattles.length;\n    const spCount = spBattles.length;\n    // calculate wins for first pick and second pick battles\n    const fpWins = fpBattles.reduce((acc, b) => acc + +b.Win, 0);\n    const spWins = spBattles.reduce((acc, b) => acc + +b.Win, 0);\n    // calculate rate of occurrence for first pick and second pick battles\n    const fpR = totalBattles ? fpCount / totalBattles : 0;\n    const spR = totalBattles ? spCount / totalBattles : 0;\n    // calculate win rate for first pick and second pick battles\n    const fpWR = fpCount ? fpWins / fpCount : 0;\n    const spWR = spCount ? spWins / spCount : 0;\n    // calculate total win rate\n    const winRate = totalBattles ? (fpWins + spWins) / totalBattles : 0;\n    // iterate through battles and calculate longest win/loss streaks\n    let [maxWinStreak, maxLossStreak, winStreak, lossStreak] = [0, 0, 0, 0];\n    for (let b of battleList) {\n        if (b.Win) {\n            winStreak += 1;\n            maxWinStreak = Math.max(maxWinStreak, winStreak);\n            lossStreak = 0;\n        }\n        else {\n            winStreak = 0;\n            lossStreak += 1;\n            maxLossStreak = Math.max(maxLossStreak, lossStreak);\n        }\n    }\n    return {\n        first_pick_count: fpCount,\n        second_pick_count: spCount,\n        first_pick_rate: fpCount ? toPercent(fpR) : NA,\n        second_pick_rate: spCount ? toPercent(spR) : NA,\n        first_pick_winrate: fpCount ? toPercent(fpWR) : NA,\n        second_pick_winrate: spCount ? toPercent(spWR) : NA,\n        total_winrate: totalBattles ? toPercent(winRate) : NA,\n        total_battles: totalBattles,\n        total_wins: fpWins + spWins,\n        max_win_streak: maxWinStreak,\n        max_loss_streak: maxLossStreak,\n        avg_ppg: avgPPG.toFixed(2),\n        avg_turns: avgTurns.toFixed(2),\n        avg_time: avgTimeStr,\n        max_turns: maxTurns,\n        max_time: maxTimeStr,\n        first_turn_games: totalFirstTurnGames,\n        first_turn_rate: totalBattles\n            ? toPercent(totalFirstTurnGames / totalBattles)\n            : NA,\n    };\n}\nfunction getPerformanceStats(battlesList) {\n    const perfStatsContainer = {\n        servers: [],\n        leagues: [],\n    };\n    const totalBattles = battlesList.length;\n    const servers = Object.values(WORLD_CODE_TO_CLEAN_STR);\n    const leagues = Object.values(LEAGUE_MAP);\n    const subsetFilters = [\n        ...servers.map((server) => [\n            `Server: ${server}`,\n            (b) => b[\"P2 Server\"] === server,\n        ]),\n        ...leagues.map((league) => [\n            `League: ${league}`,\n            (b) => b[\"P2 League\"] === league,\n        ]),\n    ];\n    for (const [label, subsetFilter] of subsetFilters) {\n        const subset = battlesList.filter(subsetFilter);\n        if (subset.length === 0)\n            continue;\n        const count = subset.length;\n        const wins = subset.reduce((acc, b) => acc + +b.Win, 0);\n        const winRate = count > 0 ? toPercent(wins / count) : NA;\n        const frequency = totalBattles > 0 ? toPercent(count / totalBattles) : NA;\n        const firstPickGames = subset.filter((b) => b[\"First Pick\"]);\n        const fpWins = firstPickGames.reduce((acc, b) => acc + +b.Win, 0);\n        const secondPickGames = subset.filter((b) => !b[\"First Pick\"]);\n        const spWins = secondPickGames.reduce((acc, b) => acc + +b.Win, 0);\n        const targetList = label.toLowerCase().includes(\"server\")\n            ? perfStatsContainer.servers\n            : perfStatsContainer.leagues;\n        targetList.push({\n            label,\n            count,\n            wins,\n            win_rate: winRate,\n            frequency: frequency,\n            \"+/-\": 2 * wins - count,\n            fp_games: firstPickGames.length,\n            sp_games: secondPickGames.length,\n            fp_wr: firstPickGames.length > 0\n                ? toPercent(fpWins / firstPickGames.length)\n                : \"N/A\",\n            sp_wr: secondPickGames.length > 0\n                ? toPercent(spWins / secondPickGames.length)\n                : \"N/A\",\n        });\n    }\n    return [\n        ...perfStatsContainer.servers,\n        ...perfStatsContainer.leagues.slice(-4),\n    ];\n}\nlet StatsBuilder = {\n    getHeroStats,\n    getFirstPickStats,\n    getPrebanStats,\n    getPerformanceStats,\n    getGeneralStats,\n};\nexport default StatsBuilder;\n","import { WORLD_CODE_TO_CLEAN_STR, WORLD_CODE_ENUM, } from \"./references.ts\";\nimport ClientCache from \"../cache-manager.ts\";\nimport E7API from \"../apis/e7-API.ts\";\nimport PYAPI from \"../apis/py-API.js\";\nconst userMapCacheKeyMap = {\n    [WORLD_CODE_ENUM.GLOBAL]: ClientCache.Keys.GLOBAL_USERS,\n    [WORLD_CODE_ENUM.EU]: ClientCache.Keys.EU_USERS,\n    [WORLD_CODE_ENUM.ASIA]: ClientCache.Keys.ASIA_USERS,\n    [WORLD_CODE_ENUM.JPN]: ClientCache.Keys.JPN_USERS,\n    [WORLD_CODE_ENUM.KOR]: ClientCache.Keys.KOR_USERS,\n};\nexport function validateUserFormat(user) {\n    if (!user) {\n        throw new Error(\"Invalid user; user is null or undefined\");\n    }\n    if (!(\"id\" in user) || typeof user.id !== \"number\") {\n        throw new Error(\"Invalid user; user.id does not exist or is not a number\");\n    }\n    if (!(\"name\" in user) || typeof user.name !== \"string\") {\n        throw new Error(\"Invalid user; user.name does not exist or is not a string\");\n    }\n    if (!(\"code\" in user) || typeof user.code !== \"string\") {\n        throw new Error(\"Invalid user; user.code does not exist or is not a string\");\n    }\n    if (!(\"rank\" in user) || typeof user.rank !== \"number\") {\n        throw new Error(\"Invalid user; user.rank does not exist or is not a number\");\n    }\n    if (!(\"world_code\" in user) || typeof user.world_code !== \"string\") {\n        throw new Error(\"Invalid user; user.world_code does not exist or is not a string\");\n    }\n    if (!(user.world_code in WORLD_CODE_TO_CLEAN_STR)) {\n        throw new Error(\"Invalid user; user.world_code is not a valid world code\");\n    }\n    return true;\n}\nfunction createUser(userJSON, world_code) {\n    return {\n        id: Number(userJSON.nick_no),\n        name: userJSON.nick_nm,\n        code: userJSON.code,\n        rank: Number(userJSON.rank),\n        world_code: world_code,\n    };\n}\nasync function getUserMapFromE7Server(world_code) {\n    console.log(`Getting user map for world code from E7 server: ${world_code}`);\n    const rawUserJSON = await E7API.fetchUserJSON(world_code);\n    if (!rawUserJSON || (typeof rawUserJSON === \"object\" && !(\"users\" in rawUserJSON))) {\n        console.log(`Could not get user map from E7 server for world code: ${world_code}`);\n        return null;\n    }\n    console.log(`Got user map from E7 server for world code: ${world_code}`);\n    const rawUserMap = rawUserJSON;\n    return Object.fromEntries(rawUserMap.users.map((user) => [\n        user.nick_no,\n        createUser(user, world_code),\n    ]));\n}\n/**\n * Gets a user map from the E7 server for the given world code.\n * The user map is a map of user IDs to user objects.\n * If the user map is cached, it will be returned from the cache.\n * Otherwise, it will be fetched from the E7 server and cached.\n * @param {string} world_code - The world code to get the user map for.\n * @returns {Promise<Object.<string, User>>} - The user map for the given world code.\n */\nasync function getUserMap(world_code) {\n    console.log(`Getting user map for world code: ${world_code}`);\n    const cachedUserMap = await ClientCache.get(userMapCacheKeyMap[world_code]);\n    if (cachedUserMap !== null) {\n        console.log(\"Got user map from cache\");\n        return cachedUserMap;\n    }\n    const fetchedUserMap = await getUserMapFromE7Server(world_code);\n    await ClientCache.cache(userMapCacheKeyMap[world_code], fetchedUserMap);\n    return fetchedUserMap;\n}\nconst cleanStr = (world_code) => WORLD_CODE_TO_CLEAN_STR[world_code];\nfunction findUser(userData, users, dataExtractFn) {\n    const user = users.find((user) => dataExtractFn(user) === userData);\n    if (user) {\n        console.log(`Found user: ${JSON.stringify(user)}`);\n        return { user, ok: true };\n    }\n    return { user: null, ok: true };\n}\nasync function findUserClientSide(user, userWorldCode) {\n    const userMap = await getUserMap(userWorldCode);\n    const users = userMap ? Object.values(userMap) : [];\n    if (users.length === 0) {\n        console.log(`User map had no users, falling back to flask server for world code: ${cleanStr(userWorldCode)}`);\n        return { user: null, ok: false };\n    }\n    let userData, dataExtractFn;\n    if (user.id) {\n        userData = user.id;\n        dataExtractFn = (user) => user.id;\n    }\n    else if (user.name) {\n        userData = user.name.toLowerCase();\n        dataExtractFn = (user) => user.name.toLowerCase();\n    }\n    else {\n        throw new Error(\"Must pass a user object with either user.name or user.id to find user\");\n    }\n    return findUser(userData, users, dataExtractFn);\n}\nlet UserManager = {\n    getUserMap: getUserMap,\n    /**\n     * Finds a user in the user map for the given world code using either user ID or name\n     * The world code is required\n     * If the user maps api call fails, will try to find the user by calling flask server\n     *\n     * @param {Object} searchUser - Object with either user ID or name, and world code\n     * @returns {Object} - Found user object\n     * @throws {Error} - If user is not found with given identifier in given world code\n     */\n    findUser: async function (searchUser) {\n        console.log(`Attempting to find user: ${JSON.stringify(searchUser)}`);\n        if (!(searchUser.name || searchUser.id) || !searchUser.world_code) {\n            throw new Error(\"Must pass a user object with either user.name or user.id, and user.world_code to find user\");\n        }\n        let identifier = searchUser.id\n            ? `Numeric ID: ${searchUser.id}`\n            : `Name: '${searchUser.name}'`;\n        let result = null;\n        result = await findUserClientSide(searchUser, searchUser.world_code);\n        // if issue, try to fetch from flask\n        if (!result.ok) {\n            result = await PYAPI.fetchUser(searchUser);\n        }\n        // result should now be guaranteed to be ok otherwise error would have been thrown\n        if (result.ok) {\n            const user = result.user;\n            if (user === null) {\n                throw new Error(`Could not find user with ${identifier} in Server: ${cleanStr(searchUser.world_code)}`);\n            }\n            return user;\n        }\n        throw new Error(`Function did not properly terminate: ${JSON.stringify(result)}`);\n    },\n    setUser: async function (user) {\n        await ClientCache.cache(ClientCache.Keys.USER, user);\n    },\n    getUser: async function () {\n        const user = await ClientCache.get(ClientCache.Keys.USER);\n        await ClientCache.setTimeoutDataNow(ClientCache.Keys.USER);\n        return user;\n    },\n    clearUserData: async function () {\n        await ClientCache.clearUserData();\n    },\n    clearUserDataLists: async function () {\n        await ClientCache.clearUserLists();\n    },\n};\nexport default UserManager;\n","/*\nThis script is used to export the current data selected by user (without filters applied) as a JSON file.\nAdditional data like the user is also exported.\n\nIt also has functions to parse uploaded JSON files back into the original format.\n*/\nimport { ContentManager } from \"./content-manager\";\nimport { COLUMNS_MAP, WORLD_CODE_TO_CLEAN_STR } from \"./e7/references\";\nimport { ExportColumns } from \"./e7/references\";\nimport { validateUserFormat } from \"./e7/user-manager\";\nfunction convertBattlesToExportFormat(battles) {\n    const headers = ExportColumns;\n    const rows = battles.map(battle => ExportColumns.map(key => JSON.stringify(battle[key])));\n    return { headers, rows };\n}\nfunction constructJSON(user, battlesList, filterStr) {\n    const exportData = {\n        user,\n        filterStr,\n        battles: { headers: [], rows: [] },\n    };\n    exportData.battles = convertBattlesToExportFormat(Object.values(battlesList));\n    return exportData;\n}\nfunction downloadExportJSON(filename, data) {\n    const jsonStr = JSON.stringify(data);\n    const blob = new Blob([jsonStr], { type: \"application/json\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename.endsWith(\".json\") ? filename : `${filename}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n}\nasync function triggerDownload() {\n    const user = await ContentManager.UserManager.getUser();\n    if (!user) {\n        throw new Error(\"User not found; cannot export data without an active user\");\n    }\n    const stats = await ContentManager.ClientCache.getStats();\n    const filterStr = await ContentManager.ClientCache.getFilterStr() || undefined;\n    const filtersAppliedStr = stats.areFiltersApplied ? \" Filtered\" : \"\";\n    let battlesList = stats.areFiltersApplied ? Object.values(stats.filteredBattlesObj) : stats.battles;\n    battlesList = battlesList || [];\n    const data = await constructJSON(user, battlesList, filterStr);\n    const timestamp = new Date().toISOString().split(\"T\")[0] || \"\";\n    const fileName = `${user.name} (${user.id})${filtersAppliedStr} ${timestamp}`;\n    downloadExportJSON(fileName, data);\n}\nfunction validateUploadedFile(file, extension = \".json\", maxMB = 60) {\n    if (!file.name.endsWith(\".json\")) {\n        throw new Error(\"File must be .json\");\n    }\n    const maxBytes = maxMB * 1024 * 1024;\n    if (file.size > maxBytes) {\n        throw new Error(`File must be smaller than ${maxMB}mb, got ${file.size / (1024 * 1024)}mb File.`);\n    }\n}\nfunction validateUploadedBattles(data) {\n    if (!data || typeof data !== \"object\") {\n        return false;\n    }\n    if (!(\"headers\" in data) || !Array.isArray(data.headers)) {\n        throw new Error(\"Invalid upload: missing headers field\");\n    }\n    if (data.headers.length !== ExportColumns.length) {\n        throw new Error(`Invalid upload: expected ${ExportColumns.length} headers, got ${data.headers.length}`);\n    }\n    for (let i = 0; i < ExportColumns.length; i++) {\n        if (ExportColumns[i] !== data.headers[i]) {\n            throw new Error(`Invalid upload: headers do not match at index ${i}; expected ${ExportColumns[i]}, got ${data.headers[i]}`);\n        }\n    }\n    if (!(\"rows\" in data) || !Array.isArray(data.rows)) {\n        throw new Error(\"Invalid upload: missing rows field or rows is not an array\");\n    }\n    if (data.rows.length === 0) {\n        throw new Error(\"Invalid upload: uploaded data has no battles\");\n    }\n    for (let i = 0; i < data.rows.length; i++) {\n        const row = data.rows[i];\n        if (row.length !== ExportColumns.length) {\n            throw new Error(`Invalid upload: expected ${ExportColumns.length} columns per row, got ${row.length} at index ${i}`);\n        }\n    }\n    return true;\n}\nfunction validateFileContent(data) {\n    if (!data || typeof data !== \"object\") {\n        throw new Error(\"Invalid upload: data is null, undefined, or not an object\");\n    }\n    if (!(\"user\" in data)) {\n        throw new Error(\"Invalid upload: missing 'user' field\");\n    }\n    validateUserFormat(data.user);\n    if (!(\"battles\" in data)) {\n        throw new Error(\"Invalid upload: missing 'battles' field\");\n    }\n    validateUploadedBattles(data.battles);\n    return true;\n}\nasync function parseJSON(file) {\n    validateUploadedFile(file);\n    const jsonStr = await file.text();\n    const data = JSON.parse(jsonStr);\n    console.log(\"Parsed JSON:\", data);\n    validateFileContent(data);\n    return data;\n}\nfunction validateRawBattles(rawBattles) {\n    const p1IdSet = new Set(rawBattles.map(battle => battle[COLUMNS_MAP.P1_ID]));\n    const p1ServerSet = new Set(rawBattles.map(battle => battle[COLUMNS_MAP.P1_SERVER]));\n    if (p1IdSet.size !== 1) {\n        throw new Error(`Invalid upload: Multiple P1 IDs found in upload: {${Array.from(p1IdSet).join(\", \")}}`);\n    }\n    if (p1ServerSet.size !== 1) {\n        throw new Error(`Invalid upload: Multiple P1 Servers found in upload: {${Array.from(p1ServerSet).join(\", \")}}`);\n    }\n    const server = p1ServerSet.values().next().value?.replace(/\"|'/g, \"\");\n    if (!server || !Object.values(WORLD_CODE_TO_CLEAN_STR).includes(server)) {\n        throw new Error(`Invalid upload: Invalid P1 Server found in upload: '${server}'`);\n    }\n    return true;\n}\nfunction restructureParsedUploadBattles(battles) {\n    const rawBattlesList = [];\n    for (const battle of battles.rows) {\n        const battleObj = {};\n        ExportColumns.forEach((header, i) => {\n            battleObj[header] = battle[i];\n        });\n        rawBattlesList.push(battleObj);\n    }\n    validateRawBattles(rawBattlesList);\n    return rawBattlesList;\n}\nexport const ExportImportFns = {\n    triggerDownload,\n    parseJSON,\n    restructureParsedUploadBattles\n};\n","export const Safe = {\n    unwrapHtmlElt: function (eltID) {\n        const elt = document.getElementById(eltID);\n        if (elt === null) {\n            throw new Error(`Could not find element with ID ${eltID}`);\n        }\n        return elt;\n    },\n    setText: function (eltID, text) {\n        const elt = this.unwrapHtmlElt(eltID);\n        elt.textContent = text;\n    },\n};\n","import { ContentManager } from \"./content-manager\";\nconst LangManager = {\n    changeLang: async function (lang) {\n        await ContentManager.ClientCache.setLang(lang);\n        await ContentManager.HeroManager.fetchAndCacheHeroManager(lang);\n        window.location.reload();\n    },\n    getLang: async function () {\n        return await ContentManager.ClientCache.getLang();\n    },\n};\nexport { LangManager };\n","import { NavBarUtils } from \"./page-utilities/nav-bar-utils.ts\";\nasync function main() {\n    await NavBarUtils.initialize();\n}\nawait main();\n","import ClientCache from \"../../cache-manager.ts\";\nconst ACTIONS = {\n    CLEAR_USER: \"CLEAR_USER\",\n    SHOW_NO_USER_MSG: \"SHOW_NO_USER_MSG\",\n    SHOW_DATA_ALREADY_CLEARED_MSG: \"SHOW_DATA_ALREADY_CLEARED_MSG\",\n    QUERY_USER: \"QUERY_USER\",\n    REFRESH_REFERENCES: \"REFRESH_REFERENCES\",\n};\nlet InterPageManager = {\n    ACTIONS: ACTIONS,\n    getState: async function () {\n        return ((await ClientCache.get(ClientCache.Keys.INTER_PAGE_MANAGER)) ?? {\n            actions: [],\n            messages: [],\n        });\n    },\n    setState: async function (state) {\n        await ClientCache.cache(ClientCache.Keys.INTER_PAGE_MANAGER, state);\n    },\n    pushActions: async function (actions) {\n        let state = await this.getState();\n        state.actions.push(...actions);\n        await this.setState(state);\n    },\n    pushAction: async function (action) {\n        let state = await this.getState();\n        state.actions.push(action);\n        await this.setState(state);\n    },\n    makeAction: function (action, message) {\n        return { action: action, message: message };\n    },\n    flushState: async function () {\n        const state = await this.getState();\n        await ClientCache.delete(ClientCache.Keys.INTER_PAGE_MANAGER);\n        return state;\n    },\n};\nexport default InterPageManager;\n","import ClientCache from \"../../cache-manager.ts\";\r\nimport DOC_ELEMENTS from \"../page-utilities/doc-element-references.ts\";\r\nimport PageUtils from \"../page-utilities/page-utils.js\";\r\nimport { HOME_PAGE_STATES } from \"../page-utilities/page-state-references.js\";\r\nimport UserManager from \"../../e7/user-manager.ts\";\r\nimport { WORLD_CODE_TO_CLEAN_STR } from \"../../e7/references.ts\";\r\n\r\nconst VALIDATION_SET = new Set(Object.values(HOME_PAGE_STATES));\r\n\r\nfunction validateState(state) {\r\n\tif (!VALIDATION_SET.has(state)) {\r\n\t\tconsole.error(`Invalid page state: ${state}`);\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction getContentBody(state) {\r\n\tswitch (state) {\r\n\t\tcase HOME_PAGE_STATES.SELECT_DATA:\r\n\t\t\treturn DOC_ELEMENTS.HOME_PAGE.SELECT_DATA_BODY;\r\n\t\tcase HOME_PAGE_STATES.SHOW_STATS:\r\n\t\t\treturn DOC_ELEMENTS.HOME_PAGE.SHOW_STATS_BODY;\r\n\t\tcase HOME_PAGE_STATES.LOAD_DATA:\r\n\t\t\treturn DOC_ELEMENTS.HOME_PAGE.LOAD_DATA_BODY;\r\n\t\tdefault:\r\n\t\t\tconsole.error(`Invalid page state: ${state}`);\r\n\t}\r\n}\r\n\r\nlet PageStateManager = {\r\n\tgetState: async function () {\r\n\t\treturn (\r\n\t\t\t(await ClientCache.get(ClientCache.Keys.HOME_PAGE_STATE)) ??\r\n\t\t\tHOME_PAGE_STATES.SELECT_DATA\r\n\t\t); // default to GET_DATA\r\n\t},\r\n\r\n\tsetState: async function (state) {\r\n\t\tif (!validateState(state)) return;\r\n\t\tawait ClientCache.cache(ClientCache.Keys.HOME_PAGE_STATE, state);\r\n\t},\r\n\r\n\tresetState: async function () {\r\n\t\tawait ClientCache.delete(ClientCache.Keys.HOME_PAGE_STATE);\r\n\t},\r\n};\r\n\r\nfunction homePageSetView(state) {\r\n\tif (!validateState(state)) return;\r\n\tfor (const otherState of Object.values(HOME_PAGE_STATES)) {\r\n\t\tif (state === otherState) continue;\r\n\t\tconst otherStateBody = getContentBody(otherState);\r\n\t\tconsole.log(`Hiding ${otherStateBody.id}`);\r\n\t\tPageUtils.setVisibility(otherStateBody, false);\r\n\t}\r\n\tconst contentBody = getContentBody(state);\r\n\tconsole.log(`Showing ${contentBody.id}`);\r\n\tPageUtils.setVisibility(contentBody, true);\r\n\tPageUtils.setVisibility(DOC_ELEMENTS.BODY_FOOTER_CONTAINER, true);\r\n}\r\n\r\nfunction homePageDrawUserInfo(user) {\r\n\tif (user) {\r\n\t\tDOC_ELEMENTS.HOME_PAGE.USER_NAME.innerText = user.name;\r\n\t\tDOC_ELEMENTS.HOME_PAGE.USER_ID.innerText = user.id;\r\n\t\tDOC_ELEMENTS.HOME_PAGE.USER_SERVER.innerText =\r\n\t\t\tWORLD_CODE_TO_CLEAN_STR[user.world_code];\r\n\t} else {\r\n\t\tDOC_ELEMENTS.HOME_PAGE.USER_NAME.innerText = \"(None)\";\r\n\t\tDOC_ELEMENTS.HOME_PAGE.USER_ID.innerText = \"(None)\";\r\n\t\tDOC_ELEMENTS.HOME_PAGE.USER_SERVER.innerText = \"(None)\";\r\n\t}\r\n}\r\n\r\nasync function homePageSetUser(user) {\r\n\tawait UserManager.clearUserData(); // clear any existing data\r\n\thomePageDrawUserInfo(user);\r\n\tif (user) {\r\n\t\tawait UserManager.setUser(user);\r\n\t}\r\n}\r\n\r\nasync function homePageClearUserData() {\r\n\tawait homePageSetUser(null);\r\n}\r\n\r\nlet HOME_PAGE_FNS = {\r\n\thomePageSetView: homePageSetView,\r\n\thomePageSetUser: homePageSetUser,\r\n\thomePageDrawUserInfo: homePageDrawUserInfo,\r\n\thomePageClearUserData: homePageClearUserData,\r\n};\r\n\r\nexport { PageStateManager, HOME_PAGE_STATES, HOME_PAGE_FNS, validateState };\r\n","import DOC_ELEMENTS from \"../page-utilities/doc-element-references.ts\";\r\n\r\nconst STYLES = {\r\n\tRED: \"text-danger\",\r\n\tGREEN: \"text-safe\",\r\n};\r\n\r\nclass TextPacket {\r\n\tconstructor(text, docElement, classList) {\r\n\t\tthis.text = text;\r\n\t\tthis.docElement = docElement;\r\n\t\tthis.classList = classList;\r\n\t}\r\n}\r\n\r\nfunction assertTextPacket(textPacket) {\r\n\tif (!textPacket instanceof TextPacket) {\r\n\t\tthrow new Error(\r\n\t\t\t\"Only instances of TextPacket can be passed to this function\"\r\n\t\t);\r\n\t}\r\n}\r\n\r\nlet TextController = {\r\n\tqueue: [],\r\n\tautoClearElements: [],\r\n\r\n\tTextPacket: TextPacket,\r\n\tSTYLES: STYLES,\r\n\r\n\tclearStyles: function (docElement) {\r\n\t\tfor (const style of Object.values(STYLES)) {\r\n\t\t\tdocElement.classList.remove(style);\r\n\t\t}\r\n\t},\r\n\r\n\twrite: function (TextPacket) {\r\n\t\tassertTextPacket(TextPacket);\r\n\t\tTextPacket.docElement.textContent = TextPacket.text;\r\n\t\tthis.clearStyles(TextPacket.docElement);\r\n\t\tTextPacket.classList.forEach((className) => {\r\n\t\t\tTextPacket.docElement.classList.add(className);\r\n\t\t});\r\n\t},\r\n\r\n\tpush: function (TextPacket) {\r\n\t\tassertTextPacket(TextPacket);\r\n\t\tthis.queue.push(TextPacket);\r\n\t},\r\n\r\n\tpushFromObj: function ({ text, docElement, classList }) {\r\n\t\tthis.push(new TextPacket(text, docElement, classList));\r\n\t},\r\n\r\n\tbindAutoClear: function (elementList) {\r\n\t\t// Only used to clear messages automatically when swiching page states\r\n\t\tfor (const element of elementList) {\r\n\t\t\tthis.autoClearElements.push(element);\r\n\t\t}\r\n\t},\r\n\r\n\tprocessQueue: function () {\r\n\t\tthis.queue.forEach((TextPacket) => {\r\n\t\t\tthis.write(TextPacket);\r\n\t\t});\r\n\t\tthis.queue = [];\r\n\t},\r\n\r\n\tclearMessages: function () {\r\n\t\tfor (const element of this.autoClearElements) {\r\n\t\t\telement.textContent = \"\";\r\n\t\t\tthis.clearStyles(element);\r\n\t\t}\r\n\t},\r\n};\r\n\r\nfunction queueSelectDataMsgGreen(msg) {\r\n\tTextController.push(\r\n\t\tnew TextPacket(msg, DOC_ELEMENTS.HOME_PAGE.SELECT_DATA_MSG, [STYLES.GREEN])\r\n\t);\r\n}\r\n\r\nfunction queueSelectDataMsgRed(msg) {\r\n\tTextController.push(\r\n\t\tnew TextPacket(msg, DOC_ELEMENTS.HOME_PAGE.SELECT_DATA_MSG, [STYLES.RED])\r\n\t);\r\n}\r\n\r\nfunction queueFilterMsgGreen(msg) {\r\n\tTextController.push(\r\n\t\tnew TextPacket(msg, DOC_ELEMENTS.HOME_PAGE.FILTER_MSG, [STYLES.GREEN])\r\n\t);\r\n}\r\n\r\nfunction queueFilterMsgRed(msg) {\r\n\tTextController.push(\r\n\t\tnew TextPacket(msg, DOC_ELEMENTS.HOME_PAGE.FILTER_MSG, [STYLES.RED])\r\n\t);\r\n}\r\n\r\nlet TextUtils = {\r\n\tqueueSelectDataMsgGreen,\r\n\tqueueSelectDataMsgRed,\r\n\tqueueFilterMsgGreen,\r\n\tqueueFilterMsgRed,\r\n};\r\n\r\nexport { TextController, TextPacket, TextUtils };\r\n","import { Safe } from \"../../html-safe.ts\";\nclass HomePageElements {\n    _SELECT_DATA_MSG = null;\n    _FILTER_MSG = null;\n    _SELECT_DATA_BODY = null;\n    _SHOW_STATS_BODY = null;\n    _LOAD_DATA_BODY = null;\n    _LATEST_BATTLES_BTN = null;\n    _UPLOAD_FORM = null;\n    _CSV_FILE = null;\n    _USER_QUERY_FORM_NAME = null;\n    _USER_QUERY_FORM_SERVER = null;\n    _AUTO_ZOOM_FLAG = null;\n    _FOOTER = null;\n    _USER_NAME = null;\n    _USER_ID = null;\n    _USER_SERVER = null;\n    _BATTLE_FILTER_TOGGLER = null;\n    _ID_SEARCH_FLAG = null;\n    _SEASON_DETAILS_TBL = null;\n    _PERFORMANCE_STATS_TBL = null;\n    _FIRST_PICK_STATS_TBL = null;\n    _PREBAN_STATS_TBL = null;\n    _PLAYER_TBL = null;\n    _OPPONENT_TBL = null;\n    _BATTLE_TBL = null;\n    _RANK_PLOT = null;\n    get SELECT_DATA_MSG() {\n        return this._SELECT_DATA_MSG ||= Safe.unwrapHtmlElt(\"select-data-msg\");\n    }\n    get FILTER_MSG() {\n        return this._FILTER_MSG ||= Safe.unwrapHtmlElt(\"filterMSG\");\n    }\n    get SELECT_DATA_BODY() {\n        return this._SELECT_DATA_BODY ||= Safe.unwrapHtmlElt(\"select-data-body\");\n    }\n    get SHOW_STATS_BODY() {\n        return this._SHOW_STATS_BODY ||= Safe.unwrapHtmlElt(\"show-stats-body\");\n    }\n    get LOAD_DATA_BODY() {\n        return this._LOAD_DATA_BODY ||= Safe.unwrapHtmlElt(\"load-data-body\");\n    }\n    get LATEST_BATTLES_BTN() {\n        return this._LATEST_BATTLES_BTN ||= Safe.unwrapHtmlElt(\"latest-battles-btn\");\n    }\n    get UPLOAD_FORM() {\n        return this._UPLOAD_FORM ||= Safe.unwrapHtmlElt(\"uploadForm\");\n    }\n    get CSV_FILE() {\n        return this._CSV_FILE ||= Safe.unwrapHtmlElt(\"csvFile\");\n    }\n    get USER_QUERY_FORM_NAME() {\n        return this._USER_QUERY_FORM_NAME ||= Safe.unwrapHtmlElt(\"user-query-form-name\");\n    }\n    get USER_QUERY_FORM_SERVER() {\n        return this._USER_QUERY_FORM_SERVER ||= Safe.unwrapHtmlElt(\"user-query-form-server\");\n    }\n    get AUTO_ZOOM_FLAG() {\n        return this._AUTO_ZOOM_FLAG ||= Safe.unwrapHtmlElt(\"auto-zoom-flag\");\n    }\n    get USER_NAME() {\n        return this._USER_NAME ||= Safe.unwrapHtmlElt(\"user-name\");\n    }\n    get USER_ID() {\n        return this._USER_ID ||= Safe.unwrapHtmlElt(\"user-id\");\n    }\n    get USER_SERVER() {\n        return this._USER_SERVER ||= Safe.unwrapHtmlElt(\"user-server\");\n    }\n    get BATTLE_FILTER_TOGGLE() {\n        return this._BATTLE_FILTER_TOGGLER ||= Safe.unwrapHtmlElt(\"filter-battle-table\");\n    }\n    get ID_SEARCH_FLAG() {\n        return this._ID_SEARCH_FLAG ||= Safe.unwrapHtmlElt(\"id-search-flag\");\n    }\n    get SEASON_DETAILS_TBL() {\n        return this._SEASON_DETAILS_TBL ||=\n            Safe.unwrapHtmlElt(\"season-details-tbl\");\n    }\n    get PERFORMANCE_STATS_TBL() {\n        return this._PERFORMANCE_STATS_TBL ||= Safe.unwrapHtmlElt(\"performance-stats-tbl\");\n    }\n    get FIRST_PICK_STATS_TBL() {\n        return this._FIRST_PICK_STATS_TBL ||= Safe.unwrapHtmlElt(\"first-pick-stats-tbl\");\n    }\n    get PREBAN_STATS_TBL() {\n        return this._PREBAN_STATS_TBL ||= Safe.unwrapHtmlElt(\"preban-stats-tbl\");\n    }\n    get PLAYER_TBL() {\n        return this._PLAYER_TBL ||= Safe.unwrapHtmlElt(\"player-tbl\");\n    }\n    get OPPONENT_TBL() {\n        return this._OPPONENT_TBL ||= Safe.unwrapHtmlElt(\"opponent-tbl\");\n    }\n    get BATTLES_TBL() {\n        return this._BATTLE_TBL ||= Safe.unwrapHtmlElt(\"battles-tbl\");\n    }\n    get RANK_PLOT() {\n        return this._RANK_PLOT ||= Safe.unwrapHtmlElt(\"rank-plot\");\n    }\n    get MESSAGE_ELEMENTS_LIST() {\n        return [this.SELECT_DATA_MSG, this.FILTER_MSG];\n    }\n}\nclass NavBarElements {\n    _SIDEBAR_HIDE_BTN = null;\n    get SIDEBAR_HIDE_BTN() {\n        return (this._SIDEBAR_HIDE_BTN ||= Safe.unwrapHtmlElt(\"sidebar-hide\"));\n    }\n    _CLEAR_DATA_BTN = null;\n    get CLEAR_DATA_BTN() {\n        return (this._CLEAR_DATA_BTN ||= Safe.unwrapHtmlElt(\"clear-data-btn\"));\n    }\n    _EXPORT_CSV_BTN = null;\n    get EXPORT_DATA_BTN() {\n        return (this._EXPORT_CSV_BTN ||= Safe.unwrapHtmlElt(\"export-data-btn\"));\n    }\n    _OFFICIAL_SITE_BTN = null;\n    get OFFICIAL_SITE_BTN() {\n        return (this._OFFICIAL_SITE_BTN ||= Safe.unwrapHtmlElt(\"official-site-btn\"));\n    }\n    _USER_NAME = null;\n    get USER_NAME() {\n        return (this._USER_NAME ||= Safe.unwrapHtmlElt(\"user-name\"));\n    }\n    _USER_ID = null;\n    get USER_ID() {\n        return (this._USER_ID ||= Safe.unwrapHtmlElt(\"user-id\"));\n    }\n    _USER_SERVER = null;\n    get USER_SERVER() {\n        return (this._USER_SERVER ||= Safe.unwrapHtmlElt(\"user-server\"));\n    }\n    _SIDEBAR_CONTROL = null;\n    get SIDEBAR_CONTROL() {\n        return (this._SIDEBAR_CONTROL ||= Safe.unwrapHtmlElt(\"sidebar-control\"));\n    }\n    _REFRESH_REFERENCES_BTN = null;\n    get REFRESH_REFERENCES_BTN() {\n        return (this._REFRESH_REFERENCES_BTN ||= Safe.unwrapHtmlElt(\"refresh-references-btn\"));\n    }\n}\nclass SEARCH_PAGE_ELEMENTS {\n    _SEARCH_DOMAINS = null;\n    get SEARCH_DOMAINS() {\n        return (this._SEARCH_DOMAINS ||= Safe.unwrapHtmlElt(\"search-domains\"));\n    }\n    _SEARCH_SUBMIT_BTN = null;\n    get SEARCH_SUBMIT_BTN() {\n        return (this._SEARCH_SUBMIT_BTN ||=\n            Safe.unwrapHtmlElt(\"search-submit-btn\"));\n    }\n    _SEARCH_FORM = null;\n    get SEARCH_FORM() {\n        return (this._SEARCH_FORM ||= Safe.unwrapHtmlElt(\"searchForm\"));\n    }\n    _SEARCH_TABLE_CONTAINER = null;\n    get SEARCH_TABLE_CONTAINER() {\n        return (this._SEARCH_TABLE_CONTAINER ||= Safe.unwrapHtmlElt(\"search-table-container\"));\n    }\n}\nclass FILTER_SYNTAX_PAGE_ELEMENTS {\n    _FILTER_SYNTAX_RULES_CONTAINER = null;\n    get FILTER_SYNTAX_RULES_CONTAINER() {\n        return (this._FILTER_SYNTAX_RULES_CONTAINER ||= Safe.unwrapHtmlElt(\"filter-syntax-rules-container\"));\n    }\n    _ALL_CONTENT_CONTAINER = null;\n    get ALL_CONTENT_CONTAINER() {\n        return (this._ALL_CONTENT_CONTAINER ||= Safe.unwrapHtmlElt(\"all-content-container\"));\n    }\n}\nclass INFO_PAGE_ELEMENTS {\n    IDS = {\n        OVERVIEW_CONTAINER: \"overview-container\",\n        OVERVIEW_CARD: \"overview-card\",\n        RETURN_BTN: \"info-return-btn\",\n        RETURN_CONTAINER: \"info-return-container\",\n        FILTER_SYNTAX_CONTAINER: \"filter-syntax-rules-container\",\n        FILTER_EXAMPLES_AND_TEST_CONTAINER: \"filter-syntax-examples-and-test-container\",\n        INFORMATION_CONTENT_LINKS_CONTAINER: \"information-content-links-container\",\n        ALL_CONTENT_CONTAINER: \"all-content-container\",\n        FILTER_OVERVIEW: \"filter-rules-card\",\n        FIELD_SYNTAX: \"fields-card\",\n        FUNCTION_SYNTAX: \"functions-card\",\n        OPERATOR_SYNTAX: \"operators-card\",\n        DATA_SYNTAX: \"declared-data-card\",\n        STRUCTURAL_SYNTAX: \"structural-syntax-card\",\n        EX_FILTER_1: \"exFilter1\",\n        EX_FILTER_2: \"exFilter2\",\n        EX_FILTER_3: \"exFilter3\",\n        EX_FILTER_4: \"exFilter4\",\n        EX_FILTER_5: \"exFilter5\",\n        TEST_FILTER_FORM: \"test-filter-form\",\n        TEST_FILTER_MESSAGE: \"filterMSG\",\n        TEST_SYNTAX_CARD: \"test-syntax-card\",\n        CHECK_SYNTAX_BTN: \"check-syntax-btn\",\n    };\n    _CACHE = {};\n    constructor() {\n        this._CACHE = {};\n    }\n    getFromId(id) {\n        return this._CACHE[id] ||= Safe.unwrapHtmlElt(id);\n    }\n}\nclass DocElements {\n    HOME_PAGE;\n    NAV_BAR;\n    SEARCH_PAGE;\n    FILTER_SYNTAX_PAGE;\n    INFO_PAGE;\n    _BODY_FOOTER_CONTAINER = null;\n    _FOOTER_WRAPPER = null;\n    constructor() {\n        this.HOME_PAGE = new HomePageElements();\n        this.NAV_BAR = new NavBarElements();\n        this.SEARCH_PAGE = new SEARCH_PAGE_ELEMENTS();\n        this.FILTER_SYNTAX_PAGE = new FILTER_SYNTAX_PAGE_ELEMENTS();\n        this.INFO_PAGE = new INFO_PAGE_ELEMENTS();\n    }\n    get BODY_FOOTER_CONTAINER() {\n        return (this._BODY_FOOTER_CONTAINER ??=\n            Safe.unwrapHtmlElt(\"body-footer-container\"));\n    }\n    get FOOTER_WRAPPER() {\n        return (this._FOOTER_WRAPPER ||= Safe.unwrapHtmlElt(\"footer-wrapper\"));\n    }\n}\nconst DOC_ELEMENTS = new DocElements();\nexport default DOC_ELEMENTS;\n","import { PageStateManager, HOME_PAGE_STATES, } from \"../orchestration/page-state-manager.js\";\nimport { CSVHeaders, E7_GG_HOME_URL, E7_STOVE_HOME_URL, WORLD_CODE_TO_CLEAN_STR, } from \"../../e7/references.ts\";\nimport UserManager from \"../../e7/user-manager.ts\";\nimport DOC_ELEMENTS from \"./doc-element-references.ts\";\nimport IPM from \"../orchestration/inter-page-manager.ts\";\nimport { ContentManager } from \"../../content-manager.ts\";\nimport { LangManager } from \"../../lang-manager.ts\";\nimport { ExportImportFns } from \"../../export-import-data-tools.ts\";\nfunction navToHome() {\n    // @ts-ignore\n    window.location.href = URL_UTILS.HOME_PAGE_URL;\n}\n// used for pages outside of home page to handle nav bar (will always switch pages)\nfunction addNavListeners() {\n    document.querySelectorAll(\".nav-link\").forEach((link) => {\n        link.addEventListener(\"click\", async function (event) {\n            if (!(\"dataset\" in link) || !(link.dataset && typeof link.dataset === \"object\" && \"nav\" in link.dataset))\n                return;\n            const navType = link.dataset.nav;\n            console.log(\"Clicked nav item:\", navType);\n            if (Object.values(HOME_PAGE_STATES).includes(navType)) {\n                if (navType === HOME_PAGE_STATES.SELECT_DATA) {\n                    await PageStateManager.setState(HOME_PAGE_STATES.SELECT_DATA);\n                    navToHome();\n                }\n                else if (navType === HOME_PAGE_STATES.SHOW_STATS) {\n                    const user = await UserManager.getUser();\n                    // Stats will not show if there is no active user ; will redirect to select data view with error\n                    if (!user) {\n                        await PageStateManager.setState(HOME_PAGE_STATES.SELECT_DATA);\n                        await IPM.pushAction({\n                            message: \"Active user not found; you must either query a valid user or upload battles to view hero stats.\",\n                            action: IPM.ACTIONS.SHOW_NO_USER_MSG\n                        });\n                        navToHome();\n                    }\n                    else {\n                        await PageStateManager.setState(HOME_PAGE_STATES.SHOW_STATS);\n                        navToHome();\n                    }\n                }\n            }\n        });\n    });\n}\nfunction addClearDataBtnListener() {\n    DOC_ELEMENTS.NAV_BAR.CLEAR_DATA_BTN.addEventListener(\"click\", async function () {\n        const user = await UserManager.getUser();\n        if (user) {\n            await PageStateManager.setState(HOME_PAGE_STATES.SELECT_DATA);\n            await IPM.pushAction({ action: IPM.ACTIONS.CLEAR_USER });\n        }\n        else {\n            await PageStateManager.setState(HOME_PAGE_STATES.SELECT_DATA);\n            await IPM.pushAction({ action: IPM.ACTIONS.SHOW_DATA_ALREADY_CLEARED_MSG });\n        }\n        navToHome();\n    });\n}\n/**\n * Simulates hover on mobile devices for \"brace\" buttons (buttons with a dashed\n * border). When a button is touched, it adds a class to simulate a hover effect.\n * The class is automatically removed after 150ms.\n */\nfunction addBraceButtonListeners() {\n    const braceButtons = [\n        DOC_ELEMENTS.NAV_BAR.CLEAR_DATA_BTN,\n        DOC_ELEMENTS.NAV_BAR.EXPORT_DATA_BTN,\n        DOC_ELEMENTS.NAV_BAR.OFFICIAL_SITE_BTN\n    ];\n    console.log(\"Adding brace button listeners\");\n    braceButtons.forEach((btn) => {\n        // Simulate hover on mobile\n        btn.addEventListener(\"touchstart\", () => {\n            btn.classList.add(\"touch-hover\");\n            // Auto-expire hover\n            setTimeout(() => btn.classList.remove(\"touch-hover\"), 150);\n        });\n    });\n}\nfunction writeUserInfo(user, lang = \"en\") {\n    if (user) {\n        DOC_ELEMENTS.NAV_BAR.USER_NAME.innerText = user.name;\n        DOC_ELEMENTS.NAV_BAR.USER_ID.innerText = `${user.id}`;\n        DOC_ELEMENTS.NAV_BAR.USER_SERVER.innerText =\n            WORLD_CODE_TO_CLEAN_STR[user.world_code];\n        DOC_ELEMENTS.NAV_BAR.OFFICIAL_SITE_BTN.onclick = () => {\n            window.open(generateGGLink(user, lang), \"_blank\", \"noopener,noreferrer\");\n        };\n    }\n    else {\n        DOC_ELEMENTS.NAV_BAR.USER_NAME.innerText = \"(None)\";\n        DOC_ELEMENTS.NAV_BAR.USER_ID.innerText = \"(None)\";\n        DOC_ELEMENTS.NAV_BAR.USER_SERVER.innerText = \"(None)\";\n        DOC_ELEMENTS.NAV_BAR.OFFICIAL_SITE_BTN.onclick = () => {\n            window.open(E7_GG_HOME_URL, \"_blank\", \"noopener,noreferrer\");\n        };\n    }\n}\nexport function convertBattlesToCSV(arr) {\n    const headers = CSVHeaders;\n    const csvRows = [];\n    // add headers\n    csvRows.push(headers.map(h => `\"${h}\"`).join(\",\"));\n    // add rows\n    for (const obj of arr) {\n        const values = headers.map(h => {\n            let v = obj[h] ?? \"\";\n            if (Array.isArray(v))\n                v = JSON.stringify(v).replace(/\"/g, '\"\"');\n            return `\"${v}\"`;\n        });\n        csvRows.push(values.join(\",\"));\n    }\n    return csvRows.join(\"\\n\");\n}\nexport function downloadCSV(csv, filename) {\n    const BOM = \"\\uFEFF\";\n    const csvFile = new Blob([BOM + csv], { type: \"text/csv;charset=utf-8;\" });\n    const downloadLink = document.createElement(\"a\");\n    downloadLink.download = filename;\n    downloadLink.href = window.URL.createObjectURL(csvFile);\n    downloadLink.style.display = \"none\";\n    document.body.appendChild(downloadLink);\n    downloadLink.click();\n    document.body.removeChild(downloadLink);\n}\nfunction addExportDataBtnListener() {\n    DOC_ELEMENTS.NAV_BAR.EXPORT_DATA_BTN.addEventListener(\"click\", async function () {\n        const user = await ContentManager.UserManager.getUser();\n        if (!user) {\n            await IPM.pushAction({\n                message: \"User not found; cannot export data without an active user\",\n                action: IPM.ACTIONS.SHOW_NO_USER_MSG,\n            });\n            await PageStateManager.setState(HOME_PAGE_STATES.SELECT_DATA);\n            navToHome();\n            return;\n        }\n        await ExportImportFns.triggerDownload();\n    });\n}\nasync function eraseUserFromPage() {\n    await UserManager.clearUserData();\n    writeUserInfo(null);\n}\nasync function setUserOnPage(user) {\n    await UserManager.setUser(user);\n    const lang = await LangManager.getLang();\n    writeUserInfo(user, lang);\n}\nfunction generateGGLink(user, lang) {\n    const url = `${E7_STOVE_HOME_URL}/${lang}/gg/battlerecord/${user.world_code}/${user.id}`;\n    return url;\n}\nasync function initialize() {\n    const user = await UserManager.getUser();\n    writeUserInfo(user);\n    addNavListeners();\n    addClearDataBtnListener();\n    addExportDataBtnListener();\n    addBraceButtonListeners();\n}\nlet NavBarUtils = {\n    addNavListeners: addNavListeners,\n    addClearDataBtnListener: addClearDataBtnListener,\n    writeUserInfo: writeUserInfo,\n    initialize: initialize,\n    navToHome: navToHome,\n    addExportDataBtnListener: addExportDataBtnListener,\n    addBraceButtonListeners: addBraceButtonListeners,\n    eraseUserFromPage: eraseUserFromPage,\n    setUserOnPage: setUserOnPage,\n};\nexport { NavBarUtils };\n","export const HOME_PAGE_STATES = {\r\n\tSELECT_DATA: \"select-data\",\r\n\tSHOW_STATS: \"show-stats\",\r\n\tLOAD_DATA: \"load-data\",\r\n};","import HeroManager from \"../../e7/hero-manager.ts\";\r\nimport { FilterParser } from \"../../e7/filter-parsing/filter-parser.ts\";\r\nimport {\r\n\tTextController,\r\n\tTextPacket,\r\n} from \"../orchestration/text-controller.js\";\r\n\r\nlet PageUtils = {\r\n\tvalidateFilterSyntax: async function (str) {\r\n\t\tconst HeroDicts = await HeroManager.getHeroDicts();\r\n\t\tlet filterMSG = document.getElementById(\"filterMSG\");\r\n\t\ttry {\r\n\t\t\tlet parser = await FilterParser.fromFilterStr(str, HeroDicts);\r\n\t\t\tconsole.log(parser.asString());\r\n\t\t\tTextController.write(\r\n\t\t\t\tnew TextPacket(\"Validation Passed\", filterMSG, [\r\n\t\t\t\t\tTextController.STYLES.GREEN,\r\n\t\t\t\t])\r\n\t\t\t);\r\n\t\t\treturn true;\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t\tTextController.write(\r\n\t\t\t\tnew TextPacket(`Validation Failed: ${err.message}`, filterMSG, [\r\n\t\t\t\t\tTextController.STYLES.RED,\r\n\t\t\t\t])\r\n\t\t\t);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\r\n\tsetScrollPercent: function (percent) {\r\n\t\tconsole.log(`Scrolling to ${percent}%`);\r\n\t\tconst maxScroll =\r\n\t\t\tdocument.documentElement.scrollHeight - window.innerHeight;\r\n\t\tconst targetScroll = (percent / 100) * maxScroll;\r\n\t\t// Temporarily disable CSS smooth scrolling\r\n\t\tconst html = document.documentElement;\r\n\t\tconst prevScrollBehavior = html.style.scrollBehavior;\r\n\t\thtml.style.scrollBehavior = \"auto\";\r\n\r\n\t\twindow.scrollTo({ top: targetScroll });\r\n\r\n\t\t// Restore previous behavior\r\n\t\thtml.style.scrollBehavior = prevScrollBehavior;\r\n\t},\r\n\r\n\tgetScrollPercent: function () {\r\n\t\tconst scrollTop = window.scrollY || document.documentElement.scrollTop;\r\n\t\tconst scrollHeight = document.documentElement.scrollHeight;\r\n\t\tconst clientHeight = window.innerHeight;\r\n\t\tconst maxScroll = scrollHeight - clientHeight;\r\n\r\n\t\tif (maxScroll === 0) return 0; // avoid division by zero\r\n\r\n\t\treturn (scrollTop / maxScroll) * 100;\r\n\t},\r\n\r\n\tsetVisibility(element, visible) {\r\n\t\tif (visible) {\r\n\t\t\telement.classList.remove(\"d-none\");\r\n\t\t} else {\r\n\t\t\telement.classList.add(\"d-none\");\r\n\t\t}\r\n\t},\r\n};\r\n\r\nexport default PageUtils;\r\n","export function toTitleCase(str) {\n    return str.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n}\nexport function strArrToCountMap(strArr) {\n    let acc = {};\n    return strArr.reduce((acc, elt) => {\n        acc[elt] = (acc[elt] || 0) + 1;\n        return acc;\n    }, acc);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var hasSymbol = typeof Symbol === \"function\";\nvar webpackQueues = hasSymbol ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = hasSymbol ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = hasSymbol ? Symbol(\"webpack error\") : \"__webpack_error__\";\n\n\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tvar handle = (deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}\n\tvar done = (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue))\n\tbody(handle, done);\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./static/assets/js/pages/default.ts\");\n",""],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","enumerable","configurable","writable","_invoke","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","RS_BATTLE_URL","HERO_URL","USER_URL","SEASON_URL","ARTIFACT_JSON_URL","PYAPI","test","data","console","log","rank_plot","fetchFromPython","_fetchFromPython","_callee","url","response","_context","fetch","ok","json","_x","fetchHeroData","_fetchHeroData","_callee2","_context2","rsFetchBattleData","_rsFetchBattleData","_callee3","user","_context3","Error","method","headers","body","JSON","stringify","_x2","fetchSeasonDetails","_fetchSeasonDetails","_callee4","seasonDetails","_context4","success","parse","error","fetchArtifactJson","_fetchArtifactJson","_callee5","artifactJson","_context5","fetchUser","_fetchUser","_callee6","userData","_context6","name","world_code","id","concat","foundUser","_x3","ClientCache","DOC_ELEMENTS","PageUtils","HOME_PAGE_STATES","UserManager","WORLD_CODE_TO_CLEAN_STR","VALIDATION_SET","Set","values","validateState","state","has","getContentBody","SELECT_DATA","HOME_PAGE","SELECT_DATA_BODY","SHOW_STATS","SHOW_STATS_BODY","LOAD_DATA","LOAD_DATA_BODY","PageStateManager","getState","_getState","_yield$ClientCache$ge","_t","_t2","_t3","get","Keys","HOME_PAGE_STATE","setState","_setState","cache","resetState","_resetState","homePageSetView","_i","_Object$values","otherState","otherStateBody","setVisibility","contentBody","BODY_FOOTER_CONTAINER","homePageDrawUserInfo","USER_NAME","innerText","USER_ID","USER_SERVER","homePageSetUser","_homePageSetUser","clearUserData","setUser","homePageClearUserData","_homePageClearUserData","HOME_PAGE_FNS","STYLES","RED","GREEN","TextPacket","_createClass","text","docElement","classList","_classCallCheck","assertTextPacket","textPacket","TextController","queue","autoClearElements","clearStyles","style","remove","write","textContent","forEach","className","add","push","pushFromObj","_ref","bindAutoClear","elementList","_iterator","_createForOfIteratorHelper","_step","s","element","err","processQueue","_this","clearMessages","_iterator2","_step2","queueSelectDataMsgGreen","msg","SELECT_DATA_MSG","queueSelectDataMsgRed","queueFilterMsgGreen","FILTER_MSG","queueFilterMsgRed","TextUtils","HeroManager","FilterParser","validateFilterSyntax","_validateFilterSyntax","str","HeroDicts","filterMSG","parser","getHeroDicts","document","getElementById","fromFilterStr","asString","message","setScrollPercent","percent","maxScroll","documentElement","scrollHeight","window","innerHeight","targetScroll","html","prevScrollBehavior","scrollBehavior","scrollTo","top","getScrollPercent","scrollTop","scrollY","clientHeight","visible"],"sourceRoot":""}