/*! For license information please see search.2f4ff3a7d66ef55bb860.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e,n,r,o,a={40:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(412);async function o(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error: status: ${e.status}`);const n=await e.json();return Object.keys(n),n}catch(t){return console.error("Error fetching global user data:",t),null}}const a={fetchHeroJSON:async function(t=null){let e=await o("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");return e?(t&&e[t]?e=e[t]:t&&!e[t]&&(console.error("Could not find hero data for language:",t),e=null),e):null},fetchUserJSON:async function(t){if(t=t.replace("world_",""),![...r.WB].some(e=>e.replace("world_","")===t))return console.error(`Could not find world code: ${t}`),null;const e=`https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_${t}.json`,n=await o(e);return n&&"object"==typeof n&&"users"in n&&Array.isArray(n.users)&&n.users.length,n},fetchArtifactJSON:async function(t=null){let e=await o("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_artifact.json"),n=null;if(e&&t&&"object"==typeof e&&t in e){let n=e;if(Array.isArray(n[t]))return n[t]}return n},fetchInfo:async function(t,e,n="en"){const r=new URLSearchParams({nick_no:t,world_code:e,lang:n});try{const t=await fetch("https://epic7.onstove.com/gg/gameApi/getUserInfo",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!t.ok)return console.error("Error fetching battle list:",t.status,t.statusText),null;return await t.json()}catch(t){return console.error("Request failed:",t),null}}}},54:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(207);class o extends Error{constructor(t){super(t),this.name="Filter Syntax Exception"}}class a extends Error{constructor(t){super(t),this.name="Filter Type Exception"}}class i extends Error{constructor(t){super(t),this.name="Filter Validation Error"}}const s={"(":")","{":"}",'"':'"',"'":"'"},c={"'":'"','"':"'"},u=Object.fromEntries(Object.entries(s).filter(([t,e])=>t!==e).map(([t,e])=>[e,t]));function l(t){const e={};for(const n of t)e[n]=(e[n]||0)+1;return e}const f={SyntaxException:o,TypeException:a,ValidationError:i,getCharCounts:l,tokenizeWithNestedEnclosures:function(t,e=" ",n=0,r=!0){const a=[];let i="",f=[];for(let h=0;h<t.length;h++){const p=t[h];if(e.includes(p)&&f.length===n)i&&(a.push(r?i.trim():i),i="");else if(u[p]){const e=u[p];if(f.length>n&&(i+=p),f[f.length-1]!==e){const e=l(t);throw(e["'"]||0)%2!=0||(e['"']||0)%2!=0?new o(`Error tokenizing: Unbalanced closing character at position ${h}; got string: '${t}' ; if a str type has quote characters in it, wrap it in the opposite quote character.`):new o(`Error tokenizing: Unbalanced closing character at position ${h}; got string: '${t}'`)}f.pop()}else f.length>=n&&(i+=p),!s[p]||c[p]&&f[f.length-1]===c[p]||(f[f.length-1]===s[p]&&p===s[p]?f.pop():f.push(p))}if(f.length>0)throw new Error(`Unbalanced enclosures in input string; unresolved characters from enclosure stack: [ ${f.join(", ")} ]`);return i&&a.push(r?i.trim():i),a},parseDate:function(t){if(!r.L.DATE_LITERAL_RE.test(t))throw new o(`Invalid date; must be in the format: YYYY-MM-DD ( regex: ${r.L.DATE_LITERAL_RE.source} ); got: '${t}'`);const e=t.split(" ")[0],n=new Date(`${e}T00:00:00`);if(isNaN(n.getTime()))throw new o(`Invalid date; could not be parsed as a valid date; got: '${t}'`);const a=n.toISOString().split("T")[0],[i,s,c]=a.split("-").map(Number);if(n.getFullYear()!==i||n.getMonth()+1!==s||n.getDate()!==c)throw new o(`Invalid date; parsed date: ${n.toISOString()} does not match passed in string: ${e}`);return n.toISOString(),n.constructor.name,n},tryConvert:function(t,e,n,r=null){null===r&&(r=`Could not convert ${n} to ${e}`);try{return t(n)}catch(t){throw new a(`${r}: ${t.message}`)}},trimSurroundingQuotes:function(t){return t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}}},84:(t,e,n)=>{n.d(e,{S:()=>h});var r=n(834),o=n(528),a=n(207),i=n(205),s=n(411),c=n(971),u=n(54),l=n(667);function f(t){return function(t,e,n){for(let r of t)if(!e.has(r))throw new u.A.SyntaxException(`Invalid character within <${n}> ; ' ${r} ' is not allowed; got string: '${t}'`)}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),c.yL,"Main Filter String"),t=t.toLowerCase()}class h{_filters;rawString;preParsedString;references;constructor(){this._filters=[],this.rawString="",this.preParsedString="",this.references={HeroDicts:null,ARTIFACT_LOWERCASE_STRINGS_MAP:{},SEASON_DETAILS:[]}}async addReferences(t=null){if(null===(t=t||await o.A.getHeroDicts()))throw new Error("Hero Manager could not be retrieved to parse filters.");const e=await i.A.getSeasonDetails();if(null===e)throw new Error("Season Details could not be retrieved to parse filters.");const n=await r.A.getArtifactLowercaseNameMap();this.references={HeroDicts:t,ARTIFACT_LOWERCASE_STRINGS_MAP:n,SEASON_DETAILS:e}}getFilters(){return function(t){const e=[],n=[];for(const r of t)r instanceof s.y4?e.push(r):n.push(r);return[...e,...n]}(this._filters)}asString(){const t=c.RG;return`[\n${this._filters.map(e=>e.asString(t)).join(";\n")};\n]`}static async getFiltersFromCache(t=null){const e=await l.A.get(l.A.Keys.FILTER_STR);if(null===e)return[];return(await this.fromFilterStr(e,t)).getFilters()}static async fromFilterStr(t,e=null){const n=new h;return n.rawString=t,await n.addReferences(e),n.preParsedString=f(t),n._filters=n.parse(n.preParsedString),n}parseList(t){return t.reduce((t,e)=>(t.push(...this.parse(e)),t),[])}parse(t){if(""===(t=t.trim()))return[];if(t.includes(";")){const e=t.split(";");return this.parseList(e)}const e=t.split("(")[0].replace(/p[1-2]\./i,""),n=u.A.tokenizeWithNestedEnclosures(t,",",1,!0);switch(e){case s.eR.AND:case s.eR.OR:case s.eR.NOT:case s.eR.XOR:const r=function(t,e){for(const n of t)if(n instanceof s.y4)throw new u.A.SyntaxException(`Global filters not allowed in clause functions; got: ${n.asString()} from string: "${e}"`);return t.filter(t=>t instanceof s.Qo)}(this.parseList(n),t);return[new s.CO[e](...r)];case s.eR.LAST_N:return[new s.c2.LAST_N(t)];case s.eR.EQUIPMENT:case s.eR.ARTIFACT:case s.eR.CR:return[new s.CO[e](t,this.references)];default:if(a.L.FUNCTION_CALL_RE.test(t))throw new u.A.SyntaxException(`Filter String is not a valid function call but a parenthese block was detected; got: ${t}`);return[new s.c2.BASE_FILTER(t,this.references)]}}}},92:(t,e,n)=>{function r(t){return t.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}function o(t){return t.reduce((t,e)=>(t[e]=(t[e]||0)+1,t),{})}n.d(e,{J:()=>o,S:()=>r})},121:(t,e,n)=>{n.d(e,{DG:()=>o.D,qD:()=>d});var r=n(667),o=(n(987),n(940),n(823));n(771),n(412);function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function s(n,r,o,a){var s=r&&r.prototype instanceof u?r:u,l=Object.create(s.prototype);return i(l,"_invoke",function(n,r,o){var a,i,s,u=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,s=t,h.n=n,c}};function p(n,r){for(i=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=h.p,d=a[2];n>3?(o=d===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,h.v=r,h.n=a[1]):p<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),i=l,s=d;(e=i<2?t:s)||!f;){a||(i?i<3?(i>1&&(h.n=-1),p(i,s)):h.n=s:h.v=s);try{if(u=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==c)break}catch(e){a=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),p=f.prototype=u.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,i(p,"constructor",f),i(f,"constructor",l),l.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(p),i(p,o,"Generator"),i(p,r,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:s,m:d}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){i(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},i(t,e,n,r)}function s(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){s(a,r,o,i,c,"next",t)}function c(t){s(a,r,o,i,c,"throw",t)}i(void 0)})}}var u=new Set(Object.values(o.D));function l(t){return!!u.has(t)||(console.error("Invalid page state: ".concat(t)),!1)}var f,h,p,d={getState:(p=c(a().m(function t(){var e,n,i,s;return a().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.A.get(r.A.Keys.HOME_PAGE_STATE);case 1:if(i=e=t.v,!(n=null!==i)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}s=e,t.n=4;break;case 3:s=o.D.SELECT_DATA;case 4:return t.a(2,s)}},t)})),function(){return p.apply(this,arguments)}),setState:(h=c(a().m(function t(e){return a().w(function(t){for(;;)switch(t.n){case 0:if(l(e)){t.n=1;break}return t.a(2);case 1:return t.n=2,r.A.cache(r.A.Keys.HOME_PAGE_STATE,e);case 2:return t.a(2)}},t)})),function(t){return h.apply(this,arguments)}),resetState:(f=c(a().m(function t(){return a().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.A.delete(r.A.Keys.HOME_PAGE_STATE);case 1:return t.a(2)}},t)})),function(){return f.apply(this,arguments)})}},136:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(667);const o={ACTIONS:{CLEAR_USER:"CLEAR_USER",SHOW_NO_USER_MSG:"SHOW_NO_USER_MSG",SHOW_DATA_ALREADY_CLEARED_MSG:"SHOW_DATA_ALREADY_CLEARED_MSG",QUERY_USER:"QUERY_USER"},getState:async function(){return await r.A.get(r.A.Keys.INTER_PAGE_MANAGER)??{actions:[],messages:[]}},setState:async function(t){await r.A.cache(r.A.Keys.INTER_PAGE_MANAGER,t)},pushActions:async function(t){let e=await this.getState();e.actions.push(...t),await this.setState(e)},pushMessages:async function(t){let e=await this.getState();e.messages.push(...t),await this.setState(e)},pushState:async function(t){let e=await this.getState();e.actions.push(...t.actions),e.messages.push(...t.messages),await this.setState(e)},flushState:async function(){const t=await this.getState();return await r.A.delete(r.A.Keys.INTER_PAGE_MANAGER),t}}},141:(t,e,n)=>{n.d(e,{d:()=>E,j:()=>_});var r=n(528),o=n(834),a=n(412),i=n(92);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){var n=function(t){var n,o;return null!==(n=null===(o=r.A.getHeroByName(t,e))||void 0===o?void 0:o.prime)&&void 0!==n?n:e.Fodder.prime},o=function(t,e){return t*e};t[a.Lx.P1_PICKS_PRIMES]=t[a.Lx.P1_PICKS].map(n),t[a.Lx.P2_PICKS_PRIMES]=t[a.Lx.P2_PICKS].map(n),t[a.Lx.P1_PICKS_PRIME_PRODUCT]=t[a.Lx.P1_PICKS_PRIMES].reduce(o,1),t[a.Lx.P2_PICKS_PRIME_PRODUCT]=t[a.Lx.P2_PICKS_PRIMES].reduce(o,1),t[a.Lx.P1_PREBANS_PRIMES]=t[a.Lx.P1_PREBANS].map(n),t[a.Lx.P2_PREBANS_PRIMES]=t[a.Lx.P2_PREBANS].map(n),t[a.Lx.P1_PREBANS_PRIME_PRODUCT]=t[a.Lx.P1_PREBANS_PRIMES].reduce(o,1),t[a.Lx.P2_PREBANS_PRIME_PRODUCT]=t[a.Lx.P2_PREBANS_PRIMES].reduce(o,1)}var h="p1",p="p2";function d(t,e,n){var s,c=function(t){var n,o;return null!==(n=null===(o=r.A.getHeroByCode(t,e))||void 0===o?void 0:o.name)&&void 0!==n?n:e.Fodder.name},u=function(e,r){return r.map(function(r,a){return r?function(t){return o.A.convertCodeToName(t,n)||"None"}(r):function(e,n){return e===h?t.p2_postban===t.p1_picks[n]:t.p1_postban===t.p2_picks[n]}(e,a)?"n/a":"None"})},d=function(t){return t.map(function(t){return t.map(function(t){return a.pg[t]||t})})},E=t.cr_bar.find(function(t){return 100===t[1]}),_=!!E&&t.p1_picks.includes(E[0]),A=(l(l(l(l(l(l(l(l(l(l(s={},a.Lx.SEASON,t.season_name||"None"),a.Lx.SEASON_CODE,t.season_code||"None"),a.Lx.DATE_TIME,t.date_time),a.Lx.SECONDS,t.seconds),a.Lx.TURNS,t.turns),a.Lx.SEQ_NUM,t.seq_num),a.Lx.P1_ID,t.p1_id.toString()),a.Lx.P1_SERVER,a.DB[t.p1_server]||t.p1_server||"None"),a.Lx.P2_ID,t.p2_id.toString()),a.Lx.P2_SERVER,a.DB[t.p2_server]||t.p2_server||"None"),l(l(l(l(l(l(l(l(l(l(s,a.Lx.P1_LEAGUE,(0,i.S)(t.p1_league)||"None"),a.Lx.P2_LEAGUE,(0,i.S)(t.p2_league)||"None"),a.Lx.P1_POINTS,t.p1_win_score),a.Lx.POINT_GAIN,t.p1_point_delta||null),a.Lx.WIN,1===t.win),a.Lx.FIRST_PICK,1===t.first_pick),a.Lx.FIRST_TURN,!!_),a.Lx.FIRST_TURN_HERO,E?c(E[0]):"n/a"),a.Lx.CR_BAR,t.cr_bar.map(function(t){return t&&2==t.length?[c(t[0]),t[1]]:["n/a",0]})),a.Lx.P1_PREBANS,t.p1_prebans.map(c)),l(l(l(l(l(l(l(l(l(l(s,a.Lx.P2_PREBANS,t.p2_prebans.map(c)),a.Lx.P1_PICKS,t.p1_picks.map(c)),a.Lx.P2_PICKS,t.p2_picks.map(c)),a.Lx.P1_POSTBAN,c(t.p1_postban)),a.Lx.P2_POSTBAN,c(t.p2_postban)),a.Lx.P1_EQUIPMENT,d(t.p1_equipment)),a.Lx.P2_EQUIPMENT,d(t.p2_equipment)),a.Lx.P1_ARTIFACTS,u(h,t.p1_artifacts)),a.Lx.P2_ARTIFACTS,u(p,t.p2_artifacts)),a.Lx.P1_MVP,c(t.p1_mvp)),l(s,a.Lx.P2_MVP,c(t.p2_mvp)));return f(A,e),A}function E(t,e,n){n=null!=n?n:o.A.getArtifactCodeToNameMap();var r,a=[],i=c(t);try{for(i.s();!(r=i.n()).done;){var s=d(r.value,e,n);a.push([s["Seq Num"],s])}}catch(t){i.e(t)}finally{i.f()}return Object.fromEntries(a)}function _(t,e){var n=t.map(function(t){var n,r=c(a.E_);try{for(r.s();!(n=r.n()).done;){var o=n.value;t[o]=JSON.parse(t[o])}}catch(t){r.e(t)}finally{r.f()}var s,u=c(a.kh);try{for(u.s();!(s=u.n()).done;){var l=s.value;t[l]="true"===t[l].toLowerCase()}}catch(t){u.e(t)}finally{u.f()}var h,p=c(a.GV);try{for(p.s();!(h=p.n()).done;){var d=h.value;t[d]=Number(t[d].replace("'",""))}}catch(t){p.e(t)}finally{p.f()}var E,_=c(a.uz);try{for(_.s();!(E=_.n()).done;){var A=E.value;t[A]=(0,i.S)(t[A])}}catch(t){_.e(t)}finally{_.f()}return f(t,e),t});return Object.fromEntries(n.map(function(t){return[t["Seq Num"],t]}))}},149:(t,e,n)=>{n.d(e,{W:()=>o});var r=n(836);const o={changeLang:async function(t){await r.n.ClientCache.setLang(t),await r.n.HeroManager.fetchAndCacheHeroManager(t),window.location.reload()},getLang:async function(){return await r.n.ClientCache.getLang()}}},172:(t,e,n)=>{n.d(e,{GF:()=>h,ev:()=>l});n(987);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}var u={RED:"text-danger",GREEN:"text-safe"},l=s(function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.docElement=n,this.classList=r});function f(t){if(!t instanceof l)throw new Error("Only instances of TextPacket can be passed to this function")}var h={queue:[],autoClearElements:[],TextPacket:l,STYLES:u,clearStyles:function(t){for(var e=0,n=Object.values(u);e<n.length;e++){var r=n[e];t.classList.remove(r)}},write:function(t){f(t),t.docElement.textContent=t.text,this.clearStyles(t.docElement),t.classList.forEach(function(e){t.docElement.classList.add(e)})},push:function(t){f(t),this.queue.push(t)},pushFromObj:function(t){var e=t.text,n=t.docElement,r=t.classList;this.push(new l(e,n,r))},bindAutoClear:function(t){var e,n=o(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.autoClearElements.push(r)}}catch(t){n.e(t)}finally{n.f()}},processQueue:function(){var t=this;this.queue.forEach(function(e){t.write(e)}),this.queue=[]},clearMessages:function(){var t,e=o(this.autoClearElements);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.textContent="",this.clearStyles(n)}}catch(t){e.e(t)}finally{e.f()}}}},205:(t,e,n)=>{n.d(e,{A:()=>d});var r=n(667),o=n(275),a=n(412);function i(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var i=r&&r.prototype instanceof u?r:u,l=Object.create(i.prototype);return s(l,"_invoke",function(n,r,o){var a,i,s,u=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,s=t,h.n=n,c}};function p(n,r){for(i=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=h.p,d=a[2];n>3?(o=d===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,h.v=r,h.n=a[1]):p<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),i=l,s=d;(e=i<2?t:s)||!f;){a||(i?i<3?(i>1&&(h.n=-1),p(i,s)):h.n=s:h.v=s);try{if(u=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==c)break}catch(e){a=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),p=f.prototype=u.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,s(p,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,o,"GeneratorFunction"),s(p),s(p,o,"Generator"),s(p,r,function(){return this}),s(p,"toString",function(){return"[object Generator]"}),(i=function(){return{w:a,m:d}})()}function s(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}s=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){s(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},s(t,e,n,r)}function c(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){c(a,r,o,i,s,"next",t)}function s(t){c(a,r,o,i,s,"throw",t)}i(void 0)})}}var l,f,h,p={fetchAndCacheSeasonDetails:(h=u(i().m(function t(){var e,n,s,c,u,l,f;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,o.A.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))}),t["Season Number"]=String(t["Season Number"])}),n.sort(function(t,e){return parseInt(t["Season Number"])-parseInt(e["Season Number"])}),s=[n[0]],c=n[0],n.slice(1).forEach(function(t){var e=new Date(+c.range[1]+a.CZ),n=new Date(+t.range[0]-a.CZ),r=c["Season Number"]+"f",o={"Season Number":r,Code:"pvp_rta_ss"+r,Season:"Pre ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};s.push(o),s.push(t),c=t}),c.range[1]<new Date&&(u=new Date(+s.at(-1).range[1]+a.CZ),l=c["Season Number"]+"f",f={"Season Number":l,Code:"pvp_rta_ss"+l,Season:"Active Pre-Season",Start:u.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[u,new Date]},s.push(f)),s.reverse(),t.n=3,r.A.cache(r.A.Keys.SEASON_DETAILS,s);case 3:return t.a(2,s)}},t)})),function(){return h.apply(this,arguments)}),getSeasonDetails:(f=u(i().m(function t(){var e,n;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.A.get(r.A.Keys.SEASON_DETAILS);case 1:if(null==(e=t.v)){t.n=2;break}n=e,t.n=4;break;case 2:return t.n=3,p.fetchAndCacheSeasonDetails();case 3:n=t.v;case 4:return t.a(2,n)}},t)})),function(){return f.apply(this,arguments)}),clearSeasonDetails:(l=u(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r.A.delete(r.A.Keys.SEASON_DETAILS);case 1:case 2:return t.a(2)}},t)})),function(){return l.apply(this,arguments)}),getSeasonNumFromCode:function(t){return t.split("_")[-1]}};const d=p},207:(t,e,n)=>{n.d(e,{L:()=>B});var r=n(833);function o(t,e="i"){return new RegExp(`^(?:${t.source})(?=[,)\\s;]|$)`,e)}function a(t,e="i"){return new RegExp(`^(?:${t.source})$`,e)}function i(t,e="i"){if(t.length<1)throw new Error("orRegex must have at least one pattern");let n=`(?:${t[0].source})`;for(let e=1;e<t.length;e++)n+=`|(?:${t[e].source})`;return new RegExp(n,e)}const s=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=Object.keys(r.j),u=new RegExp(`^(?:${c.map(s).join("|")})`,"i"),l=new RegExp(`(?:${["and","or","xor","not"].map(s).join("|")})(?=\\()`,"i"),f=new RegExp(`(?:${["last-n"].map(s).join("|")})(?=\\()`,"i"),h=new RegExp(`(?:${["p1.equipment","p2.equipment","p1.artifact","p2.artifact","p1.cr","p2.cr"].map(s).join("|")})(?=\\()`,"i"),p=i([l,f,h]),d=/.*/i,E=/\d{4}-\d{2}-\d{2}/,_=/\{\s*\}/,A=/-?\d+/,S=/season-[1-9]+[0-9]*f?|current-season|last-season/i,g=/pvp_rta_ss[1-9]+[0-9]*f?/i,m=new RegExp(`^${E.source}$`,"i"),y=new RegExp(`(?:${S.source})`,"i"),T=d.source,R=A.source,w=E.source,v=u.source,L=y.source,b=new RegExp(`(["'])(${T})\\1`,"i"),N=a(b),O=b.source,P=new RegExp(`(?:${O}|${T}|${w})`,"i"),I=new RegExp(`(?:${v}|${L})`,"i"),C=P.source,D=new RegExp(`\\{\\s*(?:${C}\\s*)(?:,\\s*${C}\\s*)*,?\\s*\\}|${_.source}`,"i"),x=new RegExp(`${R}\\.\\.\\.=?${R}|${w}\\.\\.\\.=?${w}`),F=new RegExp(`^${x.source}$`);let B={STRING_RE:d,DATE_RE:E,INT_RE:A,EMPTY_SET_RE:_,SET_ELEMENT_RE:P,SET_RE:D,SET_LITERAL_RE:a(D),STRING_LITERAL_RE:N,DATE_LITERAL_RE:m,INT_LITERAL_RE:/^-?\d+$/,BOOL_LITERAL_RE:/^(true|false)$/i,RANGE_RE:x,RANGE_LITERAL_RE:F,SEASON_RE:S,SEASON_LITERAL_RE:a(S),SEASON_CODE_RE:g,SEASON_CODE_LITERAL_RE:a(g),DATA_WORD_RE:y,DATA_WORD_LITERAL_RE:a(y),FIELD_WORD_RE:u,FIELD_WORD_LITERAL_RE:a(u),DATAFIELD_RE:I,GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:a(N),CLAUSE_FUNCTIONS_RE:l,DIRECT_FUNCTIONS_RE:h,GLOBAL_FUNCTIONS_RE:f,FUNCTIONS_RE:p,FUNCTION_CALL_RE:/\(.*\)/i,padRegex:o,anchorExp:a,tokenMatch:function(t){return t.match(p)?"keyword":t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?"operator":t.match(new RegExp(`[a-z0-9."'}=)-]${I.source}(?=[,)\\s;]|$)`,"i"))?null:t.match(o(u))?"field":t.match(o(y))?"declared-data":t.match(o(b))?"string":t.match(o(D))?"set":t.match(o(x))?"range":t.match(/[^(,\s;.=0-9\-]+\d+/i)?null:t.match(o(A))||t.match(o(E))||t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?"declared-data":t.match(/[\(\)\{\}\;\,]/)?"bracket":(t.next(),null)},orRegex:i,escapeRegex:s}},221:(t,e,n)=>{n.d(e,{W:()=>_});var r=n(528),o=n(834),a=n(771),i=n(412),s=n(929);const c={GLOBAL_SERVER:"Global Server",KOR_SERVER:"Korea Server",JPN_SERVER:"Japan Server",ASIA_SERVER:"Asia Server",EU_SERVER:"Europe Server"},u={[c.GLOBAL_SERVER]:i.F7.GLOBAL,[c.KOR_SERVER]:i.F7.KOR,[c.JPN_SERVER]:i.F7.JPN,[c.ASIA_SERVER]:i.F7.ASIA,[c.EU_SERVER]:i.F7.EU},l={[c.GLOBAL_SERVER]:"Global Server",[c.KOR_SERVER]:"Korea Server",[c.JPN_SERVER]:"Japan Server",[c.ASIA_SERVER]:"Asia Server",[c.EU_SERVER]:"Europe Server",HEROES:"Heroes",ARTIFACTS:"Artifacts"},f={keys:["name"],threshold:.4},h={keys:["name"],threshold:.4},p={keys:["name"],threshold:.4};function d(t,e,n=null,r={}){let o={includeScore:!0,threshold:.3};o={...o,...r};let a=null;a=new s.A(e,o);const i=a.search(t);return null!==n?i.slice(0,n):i}function E(t,e){return d(t,e,null,h)}class _{static DOMAINS=l;DOMAIN_CACHE={[c.GLOBAL_SERVER]:null,[c.KOR_SERVER]:null,[c.JPN_SERVER]:null,[c.ASIA_SERVER]:null,[c.EU_SERVER]:null,[l.HEROES]:null,[l.ARTIFACTS]:null};async get_domain(t){if(!this.DOMAIN_CACHE[t])if(Object.values(c).includes(t)){const e=t,n=await a.A.getUserMap(u[e]);this.DOMAIN_CACHE[e]=n?Object.values(n):[]}else if(t===l.HEROES){const e=await r.A.getHeroDicts();this.DOMAIN_CACHE[t]=e.heroes}else if(t===l.ARTIFACTS){const e=await o.A.getArtifactObjectList();this.DOMAIN_CACHE[t]=e}return await this.DOMAIN_CACHE[t]}async search(t,e){let n;switch(t){case c.GLOBAL_SERVER:case c.KOR_SERVER:case c.JPN_SERVER:case c.ASIA_SERVER:case c.EU_SERVER:return n=await this.get_domain(t),E(e,n);case l.HEROES:return function(t,e){return d(t,e,null,f)}(e,await this.get_domain(t));case l.ARTIFACTS:const r=await this.get_domain(t);return d(e,r,null,p);default:throw new Error(`Unknown domain: ${t}`)}}}},275:(t,e,n)=>{function r(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(n,r,a,i){var s=r&&r.prototype instanceof u?r:u,l=Object.create(s.prototype);return o(l,"_invoke",function(n,r,o){var a,i,s,u=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,s=t,h.n=n,c}};function p(n,r){for(i=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=h.p,d=a[2];n>3?(o=d===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,h.v=r,h.n=a[1]):p<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),i=l,s=d;(e=i<2?t:s)||!f;){a||(i?i<3?(i>1&&(h.n=-1),p(i,s)):h.n=s:h.v=s);try{if(u=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=h.n<0)?s:n.call(r,h))!==c)break}catch(e){a=t,i=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,a,i),!0),l}var c={};function u(){}function l(){}function f(){}e=Object.getPrototypeOf;var h=[][a]?e(e([][a]())):(o(e={},a,function(){return this}),e),p=f.prototype=u.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,o(p,"constructor",f),o(f,"constructor",l),l.displayName="GeneratorFunction",o(f,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,a,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:s,m:d}})()}function o(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}o=function(t,e,n,r){if(e)a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){o(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},o(t,e,n,r)}function a(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,c,"next",t)}function c(t){a(i,r,o,s,c,"throw",t)}s(void 0)})}}n.d(e,{A:()=>p});var s,c,u,l,f,h;const p={test:function(t){t.rank_plot},fetchFromPython:(h=i(r().m(function t(e){var n,o;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=3;break}return t.n=2,fetch(e);case 2:n=t.v;case 3:return t.n=4,n.json();case 4:return o=t.v,t.a(2,o||null)}},t)})),function(t){return h.apply(this,arguments)}),fetchHeroData:(f=i(r().m(function t(){return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},t,this)})),function(){return f.apply(this,arguments)}),rsFetchBattleData:(l=i(r().m(function t(e){return r().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return l.apply(this,arguments)}),fetchSeasonDetails:(u=i(r().m(function t(){var e,n,o;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return o=JSON.parse(n.seasonDetails),t.a(2,{seasonDetails:o,error:!1});case 3:return t.a(2,{seasonDetails:null,error:n.error});case 4:return t.a(2)}},t)})),function(){return u.apply(this,arguments)}),fetchArtifactJson:(c=i(r().m(function t(){var e,n,o;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_artifact_json");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return o=JSON.parse(n.artifactJson),t.a(2,o);case 3:return t.a(2,null);case 4:return t.a(2)}},t)})),function(){return c.apply(this,arguments)}),fetchUser:(s=i(r().m(function t(e){var n,o,a;return r().w(function(t){for(;;)switch(t.n){case 0:if(e.name&&e.world_code||e.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:e})});case 2:return n=t.v,t.n=3,n.json();case 3:if(o=t.v,n.ok){t.n=4;break}throw new Error("Flask server error: ".concat(o.error));case 4:if(o.foundUser){t.n=6;break}if(e.world_code){t.n=5;break}return t.a(2,{user:null,ok:!0});case 5:return t.a(2,{user:null,ok:!0});case 6:return a=o.user,"Found user: ".concat(JSON.stringify(a)),t.a(2,{user:a,ok:!0})}},t)})),function(t){return s.apply(this,arguments)})}},319:(t,e,n)=>{n.d(e,{A$:()=>u,Qi:()=>s,aQ:()=>c});const r={">":(t,e)=>t>e,"<":(t,e)=>t<e,"=":(t,e)=>t===e,">=":(t,e)=>t>=e,"<=":(t,e)=>t<=e,"!=":(t,e)=>t!==e},o="in",a="compare";class i{}class s extends i{type=o;opStr;negate=!1;constructor(t=!1){super(),this.negate=t,this.opStr=this.negate?"!in":"in"}call(t,e){const n=Array.isArray(e)?e.includes(t):e.has(t);return this.negate?!n:n}}class c extends i{type=a;opStr;compareFn;constructor(t){if(super(),this.opStr=t,this.compareFn=r[t],!this.compareFn)throw new Error(`Unknown operator: ${t}`)}call(t,e){return this.compareFn(t,e)}}function u(t){switch(t){case"in":return new s;case"!in":return new s(!0);default:return new c(t)}}},411:(t,e,n)=>{n.d(e,{CO:()=>I,Qo:()=>_,c2:()=>C,eR:()=>l,y4:()=>b});var r=n(92),o=n(412),a=n(699),i=n(319),s=n(971),c=n(54),u=n(413);const l={AND:"and",OR:"or",XOR:"xor",NOT:"not",LAST_N:"last-n",EQUIPMENT:"equipment",ARTIFACT:"artifact",CR:"cr",BASE_FILTER:"base-filter"},f="CLAUSE_FN",h="HERO_LIST_FN",p="GLOBAL_FN",d="BASE_FILTER";class E{constructor(...t){}}class _ extends E{}class A extends _{fnType=f;fns=[];constructor(...t){super(),this.fns=t}asString(t=""){let e="";const n=t+s.RG;return this.fns.forEach(t=>e+=`${t.asString(n)},\n`),`${t}${this.fnName}(\n${e.trimEnd()}\n${t})`}}class S extends A{fnName=l.AND;fnType=f;call(t){return this.fns.every(e=>e.call(t))}}class g extends A{fnName=l.OR;fnType=f;call(t){return this.fns.some(e=>e.call(t))}}class m extends A{fnName=l.XOR;fnType=f;call(t){let e=!1;for(let n of this.fns)e=!e&&n.call(t)||e&&!n.call(t);return e}}class y extends A{fnName=l.NOT;fnType=f;constructor(...t){if(super(...t),1!==this.fns.length)throw new c.A.SyntaxException(`Invalid NOT function call ; accepts exactly 1 argument ; got: [${this.fns}]`)}call(t){return!this.fns[0].call(t)}}class T extends _{fnType=h;getHeroes(t){return this.isPlayer1?t[o.Lx.P1_PICKS]:t[o.Lx.P2_PICKS]}asString(t=""){return`${t}${this.fnName}(${this.argFmtString})`}}class R extends T{fnName=l.CR;fnType=h;heroName;crThreshold=0;operator;targetField;isPlayer1=!1;argFmtString;constructor(t,e){super();const n=t.includes(",")?",":" ",r=c.A.tokenizeWithNestedEnclosures(t,n,1,!0);if(3!==r.length)throw new c.A.SyntaxException(`Invalid CR function call ; accepts exactly 3 arguments ; got: [${r}] from str: ${t}`);const s=parseInt(r[2]);if(isNaN(s))throw new c.A.TypeException(`Invalid CR function call ; third argument must be a valid integer literal ; got: '${r[2]}' from str: ${t}`);const l=(0,i.A$)(r[1]);if(!(l instanceof i.aQ))throw new c.A.TypeException(`Invalid CR function call ; second argument must be a valid comparison operator ; got: '${r[1]}' from str: ${t}`);this.heroName=new a.H3.StringLiteral(r[0],e,[u.xD.Hero]).data,this.crThreshold=s,this.operator=l,this.isPlayer1=t.includes("p1."),this.targetField=t=>t[o.Lx.CR_BAR],this.argFmtString=`${this.heroName} ${this.operator.opStr} ${this.crThreshold}`}call(t){const e=this.getHeroes(t),n=this.targetField(t).find(t=>t[0]===this.heroName);return!!n&&(!!e.includes(this.heroName)&&this.operator.call(n,this.crThreshold))}}function w(t,e){for(const n in t)if(t[n]>(e[n]||0))return!1;return!0}class v extends T{fnName=l.EQUIPMENT;fnType=h;heroName;targetEquipCounts;isPlayer1=!1;argFmtString;targetField;constructor(t,e){super();const n=c.A.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==n.length)throw new c.A.SyntaxException(`Invalid equipment function call ; accepts exactly 2 arguments ; got: [${n}] from str: ${t}`);const i=n[1].includes("{")?n[1]:`{${n[1]}}`;let s=c.A.tokenizeWithNestedEnclosures(i,",",1,!0);s=s.map(t=>new a.H3.StringLiteral(t,e,[u.xD.Equipment]).data),this.targetEquipCounts=(0,r.J)(s),this.heroName=new a.H3.StringLiteral(n[0],e,[u.xD.Hero]).data,this.isPlayer1=t.includes("p1."),this.argFmtString=`${this.heroName}, {${s.join(",")}}`,this.targetField=t=>this.isPlayer1?t[o.Lx.P1_EQUIPMENT]:t[o.Lx.P2_EQUIPMENT]}call(t){const e=this.getHeroes(t),n=this.targetField(t);for(let t=0;t<e.length;t++)if(e[t]===this.heroName){const e=(0,r.J)(n[t]);return w(this.targetEquipCounts,e)}return!1}}class L extends T{fnName=l.ARTIFACT;fnType=h;heroName;targetArtifacts;isPlayer1=!1;argFmtString;targetField;constructor(t,e){super();const n=c.A.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==n.length)throw new c.A.SyntaxException(`Invalid artifact function call ; accepts exactly 2 arguments ; got: [${n}] from str: ${t}`);const r=n[1].includes("{")?n[1]:`{${n[1]}}`;let i=c.A.tokenizeWithNestedEnclosures(r,",",1,!0);i=i.map(t=>new a.H3.StringLiteral(t,e,[u.xD.Artifact]).data),this.targetArtifacts=i,this.heroName=new a.H3.StringLiteral(n[0],e,[u.xD.Hero]).data,this.isPlayer1=t.includes("p1."),this.argFmtString=`${this.heroName}, {${i.join(", ")}}`,this.targetField=t=>this.isPlayer1?t[o.Lx.P1_ARTIFACTS]:t[o.Lx.P2_ARTIFACTS]}call(t){const e=this.getHeroes(t),n=this.targetField(t);for(let t=0;t<e.length;t++)if(e[t]===this.heroName)return this.targetArtifacts.some(e=>n[t].includes(e));return!1}}class b extends E{fnType=p;asString(t=""){return`${t}${this.fnName}(${this.argFmtString})`}}class N extends b{fnName=l.LAST_N;fnType=p;argFmtString;n;constructor(t){super();const e=c.A.tokenizeWithNestedEnclosures(t,",",1,!0);if(1!==e.length)throw new c.A.SyntaxException(`Invalid last-n function call ; accepts exactly 1 argument ; got: [${e}] from str: ${t}`);this.n=new a.H3.IntLiteral(e[0]).data,this.argFmtString=`${this.n}`}call(t){return t.slice(-this.n)}}function O(t,e,n){const r=`${t.asString()} ${e.opStr} ${n.asString()}`;if(t instanceof a.H3.Field&&n instanceof a.H3.Field)throw new c.A.ValidationError(`Invalid base filter; fields cannot be compared with other fields ; got string: [${r}]`);if(t.type!==a.H3.BaseEltTypes.FIELD&&n.type!==a.H3.BaseEltTypes.FIELD)throw new c.A.ValidationError(`Invalid base filter; every base filter must have at least one field ; got string: [${r}]`);if(e instanceof i.Qi&&(o=n,!(a.H3.COLLECTION_FIELDS_SET.has(o.rawString)||n instanceof a.H3.RangeLiteral||n instanceof a.H3.SetLiteral)))throw new c.A.ValidationError(`Invalid base filter; 'in' operators can only be used with Ranges, Sets, or Fields that correspond to sets like 'p1.picks' ; got string: [${r}]`);var o;return!0}class P extends _{fnType=d;fnName=l.BASE_FILTER;fmtString;fn;constructor(t,e){super();const n=c.A.tokenizeWithNestedEnclosures(t," ",0,!0);if(3!==n.length)throw new c.A.SyntaxException(`Invalid base filter; filters must have 3 tokens and be of the form: ['X', operator, 'Y']; got: [${n}] tokens from str: ${t}`);let[r,o,s]=n;const u=(0,i.A$)(o),l=a.H3.parseBaseElement(r,e),f=a.H3.parseBaseElement(s,e);if(l.asString(),f.asString(),O(l,u,f),l instanceof a.H3.Field&&!(f instanceof a.H3.Field))this.fn=t=>u.call(l.extractData(t),f.getData());else{if(l instanceof a.H3.Field||!(f instanceof a.H3.Field))throw new c.A.ValidationError("Invalid base filter; filters must contain a Field and a Literal; got: "+t);this.fn=t=>u.call(l.getData(),f.extractData(t))}this.fmtString=`${l.asString()} ${o} ${f.asString()}`}call(t){return this.fn(t)}asString(t=""){return`${t}${this.fmtString}`}}const I={[l.BASE_FILTER]:P,[l.AND]:S,[l.OR]:g,[l.NOT]:y,[l.XOR]:m,[l.LAST_N]:N,[l.EQUIPMENT]:v,[l.ARTIFACT]:L,[l.CR]:R},C={AND:S,OR:g,NOT:y,XOR:m,LAST_N:N,EQUIPMENT:v,ARTIFACT:L,CR:R,BASE_FILTER:P}},412:(t,e,n)=>{n.d(e,{$k:()=>c,CZ:()=>l,D5:()=>g,DB:()=>s,E_:()=>E,F4:()=>m,F7:()=>i,GV:()=>A,Lx:()=>p,W4:()=>y,WB:()=>a,Yj:()=>o,bh:()=>T,kh:()=>_,ll:()=>d,pg:()=>u,uz:()=>S,yR:()=>h});var r=n(92);const o={CODES:{DE:"de",KO:"ko",PT:"pt",TH:"th",ZH_TW:"zh-TW",JA:"ja",EN:"en",FR:"fr",ZH_CN:"zh-CN",ES:"es"},NAMES:{DE:"German",KO:"Korean",PT:"Portuguese",TH:"Thai",ZH_TW:"Chinese (Traditional, Taiwan)",JA:"Japanese",EN:"English",FR:"French",ZH_CN:"Chinese (Simplified, China)",ES:"Spanish"}},a=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),i={GLOBAL:"world_global",KOR:"world_kor",JPN:"world_jpn",ASIA:"world_asia",EU:"world_eu"},s={[i.GLOBAL]:"Global",[i.KOR]:"Korea",[i.JPN]:"Japan",[i.ASIA]:"Asia",[i.EU]:"Europe"},c=(s.world_global,i.GLOBAL,s.world_kor,i.KOR,s.world_jpn,i.JPN,s.world_asia,i.ASIA,s.world_eu,i.EU,Object.fromEntries(Object.values(s).map(t=>[t.toLowerCase(),t]))),u={set_speed:"Speed",set_acc:"Hit",set_cri:"Critical",set_res:"Resist",set_def:"Defense",set_att:"Attack",set_max_hp:"Health",set_cri_dmg:"Destruction",set_coop:"Unity",set_immune:"Immunity",set_rage:"Rage",set_vampire:"Lifesteal",set_shield:"Protection",set_revenge:"Revenge",set_penetrate:"Penetration",set_torrent:"Torrent",set_counter:"Counter",set_scar:"Injury"},l=864e5,f={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},h=Object.fromEntries(Object.keys(f).sort((t,e)=>f[t]-f[e]).map(t=>[t,(0,r.S)(t)])),p={SEASON:"Season",SEASON_CODE:"Season Code",DATE_TIME:"Date/Time",SECONDS:"Seconds",TURNS:"Turns",SEQ_NUM:"Seq Num",P1_ID:"P1 ID",P1_SERVER:"P1 Server",P2_ID:"P2 ID",P2_SERVER:"P2 Server",P1_LEAGUE:"P1 League",P2_LEAGUE:"P2 League",P1_POINTS:"P1 Points",POINT_GAIN:"Point Gain",WIN:"Win",FIRST_PICK:"First Pick",FIRST_TURN:"First Turn",FIRST_TURN_HERO:"First Turn Hero",CR_BAR:"CR Bar",P1_PREBANS:"P1 Prebans",P2_PREBANS:"P2 Prebans",P1_PICKS:"P1 Picks",P2_PICKS:"P2 Picks",P1_POSTBAN:"P1 Postban",P2_POSTBAN:"P2 Postban",P1_EQUIPMENT:"P1 Equipment",P2_EQUIPMENT:"P2 Equipment",P1_ARTIFACTS:"P1 Artifacts",P2_ARTIFACTS:"P2 Artifacts",P1_MVP:"P1 MVP",P2_MVP:"P2 MVP",P1_PICKS_PRIMES:"P1 Picks Primes",P1_PICKS_PRIME_PRODUCT:"P1 Picks Prime Product",P2_PICKS_PRIMES:"P2 Picks Primes",P2_PICKS_PRIME_PRODUCT:"P2 Picks Prime Product",P1_PREBANS_PRIMES:"P1 Prebans Primes",P1_PREBANS_PRIME_PRODUCT:"P1 Prebans Prime Product",P2_PREBANS_PRIMES:"P2 Prebans Primes",P2_PREBANS_PRIME_PRODUCT:"P2 Prebans Prime Product"},d=Object.values(p).filter(t=>!t.toLowerCase().includes("prime")),E=[p.P1_EQUIPMENT,p.P2_EQUIPMENT,p.P1_ARTIFACTS,p.P2_ARTIFACTS,p.CR_BAR,p.P1_PREBANS,p.P2_PREBANS,p.P1_PICKS,p.P2_PICKS],_=[p.FIRST_PICK,p.FIRST_TURN,p.WIN],A=[p.SECONDS,p.TURNS,p.P1_POINTS,p.POINT_GAIN],S=[p.P1_LEAGUE,p.P2_LEAGUE],g={HERO_NAME:"Hero Name",BATTLES:"Battles",PICK_RATE:"Pick Rate",WINS:"Wins",WIN_RATE:"Win rate",POSTBANS:"Postbans",POSTBAN_RATE:"Postban Rate",SUCCESS_RATE:"Success Rate",PLUS_MINUS:"+/-",POINT_GAIN:"Point Gain",AVG_CR:"Avg CR",FIRST_TURNS:"First Turns",FIRST_TURN_RATE:"First Turn Rate"},m="https://epic7.onstove.com",y=m+"/gg";const T=function(t){const e=new Uint8Array(t+1),n=[];for(let r=2;r<=t;r++)if(!e[r]){n.push(r);for(let n=r*r;n<=t;n+=r)e[n]=1}return n}(3e4)},413:(t,e,n)=>{n.d(e,{QV:()=>c,xD:()=>u});var r=n(528),o=n(412),a=n(971),i=n(207);class s{}function c(t,e,n){for(const r of n){const n=r.parse(t,e);if(r.parserType,n)return n}return null}const u={Hero:new class extends s{parse(t,e){return r.A.getHeroByName(t,e.HeroDicts)?.name??null}parserType="Hero"},League:new class extends s{parse(t){return o.yR,o.yR[t]}parserType="League"},Server:new class extends s{parse(t){return o.$k[t]}parserType="Server"},Equipment:new class extends s{parse(t){return a.Nk[t.toLowerCase()]}parserType="Equipment"},Artifact:new class extends s{parse(t,e){return e.ARTIFACT_LOWERCASE_STRINGS_MAP[t.toLowerCase()]}parserType="Artifact"},Season:new class extends s{parse(t,e){let n;if("current-season"===t)return e.SEASON_DETAILS[0].Code;if("last-season"===t)return e.SEASON_DETAILS[1].Code;if(i.L.SEASON_LITERAL_RE.test(t))n=t.split("-").at(-1);else{if(!i.L.SEASON_CODE_LITERAL_RE.test(t))return null;n=t.split("_ss").at(-1)}e.SEASON_DETAILS.map(t=>t.Code.split("_").at(-1));return e.SEASON_DETAILS.find(t=>t.Code.split("_ss").at(-1)===n)?.Code}parserType="Season Code"}}},462:(t,e,n)=>{n.d(e,{A:()=>r});const r={destroyDataTable:function(t){var e=$("#".concat(t));$.fn.dataTable.isDataTable(e)&&e.DataTable().clear().destroy()},replaceData:function(t,e){$("#".concat(t)).DataTable().clear().rows.add(e).draw()}}},494:(t,e,n)=>{n.d(e,{K:()=>r});const r={unwrapHtmlElt:function(t){const e=document.getElementById(t);if(null===e)throw new Error(`Could not find element with ID ${t}`);return e},setText:function(t,e){this.unwrapHtmlElt(t).textContent=e}}},528:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(667),o=n(412),a=n(275),i=n(40);const s={getHeroDicts:async function(t=o.Yj.CODES.EN){const e=await r.A.get(r.A.Keys.HERO_MANAGER);return e||this.fetchAndCacheHeroManager(t)},createHeroManager:function(t){for(let[e,n]of t.entries()){const t=o.bh[e];n.prime=t}let e={heroes:[],Empty:{attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"N/A",prime:1},Fodder:{attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"N/A",prime:1},name_lookup:{},code_lookup:{},prime_lookup:{},prime_pair_lookup:{}};return e.heroes=t,e=function(t){const e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:o.bh[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(e),e=function(t){t.name_lookup=t.heroes.reduce((t,e)=>(t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t),{}),t.prime_lookup=t.heroes.reduce((t,e)=>(t[e.prime]=e,t),{}),t.code_lookup=t.heroes.reduce((t,e)=>(t[e.code]=e,t),{});let e=t.heroes.reduce((t,e)=>(t[e.prime]=e.name,t),{});const n=Object.keys(t.prime_lookup).length-1;for(let r=0;r<n-1;r++){const a=o.bh[r];for(let i=r+1;i<n;i++){const n=o.bh[i],r=a*n,s=t.prime_lookup[a].name,c=t.prime_lookup[n].name;e[r]=[s,c].sort().join(", ")}}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.name].join(", "),t.prime_pair_lookup=e,t}(e),e},fetchHeroManager:async function(t=o.Yj.CODES.EN){const e=(await i.A.fetchHeroJSON()??await a.A.fetchHeroData())[t];return this.createHeroManager(e)},fetchAndCacheHeroManager:async function(t=o.Yj.CODES.EN){const e=await this.fetchHeroManager(t);return await r.A.cache(r.A.Keys.HERO_MANAGER,e),e},deleteHeroManager:async function(){await r.A.delete(r.A.Keys.HERO_MANAGER)},getHeroByName:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;const n=t.toLowerCase().replace(/\s+/g,"");return e.name_lookup[n]??null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?e.code_lookup[t]??null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}}},602:(t,e,n)=>{n.d(e,{P2:()=>E});const r=(t,e)=>e.some(e=>t instanceof e);let o,a;const i=new WeakMap,s=new WeakMap,c=new WeakMap;let u={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return i.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function l(t){u=t(u)}function f(t){return(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(d(this),e),p(this.request)}:function(...e){return p(t.apply(d(this),e))}}function h(t){return"function"==typeof t?f(t):(t instanceof IDBTransaction&&function(t){if(i.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});i.set(t,e)}(t),r(t,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,u):t)}function p(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(p(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return c.set(e,t),e}(t);if(s.has(t))return s.get(t);const e=h(t);return e!==t&&(s.set(t,e),c.set(e,t)),e}const d=t=>c.get(t);function E(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),s=p(i);return r&&i.addEventListener("upgradeneeded",t=>{r(p(i.result),t.oldVersion,t.newVersion,p(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),s.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),s}const _=["get","getKey","getAll","getAllKeys","count"],A=["put","add","delete","clear"],S=new Map;function g(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(S.get(e))return S.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=A.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!_.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return S.set(e,a),a}l(t=>({...t,get:(e,n,r)=>g(e,n)||t.get(e,n,r),has:(e,n)=>!!g(e,n)||t.has(e,n)}));const m=["continue","continuePrimaryKey","advance"],y={},T=new WeakMap,R=new WeakMap,w={get(t,e){if(!m.includes(e))return t[e];let n=y[e];return n||(n=y[e]=function(...t){T.set(this,R.get(this)[e](...t))}),n}};async function*v(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,w);for(R.set(n,e),c.set(n,d(e));e;)yield n,e=await(T.get(n)||e.continue()),T.delete(n)}function L(t,e){return e===Symbol.asyncIterator&&r(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&r(t,[IDBIndex,IDBObjectStore])}l(t=>({...t,get:(e,n,r)=>L(e,n)?v:t.get(e,n,r),has:(e,n)=>L(e,n)||t.has(e,n)}))},667:(t,e,n)=>{n.d(e,{A:()=>l});var r=n(602),o=n(412);async function a(t,e){const n=t.transaction(e,"readwrite");n.objectStore(e).clear(),await n.done}const i={USER:"current-user",BATTLES:"battles",RAW_UPLOAD:"raw-upload",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",STATS:"stats",FILTER_STR:"filter-str"},s={GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},c={...i,...s,LANG:"lang",HERO_MANAGER:"hero-manager",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",ID_SEARCH_FLAG:"id-search",ARTIFACTS:"artifacts",ARTIFACTS_LOWERCASE_NAMES_MAP:"artifacts-lowercase-names-map",ARTIFACT_OBJECT_LIST:"artifact-object-list",HOME_PAGE_STATE:"home-page-state",INTER_PAGE_MANAGER:"inter-page-manager"};let u={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:{...c},MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:async()=>(0,r.P2)(u.consts.DB_NAME,u.consts.DB_VERSION,{upgrade(t){t.objectStoreNames.contains(u.consts.STORE_NAME)&&t.deleteObjectStore(u.consts.STORE_NAME),t.objectStoreNames.contains(u.consts.STORE_NAME)||t.createObjectStore(u.consts.STORE_NAME),t.objectStoreNames.contains(u.consts.META_STORE_NAME)||t.createObjectStore(u.consts.META_STORE_NAME)}}),get:async function(t){const e=await this.openDB(),n=await e.get(this.consts.STORE_NAME,t);if(null===n)return null;return await this.checkCacheTimeout(t)?n:null},cache:async function(t,e){const n=await this.openDB();await n.put(this.consts.STORE_NAME,e,t),await this.setTimestamp(t,Date.now())},delete:async function(t){const e=await this.openDB();await e.delete(this.consts.STORE_NAME,t),await this.deleteTimestamp(t)},deleteDB:async function(){await indexedDB.deleteDatabase(this.consts.DB_NAME)},getTimestamp:async function(t){const e=await this.openDB(),n=`${t+this.MetaKeys.TIMESTAMP}`;return await e.get(this.consts.META_STORE_NAME,n)??0},setTimestamp:async function(t,e){const n=await this.openDB(),r=`${t+this.MetaKeys.TIMESTAMP}`;await n.put(this.consts.META_STORE_NAME,e,r),await n.get(this.consts.META_STORE_NAME,r)},deleteTimestamp:async function(t){const e=await this.openDB(),n=`${t+this.MetaKeys.TIMESTAMP}`;await e.delete(this.consts.META_STORE_NAME,n)},clearData:async function(){const t=await this.openDB();await a(t,this.consts.STORE_NAME),await a(t,this.consts.META_STORE_NAME)},clearUserData:async function(){const t=Object.values(i);await Promise.all(t.map(t=>this.delete(t)))},clearUserLists:async function(){const t=Object.values(s);await Promise.all(t.map(t=>this.delete(t)))},clearSeasonData:async function(){await this.delete(c.SEASON_DETAILS)},checkCacheTimeout:async function(t){const e=await this.getTimestamp(t),n=Date.now();return!(!e||n-e>u.consts.CACHE_TIMEOUT)||(await this.delete(t),!1)},getFilterStr:async function(){return await this.get(u.Keys.FILTER_STR)},setFilterStr:async function(t){await this.cache(u.Keys.FILTER_STR,t)},getLang:async function(){return await this.get(u.Keys.LANG)??o.Yj.CODES.EN},setLang:async function(t){await this.cache(u.Keys.LANG,t)},getStats:async function(){return await this.get(u.Keys.STATS)},setStats:async function(t){await this.cache(c.STATS,t)}};const l=u},699:(t,e,n)=>{n.d(e,{H3:()=>R});var r=n(207),o=n(54),a=n(413),i=n(833);const s=new Set(["p1.picks","p2.picks","p1.prebans","p2.prebans","prebans"]),c={FIELD:"FIELD",RANGE:"RANGE",SET:"SET",INT:"INT",DATE:"DATE",BOOL:"BOOL",STRING:"STRING"};class u{}class l extends u{type=c.FIELD;rawString;extractFn;constructor(t){if(super(),this.rawString=t,!i.j[t])throw new Error("Invalid field");this.extractFn=i.j[t]}getData(){throw new Error("Not implemented for Field")}extractData(t){return this.extractFn(t)}asString(){return`${this.rawString}`}}class f extends u{rawString;constructor(t){super(),this.rawString=t}getData(){return this.data}extractData(t){throw new Error("Not implemented for Literals")}asString(){return`${this.fmtString}`}}class h extends f{type=c.STRING;fmtString;data;constructor(t,e,n=Object.values(a.xD)){super(t),t=o.A.trimSurroundingQuotes(t),this.data=this.processString(t,e,n),this.fmtString=this.data}processString(t,e,n){const r=(0,a.QV)(t,e,n);if(!r){const e=n.map(t=>t.parserType).join(", ");throw new o.A.ValidationError(`Invalid string literal: '${t}' ; clould not be parsed as a valid instance of any of the following: [${e}]`)}return r}}class p extends f{type=c.INT;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){const e=parseInt(t);if(isNaN(e))throw new o.A.ValidationError(`Invalid integer literal: '${t}'`);return e}}class d extends f{type=c.BOOL;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){if("true"===t)return!0;if("false"===t)return!1;throw new o.A.ValidationError(`Invalid boolean literal: '${t}'`)}}class E extends f{type=c.DATE;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){return o.A.parseDate(t)}}class _{start;end;endInclusive;constructor(t,e,n){this.start=t,this.end=e,this.endInclusive=n}has(t){return typeof t==typeof this.start&&(!(t<this.start)&&(!(t>this.end)&&(t!==this.end||this.endInclusive)))}includes(t){return this.has(t)}}const A=[t=>r.L.DATE_LITERAL_RE.test(t)?new E(t):null,t=>r.L.INT_LITERAL_RE.test(t)?new p(t):null];function S(t,e,n,r){let o=r(t),a=r(e);return null===o||null===a?null:new _(o.data,a.data,n)}class g extends f{type=c.RANGE;fmtString;data;constructor(t,e){super(t),this.fmtString=t,this.data=this.processString(t,e)}processString(t,e){const n=t.split("..."),r=n[0];let a="="===n[1].charAt(0);const i=n[1].slice(a?1:0);for(const t of A){const e=S(r,i,a,t);if(null!==e)return e}throw new o.A.ValidationError(`Invalid range literal: '${t}' ; ranges must be homogenous and of the format x...y or x...=y for the types: [Date, Integer]`)}}const m=[...A],y=(t,e,n)=>r.L.STRING_RE.test(t)?new h(t,e,n):null;class T extends f{type=c.SET;fmtString;data;constructor(t,e,n=Object.values(a.xD)){super(t),this.fmtString=t,this.data=this.processString(t,e,n)}processString(t,e,n){const r=o.A.tokenizeWithNestedEnclosures(t,",",1,!0),a=new Set;for(const i of r){for(const t of m){const e=t(i);e&&a.add(e.data)}const r=y(i,e,n);if(!r)throw new o.A.ValidationError(`Invalid set element: '${t}' ; could not be parsed as a valid instance of any of the following types: [Date, Integer, String]`);a.add(r.data)}return this.fmtString=`{${Array.from(a).join(", ")}}`,a}}const R={StringLiteral:h,IntLiteral:p,BoolLiteral:d,DateLiteral:E,RangeLiteral:g,SetLiteral:T,Field:l,BaseEltTypes:c,FIELD_EXTRACT_FN_MAP:i.j,parseBaseElement:function(t,e){if(r.L.STRING_LITERAL_RE.test(t))return new h(t,e);if(r.L.INT_LITERAL_RE.test(t))return new p(t);if(r.L.BOOL_LITERAL_RE.test(t))return new d(t);if(r.L.DATE_LITERAL_RE.test(t))return new E(t);if(r.L.RANGE_LITERAL_RE.test(t))return new g(t,e);if(r.L.SET_LITERAL_RE.test(t))return new T(t,e);if(r.L.SEASON_LITERAL_RE.test(t))return new h(t,e,[a.xD.Season]);if(r.L.FIELD_WORD_LITERAL_RE.test(t))return new l(t);throw new o.A.ValidationError(`Invalid base element: '${t}' ; could not be parsed as a Field or Literal.`)},COLLECTION_FIELDS_SET:s}},706:(t,e,n)=>{n.d(e,{A:()=>N});var r,o,a,i,s,c,u,l,f=n(667),h=n(961),p=n(141),d=n(411);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach(function(e){S(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function S(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(E(t)+" is not iterable")}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||T(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=T(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function T(t,e){if(t){if("string"==typeof t)return R(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function w(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return v(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,s=0,c=t,h.n=n,i}};function p(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=h.p,d=a[2];n>3?(o=d===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(s=0,h.v=r,h.n=a[1]):p<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),s=l,c=d;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=h.n<0)?c:n.call(r,h))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(v(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,v(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,v(f,"constructor",u),v(u,"constructor",c),c.displayName="GeneratorFunction",v(u,o,"GeneratorFunction"),v(f),v(f,o,"Generator"),v(f,r,function(){return this}),v(f,"toString",function(){return"[object Generator]"}),(w=function(){return{w:a,m:h}})()}function v(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){v(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},v(t,e,n,r)}function L(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){L(a,r,o,i,s,"next",t)}function s(t){L(a,r,o,i,s,"throw",t)}i(void 0)})}}const N={loaded_servers:new Set,getBattles:(l=b(w().m(function t(){var e,n,r,o;return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.get(f.A.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return l.apply(this,arguments)}),removeBattles:(u=b(w().m(function t(){return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.delete(f.A.Keys.BATTLES);case 1:return t.n=2,f.A.delete(f.A.Keys.UPLOADED_BATTLES);case 2:return t.n=3,f.A.delete(f.A.Keys.FILTERED_BATTLES);case 3:case 4:return t.a(2)}},t)})),function(){return u.apply(this,arguments)}),removeFilteredBattles:(c=b(w().m(function t(){return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.delete(f.A.Keys.FILTERED_BATTLES);case 1:case 2:return t.a(2)}},t)})),function(){return c.apply(this,arguments)}),applyFilter:(s=b(w().m(function t(e){var n,r,o,a,i,s,c,u,l,h,p,E;return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.filter(function(t){return t instanceof d.Qo}),o=e.filter(function(t){return t instanceof d.y4}),a=Object.values(n),i=y(o);try{for(i.s();!(s=i.n()).done;)c=s.value,"Applying global filter: ".concat(c.asString()),u=a.length,a=c.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),"Filtered ".concat(u-a.length," out of ").concat(u,"; new total = ").concat(a.length)}catch(t){i.e(t)}finally{i.f()}l=y(r),t.p=2,p=w().m(function t(){var e,r;return w().w(function(t){for(;;)switch(t.n){case 0:e=h.value,"Applying local filter: ".concat(e.asString()),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=m(t,2),r=(n[0],n[1]);return e.call(r)})),"Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length);case 1:return t.a(2)}},t)}),l.s();case 3:if((h=l.n()).done){t.n=5;break}return t.d(g(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,E=t.v,l.e(E);case 7:return t.p=7,l.f(),t.f(7);case 8:return"Caching filtered battles ; total = ".concat(Object.keys(n).length),t.n=9,f.A.cache(f.A.Keys.FILTERED_BATTLES,n);case 9:return"Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters"),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return s.apply(this,arguments)}),extendBattles:(i=b(w().m(function t(e){var n,r,o,a,i;return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.A.get(f.A.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=A(A({},i),e),t.n=5,f.A.cache(f.A.Keys.BATTLES,r);case 5:return t.a(2,r)}},t)})),function(t){return i.apply(this,arguments)}),cacheQuery:(a=b(w().m(function t(e,n,r){var o,a;return w().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,[]);case 1:return"Caching queried battles: ".concat(e.length," battles; modified [BATTLES];"),o=(0,p.d)(e,n,r),t.n=2,this.extendBattles(o);case 2:return a=t.v,t.a(2,a)}},t,this)})),function(t,e,n){return a.apply(this,arguments)}),cacheUpload:(o=b(w().m(function t(e,n){var r,o;return w().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.error("No uploaded battles provided to cacheUpload"),t.a(2,{});case 1:return r=(0,p.j)(e,n),t.n=2,f.A.cache(f.A.Keys.UPLOADED_BATTLES,r);case 2:return t.n=3,this.extendBattles(r);case 3:return o=t.v,t.a(2,o)}},t,this)})),function(t,e){return o.apply(this,arguments)}),getStats:(r=b(w().m(function t(e,n,r){var o,a,i,s,c,u,l,f,p,d;return w().w(function(t){for(;;)switch(t.n){case 0:return o=n.length,"Applying ".concat(o," filters"),a=Object.values(e),t.n=1,this.applyFilter(n);case 1:return i=t.v,s=Object.values(i),c=o>0,t.n=2,h.A.getPrebanStats(s,r);case 2:return u=t.v,t.n=3,h.A.getFirstPickStats(s,r);case 3:return l=t.v,t.n=4,h.A.getGeneralStats(s,r);case 4:return f=t.v,t.n=5,h.A.getHeroStats(s,r);case 5:return p=t.v,t.n=6,h.A.getPerformanceStats(s);case 6:return d=t.v,t.a(2,{battles:a,filteredBattlesObj:i,prebanStats:u,generalStats:f,firstPickStats:l,playerHeroStats:p.playerHeroStats,enemyHeroStats:p.enemyHeroStats,performanceStats:d,numFilters:o,areFiltersApplied:c})}},t,this)})),function(t,e,n){return r.apply(this,arguments)})}},758:(t,e,n)=>{n.a(t,async(t,e)=>{try{var r=n(221),o=n(462),a=n(940),i=n(874),s=n(987),c=n(771),u=n(136);function p(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return d(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,s=0,c=t,h.n=n,i}};function p(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=h.p,d=a[2];n>3?(o=d===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(s=0,h.v=r,h.n=a[1]):p<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),s=l,c=d;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=h.n<0)?c:n.call(r,h))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(d(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,d(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,d(f,"constructor",u),d(u,"constructor",c),c.displayName="GeneratorFunction",d(u,o,"GeneratorFunction"),d(f),d(f,o,"Generator"),d(f,r,function(){return this}),d(f,"toString",function(){return"[object Generator]"}),(p=function(){return{w:a,m:h}})()}function d(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}d=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){d(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},d(t,e,n,r)}function E(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function _(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){E(a,r,o,i,s,"next",t)}function s(t){E(a,r,o,i,s,"throw",t)}i(void 0)})}}var l="search-table",f=new r.W,h=["Name","ID","Search Score","Raw Search Result"];function A(t){return S.apply(this,arguments)}function S(){return(S=_(p().m(function t(e){var n,r;return p().w(function(t){for(;;)switch(t.n){case 0:if((n=JSON.parse(e["Raw Search Result"])).world_code){t.n=1;break}return t.a(2);case 1:return t.n=2,c.A.findUser({id:n.id,world_code:n.world_code});case 2:if(null!==(r=t.v)){t.n=3;break}throw new Error("User not found:",n);case 3:return t.n=4,c.A.clearUserData();case 4:return t.n=5,c.A.setUser(r);case 5:u.A.pushActions([u.A.ACTIONS.QUERY_USER]),i.Su.navToHome();case 6:return t.a(2)}},t)}))).apply(this,arguments)}function g(){var t=$("#".concat(l)).DataTable({layout:{},language:{},searching:!1,order:[[2,"asc"]],columnDefs:[{targets:"_all",className:"nowrap"}],buttons:{},pageLength:50,scrollY:"200px",deferRender:!0,scroller:!0,scrollCollapse:!1,columns:Object.values(h).map(function(t){return{data:t}})});$("#".concat(l," tbody")).on("click","tr",_(p().m(function e(){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return n=t.row(this).data(),e.n=1,A(n);case 1:return e.a(2)}},e,this)})))}function m(t){return{Name:t.item.name,ID:t.item.id||t.item.code,"Search Score":t.score.toFixed(4),"Raw Search Result":JSON.stringify(t.item)}}function y(){var t=s.A.SEARCH_PAGE.SEARCH_FORM;t.addEventListener("submit",function(){var e=_(p().m(function e(n){var r,a,i,s,c;return p().w(function(e){for(;;)switch(e.n){case 0:return n.preventDefault(),r=new FormData(t),a=r.get("searchTerm"),i=r.get("searchDomain"),e.n=1,f.search(i,a);case 1:s=e.v,c=(c=s.map(m)).slice(0,5e3),o.A.replaceData(l,c);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}function T(){return R.apply(this,arguments)}function R(){return(R=_(p().m(function t(){return p().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,i.Su.initialize();case 1:g(),y(),a.A.setVisibility(s.A.BODY_FOOTER_CONTAINER,!0);case 2:return t.a(2)}},t)}))).apply(this,arguments)}await T(),e()}catch(w){e(w)}},1)},771:(t,e,n)=>{n.d(e,{A:()=>h});var r=n(412),o=n(667),a=n(40),i=n(275);const s={[r.F7.GLOBAL]:o.A.Keys.GLOBAL_USERS,[r.F7.EU]:o.A.Keys.EU_USERS,[r.F7.ASIA]:o.A.Keys.ASIA_USERS,[r.F7.JPN]:o.A.Keys.JPN_USERS,[r.F7.KOR]:o.A.Keys.KOR_USERS};function c(t,e){return{id:t.nick_no,name:t.nick_nm,code:t.code,rank:t.rank,world_code:e}}async function u(t){const e=await o.A.get(s[t]);if(null!==e)return e;const n=await async function(t){const e=await a.A.fetchUserJSON(t);if(!e||"object"==typeof e&&!("users"in e))return null;const n=e;return Object.fromEntries(n.users.map(e=>[e.nick_no,c(e,t)]))}(t);return await o.A.cache(s[t],n),n}const l=t=>r.DB[t];async function f(t,e){const n=await u(e),r=n?Object.values(n):[];if(0===r.length)return l(e),{user:null,ok:!1};let o,a;if(t.id)o=t.id,a=t=>t.id;else{if(!t.name)throw new Error("Must pass a user object with either user.name or user.id to find user");o=t.name.toLowerCase(),a=t=>t.name.toLowerCase()}return function(t,e,n){const r=e.find(e=>n(e)===t);return r?(JSON.stringify(r),{user:r,ok:!0}):{user:null,ok:!0}}(o,r,a)}const h={getUserMap:u,findUser:async function(t){if(JSON.stringify(t),!t.name&&!t.id||!t.world_code)throw new Error("Must pass a user object with either user.name or user.id, and user.world_code to find user");let e=t.id?`Numeric ID: ${t.id}`:`Name: '${t.name}'`,n=null;if(n=await f(t,t.world_code),n.ok||(n=await i.A.fetchUser(t)),n.ok){const r=n.user;if(null===r)throw new Error(`Could not find user with ${e} in Server: ${l(t.world_code)}`);return r}throw new Error(`Function did not properly terminate: ${JSON.stringify(n)}`)},setUser:async function(t){await o.A.cache(o.A.Keys.USER,t)},getUser:async function(){return await o.A.get(o.A.Keys.USER)},clearUserData:async function(){await o.A.clearUserData()},clearUserDataLists:async function(){await o.A.clearUserLists()}}},823:(t,e,n)=>{n.d(e,{D:()=>r});var r={SELECT_DATA:"select-data",SHOW_STATS:"show-stats",LOAD_DATA:"load-data"}},833:(t,e,n)=>{n.d(e,{j:()=>o});var r=n(412);const o={date:t=>t[r.Lx.DATE_TIME]?new Date(`${t[r.Lx.DATE_TIME].slice(0,10)}T00:00:00`):"N/A",season:t=>t[r.Lx.SEASON_CODE],"is-first-pick":t=>t[r.Lx.FIRST_PICK]?1:0,"is-win":t=>t[r.Lx.WIN]?1:0,"victory-points":t=>t[r.Lx.P1_POINTS],"p1.picks":t=>t[r.Lx.P1_PICKS],"p2.picks":t=>t[r.Lx.P2_PICKS],"p1.prebans":t=>t[r.Lx.P1_PREBANS],"p2.prebans":t=>t[r.Lx.P2_PREBANS],"p1.postban":t=>t[r.Lx.P1_POSTBAN],"p2.postban":t=>t[r.Lx.P2_POSTBAN],prebans:t=>[...t[r.Lx.P1_PREBANS],...t[r.Lx.P2_PREBANS]],"p1.pick1":t=>t[r.Lx.P1_PICKS][0],"p1.pick2":t=>t[r.Lx.P1_PICKS][1],"p1.pick3":t=>t[r.Lx.P1_PICKS][2],"p1.pick4":t=>t[r.Lx.P1_PICKS][3],"p1.pick5":t=>t[r.Lx.P1_PICKS][4],"p2.pick1":t=>t[r.Lx.P2_PICKS][0],"p2.pick2":t=>t[r.Lx.P2_PICKS][1],"p2.pick3":t=>t[r.Lx.P2_PICKS][2],"p2.pick4":t=>t[r.Lx.P2_PICKS][3],"p2.pick5":t=>t[r.Lx.P2_PICKS][4],"p1.league":t=>t[r.Lx.P1_LEAGUE],"p2.league":t=>t[r.Lx.P2_LEAGUE],"p1.server":t=>t[r.Lx.P1_SERVER],"p2.server":t=>t[r.Lx.P2_SERVER],"p1.id":t=>Number(t[r.Lx.P1_ID]),"p2.id":t=>Number(t[r.Lx.P2_ID]),"p1.mvp":t=>t[r.Lx.P1_MVP],"p2.mvp":t=>t[r.Lx.P2_MVP],"is-first-turn":t=>t[r.Lx.FIRST_TURN],"first-turn-hero":t=>t[r.Lx.FIRST_TURN_HERO],turns:t=>t[r.Lx.TURNS],seconds:t=>t[r.Lx.SECONDS],"point-gain":t=>t[r.Lx.POINT_GAIN]}},834:(t,e,n)=>{n.d(e,{A:()=>i});var r=n(667),o=n(40),a=n(275);const i={async getArtifactCodeToNameMap(){let t=await r.A.get(r.A.Keys.ARTIFACTS);return t||(t=await this.fetchAndCacheArtifacts()),t},getArtifactLowercaseNameMap:async function(){let t=await r.A.get(r.A.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP);if(null!==t)return t;const e=await this.getArtifactCodeToNameMap();return t=Object.fromEntries(Object.values(e).filter(t=>null!==t).map(t=>[t.toLowerCase(),t])),await r.A.cache(r.A.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP,t),t},getArtifactObjectList:async function(){let t=await r.A.get(r.A.Keys.ARTIFACT_OBJECT_LIST);if(null!==t)return t;const e=await this.getArtifactCodeToNameMap();return t=Object.entries(e).map(([t,e])=>({id:t,name:e})),await r.A.cache(r.A.Keys.ARTIFACT_OBJECT_LIST,t),t},fetchAndCacheArtifacts:async function(){const t=await async function(){let t=await o.A.fetchArtifactJSON("en");return null===t&&(t=await a.A.fetchArtifactJson()),null===t?(console.error("Could not get artifact Json map from E7 server or flask server"),null):Object.fromEntries(t.filter(t=>null!==t.name).map(t=>[t.code,t.name]))}();return null===t?{}:(await r.A.cache(r.A.Keys.ARTIFACTS,t),t)},clearArtifactData:async function(){await r.A.delete(r.A.Keys.ARTIFACTS)},convertCodeToName:function(t,e){return e[t]||t}}},836:(t,e,n)=>{n.d(e,{n:()=>l});var r=n(528),o=n(706),a=n(205),i=n(667),s=n(771),c=n(834),u=n(149);let l={HeroManager:r.A,BattleManager:o.A,SeasonManager:a.A,UserManager:s.A,ClientCache:i.A,ArtifactManager:c.A,LangManager:u.W}},874:(t,e,n)=>{n.d(e,{Su:()=>_});var r=n(121),o=n(412),a=n(771),i=n(987),s=n(136),c=n(836);function u(t){const e=document.createElement("a");e.classList.add("d-none"),e.href=t,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)}function l(){window.location.href=URL_UTILS.HOME_PAGE_URL}function f(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",async function(e){if(!("dataset"in t)||!t.dataset||"object"!=typeof t.dataset||!("nav"in t.dataset))return;const n=t.dataset.nav;if(Object.values(r.DG).includes(n))if(n===r.DG.SELECT_DATA)await r.qD.setState(r.DG.SELECT_DATA),l();else if(n===r.DG.SHOW_STATS){await a.A.getUser()?(await r.qD.setState(r.DG.SHOW_STATS),l()):(await r.qD.setState(r.DG.SELECT_DATA),await s.A.pushState({messages:["Active user not found; you must either query a valid user or upload battles to view hero stats."],actions:[s.A.ACTIONS.SHOW_NO_USER_MSG]}),l())}})})}function h(){i.A.NAV_BAR.CLEAR_DATA_BTN.addEventListener("click",async function(){await a.A.getUser()?(await r.qD.setState(r.DG.SELECT_DATA),await s.A.pushActions([s.A.ACTIONS.CLEAR_USER])):(await r.qD.setState(r.DG.SELECT_DATA),await s.A.pushActions([s.A.ACTIONS.SHOW_DATA_ALREADY_CLEARED_MSG])),l()})}function p(t){t?(i.A.NAV_BAR.USER_NAME.innerText=t.name,i.A.NAV_BAR.USER_ID.innerText=t.id,i.A.NAV_BAR.USER_SERVER.innerText=o.DB[t.world_code]):(i.A.NAV_BAR.USER_NAME.innerText="(None)",i.A.NAV_BAR.USER_ID.innerText="(None)",i.A.NAV_BAR.USER_SERVER.innerText="(None)")}function d(){i.A.NAV_BAR.EXPORT_CSV_BTN.addEventListener("click",async function(){const t=await c.n.UserManager.getUser();if(!t)return await s.A.pushState({messages:["User not found; cannot export data without an active user"],actions:[s.A.ACTIONS.SHOW_NO_USER_MSG]}),await r.qD.setState(r.DG.SELECT_DATA),void l();const e=(new Date).toISOString().split("T")[0]||"",n=`${t.name} (${t.id}) ${e}.csv`,a=await c.n.BattleManager.getBattles();!function(t,e){const n=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(n),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(function(t){const e=o.ll,n=[];n.push(e.map(t=>`"${t}"`).join(","));for(const r of t){const t=e.map(t=>{let e=r[t]??"";return Array.isArray(e)&&(e=JSON.stringify(e).replace(/"/g,'""')),`"${e}"`});n.push(t.join(","))}return n.join("\n")}(Object.values(a)),n)})}function E(){i.A.NAV_BAR.OFFICIAL_SITE_BTN.addEventListener("click",async function(){const t=await c.n.UserManager.getUser();if(t){const e=function(t,e){return`${o.F4}/${e}/gg/battlerecord/${t.world_code}/${t.id}`}(t,await c.n.LangManager.getLang());u(e)}else u(o.W4)})}let _={addNavListeners:f,addClearDataBtnListener:h,writeUserInfo:p,initialize:async function(){p(await a.A.getUser()),f(),h(),d(),E()},navToHome:l,addExportCSVBtnListener:d,addOfficialSiteBtnListener:E}},929:(t,e,n)=>{function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===l(t)}n.d(e,{A:()=>W});function o(t){return"string"==typeof t}function a(t){return"number"==typeof t}function i(t){return!0===t||!1===t||function(t){return s(t)&&null!==t}(t)&&"[object Boolean]"==l(t)}function s(t){return"object"==typeof t}function c(t){return null!=t}function u(t){return!t.trim().length}function l(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const f=Object.prototype.hasOwnProperty;class h{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(t=>{let n=p(t);this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight}),this._keys.forEach(t=>{t.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function p(t){let e=null,n=null,a=null,i=1,s=null;if(o(t)||r(t))a=t,e=d(t),n=E(t);else{if(!f.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const r=t.name;if(a=r,f.call(t,"weight")&&(i=t.weight,i<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(r));e=d(r),n=E(r),s=t.getFn}return{path:e,id:n,weight:i,src:a,getFn:s}}function d(t){return r(t)?t:t.split(".")}function E(t){return r(t)?t.join("."):t}var _={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],s=!1;const u=(t,e,l)=>{if(c(t))if(e[l]){const f=t[e[l]];if(!c(f))return;if(l===e.length-1&&(o(f)||a(f)||i(f)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(f));else if(r(f)){s=!0;for(let t=0,n=f.length;t<n;t+=1)u(f[t],e,l+1)}else e.length&&u(f,e,l+1)}else n.push(t)};return u(t,o(e)?e.split("."):e,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const A=/[^ ]+/g;class S{constructor({getFn:t=_.getFn,fieldNormWeight:e=_.fieldNormWeight}={}){this.norm=function(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(e){const o=e.match(A).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*t),i=parseFloat(Math.round(a*r)/r);return n.set(o,i),i},clear(){n.clear()}}}(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((t,e)=>{this._keysMap[t.id]=e})}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,o(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();o(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!c(t)||u(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach((e,a)=>{let i=e.getFn?e.getFn(t):this.getFn(t,e.path);if(c(i))if(r(i)){let t=[];const e=[{nestedArrIndex:-1,value:i}];for(;e.length;){const{nestedArrIndex:n,value:a}=e.pop();if(c(a))if(o(a)&&!u(a)){let e={v:a,i:n,n:this.norm.get(a)};t.push(e)}else r(a)&&a.forEach((t,n)=>{e.push({nestedArrIndex:n,value:t})})}n.$[a]=t}else if(o(i)&&!u(i)){let t={v:i,n:this.norm.get(i)};n.$[a]=t}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function g(t,e,{getFn:n=_.getFn,fieldNormWeight:r=_.fieldNormWeight}={}){const o=new S({getFn:n,fieldNormWeight:r});return o.setKeys(t.map(p)),o.setSources(e),o.create(),o}function m(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:o=_.distance,ignoreLocation:a=_.ignoreLocation}={}){const i=e/t.length;if(a)return i;const s=Math.abs(r-n);return o?i+s/o:s?1:i}const y=32;function T(t,e,n,{location:r=_.location,distance:o=_.distance,threshold:a=_.threshold,findAllMatches:i=_.findAllMatches,minMatchCharLength:s=_.minMatchCharLength,includeMatches:c=_.includeMatches,ignoreLocation:u=_.ignoreLocation}={}){if(e.length>y)throw new Error(`Pattern length exceeds max of ${y}.`);const l=e.length,f=t.length,h=Math.max(0,Math.min(r,f));let p=a,d=h;const E=s>1||c,A=E?Array(f):[];let S;for(;(S=t.indexOf(e,d))>-1;){let t=m(e,{currentLocation:S,expectedLocation:h,distance:o,ignoreLocation:u});if(p=Math.min(t,p),d=S+l,E){let t=0;for(;t<l;)A[S+t]=1,t+=1}}d=-1;let g=[],T=1,R=l+f;const w=1<<l-1;for(let r=0;r<l;r+=1){let a=0,s=R;for(;a<s;){m(e,{errors:r,currentLocation:h+s,expectedLocation:h,distance:o,ignoreLocation:u})<=p?a=s:R=s,s=Math.floor((R-a)/2+a)}R=s;let c=Math.max(1,h-s+1),_=i?f:Math.min(h+s,f)+l,S=Array(_+2);S[_+1]=(1<<r)-1;for(let a=_;a>=c;a-=1){let i=a-1,s=n[t.charAt(i)];if(E&&(A[i]=+!!s),S[a]=(S[a+1]<<1|1)&s,r&&(S[a]|=(g[a+1]|g[a])<<1|1|g[a+1]),S[a]&w&&(T=m(e,{errors:r,currentLocation:i,expectedLocation:h,distance:o,ignoreLocation:u}),T<=p)){if(p=T,d=i,d<=h)break;c=Math.max(1,2*h-d)}}if(m(e,{errors:r+1,currentLocation:h,expectedLocation:h,distance:o,ignoreLocation:u})>p)break;g=S}const v={isMatch:d>=0,score:Math.max(.001,T)};if(E){const t=function(t=[],e=_.minMatchCharLength){let n=[],r=-1,o=-1,a=0;for(let i=t.length;a<i;a+=1){let i=t[a];i&&-1===r?r=a:i||-1===r||(o=a-1,o-r+1>=e&&n.push([r,o]),r=-1)}return t[a-1]&&a-r>=e&&n.push([r,a-1]),n}(A,s);t.length?c&&(v.indices=t):v.isMatch=!1}return v}function R(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const o=t.charAt(n);e[o]=(e[o]||0)|1<<r-n-1}return e}const w=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class v{constructor(t,{location:e=_.location,threshold:n=_.threshold,distance:r=_.distance,includeMatches:o=_.includeMatches,findAllMatches:a=_.findAllMatches,minMatchCharLength:i=_.minMatchCharLength,isCaseSensitive:s=_.isCaseSensitive,ignoreDiacritics:c=_.ignoreDiacritics,ignoreLocation:u=_.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:s,ignoreDiacritics:c,ignoreLocation:u},t=s?t:t.toLowerCase(),t=c?w(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const l=(t,e)=>{this.chunks.push({pattern:t,alphabet:R(t),startIndex:e})},f=this.pattern.length;if(f>y){let t=0;const e=f%y,n=f-e;for(;t<n;)l(this.pattern.substr(t,y),t),t+=y;if(e){const t=f-y;l(this.pattern.substr(t),t)}}else l(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,ignoreDiacritics:n,includeMatches:r}=this.options;if(t=e?t:t.toLowerCase(),t=n?w(t):t,this.pattern===t){let e={isMatch:!0,score:0};return r&&(e.indices=[[0,t.length-1]]),e}const{location:o,distance:a,threshold:i,findAllMatches:s,minMatchCharLength:c,ignoreLocation:u}=this.options;let l=[],f=0,h=!1;this.chunks.forEach(({pattern:e,alphabet:n,startIndex:p})=>{const{isMatch:d,score:E,indices:_}=T(t,e,n,{location:o+p,distance:a,threshold:i,findAllMatches:s,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});d&&(h=!0),f+=E,d&&_&&(l=[...l,..._])});let p={isMatch:h,score:h?f/this.chunks.length:1};return h&&r&&(p.indices=l),p}}class L{constructor(t){this.pattern=t}static isMultiMatch(t){return b(t,this.multiRegex)}static isSingleMatch(t){return b(t,this.singleRegex)}search(){}}function b(t,e){const n=t.match(e);return n?n[1]:null}class N extends L{constructor(t,{location:e=_.location,threshold:n=_.threshold,distance:r=_.distance,includeMatches:o=_.includeMatches,findAllMatches:a=_.findAllMatches,minMatchCharLength:i=_.minMatchCharLength,isCaseSensitive:s=_.isCaseSensitive,ignoreDiacritics:c=_.ignoreDiacritics,ignoreLocation:u=_.ignoreLocation}={}){super(t),this._bitapSearch=new v(t,{location:e,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:i,isCaseSensitive:s,ignoreDiacritics:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class O extends L{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],o=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+o,r.push([e,n-1]);const a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}const P=[class extends L{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},O,class extends L{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends L{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends L{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends L{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends L{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},N],I=P.length,C=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const D=new Set([N.type,O.type]);class x{constructor(t,{isCaseSensitive:e=_.isCaseSensitive,ignoreDiacritics:n=_.ignoreDiacritics,includeMatches:r=_.includeMatches,minMatchCharLength:o=_.minMatchCharLength,ignoreLocation:a=_.ignoreLocation,findAllMatches:i=_.findAllMatches,location:s=_.location,threshold:c=_.threshold,distance:u=_.distance}={}){this.query=null,this.options={isCaseSensitive:e,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:o,findAllMatches:i,ignoreLocation:a,location:s,threshold:c,distance:u},t=e?t:t.toLowerCase(),t=n?w(t):t,this.pattern=t,this.query=function(t,e={}){return t.split("|").map(t=>{let n=t.trim().split(C).filter(t=>t&&!!t.trim()),r=[];for(let t=0,o=n.length;t<o;t+=1){const o=n[t];let a=!1,i=-1;for(;!a&&++i<I;){const t=P[i];let n=t.isMultiMatch(o);n&&(r.push(new t(n,e)),a=!0)}if(!a)for(i=-1;++i<I;){const t=P[i];let n=t.isSingleMatch(o);if(n){r.push(new t(n,e));break}}}return r})}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:o}=this.options;t=r?t:t.toLowerCase(),t=o?w(t):t;let a=0,i=[],s=0;for(let r=0,o=e.length;r<o;r+=1){const o=e[r];i.length=0,a=0;for(let e=0,r=o.length;e<r;e+=1){const r=o[e],{isMatch:c,indices:u,score:l}=r.search(t);if(!c){s=0,a=0,i.length=0;break}if(a+=1,s+=l,n){const t=r.constructor.type;D.has(t)?i=[...i,...u]:i.push(u)}}if(a){let t={isMatch:!0,score:s/a};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const F=[];function B(t,e){for(let n=0,r=F.length;n<r;n+=1){let r=F[n];if(r.condition(t,e))return new r(t,e)}return new v(t,e)}const M="$and",k="$or",j="$path",U="$val",H=t=>!(!t[M]&&!t[k]),$=t=>({[M]:Object.keys(t).map(e=>({[e]:t[e]}))});function G(t,e,{auto:n=!0}={}){const a=t=>{let i=Object.keys(t);const c=(t=>!!t[j])(t);if(!c&&i.length>1&&!H(t))return a($(t));if((t=>!r(t)&&s(t)&&!H(t))(t)){const r=c?t[j]:i[0],a=c?t[U]:t[r];if(!o(a))throw new Error((t=>`Invalid value for key ${t}`)(r));const s={keyId:E(r),pattern:a};return n&&(s.searcher=B(a,e)),s}let u={children:[],operator:i[0]};return i.forEach(e=>{const n=t[e];r(n)&&n.forEach(t=>{u.children.push(a(t))})}),u};return H(t)||(t=$(t)),a(t)}function K(t,e){const n=t.matches;e.matches=[],c(n)&&n.forEach(t=>{if(!c(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let o={indices:n,value:r};t.key&&(o.key=t.key.src),t.idx>-1&&(o.refIndex=t.idx),e.matches.push(o)})}function V(t,e){e.score=t.score}class W{constructor(t,e={},n){this.options={..._,...e},this.options.useExtendedSearch,this._keyStore=new h(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof S))throw new Error("Incorrect 'index' type");this._myIndex=e||g(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){c(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];t(o,n)&&(this.removeAt(n),n-=1,r-=1,e.push(o))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:s,ignoreFieldNorm:c}=this.options;let u=o(t)?o(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=_.ignoreFieldNorm}){t.forEach(t=>{let n=1;t.matches.forEach(({key:t,norm:r,score:o})=>{const a=t?t.weight:null;n*=Math.pow(0===o&&a?Number.EPSILON:o,(a||1)*(e?1:r))}),t.score=n})}(u,{ignoreFieldNorm:c}),i&&u.sort(s),a(e)&&e>-1&&(u=u.slice(0,e)),function(t,e,{includeMatches:n=_.includeMatches,includeScore:r=_.includeScore}={}){const o=[];return n&&o.push(K),r&&o.push(V),t.map(t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return o.length&&o.forEach(e=>{e(t,r)}),r})}(u,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=B(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:t,i:n,n:o})=>{if(!c(t))return;const{isMatch:a,score:i,indices:s}=e.searchIn(t);a&&r.push({item:t,idx:n,matches:[{score:i,value:t,norm:o,indices:s}]})}),r}_searchLogical(t){const e=G(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:o}=t,a=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:o});return a&&a.length?[{idx:r,item:e,matches:a}]:[]}const o=[];for(let a=0,i=t.children.length;a<i;a+=1){const i=t.children[a],s=n(i,e,r);if(s.length)o.push(...s);else if(t.operator===M)return[]}return o},r=this._myIndex.records,o={},a=[];return r.forEach(({$:t,i:r})=>{if(c(t)){let i=n(e,t,r);i.length&&(o[r]||(o[r]={idx:r,item:t,matches:[]},a.push(o[r])),i.forEach(({matches:t})=>{o[r].matches.push(...t)}))}}),a}_searchObjectList(t){const e=B(t,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:t,i:r})=>{if(!c(t))return;let a=[];n.forEach((n,r)=>{a.push(...this._findMatches({key:n,value:t[r],searcher:e}))}),a.length&&o.push({idx:r,item:t,matches:a})}),o}_findMatches({key:t,value:e,searcher:n}){if(!c(e))return[];let o=[];if(r(e))e.forEach(({v:e,i:r,n:a})=>{if(!c(e))return;const{isMatch:i,score:s,indices:u}=n.searchIn(e);i&&o.push({score:s,key:t,value:e,idx:r,norm:a,indices:u})});else{const{v:r,n:a}=e,{isMatch:i,score:s,indices:c}=n.searchIn(r);i&&o.push({score:s,key:t,value:r,norm:a,indices:c})}return o}}W.version="7.1.0",W.createIndex=g,W.parseIndex=function(t,{getFn:e=_.getFn,fieldNormWeight:n=_.fieldNormWeight}={}){const{keys:r,records:o}=t,a=new S({getFn:e,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(o),a},W.config=_,W.parseQuery=G,function(...t){F.push(...t)}(x)},940:(t,e,n)=>{n.d(e,{A:()=>f});var r,o,a=n(528),i=n(84),s=n(172);function c(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return u(l,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,h={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,s=0,c=t,h.n=n,i}};function p(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=h.p,d=a[2];n>3?(o=d===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(s=0,h.v=r,h.n=a[1]):p<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,h.n=d,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),s=l,c=d;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=h.n<0)?c:n.call(r,h))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),l}var i={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(u(e={},r,function(){return this}),e),p=f.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,u(p,"constructor",f),u(f,"constructor",l),l.displayName="GeneratorFunction",u(f,o,"GeneratorFunction"),u(p),u(p,o,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:d}})()}function u(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}u=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){u(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},u(t,e,n,r)}function l(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}const f={validateFilterSyntax:(r=c().m(function t(e){var n,r,o;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,a.A.getHeroDicts();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.p=2,t.n=3,i.S.fromFilterStr(e,n);case 3:return t.v.asString(),s.GF.write(new s.ev("Validation Passed",r,[s.GF.STYLES.GREEN])),t.a(2,!0);case 4:return t.p=4,o=t.v,console.error(o),s.GF.write(new s.ev("Validation Failed: ".concat(o.message),r,[s.GF.STYLES.RED])),t.a(2,!1)}},t,null,[[2,4]])}),o=function(){var t=this,e=arguments;return new Promise(function(n,o){var a=r.apply(t,e);function i(t){l(a,n,o,i,s,"next",t)}function s(t){l(a,n,o,i,s,"throw",t)}i(void 0)})},function(t){return o.apply(this,arguments)}),setScrollPercent:function(t){"Scrolling to ".concat(t,"%");var e=t/100*(document.documentElement.scrollHeight-window.innerHeight),n=document.documentElement,r=n.style.scrollBehavior;n.style.scrollBehavior="auto",window.scrollTo({top:e}),n.style.scrollBehavior=r},getScrollPercent:function(){var t=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight;return 0===e?0:t/e*100},setVisibility:function(t,e){e?t.classList.remove("d-none"):t.classList.add("d-none")}}},961:(t,e,n)=>{n.d(e,{A:()=>g});var r=n(528),o=n(412);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=l(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var h=function(t){return t.filter(function(t){return t[o.Lx.FIRST_PICK]})};function p(t){return(100*t).toFixed(2)+"%"}function d(t,e){return p(0!==e?t/e:0)}function E(t,e){var n=t[o.Lx.CR_BAR].find(function(t){return t[0]===e});return n?n[1]:null}function _(t,e,n){var r,a,i=function(t){return t.filter(function(t){return t[o.Lx.WIN]})}(t).length,s=t.length,l=0!==e?s/e:0,f=0!==s?i/s:0,h=t.reduce(function(t,e){return t+(e[o.Lx.P1_POSTBAN]===n||e[o.Lx.P2_POSTBAN]===n)},0),_=t.reduce(function(t,e){return t+(e[o.Lx.WIN]||e[o.Lx.P1_POSTBAN]===n||e[o.Lx.P2_POSTBAN]===n)},0),A=t.reduce(function(t,e){return t+e[o.Lx.POINT_GAIN]},0),S=0,g=0,m=0,y=u(t);try{for(y.s();!(a=y.n()).done;){var T=E(a.value,n);null!==T&&0!==T&&(S+=1,g+=T,100===T&&(m+=1))}}catch(t){y.e(t)}finally{y.f()}var R=d(g/100,S);return c(c(c(c(c(c(c(c(c(c(r={},o.D5.HERO_NAME,n),o.D5.BATTLES,s),o.D5.PICK_RATE,p(l)),o.D5.WINS,i),o.D5.WIN_RATE,p(f)),o.D5.POSTBANS,h),o.D5.POSTBAN_RATE,d(h,s)),o.D5.SUCCESS_RATE,d(_,s)),o.D5.PLUS_MINUS,2*i-s),o.D5.POINT_GAIN,A),c(c(c(r,o.D5.AVG_CR,R),o.D5.FIRST_TURNS,m),o.D5.FIRST_TURN_RATE,d(m,S))}function A(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Set,r=0,a=Object.values(t);r<a.length;r++){var i=a[r];(e?i[o.Lx.P1_PICKS_PRIMES]:i[o.Lx.P2_PICKS_PRIMES]).forEach(function(t){n.add(t)})}return n}function S(t){var e=Math.floor(t/60),n=(t%60).toFixed(1);return 0===e?"".concat(n," secs"):"".concat(e," : ").concat(n,"s")}const g={getHeroStats:function(t,e){if(0===t.length)return{playerHeroStats:[],enemyHeroStats:[]};var n,a=t.length,i=A(t,!0),s=A(t,!1),c=[],l=[],f=u(i);try{var h=function(){var i=n.value,s=r.A.getHeroByPrime(i,e),u=t.filter(function(t){return t[o.Lx.P1_PICKS_PRIME_PRODUCT]%i===0});u.length>0&&c.push(_(u,a,s.name))};for(f.s();!(n=f.n()).done;)h()}catch(t){f.e(t)}finally{f.f()}var p,d=u(s);try{var E=function(){var n=p.value,i=r.A.getHeroByPrime(n,e),s=t.filter(function(t){return t[o.Lx.P2_PICKS_PRIME_PRODUCT]%n===0});s.length>0&&l.push(_(s,a,i.name))};for(d.s();!(p=d.n()).done;)E()}catch(t){d.e(t)}finally{d.f()}var S=o.D5.HERO_NAME;return{playerHeroStats:c.sort(function(t,e){return t[S].localeCompare(e[S])}),enemyHeroStats:l.sort(function(t,e){return t[S].localeCompare(e[S])})}},getFirstPickStats:function(t,e){if(0===(t=h(Object.values(t))).length)return[];var n,a=t.length,i={},c=u(t);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(0!==l[o.Lx.P1_PICKS_PRIMES].length){var f=l[o.Lx.P1_PICKS_PRIMES][0];f in i||(i[f]={wins:0,appearances:0}),i[f].wins+=l[o.Lx.WIN],i[f].appearances+=1}}}catch(t){c.e(t)}finally{c.f()}var d=Object.entries(i).map(function(t){var n=s(t,2),o=n[0],i=n[1];return{hero:r.A.getHeroByPrime(o,e).name,wins:i.wins,appearances:i.appearances,win_rate:p(i.wins/i.appearances),appearance_rate:p(i.appearances/a),"+/-":2*i.wins-i.appearances}});return d.sort(function(t,e){return e.appearances-t.appearances}),d},getPrebanStats:function(t,e){var n=r.A.getHeroByName("Empty",e).prime;if(0===t.length)return[];var a,s=function(e,r){return i(new Set(t.map(function(t){return t[e][r]}).filter(function(t){return t&&t!==n})))},c=s(o.Lx.P1_PREBANS_PRIMES,0),l=s(o.Lx.P1_PREBANS_PRIMES,1),f=new Set([].concat(i(c),i(l))),h=[],d=u(f);try{for(d.s();!(a=d.n()).done;){var E=a.value;h.push(E)}}catch(t){d.e(t)}finally{d.f()}var _,A=u(f);try{for(A.s();!(_=A.n()).done;){var S,g=_.value,m=u(f);try{for(m.s();!(S=m.n()).done;){var y=S.value;g<y&&h.push(g*y)}}catch(t){m.e(t)}finally{m.f()}}}catch(t){A.e(t)}finally{A.f()}for(var T=t.length,R=[],w=function(){var n=L[v],r=t.filter(function(t){return t["P1 Prebans Prime Product"]%n===0}),o=r.length;if(o<1)return 1;var a=r.reduce(function(t,e){return t+e.Win},0),i=T>0?o/T:0,s=o>0?a/o:0,c=2*a-o;R.push({preban:e.prime_pair_lookup[n],wins:a,appearances:o,appearance_rate:p(i),win_rate:p(s),"+/-":c})},v=0,L=h;v<L.length;v++)w();return R.sort(function(t,e){return e.appearances-t.appearances}),R},getPerformanceStats:function(t){var e,n={servers:[],leagues:[]},r=t.length,a=Object.values(o.DB),c=Object.values(o.yR),l=u([].concat(i(a.map(function(t){return["Server: ".concat(t),function(e){return e["P2 Server"]===t}]})),i(c.map(function(t){return["League: ".concat(t),function(e){return e["P2 League"]===t}]}))));try{for(l.s();!(e=l.n()).done;){var f=s(e.value,2),h=f[0],d=f[1],E=t.filter(d);if(0!==E.length){var _=E.length,A=E.reduce(function(t,e){return t+e.Win},0),S=_>0?A/_:"N/A",g=r>0?_/r:"N/A",m=E.filter(function(t){return t["First Pick"]}),y=m.reduce(function(t,e){return t+e.Win},0),T=E.filter(function(t){return!t["First Pick"]}),R=T.reduce(function(t,e){return t+e.Win},0);(h.toLowerCase().includes("server")?n.servers:n.leagues).push({label:h,count:_,wins:A,win_rate:"N/A"===S?"N/A":p(S),frequency:p(g),"+/-":2*A-_,fp_games:m.length,sp_games:T.length,fp_wr:m.length>0?p(y/m.length):"N/A",sp_wr:T.length>0?p(R/T.length):"N/A"})}}}catch(t){l.e(t)}finally{l.f()}return[].concat(i(n.servers),i(n.leagues.slice(-4)))},getGeneralStats:function(t,e){t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var n,r=t.length,a=t.reduce(function(t,e){return t+e["Point Gain"]},0),s=r>0?a/r:0,c=t.reduce(function(t,e){return t+e.Turns},0),l=r>0?c/r:0,f=t.length>0?Math.max.apply(Math,i(t.map(function(t){return t.Turns}))):0,d=t.reduce(function(t,e){return t+e.Seconds},0),E=r>0?d/r:0,_=t.length>0?Math.max.apply(Math,i(t.map(function(t){return t.Seconds}))):0,A=S(E),g=S(_),m=t.reduce(function(t,e){return t+e["First Turn"]},0),y=h(t),T=function(t){return t.filter(function(t){return!t[o.Lx.FIRST_PICK]})}(t),R=y.length,w=T.length,v=y.reduce(function(t,e){return t+e.Win},0),L=T.reduce(function(t,e){return t+e.Win},0),b=r?R/r:0,N=r?w/r:0,O=R?v/R:0,P=w?L/w:0,I=r?(v+L)/r:0,C=0,D=0,x=0,F=0,B=u(t);try{for(B.s();!(n=B.n()).done;){n.value.Win?(x+=1,C=Math.max(C,x),F=0):(x=0,F+=1,D=Math.max(D,F))}}catch(t){B.e(t)}finally{B.f()}var M="N/A";return{first_pick_count:R,second_pick_count:w,first_pick_rate:R?p(b):M,second_pick_rate:w?p(N):M,first_pick_winrate:R?p(O):M,second_pick_winrate:w?p(P):M,total_winrate:r?p(I):M,total_battles:r,total_wins:v+L,max_win_streak:C,max_loss_streak:D,avg_ppg:s.toFixed(2),avg_turns:l.toFixed(2),avg_time:A,max_turns:f,max_time:g,first_turn_games:m,first_turn_rate:r?p(m/r):M}}}},971:(t,e,n)=>{n.d(e,{Nk:()=>i,RG:()=>a,yL:()=>o});var r=n(412);const o=new Set("'\"(),_-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),a="   ",i=Object.fromEntries(Object.values(r.pg).map(t=>[t.toLowerCase(),t]))},987:(t,e,n)=>{n.d(e,{A:()=>p});var r=n(494);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var u=function(){return s(function t(){a(this,t)},[{key:"SELECT_DATA_MSG",get:function(){return this._SELECT_DATA_MSG||(this._SELECT_DATA_MSG=r.K.unwrapHtmlElt("select-data-msg"))}},{key:"FILTER_MSG",get:function(){return this._FILTER_MSG||(this._FILTER_MSG=r.K.unwrapHtmlElt("filterMSG"))}},{key:"SELECT_DATA_BODY",get:function(){return this._SELECT_DATA_BODY||(this._SELECT_DATA_BODY=r.K.unwrapHtmlElt("select-data-body"))}},{key:"SHOW_STATS_BODY",get:function(){return this._SHOW_STATS_BODY||(this._SHOW_STATS_BODY=r.K.unwrapHtmlElt("show-stats-body"))}},{key:"LOAD_DATA_BODY",get:function(){return this._LOAD_DATA_BODY||(this._LOAD_DATA_BODY=r.K.unwrapHtmlElt("load-data-body"))}},{key:"CLEAR_DATA_BTN",get:function(){return this._CLEAR_DATA_BTN||(this._CLEAR_DATA_BTN=r.K.unwrapHtmlElt("clear-data-btn"))}},{key:"UPLOAD_FORM",get:function(){return this._UPLOAD_FORM||(this._UPLOAD_FORM=r.K.unwrapHtmlElt("uploadForm"))}},{key:"CSV_FILE",get:function(){return this._CSV_FILE||(this._CSV_FILE=r.K.unwrapHtmlElt("csvFile"))}},{key:"USER_QUERY_FORM_NAME",get:function(){return this._USER_QUERY_FORM_NAME||(this._USER_QUERY_FORM_NAME=r.K.unwrapHtmlElt("user-query-form-name"))}},{key:"USER_QUERY_FORM_SERVER",get:function(){return this._USER_QUERY_FORM_SERVER||(this._USER_QUERY_FORM_SERVER=r.K.unwrapHtmlElt("user-query-form-server"))}},{key:"AUTO_ZOOM_FLAG",get:function(){return this._AUTO_ZOOM_FLAG||(this._AUTO_ZOOM_FLAG=r.K.unwrapHtmlElt("auto-zoom-flag"))}},{key:"FOOTER_BODY",get:function(){return this._FOOTER||(this._FOOTER=r.K.unwrapHtmlElt("footer-body"))}},{key:"USER_NAME",get:function(){return this._USER_NAME||(this._USER_NAME=r.K.unwrapHtmlElt("user-name"))}},{key:"USER_ID",get:function(){return this._USER_ID||(this._USER_ID=r.K.unwrapHtmlElt("user-id"))}},{key:"USER_SERVER",get:function(){return this._USER_SERVER||(this._USER_SERVER=r.K.unwrapHtmlElt("user-server"))}},{key:"BATTLE_FILTER_TOGGLE",get:function(){return this._BATTLE_FILTER_TOGGLER||(this._BATTLE_FILTER_TOGGLER=r.K.unwrapHtmlElt("filter-battle-table"))}},{key:"ID_SEARCH_FLAG",get:function(){return this._ID_SEARCH_FLAG||(this._ID_SEARCH_FLAG=r.K.unwrapHtmlElt("id-search-flag"))}},{key:"ESCAPE_BTN",get:function(){return this._ESCAPE_BTN||(this._ESCAPE_BTN=r.K.unwrapHtmlElt("escape-btn"))}},{key:"SEASON_DETAILS_TBL",get:function(){return this._SEASON_DETAILS_TBL||(this._SEASON_DETAILS_TBL=r.K.unwrapHtmlElt("season-details-tbl"))}},{key:"PERFORMANCE_STATS_TBL",get:function(){return this._PERFORMANCE_STATS_TBL||(this._PERFORMANCE_STATS_TBL=r.K.unwrapHtmlElt("performance-stats-tbl"))}},{key:"FIRST_PICK_STATS_TBL",get:function(){return this._FIRST_PICK_STATS_TBL||(this._FIRST_PICK_STATS_TBL=r.K.unwrapHtmlElt("first-pick-stats-tbl"))}},{key:"PREBAN_STATS_TBL",get:function(){return this._PREBAN_STATS_TBL||(this._PREBAN_STATS_TBL=r.K.unwrapHtmlElt("preban-stats-tbl"))}},{key:"PLAYER_TBL",get:function(){return this._PLAYER_TBL||(this._PLAYER_TBL=r.K.unwrapHtmlElt("player-tbl"))}},{key:"OPPONENT_TBL",get:function(){return this._OPPONENT_TBL||(this._OPPONENT_TBL=r.K.unwrapHtmlElt("opponent-tbl"))}},{key:"BATTLES_TBL",get:function(){return this._BATTLE_TBL||(this._BATTLE_TBL=r.K.unwrapHtmlElt("battles-tbl"))}},{key:"RANK_PLOT",get:function(){return this._RANK_PLOT||(this._RANK_PLOT=r.K.unwrapHtmlElt("rank-plot"))}},{key:"MESSAGE_ELEMENTS_LIST",get:function(){return[this.SELECT_DATA_MSG,this.FILTER_MSG]}}])}(),l=function(){return s(function t(){a(this,t)},[{key:"SIDEBAR_HIDE_BTN",get:function(){return this._SIDEBAR_HIDE_BTN||(this._SIDEBAR_HIDE_BTN=r.K.unwrapHtmlElt("sidebar-hide"))}},{key:"CLEAR_DATA_BTN",get:function(){return this._CLEAR_DATA_BTN||(this._CLEAR_DATA_BTN=r.K.unwrapHtmlElt("clear-data-btn"))}},{key:"EXPORT_CSV_BTN",get:function(){return this._EXPORT_CSV_BTN||(this._EXPORT_CSV_BTN=r.K.unwrapHtmlElt("export-csv-btn"))}},{key:"OFFICIAL_SITE_BTN",get:function(){return this._OFFICIAL_SITE_BTN||(this._OFFICIAL_SITE_BTN=r.K.unwrapHtmlElt("official-site-btn"))}},{key:"USER_NAME",get:function(){return this._USER_NAME||(this._USER_NAME=r.K.unwrapHtmlElt("user-name"))}},{key:"USER_ID",get:function(){return this._USER_ID||(this._USER_ID=r.K.unwrapHtmlElt("user-id"))}},{key:"USER_SERVER",get:function(){return this._USER_SERVER||(this._USER_SERVER=r.K.unwrapHtmlElt("user-server"))}},{key:"SIDEBAR_CONTROL",get:function(){return this._SIDEBAR_CONTROL||(this._SIDEBAR_CONTROL=r.K.unwrapHtmlElt("sidebar-control"))}}])}(),f=function(){return s(function t(){a(this,t)},[{key:"SEARCH_DOMAINS",get:function(){return this._SEARCH_DOMAINS||(this._SEARCH_DOMAINS=r.K.unwrapHtmlElt("search-domains"))}},{key:"SEARCH_SUBMIT_BTN",get:function(){return this._SEARCH_SUBMIT_BTN||(this._SEARCH_SUBMIT_BTN=r.K.unwrapHtmlElt("search-submit-btn"))}},{key:"SEARCH_FORM",get:function(){return this._SEARCH_FORM||(this._SEARCH_FORM=r.K.unwrapHtmlElt("searchForm"))}},{key:"SEARCH_TABLE_CONTAINER",get:function(){return this._SEARCH_TABLE_CONTAINER||(this._SEARCH_TABLE_CONTAINER=r.K.unwrapHtmlElt("search-table-container"))}}])}(),h=function(){return s(function t(){a(this,t)},[{key:"FILTER_SYNTAX_RULES_CONTAINER",get:function(){return this._FILTER_SYNTAX_RULES||(this._FILTER_SYNTAX_RULES=r.K.unwrapHtmlElt("filter-syntax-rules-container"))}},{key:"ALL_CONTENT_CONTAINER",get:function(){return this._ALL_CONTENT_CONTAINER||(this._ALL_CONTENT_CONTAINER=r.K.unwrapHtmlElt("all-content-container"))}}])}();const p={HOME_PAGE:new u,NAV_BAR:new l,SEARCH_PAGE:new f,FILTER_SYNTAX_PAGE:new h,get BODY_FOOTER_CONTAINER(){return this._BODY_FOOTER_CONTAINER||(this._BODY_FOOTER_CONTAINER=r.K.unwrapHtmlElt("body-footer-container"))}}}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return a[t](n,n.exports,s),n.exports}t="function"==typeof Symbol,e=t?Symbol("webpack queues"):"__webpack_queues__",n=t?Symbol("webpack exports"):"__webpack_exports__",r=t?Symbol("webpack error"):"__webpack_error__",o=t=>{t&&t.d<1&&(t.d=1,t.forEach(t=>t.r--),t.forEach(t=>t.r--?t.r++:t()))},s.a=(t,a,i)=>{var s;i&&((s=[]).d=-1);var c,u,l,f=new Set,h=t.exports,p=new Promise((t,e)=>{l=e,u=t});p[n]=h,p[e]=t=>(s&&t(s),f.forEach(t),p.catch(t=>{})),t.exports=p,a(t=>{var a;c=(t=>t.map(t=>{if(null!==t&&"object"==typeof t){if(t[e])return t;if(t.then){var a=[];a.d=0,t.then(t=>{i[n]=t,o(a)},t=>{i[r]=t,o(a)});var i={};return i[e]=t=>t(a),i}}var s={};return s[e]=t=>{},s[n]=t,s}))(t);var i=()=>c.map(t=>{if(t[r])throw t[r];return t[n]}),u=new Promise(t=>{(a=()=>t(i)).r=0;var n=t=>t!==s&&!f.has(t)&&(f.add(t),t&&!t.d&&(a.r++,t.push(a)));c.map(t=>t[e](n))});return a.r?u:i()},t=>(t?l(p[r]=t):u(h),o(s))),s&&s.d<0&&(s.d=0)},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);s(758)})();