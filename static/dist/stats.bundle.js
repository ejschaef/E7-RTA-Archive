/*! For license information please see stats.bundle.js.LICENSE.txt */
(()=>{var t={809:function(t,e){var n,r;n=function t(){var e,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},i=0,c={};function s(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new p(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let e=this._config.newline;e||(a=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,a)),t=[...t.split(e).slice(r)].join(e)}this.isFirstChunk&&S(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(t))&&(t=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+t;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=a.meta.cursor,this._finished||(this._partialLine=r.substring(t-this._baseIndex),this._baseIndex=t),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)n.postMessage({results:a,workerId:c.WORKER_ID,finished:r});else if(S(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!S(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){S(this._config.error)?this._config.error(t):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:t,finished:!1})}}function u(t){var e;(t=t||{}).chunkSize||(t.chunkSize=c.RemoteChunkSize),s.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t,n=this._config.downloadRequestHeaders;for(t in n)e.setRequestHeader(t,n[t])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(t=>null!==(t=t.getResponseHeader("Content-Range"))?parseInt(t.substring(t.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){t=e.statusText||t,this._sendError(new Error(t))}}function l(t){(t=t||{}).chunkSize||(t.chunkSize=c.LocalChunkSize),s.call(this,t);var e,n,r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input,o=(this._config.chunkSize&&(o=Math.min(this._start+this._config.chunkSize,this._input.size),t=n.call(t,this._start,o)),e.readAsText(t,this._config.encoding));r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;s.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){var t,n;if(!this._finished)return t=this._config.chunkSize,e=t?(n=e.substring(0,t),e.substring(t)):(n=e,""),this._finished=!e,this.parseChunk(n)}}function d(t){s.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=w(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(t){var e,n,r,o,a=Math.pow(2,53),i=-a,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,f=0,d=0,p=!1,g=!1,m=[],v={data:[],errors:[],meta:{}};function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function P(){if(v&&r&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(v.data=v.data.filter(function(t){return!w(t)})),_()){if(v)if(Array.isArray(v.data[0])){for(var e=0;_()&&e<v.data.length;e++)v.data[e].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(e,n){S(t.transformHeader)&&(e=t.transformHeader(e,n)),m.push(e)}}function o(e,n){for(var r=t.header?{}:[],o=0;o<e.length;o++){var c=o,l=e[o];l=((e,n)=>(e=>(t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)))(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((t=>{if(s.test(t)&&(t=parseFloat(t),i<t&&t<a))return 1})(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n)(c=t.header?o>=m.length?"__parsed_extra":m[o]:c,l=t.transform?t.transform(l,c):l),"__parsed_extra"===c?(r[c]=r[c]||[],r[c].push(l)):r[c]=l}return t.header&&(o>m.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+o,d+n):o<m.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+o,d+n)),r}var l;v&&(t.header||t.dynamicTyping||t.transform)&&(l=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(o),l=v.data.length):v.data=o(v.data,0),t.header&&v.meta&&(v.meta.fields=m),d+=l)}function _(){return t.header&&0===m.length}function E(t,e,n,r){t={type:t,code:e,message:n},void 0!==r&&(t.row=r),v.errors.push(t)}S(t.step)&&(o=t.step,t.step=function(e){v=e,_()?P():(P(),0!==v.data.length&&(f+=e.data.length,t.preview&&f>t.preview?n.abort():(v.data=v.data[0],o(v,l))))}),this.parse=function(o,a,i){var s=t.quoteChar||'"';return t.newline||(t.newline=this.guessLineEndings(o,s)),r=!1,t.delimiter?S(t.delimiter)&&(t.delimiter=t.delimiter(o),v.meta.delimiter=t.delimiter):((s=((e,n,r,o,a)=>{var i,s,u,l;a=a||[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var f=0;f<a.length;f++){for(var d,p=a[f],h=0,g=0,m=0,v=(u=void 0,new y({comments:o,delimiter:p,newline:n,preview:10}).parse(e)),b=0;b<v.data.length;b++)r&&w(v.data[b])?m++:(g+=d=v.data[b].length,void 0===u?u=d:0<d&&(h+=Math.abs(d-u),u=d));0<v.data.length&&(g/=v.data.length-m),(void 0===s||h<=s)&&(void 0===l||l<g)&&1.99<g&&(s=h,i=p,l=g)}return{successful:!!(t.delimiter=i),bestDelimiter:i}})(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=s.bestDelimiter:(r=!0,t.delimiter=c.DefaultDelimiter),v.meta.delimiter=t.delimiter),s=b(t),t.preview&&t.header&&s.preview++,e=o,n=new y(s),v=n.parse(e,a,i),P(),p?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),e=S(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(p=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),v.meta.aborted=!0,S(t.complete)&&t.complete(v),e=""},this.guessLineEndings=function(t,e){t=t.substring(0,1048576),e=new RegExp(h(e)+"([^]*?)"+h(e),"gm");var n=(t=t.replace(e,"")).split("\r");if(t=1<(e=t.split("\n")).length&&e[0].length<n[0].length,1===n.length||t)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(t){var e=(t=t||{}).delimiter,n=t.newline,r=t.comments,o=t.step,a=t.preview,i=t.fastMode,s=null,u=!1,l=null==t.quoteChar?'"':t.quoteChar,f=l;if(void 0!==t.escapeChar&&(f=t.escapeChar),("string"!=typeof e||-1<c.BAD_DELIMITERS.indexOf(e))&&(e=","),r===e)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<c.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var d=0,p=!1;this.parse=function(c,y,g){if("string"!=typeof c)throw new Error("Input must be a string");var m=c.length,v=e.length,b=n.length,w=r.length,P=S(o),_=[],E=[],k=[],T=d=0;if(!c)return M();if(i||!1!==i&&-1===c.indexOf(l)){for(var O=c.split(n),A=0;A<O.length;A++){if(k=O[A],d+=k.length,A!==O.length-1)d+=n.length;else if(g)return M();if(!r||k.substring(0,w)!==r){if(P){if(_=[],j(k.split(e)),B(),p)return M()}else j(k.split(e));if(a&&a<=A)return _=_.slice(0,a),M(!0)}}return M()}for(var I=c.indexOf(e,d),D=c.indexOf(n,d),x=new RegExp(h(f)+h(l),"g"),L=c.indexOf(l,d);;)if(c[d]===l)for(L=d,d++;;){if(-1===(L=c.indexOf(l,L+1)))return g||E.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:d}),C();if(L===m-1)return C(c.substring(d,L).replace(x,l));if(l===f&&c[L+1]===f)L++;else if(l===f||0===L||c[L-1]!==f){-1!==I&&I<L+1&&(I=c.indexOf(e,L+1));var R=F(-1===(D=-1!==D&&D<L+1?c.indexOf(n,L+1):D)?I:Math.min(I,D));if(c.substr(L+1+R,v)===e){k.push(c.substring(d,L).replace(x,l)),c[d=L+1+R+v]!==l&&(L=c.indexOf(l,d)),I=c.indexOf(e,d),D=c.indexOf(n,d);break}if(R=F(D),c.substring(L+1+R,L+1+R+b)===n){if(k.push(c.substring(d,L).replace(x,l)),N(L+1+R+b),I=c.indexOf(e,d),L=c.indexOf(l,d),P&&(B(),p))return M();if(a&&_.length>=a)return M(!0);break}E.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:d}),L++}}else if(r&&0===k.length&&c.substring(d,d+w)===r){if(-1===D)return M();d=D+b,D=c.indexOf(n,d),I=c.indexOf(e,d)}else if(-1!==I&&(I<D||-1===D))k.push(c.substring(d,I)),d=I+v,I=c.indexOf(e,d);else{if(-1===D)break;if(k.push(c.substring(d,D)),N(D+b),P&&(B(),p))return M();if(a&&_.length>=a)return M(!0)}return C();function j(t){_.push(t),T=d}function F(t){return-1!==t&&(t=c.substring(L+1,t))&&""===t.trim()?t.length:0}function C(t){return g||(void 0===t&&(t=c.substring(d)),k.push(t),d=m,j(k),P&&B()),M()}function N(t){d=t,j(k),k=[],D=c.indexOf(n,d)}function M(r){if(t.header&&!y&&_.length&&!u){var o=_[0],a=Object.create(null),i=new Set(o);let e=!1;for(let n=0;n<o.length;n++){let r=o[n];if(a[r=S(t.transformHeader)?t.transformHeader(r,n):r]){let t,c=a[r];for(;t=r+"_"+c,c++,i.has(t););i.add(t),o[n]=t,a[r]++,e=!0,(s=null===s?{}:s)[t]=r}else a[r]=1,o[n]=r;i.add(r)}e&&console.warn("Duplicate headers found and renamed."),u=!0}return{data:_,errors:E,meta:{delimiter:e,linebreak:n,aborted:p,truncated:!!r,cursor:T+(y||0),renamedHeaders:s}}}function B(){o(M()),_=[],E=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return d}}function g(t){var e=t.data,n=a[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,m(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(S(n.userStep)){for(var i=0;i<e.results.data.length&&(n.userStep({data:e.results.data[i],errors:e.results.errors,meta:e.results.meta},o),!r);i++);delete e.results}else S(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&m(e.workerId,e.results)}function m(t,e){var n=a[t];S(n.userComplete)&&n.userComplete(e),n.terminate(),delete a[t]}function v(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e,n=Array.isArray(t)?[]:{};for(e in t)n[e]=b(t[e]);return n}function w(t,e){return function(){t.apply(e,arguments)}}function S(t){return"function"==typeof t}return c.parse=function(e,r){var o=(r=r||{}).dynamicTyping||!1;if(S(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!S(r.transform)&&r.transform,!r.worker||!c.WORKERS_SUPPORTED)return o=null,c.NODE_STREAM_INPUT,"string"==typeof e?(e=(t=>65279!==t.charCodeAt(0)?t:t.slice(1))(e),o=new(r.download?u:f)(r)):!0===e.readable&&S(e.read)&&S(e.on)?o=new d(r):(n.File&&e instanceof File||e instanceof Object)&&(o=new l(r)),o.stream(e);(o=(()=>{var e;return!!c.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,r=t.toString();return c.BLOB_URL||(c.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(e=new n.Worker(e)).onmessage=g,e.id=i++,a[e.id]=e)})()).userStep=r.step,o.userChunk=r.chunk,o.userComplete=r.complete,o.userError=r.error,r.step=S(r.step),r.chunk=S(r.chunk),r.complete=S(r.complete),r.error=S(r.error),delete r.worker,o.postMessage({input:e,config:r,workerId:o.id})},c.unparse=function(t,e){var n=!1,r=!0,o=",",a="\r\n",i='"',s=i+i,u=!1,l=null,f=!1,d=((()=>{if("object"==typeof e){if("string"!=typeof e.delimiter||c.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(o=e.delimiter),"boolean"!=typeof e.quotes&&"function"!=typeof e.quotes&&!Array.isArray(e.quotes)||(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(i=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(s=e.escapeChar+i),e.escapeFormulae instanceof RegExp?f=e.escapeFormulae:"boolean"==typeof e.escapeFormulae&&e.escapeFormulae&&(f=/^[=+\-@\t\r].*$/)}})(),new RegExp(h(i),"g"));if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return p(null,t,u);if("object"==typeof t[0])return p(l||Object.keys(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),p(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(t,e,n){var i="",c=("string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t)&&0<t.length),s=!Array.isArray(e[0]);if(c&&r){for(var u=0;u<t.length;u++)0<u&&(i+=o),i+=y(t[u],u);0<e.length&&(i+=a)}for(var l=0;l<e.length;l++){var f=(c?t:e[l]).length,d=!1,p=c?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!c&&(d="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&c){for(var h=[],g=0;g<f;g++){var m=s?t[g]:g;h.push(e[l][m])}d=""===h.join("").trim()}if(!d){for(var v=0;v<f;v++){0<v&&!p&&(i+=o);var b=c&&s?t[v]:v;i+=y(e[l][b],v)}l<e.length-1&&(!n||0<f&&!p)&&(i+=a)}}return i}function y(t,e){var r,a;return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(a=!1,f&&"string"==typeof t&&f.test(t)&&(t="'"+t,a=!0),r=t.toString().replace(d,s),(a=a||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||((t,e)=>{for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1})(r,c.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=p,c.NetworkStreamer=u,c.FileStreamer=l,c.StringStreamer=f,c.ReadableStreamStreamer=d,n.jQuery&&((e=n.jQuery).fn.parse=function(t){var r=t.config||{},o=[];return this.each(function(t){if("INPUT"!==e(this).prop("tagName").toUpperCase()||"file"!==e(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:e.extend({},r)})}),a(),this;function a(){if(0===o.length)S(t.complete)&&t.complete();else{var n,r,a,s=o[0];if(S(t.before)){var u=t.before(s.file,s.inputElem);if("object"==typeof u){if("abort"===u.action)return n=s.file,r=s.inputElem,a=u.reason,void(S(t.error)&&t.error({name:"AbortError"},n,r,a));if("skip"===u.action)return void i();"object"==typeof u.config&&(s.instanceConfig=e.extend(s.instanceConfig,u.config))}else if("skip"===u)return void i()}var l=s.instanceConfig.complete;s.instanceConfig.complete=function(t){S(l)&&l(t,s.file,s.inputElem),i()},c.parse(s.file,s.instanceConfig)}}function i(){o.splice(0,1),a()}}),o&&(n.onmessage=function(t){t=t.data,void 0===c.WORKER_ID&&t&&(c.WORKER_ID=t.workerId),"string"==typeof t.input?n.postMessage({workerId:c.WORKER_ID,results:c.parse(t.input,t.config),finished:!0}):(n.File&&t.input instanceof File||t.input instanceof Object)&&(t=c.parse(t.input,t.config))&&n.postMessage({workerId:c.WORKER_ID,results:t,finished:!0})}),(u.prototype=Object.create(s.prototype)).constructor=u,(l.prototype=Object.create(s.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(d.prototype=Object.create(s.prototype)).constructor=d,c},void 0===(r=n.apply(e,[]))||(t.exports=r)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(){var n,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(t,o,a,i){var c=o&&o.prototype instanceof u?o:u,l=Object.create(c.prototype);return e(l,"_invoke",function(t,e,o){var a,i,c,u=0,l=o||[],f=!1,d={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(t,e){return a=t,i=0,c=n,d.n=e,s}};function p(t,e){for(i=t,c=e,r=0;!f&&u&&!o&&r<l.length;r++){var o,a=l[r],p=d.p,h=a[2];t>3?(o=h===e)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=p&&((o=t<2&&p<a[1])?(i=0,d.v=e,d.n=a[1]):p<h&&(o=t<3||a[0]>e||e>h)&&(a[4]=t,a[5]=e,d.n=h,i=0))}if(o||t>1)return s;throw f=!0,e}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),i=l,c=h;(r=i<2?n:c)||!f;){a||(i?i<3?(i>1&&(d.n=-1),p(i,c)):d.n=c:d.v=c);try{if(u=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((r=(f=d.n<0)?c:t.call(e,d))!==s)break}catch(t){a=n,i=1,c=t}finally{u=1}}return{value:r,done:f}}}(t,a,i),!0),l}var s={};function u(){}function l(){}function f(){}r=Object.getPrototypeOf;var d=[][a]?r(r([][a]())):(e(r={},a,function(){return this}),r),p=f.prototype=u.prototype=Object.create(d);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,e(p,"constructor",f),e(f,"constructor",l),l.displayName="GeneratorFunction",e(f,i,"GeneratorFunction"),e(p),e(p,i,"Generator"),e(p,a,function(){return this}),e(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:h}})()}function e(t,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,r,o){if(n)a?a(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r;else{var i=function(n,r){e(t,n,function(t){return this._invoke(n,r,t)})};i("next",0),i("throw",1),i("return",2)}},e(t,n,r,o)}function r(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,s,"next",t)}function s(t){r(i,o,a,c,s,"throw",t)}c(void 0)})}}var a,i,c,s,u,l,f;const d={test:function(t){console.log("Got data in test:",t.rank_plot)},fetchFromPython:(f=o(t().m(function e(n){var r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(n);case 1:if((r=t.v).ok){t.n=3;break}return console.log("Retrying Fetch..."),t.n=2,fetch(n);case 2:r=t.v;case 3:return t.n=4,r.json();case 4:return o=t.v,t.a(2,o||null)}},e)})),function(t){return f.apply(this,arguments)}),fetchHeroData:(l=o(t().m(function e(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},e,this)})),function(){return l.apply(this,arguments)}),fetchBattleData:(u=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return u.apply(this,arguments)}),rsFetchBattleData:(s=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return s.apply(this,arguments)}),fetchSeasonDetails:(c=o(t().m(function e(){var n,r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return n=t.v,t.n=2,n.json();case 2:if(!(r=t.v).success){t.n=3;break}return o=JSON.parse(r.seasonDetails),t.a(2,{seasonDetails:o,error:!1});case 3:return t.a(2,{seasonDetails:null,error:r.error});case 4:return t.a(2)}},e)})),function(){return c.apply(this,arguments)}),fetchUser:(i=o(t().m(function e(n){var r,o,a,i,c;return t().w(function(t){for(;;)switch(t.n){case 0:if(n.name&&n.world_code||n.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:n})});case 2:return r=t.v,t.n=3,r.json();case 3:if(o=t.v,t.p=4,!r.ok){t.n=9;break}if(o.foundUser){t.n=7;break}if(!n.name){t.n=5;break}return a=n.world_code.replace("world_",""),t.a(2,{user:null,error:'Could not find user: "'.concat(n.name,'" in world_code: ').concat(a)});case 5:if(!n.id){t.n=6;break}return t.a(2,{user:null,error:"Could not find user with ID: ".concat(n.id)});case 6:t.n=8;break;case 7:return i=o.user,console.log("Server communication successful; received response data for user"),console.log("Found user: ".concat(JSON.stringify(i))),t.a(2,{user:i,error:!1});case 8:t.n=10;break;case 9:return console.log("Server communication unsuccessful"),t.a(2,{user:null,error:o.error});case 10:t.n=12;break;case 11:return t.p=11,c=t.v,console.error("Error fetching and caching user: ".concat(c)),t.a(2,{user:null,error:c.message});case 12:return t.a(2)}},e,null,[[4,11]])})),function(t){return i.apply(this,arguments)}),fetchDataFromID:(a=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass ID to fetch user");case 1:return t.n=2,fetch("/api/get_battle_data_from_id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return a.apply(this,arguments)})};var p={};function h(t){var e=Number(t.replace("%",""));return e>50?"text-over50":e<50?"text-below50":""}p.functions={populateHeroStatsTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.hero,"</td>\n            <td>").concat(t.games_won,"</td>\n            <td>").concat(t.games_appeared,"</td>\n            <td>").concat(t.appearance_rate,"</td>\n            <td>").concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)});var r=t.includes("Player")?"Player":"Enemy";$("#"+t).DataTable({layout:{topStart:"buttons"},language:{info:"Total rows: _TOTAL_"},order:[[3,"desc"]],buttons:{name:"primary",buttons:["copy",{extend:"csv",text:"CSV",filename:r+" Hero Stats"},{extend:"excel",text:"Excel",filename:r+" Hero Stats"}]},columnDefs:[{targets:"_all",className:"nowrap"},{targets:4,createdCell:function(t,e){var n=Number(e.replace("%",""));n<50?t.style.color="red":n>50&&(t.style.color="mediumspringgreen")}}],pageLength:50,scrollY:"300px",deferRender:!0,scroller:!0,scrollCollapse:!1})},populateSeasonDetailsTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t["Season Number"],"</td>\n            <td>").concat(t.Season,"</td>\n            <td>").concat(t.Start,"</td>\n            <td>").concat(t.End,"</td>\n            <td>").concat(t.Status,"</td>\n            "),n.appendChild(e)})},populateServerStatsTable:function(t,e){var n=document.getElementById("".concat(t,"-body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.server,"</td>\n            <td>").concat(t.count,"</td>\n            <td>").concat(t.frequency,"</td>\n            <td>").concat(t.wins,'</td>\n            <td class="').concat(h(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],'</td>\n            <td class="').concat(h(t.fp_wr),'">').concat(t.fp_wr,'</td>\n            <td class="').concat(h(t.sp_wr),'">').concat(t.sp_wr,"</td>\n            "),n.appendChild(e)})},populatePlayerPrebansTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.preban,"</td>\n            <td>").concat(t.appearances,"</td>\n            <td>").concat(t.appearance_rate,'</td>\n            <td class="').concat(h(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)})},populatePlayerFirstPickTable:function(t,e){var n=document.getElementById("".concat(t,"Body"));n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.hero,"</td>\n            <td>").concat(t.appearances,"</td>\n            <td>").concat(t.appearance_rate,'</td>\n            <td class="').concat(h(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)})},populateFullBattlesTable:function(t,e,n){var r,o=document.getElementById("".concat(t,"Body"));o.innerHTML="",r=n?n.name:0===e.length?"Empty":"UID(".concat(e[0]["P1 ID"],")"),e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t["Date/Time"],"</td>\n            <td>").concat(t["Seq Num"],"</td>\n            <td>").concat(t["P1 ID"],"</td>\n            <td>").concat(t["P1 Server"],"</td>\n            <td>").concat(t["P1 League"],"</td>\n            <td>").concat(t["P1 Points"],"</td>\n            <td>").concat(t["P2 ID"],"</td>\n            <td>").concat(t["P2 Server"],"</td>\n            <td>").concat(t["P2 League"],"</td>\n            <td>").concat(t.Win,"</td>\n            <td>").concat(t["First Pick"],"</td>\n            <td>").concat(t["P1 Preban 1"],"</td>\n            <td>").concat(t["P1 Preban 2"],"</td>\n            <td>").concat(t["P2 Preban 1"],"</td>\n            <td>").concat(t["P2 Preban 2"],"</td>\n            <td>").concat(t["P1 Pick 1"],"</td>\n            <td>").concat(t["P1 Pick 2"],"</td>\n            <td>").concat(t["P1 Pick 3"],"</td>\n            <td>").concat(t["P1 Pick 4"],"</td>\n            <td>").concat(t["P1 Pick 5"],"</td>\n            <td>").concat(t["P2 Pick 1"],"</td>\n            <td>").concat(t["P2 Pick 2"],"</td>\n            <td>").concat(t["P2 Pick 3"],"</td>\n            <td>").concat(t["P2 Pick 4"],"</td>\n            <td>").concat(t["P2 Pick 5"],"</td>\n            <td>").concat(t["P1 Postban"],"</td>\n            <td>").concat(t["P2 Postban"],"</td>\n            "),o.appendChild(e)});var a="".concat(r," Battle Data");return $("#BattlesTable").DataTable({layout:{topStart:"buttons"},language:{info:"Total rows: _TOTAL_"},order:[[0,"desc"]],columnDefs:[{targets:"_all",className:"nowrap"},{targets:9,createdCell:function(t,e){"W"===e?t.style.color="mediumspringgreen":"L"===e&&(t.style.color="red")}},{targets:10,createdCell:function(t,e){"True"===e&&(t.style.color="deepskyblue")}}],buttons:{name:"primary",buttons:["copy",{extend:"csv",text:"CSV",filename:a},{extend:"excel",text:"Excel",filename:a}]},pageLength:50,scrollY:"300px",deferRender:!0,scroller:!0,scrollCollapse:!1,columns:[{data:"Date/Time"},{data:"Seq Num"},{data:"P1 ID"},{data:"P1 Server"},{data:"P1 League"},{data:"P1 Points"},{data:"P2 ID"},{data:"P2 Server"},{data:"P2 League"},{data:"Win"},{data:"First Pick"},{data:"P1 Preban 1"},{data:"P1 Preban 2"},{data:"P2 Preban 1"},{data:"P2 Preban 2"},{data:"P1 Pick 1"},{data:"P1 Pick 2"},{data:"P1 Pick 3"},{data:"P1 Pick 4"},{data:"P1 Pick 5"},{data:"P2 Pick 1"},{data:"P2 Pick 2"},{data:"P2 Pick 3"},{data:"P2 Pick 4"},{data:"P2 Pick 5"},{data:"P1 Postban"},{data:"P2 Postban"}]})},replaceDatatableData:function(t,e){t.clear().rows.add(e).draw()}};var y={};y.functions={populateGeneralStats:function(t){document.getElementById("total-battles").textContent=t.total_battles,document.getElementById("first-pick-count").textContent=t.first_pick_count,document.getElementById("first-pick-rate").textContent=" (".concat(t.first_pick_rate,")"),document.getElementById("second-pick-count").textContent=t.second_pick_count,document.getElementById("second-pick-rate").textContent=" (".concat(t.second_pick_rate,")"),document.getElementById("total-winrate").textContent=t.total_winrate,document.getElementById("first-pick-winrate").textContent=t.first_pick_winrate,document.getElementById("second-pick-winrate").textContent=t.second_pick_winrate,document.getElementById("total-wins").textContent=t.total_wins,document.getElementById("max-win-streak").textContent=t.max_win_streak,document.getElementById("max-loss-streak").textContent=t.max_loss_streak,document.getElementById("avg-ppg").textContent=t.avg_ppg},populateRankPlot:function(t){var e=document.getElementById("rank-plot-container");e.innerHTML=t,e.querySelectorAll("script").forEach(function(t){var e=document.createElement("script");t.src?e.src=t.src:e.textContent=t.textContent,document.body.appendChild(e)}),setTimeout(function(){window.dispatchEvent(new Event("resize"))},10)}};var g,m=n(809),v=n.n(m),b=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),w={world_global:"Global",world_kor:"Korea",world_jpn:"Japan",world_asia:"Asia",world_eu:"Europe"},S=864e5,P={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},_=["Date/Time","Seq Num","P1 ID","P1 Server","P1 League","P1 Points","P2 ID","P2 Server","P2 League","Win","First Pick","P1 Preban 1","P1 Preban 2","P2 Preban 1","P2 Preban 2","P1 Pick 1","P1 Pick 2","P1 Pick 3","P1 Pick 4","P1 Pick 5","P2 Pick 1","P2 Pick 2","P2 Pick 3","P2 Pick 4","P2 Pick 5","P1 Postban","P2 Postban"],E=function(t){for(var e=new Uint8Array(30001),n=[],r=2;r<=t;r++)if(!e[r]){n.push(r);for(var o=r*r;o<=t;o+=r)e[o]=1}return n}(3e4);function k(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return T(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,T(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,T(f,"constructor",u),T(u,"constructor",s),s.displayName="GeneratorFunction",T(u,o,"GeneratorFunction"),T(f),T(f,o,"Generator"),T(f,r,function(){return this}),T(f,"toString",function(){return"[object Generator]"}),(k=function(){return{w:a,m:d}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){T(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},T(t,e,n,r)}function O(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}g=k().m(function t(e){var n,r,o;return k().w(function(t){for(;;)switch(t.n){case 0:return this.validateCSV(e),t.n=1,e.text();case 1:if(n=t.v,(r=v().parse(n,{header:!0,skipEmptyLines:!0,quoteChar:'"',dynamicTyping:!1})).meta.fields.forEach(function(t,e){var n=t.trim().replace(/"/g,"");if(n!==_[e])throw new Error("Header ".concat(n," does not match expected column ").concat(_[e]," at index ").concat(e))}),!(r.errors.length>0)){t.n=2;break}throw o=r.errors[0],new Error("Failed to parse CSV: Row ".concat(o.row,", ").concat(o.message));case 2:return t.a(2,r.data)}},t,this)});const A=(t,e)=>e.some(e=>t instanceof e);let I,D;const x=new WeakMap,L=new WeakMap,R=new WeakMap;let j={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return x.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return N(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function F(t){j=t(j)}function C(t){return"function"==typeof t?(e=t,(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(M(this),t),N(this.request)}:function(...t){return N(e.apply(M(this),t))}):(t instanceof IDBTransaction&&function(t){if(x.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});x.set(t,e)}(t),A(t,I||(I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,j):t);var e}function N(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(N(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return R.set(e,t),e}(t);if(L.has(t))return L.get(t);const e=C(t);return e!==t&&(L.set(t,e),R.set(e,t)),e}const M=t=>R.get(t);function B(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),c=N(i);return r&&i.addEventListener("upgradeneeded",t=>{r(N(i.result),t.oldVersion,t.newVersion,N(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const G=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],H=new Map;function V(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(H.get(e))return H.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=U.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!G.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return H.set(e,a),a}F(t=>({...t,get:(e,n,r)=>V(e,n)||t.get(e,n,r),has:(e,n)=>!!V(e,n)||t.has(e,n)}));const K=["continue","continuePrimaryKey","advance"],W={},q=new WeakMap,z=new WeakMap,J={get(t,e){if(!K.includes(e))return t[e];let n=W[e];return n||(n=W[e]=function(...t){q.set(this,z.get(this)[e](...t))}),n}};async function*Y(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,J);for(z.set(n,e),R.set(n,M(e));e;)yield n,e=await(q.get(n)||e.continue()),q.delete(n)}function X(t,e){return e===Symbol.asyncIterator&&A(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&A(t,[IDBIndex,IDBObjectStore])}function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function Z(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return tt(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(tt(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,tt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,tt(f,"constructor",u),tt(u,"constructor",s),s.displayName="GeneratorFunction",tt(u,o,"GeneratorFunction"),tt(f),tt(f,o,"Generator"),tt(f,r,function(){return this}),tt(f,"toString",function(){return"[object Generator]"}),(Z=function(){return{w:a,m:d}})()}function tt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}tt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){tt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},tt(t,e,n,r)}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function nt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Q(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rt(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function ot(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){rt(a,r,o,i,c,"next",t)}function c(t){rt(a,r,o,i,c,"throw",t)}i(void 0)})}}function at(t,e){return it.apply(this,arguments)}function it(){return(it=ot(Z().m(function t(e,n){var r;return Z().w(function(t){for(;;)switch(t.n){case 0:return(r=e.transaction(n,"readwrite")).objectStore(n).clear(),t.n=1,r.done;case 1:return t.a(2)}},t)}))).apply(this,arguments)}F(t=>({...t,get:(e,n,r)=>X(e,n)?Y:t.get(e,n,r),has:(e,n)=>X(e,n)||t.has(e,n)}));var ct,st,ut,lt,ft,dt,pt,ht,yt,gt,mt,vt,bt,wt,St,Pt,_t,Et,kt={USER:"current-user",HERO_MANAGER:"hero-manager",BATTLES:"battles",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",FILTER_STR:"filter-str",STATS:"stats",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},Tt={autoZoom:kt.AUTO_ZOOM_FLAG,autoQuery:kt.AUTO_QUERY_FLAG},Ot={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach(function(e){nt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},kt),MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:(Et=ot(Z().m(function t(){return Z().w(function(t){for(;;)if(0===t.n)return t.a(2,B(Ot.consts.DB_NAME,Ot.consts.DB_VERSION,{upgrade:function(t){t.objectStoreNames.contains(Ot.consts.STORE_NAME)&&(t.deleteObjectStore(Ot.consts.STORE_NAME),console.log("Old store deleted")),t.objectStoreNames.contains(Ot.consts.STORE_NAME)||(console.log("Created data store"),t.createObjectStore(Ot.consts.STORE_NAME)),t.objectStoreNames.contains(Ot.consts.META_STORE_NAME)||(console.log("Created meta data store"),t.createObjectStore(Ot.consts.META_STORE_NAME))}}))},t)})),function(){return Et.apply(this,arguments)}),get:(_t=ot(Z().m(function t(e){var n,r;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.get(this.consts.STORE_NAME,e);case 2:if(null===(r=t.v)){t.n=3;break}console.log("Found ".concat(e," in cache")),t.n=4;break;case 3:return console.log("".concat(e," not found in cache; returning null")),t.a(2,null);case 4:return t.n=5,this.checkCacheTimeout(e);case 5:if(!t.v){t.n=6;break}return console.log("Timeout not reached, using cache for ".concat(e)),t.a(2,r);case 6:return console.log("Timeout reached, returning null for ".concat(e)),t.a(2,null);case 7:return t.a(2)}},t,this)})),function(t){return _t.apply(this,arguments)}),cache:(Pt=ot(Z().m(function t(e,n){var r;return Z().w(function(t){for(;;)switch(t.n){case 0:return console.log("Caching ".concat(e," with data: ").concat(n)),t.n=1,this.openDB();case 1:return r=t.v,t.n=2,r.put(this.consts.STORE_NAME,n,e);case 2:return t.n=3,this.setTimestamp(e,Date.now());case 3:return t.a(2)}},t,this)})),function(t,e){return Pt.apply(this,arguments)}),delete:(St=ot(Z().m(function t(e){var n;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.delete(this.consts.STORE_NAME,e);case 2:return t.n=3,this.deleteTimestamp(e);case 3:return t.a(2)}},t,this)})),function(t){return St.apply(this,arguments)}),deleteDB:(wt=ot(Z().m(function t(){return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,indexedDB.deleteDatabase(this.consts.DB_NAME);case 1:console.log("Database deleted");case 2:return t.a(2)}},t,this)})),function(){return wt.apply(this,arguments)}),getTimestamp:(bt=ot(Z().m(function t(e){var n,r,o;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.get(this.consts.META_STORE_NAME,r);case 2:return o=t.v,t.a(2,null!=o?o:null)}},t,this)})),function(t){return bt.apply(this,arguments)}),setTimestamp:(vt=ot(Z().m(function t(e,n){var r,o,a;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return r=t.v,o="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,r.put(this.consts.META_STORE_NAME,n,o);case 2:return t.n=3,r.get(this.consts.META_STORE_NAME,o);case 3:a=t.v,console.log("Timestamp set: ".concat(a));case 4:return t.a(2)}},t,this)})),function(t,e){return vt.apply(this,arguments)}),deleteTimestamp:(mt=ot(Z().m(function t(e){var n,r;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.delete(this.consts.META_STORE_NAME,r);case 2:console.log("Timestamp deleted for <".concat(e,">"));case 3:return t.a(2)}},t,this)})),function(t){return mt.apply(this,arguments)}),clearData:(gt=ot(Z().m(function t(){var e;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return e=t.v,t.n=2,at(e,this.consts.STORE_NAME);case 2:return t.n=3,at(e,this.consts.META_STORE_NAME);case 3:console.log("All data cleared from data cache and meta data cache");case 4:return t.a(2)}},t,this)})),function(){return gt.apply(this,arguments)}),clearUserData:(yt=ot(Z().m(function t(){var e,n=this;return Z().w(function(t){for(;;)switch(t.n){case 0:return e=[kt.USER,kt.BATTLES,kt.UPLOADED_BATTLES,kt.FILTERED_BATTLES,kt.FILTER_STR,kt.STATS],t.n=1,Promise.all(e.map(function(t){return n.delete(t)}));case 1:console.log("User data cleared from data cache");case 2:return t.a(2)}},t)})),function(){return yt.apply(this,arguments)}),clearSeasonData:(ht=ot(Z().m(function t(){return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.delete(kt.SEASON_DETAILS);case 1:console.log("Season data cleared from data cache");case 2:return t.a(2)}},t,this)})),function(){return ht.apply(this,arguments)}),checkCacheTimeout:(pt=ot(Z().m(function t(e){var n,r;return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getTimestamp(e);case 1:if(n=t.v,r=Date.now(),console.log("Checking Timeout for <".concat(e,"> | Current time: ").concat(r,", cache timestamp: ").concat(n,", difference: ").concat(r-n," ms")),n&&!(r-n>Ot.consts.CACHE_TIMEOUT)){t.n=3;break}return console.log("Cache timeout reached, clearing data from <".concat(e,">")),t.n=2,this.delete(e);case 2:return t.a(2,!1);case 3:return t.a(2,!0)}},t,this)})),function(t){return pt.apply(this,arguments)}),getFilterStr:(dt=ot(Z().m(function t(){return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(Ot.Keys.FILTER_STR);case 1:return t.a(2,t.v)}},t,this)})),function(){return dt.apply(this,arguments)}),setFilterStr:(ft=ot(Z().m(function t(e){return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(Ot.Keys.FILTER_STR,e);case 1:return t.a(2)}},t,this)})),function(t){return ft.apply(this,arguments)}),getStats:(lt=ot(Z().m(function t(){return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(Ot.Keys.STATS);case 1:return t.a(2,t.v)}},t,this)})),function(){return lt.apply(this,arguments)}),setStats:(ut=ot(Z().m(function t(e){return Z().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(kt.STATS,e);case 1:return t.a(2)}},t,this)})),function(t){return ut.apply(this,arguments)}),getFlag:(st=ot(Z().m(function t(e){var n;return Z().w(function(t){for(;;)switch(t.n){case 0:if(n=Tt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.get(n);case 2:return t.a(2,t.v)}},t,this)})),function(t){return st.apply(this,arguments)}),setFlag:(ct=ot(Z().m(function t(e,n){var r;return Z().w(function(t){for(;;)switch(t.n){case 0:if(r=Tt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.cache(r,n);case 2:return t.a(2)}},t,this)})),function(t,e){return ct.apply(this,arguments)})};const At=Ot;function It(t){var e={};for(var n in t)Array.isArray(t[n])&&t[n].length>0?e[n]=[t[n][0],"Length: ".concat(t[n].length)]:e[n]=t[n];console.log(e)}function Dt(t){return function(t){if(Array.isArray(t))return xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return xt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Lt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Rt(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Rt(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Rt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Rt(f,"constructor",u),Rt(u,"constructor",s),s.displayName="GeneratorFunction",Rt(u,o,"GeneratorFunction"),Rt(f),Rt(f,o,"Generator"),Rt(f,r,function(){return this}),Rt(f,"toString",function(){return"[object Generator]"}),(Lt=function(){return{w:a,m:d}})()}function Rt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Rt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Rt(t,e,n,r)}function jt(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Ft(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){jt(a,r,o,i,c,"next",t)}function c(t){jt(a,r,o,i,c,"throw",t)}i(void 0)})}}function Ct(t){return Nt.apply(this,arguments)}function Nt(){return(Nt=Ft(Lt().m(function t(e){var n,r,o;return Lt().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error: status: ".concat(n.status));case 2:return t.n=3,n.json();case 3:return r=t.v,console.log("Fetched data from E7 Server; keys:",Object.keys(r)),t.a(2,r);case 4:return t.p=4,o=t.v,console.error("Error fetching global user data:",o),t.a(2,null)}},t,null,[[0,4]])}))).apply(this,arguments)}function Mt(){return Mt=Ft(Lt().m(function t(){var e,n,r=arguments;return Lt().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,Ct("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find hero data for language:",e),n=null),t.a(2,n)}},t)})),Mt.apply(this,arguments)}function Bt(){return(Bt=Ft(Lt().m(function t(e){var n,r;return Lt().w(function(t){for(;;)switch(t.n){case 0:if(e=e.replace("world_",""),Dt(b).some(function(t){return t.replace("world_","")===e})){t.n=1;break}return console.error("Could not find world code: ".concat(e)),t.a(2,null);case 1:return console.log("Fetching users for world code: ".concat(e," from E7 Server...")),n="https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_".concat(e,".json"),t.n=2,Ct(n);case 2:return(r=t.v)&&console.log("Got user data for world: ".concat(e," ; Found ").concat(r.users.length," users")),t.a(2,r)}},t)}))).apply(this,arguments)}const Gt={fetchHeroJSON:function(){return Mt.apply(this,arguments)},fetchUserJSON:function(t){return Bt.apply(this,arguments)}};function Ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Ht(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){if(t){if("string"==typeof t)return Vt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vt(t,e):void 0}}function Vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Kt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Wt(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Wt(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Wt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Wt(f,"constructor",u),Wt(u,"constructor",s),s.displayName="GeneratorFunction",Wt(u,o,"GeneratorFunction"),Wt(f),Wt(f,o,"Generator"),Wt(f,r,function(){return this}),Wt(f,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:a,m:d}})()}function Wt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Wt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Wt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Wt(t,e,n,r)}function qt(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function zt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){qt(a,r,o,i,c,"next",t)}function c(t){qt(a,r,o,i,c,"throw",t)}i(void 0)})}}var Jt,Yt,$t,Xt,Qt={getHeroManager:(Xt=zt(Kt().m(function t(){var e,n,r,o;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.get(At.Keys.HERO_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=this.fetchAndCacheHeroManager();case 4:return t.a(2,o)}},t,this)})),function(){return Xt.apply(this,arguments)}),createHeroManager:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ht(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Ut(e.value,2),o=r[0],a=r[1],i=E[o];a.prime=i}}catch(t){n.e(t)}finally{n.f()}var c={heroes:t};return c=function(t){console.log("Adding Lookup Dicts"),console.log("\tAdding name lookup"),t.name_lookup=t.heroes.reduce(function(t,e){return t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t},{}),console.log("\tAdding prime lookup"),t.prime_lookup=t.heroes.reduce(function(t,e){return t[e.prime]=e,t},{}),console.log("\tAdding code lookup"),t.code_lookup=t.heroes.reduce(function(t,e){return t[e.code]=e,t},{}),console.log("\tAdding prime pair lookup");var e=t.heroes.reduce(function(t,e){return t[e.prime]=e.name,t},{}),n=Object.keys(t.prime_lookup).length-1;console.log("\tAdding prime pair lookup; primes to process",n);for(var r=0;r<n-1;r++)for(var o=E[r],a=r+1;a<n;a++){var i=E[a],c=o*i,s=t.prime_lookup[o].name,u=t.prime_lookup[i].name;e[c]=[s,u].sort().join(", ")}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.prime],t.prime_pair_lookup=e,t}(c=function(t){var e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:E[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(c)),c},fetchHeroManager:($t=zt(Kt().m(function t(){var e,n,r,o,a,i;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Gt.fetchHeroJSON();case 1:if(a=e=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==e;case 2:if(!o){t.n=3;break}i=e,t.n=5;break;case 3:return t.n=4,d.fetchHeroData();case 4:i=t.v;case 5:return n=i.en,r=this.createHeroManager(n),console.log("Created HeroManager using raw data received from server"),t.a(2,r)}},t,this)})),function(){return $t.apply(this,arguments)}),fetchAndCacheHeroManager:(Yt=zt(Kt().m(function t(){var e;return Kt().w(function(t){for(;;)switch(t.n){case 0:return console.log("HeroManager not found in cache, fetching from server and caching it"),t.n=1,this.fetchHeroManager();case 1:return e=t.v,t.n=2,At.cache(At.Keys.HERO_MANAGER,e);case 2:return console.log("Cached HeroManager using raw data recieved from server"),It(e),t.a(2,e)}},t,this)})),function(){return Yt.apply(this,arguments)}),deleteHeroManager:(Jt=zt(Kt().m(function t(){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.delete(At.Keys.HERO_MANAGER);case 1:console.log("Removed hero manager from cache");case 2:return t.a(2)}},t)})),function(){return Jt.apply(this,arguments)}),getHeroByName:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;var r=t.toLowerCase().replace(/\s+/g,"");return null!==(n=e.name_lookup[r])&&void 0!==n?n:null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?null!==(n=e.code_lookup[t])&&void 0!==n?n:null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}};const Zt=Qt;function te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||ee(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(t,e){if(t){if("string"==typeof t)return ne(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(t,e):void 0}}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function re(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])}),e||(e={name:"UID: ".concat(t[0]["P1 ID"])});var o,a=t.map(function(t,e){return e}),i=t.map(function(t){return t["P1 Points"]}),c=[],s={startX:null,endX:null,startY:null,endY:null},u=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ee(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(u.s();!(o=u.n()).done;){var l=te(o.value,2),f=l[0],d=l[1];n&&d["Seq Num"]in n?(!0===r&&(s.startX=f<s.startX||null===s.startX?f-.5:s.startX,s.startY=d["P1 Points"]<s.startY+50||null===s.startY?d["P1 Points"]-50:s.startY,s.endX=f>s.endX||null===s.endX?f+.5:s.endX,s.endY=d["P1 Points"]>s.endY-50||null===s.endY?d["P1 Points"]+50:s.endY),c.push("#ff9900")):c.push("#0df8fd")}}catch(t){u.e(t)}finally{u.f()}var p={x:a,y:i,mode:"lines+markers",line:{color:"#4f9293",width:2},marker:{symbol:"circle",size:4,color:c},customdata:t.map(function(t){return[t["Date/Time"].slice(0,10),t["P1 League"]]}),hovertemplate:"Points: %{y}<br>Date: %{customdata[0]}<br>League: %{customdata[1]}<extra></extra>"},h={autosize:!0,font:{family:"Roboto, Open Sans"},title:{text:"".concat(e.name,"'s RTA Point Plot"),font:{size:24,color:"#dddddd"},xanchor:"center",yanchor:"top",y:.95,x:.5},xaxis:{title:{text:"Battle Number (Chronological)",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!1,tickfont:{size:12,color:"#dddddd"},range:s.startX?[s.startX,s.endX]:null},yaxis:{title:{text:"Victory Points",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!0,zerolinecolor:"#dddddd",zerolinewidth:2,tickfont:{size:12,color:"#dddddd"},range:s.startY?[s.startY,s.endY]:null},plot_bgcolor:"#1e222d",paper_bgcolor:"#1e222d"},y="plot-".concat(Math.random().toString(36).substr(2,9));return'<div id="'.concat(y,'"></div>')+"\n<script>\n    Plotly.newPlot('".concat(y,"', [").concat(JSON.stringify(p),"], ").concat(JSON.stringify(h),", ").concat(JSON.stringify({responsive:!0}),");\n<\/script>\n")}function oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")(?=[,)\\s;]|$)"),e)}function ae(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")$"),e)}var ie=/[a-z][a-z0-9.\s]*/i,ce=/\d{4}-\d{2}-\d{2}/,se=/\{\s*\}/,ue=/\d+/,le=/season-[1-9]+[0-9]*(\.[1-9]*)?|current-season/i,fe=new RegExp("^".concat(ce.source,"$"),"i"),de=new RegExp("(?:".concat(le.source,")"),"i"),pe=/(?:date|is-first-pick|is-win|victory-points|p1.picks|p1.prebans|p2.prebans|prebans|p2.picks|p1.pick1|p1.pick2|p1.pick3|p1.pick4|p1.pick5|p2.pick1|p2.pick2|p2.pick3|p2.pick4|p2.pick5|p1.league|p2.league|p1.postban|p2.postban|p1.server|p2.server)/i,he=ie.source,ye=ue.source,ge=ce.source,me=pe.source,ve=de.source,be=new RegExp('"('.concat(he,")\"|'(").concat(he,")'"),"i"),we=new RegExp(ae(be),"i"),Se=be.source,Pe=new RegExp("(?:".concat(Se,"|").concat(he,"|").concat(ge,")"),"i"),_e=new RegExp("(?:".concat(me,"|").concat(ve,")"),"i"),Ee=Pe.source,ke=new RegExp("\\{\\s*(?:".concat(Ee,"\\s*)(?:,\\s*").concat(Ee,"\\s*)*,?\\s*\\}|").concat(se.source),"i"),Te=new RegExp("".concat(ye,"\\.\\.\\.").concat(ye,"|").concat(ge,"\\.\\.\\.").concat(ge,"|").concat(ye,"\\.\\.\\.=").concat(ye,"|").concat(ge,"\\.\\.\\.=").concat(ge)),Oe=new RegExp("^".concat(Te.source,"$")),Ae={VALID_STRING_RE:ie,VALID_DATE_RE:ce,VALID_INT_RE:ue,EMPTY_SET_RE:se,SET_ELEMENT_RE:Pe,VALID_SET_RE:ke,VALID_STRING_LITERAL_RE:we,VALID_DATE_LITERAL_RE:fe,VALID_INT_LITERAL_RE:/^\d+$/,VALID_BOOL_LITERAL_RE:/^(true|false)$/i,VALID_RANGE_RE:Te,VALID_RANGE_LITERAL_RE:Oe,VALID_SEASON_RE:le,VALID_SEASON_LITERAL_RE:ae(le),VALID_DATA_WORD_RE:de,VALID_DATA_WORD_LITERAL_RE:ae(de),VALID_FIELD_WORD_RE:pe,VALID_DATAFIELD_RE:_e,VALID_GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:ae(we),padRegex:oe,anchorExp:ae,tokenMatch:function(t){return t.match(/AND(?=\()|OR(?=\()|XOR(?=\()|NOT(?=\()|LAST-N(?=\()/i)?(console.log("Matched stream as clause:",t),"keyword"):t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?(console.log("Matched stream as operator:",t),"operator"):t.match(new RegExp("[a-z0-9.\"'}=)-]".concat(_e.source,"(?=[,)\\s;]|$)"),"i"))?(console.log("Matched stream as field with preceding fragment:",t),null):t.match(oe(_e))?(console.log("Matched stream as Data Field:",t),"datafield"):t.match(/[^(,\s;.=0-9]+\d+/i)?(console.log("Matched stream as non-num null"),null):t.match(oe(Te))?(console.log("Matched stream as range:",t),"range"):t.match(oe(ue))?(console.log("Matched stream as number:",t),"number"):t.match(oe(ce))?(console.log("Matched stream as date:",t),"date"):t.match(oe(ke))?(console.log("Matched stream as set:",t),"set"):t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?(console.log("Matched stream as bool:",t),"bool"):t.match(oe(be))?(console.log("Matched stream as string:",t),"string"):t.match(/[\(\)\{\}\;\,]/)?(console.log("Matched stream as bracket:",t),"bracket"):(t.next(),console.log("Matched stream as null:",t),null)}};function Ie(t){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(t)}function De(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Le(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Le(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Le(t,e){if(t){if("string"==typeof t)return Re(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(t,e):void 0}}function Re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ce(r.key),r)}}function Fe(t,e,n){return e&&je(t.prototype,e),n&&je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ce(t){var e=function(t){if("object"!=Ie(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ie(e)?e:e+""}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Me(t,e,n){return e=Ve(e),function(t,e){if(e&&("object"==Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ue()?Reflect.construct(e,n||[],Ve(t).constructor):e.apply(t,n))}function Be(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&He(t,e)}function Ge(t){var e="function"==typeof Map?new Map:void 0;return Ge=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Ue())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&He(o,n.prototype),o}(t,arguments,Ve(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),He(n,t)},Ge(t)}function Ue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ue=function(){return!!t})()}function He(t,e){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},He(t,e)}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ve(t)}var Ke=function(t){function e(t){var n;return Ne(this,e),(n=Me(this,e,[t])).name="Filter Syntax Exception",n}return Be(e,t),Fe(e)}(Ge(Error)),We=function(t){function e(t){var n;return Ne(this,e),(n=Me(this,e,[t])).name="Filter Type Exception",n}return Be(e,t),Fe(e)}(Ge(Error)),qe=function(t){function e(t){var n;return Ne(this,e),(n=Me(this,e,[t])).name="Filter Validation Error",n}return Be(e,t),Fe(e)}(Ge(Error)),ze={"(":")","{":"}",'"':'"',"'":"'"},Je=Object.fromEntries(Object.entries(ze).filter(function(t){var e=De(t,2);return e[0]!==e[1]}).map(function(t){var e=De(t,2),n=e[0];return[e[1],n]}));const Ye={SyntaxException:Ke,TypeException:We,ValidationError:qe,retrieveEnclosure:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:")";if(e===n)throw new Error("Enclosure characters must be different: ".concat(e," = ").concat(n));var r,o=!1,a=0,i="",c=xe(function(t){return function(t){if(Array.isArray(t))return Re(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Le(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).entries());try{for(c.s();!(r=c.n()).done;){var s=De(r.value,2),u=s[0],l=s[1];if(l===e){if(a+=1,!o){o=!0;continue}}else l===n&&(a-=1);if(0===a&&o){if(u!=t.length-1)throw new Ke("Enclosure should not be resolved before end of string; resolved at index: ".concat(u,"; input string: ").concat(t));return i}if(a<0)throw new Ke("Unbalanced enclosure at index: ".concat(u," of input string: ").concat(t,'; balance of "').concat(e,"...").concat(n,'" enclosures became negative.'));o&&(i+=l)}}catch(t){c.e(t)}finally{c.f()}if(!o)throw new Ke("Enclosure of type ".concat(e,"...").concat(n," not found in string; input string: ").concat(t));if(a>0)throw new Ke("Enclosure could not be resolved; too many '".concat(n,"'; balance = +{count}; input string {string}"))},retrieveArgs:function(t){var e,n=0,r=[],o="",a=xe(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;if("("===i){if(1===(n+=1))continue}else")"===i&&(n-=1);1===n&&","===i?(r.push(o.trim()),o=""):n>=1&&(o+=i)}}catch(t){a.e(t)}finally{a.f()}return o.trim()&&r.push(o.trim()),r},getCharCounts:function(t){var e,n={},r=xe(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=(n[o]||0)+1}}catch(t){r.e(t)}finally{r.f()}return n},tokenizeWithNestedEnclosures:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],a="",i=[],c=0;c<t.length;c++){var s=t[c];if(e.includes(s)&&i.length===n)a&&(o.push(r?a.trim():a),a="");else if(Je[s]){var u=Je[s];if(i.length>n&&(a+=s),i[i.length-1]!==u)throw new Error("Unbalanced closing bracket at position ".concat(c));i.pop()}else i.length>=n&&(a+=s),ze[s]&&(i[i.length-1]===ze[s]&&s===ze[s]?i.pop():i.push(s))}if(i.length>0)throw new Error("Unbalanced enclosures in input string; unresolved characters from enclosure stack: ",i);return a&&o.push(r?a.trim():a),o},parseDate:function(t){if(!Ae.VALID_DATE_LITERAL_RE.test(t))throw new Ke("Invalid date; must be in the format: YYYY-MM-DD ( regex: ".concat(Ae.VALID_DATE_LITERAL_RE.source," ); got: '").concat(t,"'"));var e=t.split(" ")[0],n=new Date("".concat(e,"T00:00:00"));if(isNaN(n.getTime()))throw new Ke("Invalid date; could not be parsed as a valid date; got: '".concat(t,"'"));var r=De(n.toISOString().split("T")[0].split("-").map(Number),3),o=r[0],a=r[1],i=r[2];if(n.getFullYear()!==o||n.getMonth()+1!==a||n.getDate()!==i)throw new Ke("Invalid date; parsed date: ".concat(n.toISOString()," does not match passed in string: ").concat(e));return console.log("Parsed date: ".concat(n.toISOString()," ; ").concat(n.constructor.name)),n},tryConvert:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===r&&(r="Could not convert ".concat(n," to ").concat(e));try{return t(n)}catch(t){throw new We("".concat(r,": ").concat(t.message))}}};function $e(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Xe(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Xe(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Xe(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Xe(f,"constructor",u),Xe(u,"constructor",s),s.displayName="GeneratorFunction",Xe(u,o,"GeneratorFunction"),Xe(f),Xe(f,o,"Generator"),Xe(f,r,function(){return this}),Xe(f,"toString",function(){return"[object Generator]"}),($e=function(){return{w:a,m:d}})()}function Xe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xe=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Xe(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Xe(t,e,n,r)}function Qe(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Ze(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Qe(a,r,o,i,c,"next",t)}function c(t){Qe(a,r,o,i,c,"throw",t)}i(void 0)})}}var tn,en,nn,rn={fetchAndCacheSeasonDetails:(nn=Ze($e().m(function t(){var e,n,r,o,a,i;return $e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,d.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))})}),n.sort(function(t,e){return t["Season Number"]-e["Season Number"]}),r=[n[0]],o=n[0],n.slice(1).forEach(function(t){var e=new Date(+o.range[1]+S),n=new Date(+t.range[0]-S),a={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};r.push(a),r.push(t),o=t}),o.range[1]<new Date&&(a=new Date(+r.at(-1).range[1]+S),i={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(season.Season),Start:a.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[a,new Date]},r.push(i)),r.reverse(),t.n=3,At.cache(At.Keys.SEASON_DETAILS,r);case 3:return t.a(2,r)}},t)})),function(){return nn.apply(this,arguments)}),getSeasonDetails:(en=Ze($e().m(function t(){var e,n,r,o;return $e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.get(At.Keys.SEASON_DETAILS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,rn.fetchAndCacheSeasonDetails();case 4:o=t.v;case 5:return t.a(2,o)}},t)})),function(){return en.apply(this,arguments)}),clearSeasonDetails:(tn=Ze($e().m(function t(){return $e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.delete(At.Keys.SEASON_DETAILS);case 1:console.log("Season details cleared from data cache");case 2:return t.a(2)}},t)})),function(){return tn.apply(this,arguments)})};const on=rn;function an(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return cn(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(cn(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,cn(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,cn(f,"constructor",u),cn(u,"constructor",s),s.displayName="GeneratorFunction",cn(u,o,"GeneratorFunction"),cn(f),cn(f,o,"Generator"),cn(f,r,function(){return this}),cn(f,"toString",function(){return"[object Generator]"}),(an=function(){return{w:a,m:d}})()}function cn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}cn=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){cn(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},cn(t,e,n,r)}function sn(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function un(t){return function(t){if(Array.isArray(t))return Pn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Sn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Sn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(t,e,n){return e=pn(e),function(t,e){if(e&&("object"==_n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dn()?Reflect.construct(e,n||[],pn(t).constructor):e.apply(t,n))}function dn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(dn=function(){return!!t})()}function pn(t){return pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pn(t)}function hn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yn(t,e)}function yn(t,e){return yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yn(t,e)}function gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bn(r.key),r)}}function vn(t,e,n){return e&&mn(t.prototype,e),n&&mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bn(t){var e=function(t){if("object"!=_n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_n(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_n(e)?e:e+""}function wn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Sn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Sn(t,e){if(t){if("string"==typeof t)return Pn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pn(t,e):void 0}}function Pn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _n(t){return _n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(t)}var En=new Set("'\"(),-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function kn(t,e){var n="object"===_n(e)?JSON.stringify(e):"".concat(e);if(e instanceof Set)return e.has(t);if("object"===_n(e)&&null!==e&&!Array.isArray(e)&&["start","end","endInclusive","type"].every(function(t){return e.hasOwnProperty(t)}))return t>=e.start&&(e.endInclusive?t<=e.end:t<e.end);if(Array.isArray(e))return e.includes(t);throw new Error("Invalid match pattern for 'in' operators; got: '".concat(t,"' and '").concat(n,"' (").concat(e.constructor.name,")"))}var Tn={">":function(t,e){return t>e},"<":function(t,e){return t<e},"=":function(t,e){return t===e},in:function(t,e){return kn(t,e)},">=":function(t,e){return t>=e},"<=":function(t,e){return t<=e},"!=":function(t,e){return t!==e},"!in":function(t,e){return!kn(t,e)}};function On(t){return function(t,e){var n,r=wn(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.has(o))throw new Ye.SyntaxException("Invalid character within <".concat("Main Filter String","> ; ' ").concat(o," ' is not allowed; got string: '").concat(t,"'"))}}catch(t){r.e(t)}finally{r.f()}}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),En),t.toLowerCase()}var An,In,Dn,xn=new Set(["victory-points"]),Ln=new Set(["prebans","p1.picks","p2.picks","p1.prebans","p2.prebans"]),Rn=function(){return vn(function t(e){gn(this,t);var n=t.FIELD_EXTRACT_FN_MAP[e];if(!n)throw new Ye.ValidationError("Invalid field type: '".concat(e,"'; valid types are: ").concat(Object.keys(t.FIELD_EXTRACT_FN_MAP).join(", ")));console.log("Found valid field type: ",e),this.str=e,this.extractData=n},[{key:"toString",value:function(){return this.str}}])}();An=Rn,Dn={date:function(t){var e;return t["Date/Time"]?new Date("".concat(null===(e=t["Date/Time"])||void 0===e?void 0:e.slice(0,10),"T00:00:00")):"N/A"},"is-first-pick":function(t){return"True"===t["First Pick"]?1:0},"is-win":function(t){return"W"===t.Win?1:0},"victory-points":function(t){return t["P1 Points"]},"p1.picks":function(t){return t["P1 Picks"]},"p2.picks":function(t){return t["P2 Picks"]},"p1.prebans":function(t){return t["P1 Prebans"]},"p2.prebans":function(t){return t["P2 Prebans"]},"p1.postban":function(t){return t["P1 Postban"]},"p2.postban":function(t){return t["P2 Postban"]},prebans:function(t){return[].concat(un(t["P1 Prebans"]),un(t["P2 Prebans"]))},"p1.pick1":function(t){return t["P1 Pick 1"]},"p1.pick2":function(t){return t["P1 Pick 2"]},"p1.pick3":function(t){return t["P1 Pick 3"]},"p1.pick4":function(t){return t["P1 Pick 4"]},"p1.pick5":function(t){return t["P1 Pick 5"]},"p2.pick1":function(t){return t["P2 Pick 1"]},"p2.pick2":function(t){return t["P2 Pick 2"]},"p2.pick3":function(t){return t["P2 Pick 3"]},"p2.pick4":function(t){return t["P2 Pick 4"]},"p2.pick5":function(t){return t["P2 Pick 5"]},"p1.league":function(t){return P[t["P1 League"]]},"p2.league":function(t){return P[t["P2 League"]]},"p1.server":function(t){return t["P1 Server"]},"p2.server":function(t){return t["P2 Server"]}},(In=bn(In="FIELD_EXTRACT_FN_MAP"))in An?Object.defineProperty(An,In,{value:Dn,enumerable:!0,configurable:!0,writable:!0}):An[In]=Dn;var jn=function(){return vn(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;gn(this,t),this.rawString=e,this.data=this.getData(e,n)},[{key:"toString",value:function(){return"".concat(this.data)}}])}(),Fn=function(t){function e(){return gn(this,e),fn(this,e,arguments)}return hn(e,t),vn(e,[{key:"getData",value:function(t,e){if(t=(t=t.replace(/'/g,"").replace(/"/g,"")).trim(),!Ae.VALID_STRING_RE.test(t))throw new Ye.SyntaxException("Invalid string; all string content must start with a letter followed by either num, hyphen or period ( case insensitive regex: ".concat(Ae.VALID_STRING_LITERAL_RE.source," ); got: '").concat(t,"'"));t=t.replace(/"|'/g,"");var n=Zt.getHeroByName(t,e),r=P[t],o=Object.values(w).find(function(e){return e.toLowerCase()===t});if(!(n||r||o))throw new Ye.SyntaxException("Invalid string; All strings must either be a valid hero, league name, or server; got: '".concat(t,"'"));return n?n.name:r||o}},{key:"toString",value:function(){return'"'.concat(this.data,'"')}}])}(jn),Cn=function(t){function e(){return gn(this,e),fn(this,e,arguments)}return hn(e,t),vn(e,[{key:"getData",value:function(t){return Ye.parseDate(t)}},{key:"toString",value:function(){return"".concat(this.data)}}])}(jn),Nn=function(t){function e(){return gn(this,e),fn(this,e,arguments)}return hn(e,t),vn(e,[{key:"getData",value:function(t){if(!Ae.VALID_INT_LITERAL_RE.test(t))throw new Ye.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));var e=parseInt(t);if(isNaN(e))throw new Ye.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));return e}},{key:"toString",value:function(){return"".concat(this.data)}}])}(jn),Mn=function(t){function e(){return gn(this,e),fn(this,e,arguments)}return hn(e,t),vn(e,[{key:"getData",value:function(t){if(!Ae.VALID_BOOL_LITERAL_RE.test(t))throw new Ye.SyntaxException("Invalid boolean; must be 'true' or 'false'; got: '".concat(t,"'"));return"true"===t?1:0}},{key:"toString",value:function(){return"".concat(this.data?"true":"false")}}])}(jn),Bn=function(t){function e(){return gn(this,e),fn(this,e,arguments)}return hn(e,t),vn(e,[{key:"getData",value:function(t){var e=t.split("...");if(2!==e.length)throw new Ye.SyntaxException("Invalid range; ranges must be of the format x...y or x...=y ; got more than two values when splitting string: '".concat(t,"'"));var n=ln(e,2),r=n[0],o=n[1],a=!1;o.includes("=")&&(o=o.replace("=",""),a=!0);var i={start:null,end:null,endInclusive:a};if(Ae.VALID_DATE_LITERAL_RE.test(r)){if(i.start=Ye.tryConvert(Ye.parseDate,"Date",r,"Could not convert '".concat(r,"' to Date in declared range: '").concat(t,"'")),i.end=Ye.tryConvert(Ye.parseDate,"Date",o,"Could not convert '".concat(o,"' to Date in declared range: '").concat(t,"' ; Ranges must have homogenous types")),i.start>i.end)throw new Ye.SyntaxException("Invalid range; start date must be on or before end date; ".concat(i.start," > ").concat(i.end));i.type="Date"}else{if(!Ae.VALID_INT_LITERAL_RE.test(r))throw new Ye.SyntaxException("Invalid range; must be of the format x...y or x...=y ; got: '".concat(t,"'"));if(i.start=Ye.tryConvert(function(t){return new Nn(t)},"Int",r,"Could not convert '".concat(r,"' to Int in declared range: '").concat(t,"'")).data,i.end=Ye.tryConvert(function(t){return new Nn(t)},"Int",o,"Could not convert '".concat(o,"' to Int in declared range: '").concat(t,"' ; Ranges must have homogenous types")).data,i.start>i.end)throw new Ye.SyntaxException("Invalid range; start integer must be equal to or less than end integer; ".concat(i.start," > ").concat(i.end));i.type="Int"}return console.log("Built Range: ".concat(JSON.stringify(i))),i}},{key:"toString",value:function(){var t=this.data.endInclusive?"...=":"...";return"Date"===this.data.type?"".concat(this.data.start.toISOString()).concat(t).concat(this.data.end.toISOString(),")"):"Int"===this.data.type?"".concat(this.data.start,"...").concat(t).concat(this.data.end):"Error Converting Range to String => < ".concat(this.data.start,"...").concat(t).concat(this.data.end," >")}}])}(jn),Gn=function(t){function e(){return gn(this,e),fn(this,e,arguments)}return hn(e,t),vn(e,[{key:"getData",value:function(t,e){if(!Ae.VALID_SET_RE.test(t))throw new Ye.SyntaxException("Invalid set; must be in the format: { element1, element2,... }, where elements have either string format or date format; ( case insensitive regex: ".concat(Ae.VALID_SET_RE.source," ) (Just chat gpt this one bro); got: '").concat(t,"'"));var n=t.replace(/^\{|\}$/g,"").split(",").map(function(t){return t.trim()}).filter(function(t){return""!==t}).map(function(t){if(Ae.VALID_STRING_RE.test(t))return new Fn(t,e);if(Ae.VALID_DATE_LITERAL_RE.test(t))return new Cn(t);throw new Ye.SyntaxException("Invalid set element; must be a string or date; got: '".concat(t,"'"))});console.log("GOT ELEMENTS: ",n);var r,o=new Set,a=wn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;o.add(i.constructor.name)}}catch(t){a.e(t)}finally{a.f()}if(o=un(o),console.log("GOT TYPES: ",o),o.size>1)throw new Ye.SyntaxException("Invalid set; all set elements must have the same data type; got: types: [".concat(o.join(", "),"]"));return this.Type=o[0],new Set(n.map(function(t){return t.data}))}},{key:"toString",value:function(){return"{".concat(this.data.map(function(t){return t.toString()}).join(", "),"}")}}])}(jn);var Un=function(){return vn(function t(){gn(this,t)},[{key:"call",value:function(t){throw new Error("Base class ".concat(this.constructor.name," does not implement the 'call' method. Implement this method in a subclass."))}}])}(),Hn=function(t){function e(t){var n;if(gn(this,e),(n=fn(this,e)).name="last-N",1!==t.length)throw new Ye.SyntaxException("".concat(n.name," expects 1 argument, got ").concat(t.length));var r=Number(t[0]);if(!Number.isInteger(r))throw new Ye.TypeException("".concat(n.name," expects an integer argument, could not parse '").concat(t[0],"' as integer"));return n.str="".concat(n.name,"(").concat(r,")"),n.n=r,n}return hn(e,t),vn(e,[{key:"call",value:function(t){return t.sort(function(t,e){return t["Seq Num"]-e["Seq Num"]}),t.slice(-this.n)}}])}(function(t){function e(){return gn(this,e),fn(this,e)}return hn(e,t),vn(e,[{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Un)),Vn=function(t){function e(t){var n;return gn(this,e),(n=fn(this,e)).fns=t,console.log("Clause Fn constructor got fns:",t),n}return hn(e,t),vn(e,[{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=t+"   ";return this.fns.localFilters.forEach(function(t){return e+="".concat(t.toString(n),",\n")}),console.log("Clause Fn toString got output:",e),"".concat(t).concat(this.str,"(\n").concat(e.trimEnd(),"\n").concat(t,")")}}])}(Un),Kn=function(t){function e(t){var n;return gn(this,e),(n=fn(this,e,[t])).str="AND",n}return hn(e,t),vn(e,[{key:"call",value:function(t){return this.fns.localFilters.every(function(e){return e.call(t)})}}])}(Vn),Wn=function(t){function e(t){var n;return gn(this,e),(n=fn(this,e,[t])).str="OR",n}return hn(e,t),vn(e,[{key:"call",value:function(t){return this.fns.localFilters.some(function(e){return e.call(t)})}}])}(Vn),qn=function(t){function e(t){var n;return gn(this,e),(n=fn(this,e,[t])).str="XOR",n}return hn(e,t),vn(e,[{key:"call",value:function(t){var e,n=!1,r=wn(this.fns.localFilters);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=!n&&o.call(t)||n&&!o.call(t)}}catch(t){r.e(t)}finally{r.f()}return n}}])}(Vn),zn=function(t){function e(t){var n;return gn(this,e),(n=fn(this,e,[t])).str="NOT",n}return hn(e,t),vn(e,[{key:"call",value:function(t){return!this.fns.localFilters[0].call(t)}}])}(Vn),Jn={and:Kn,or:Wn,xor:qn,not:zn,"last-n":Hn},Yn=new Set([Kn,Wn,qn,zn]),$n=new Set([Hn]),Xn=function(){return vn(function t(e,n){gn(this,t),this.str=e,this.fn=n},[{key:"call",value:function(t){return this.fn(t)}},{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}();function Qn(t,e,n,r,o){var a=null;try{a=e in Rn.FIELD_EXTRACT_FN_MAP?new Rn(e):function(t,e,n){if(console.log("Trying to Parse DataType: ".concat(t)),Ae.VALID_STRING_LITERAL_RE.test(t))return console.log("Parsing as StringType"),new Fn(t,e);if(Ae.VALID_DATE_LITERAL_RE.test(t))return console.log("Parsing as DateType"),new Cn(t);if(Ae.VALID_INT_LITERAL_RE.test(t))return console.log("Parsing as IntType"),new Nn(t);if(Ae.VALID_BOOL_LITERAL_RE.test(t))return console.log("Parsing as BoolType"),new Mn(t);if(/\{.*\}/.test(t))return console.log("Parsing as SetType"),new Gn(t,e);if(Ae.VALID_RANGE_LITERAL_RE.test(t))return console.log("Parsing as RangeType"),new Bn(t);if(Ae.VALID_DATA_WORD_LITERAL_RE.test(t))return console.log("Parsing as DataWord"),function(t,e){if(Ae.VALID_SEASON_LITERAL_RE.test(t)){var n=function(t){return t.toISOString().slice(0,10)};if(e.SeasonDetails.length<1)throw new Error("Did not recieve any season details; failed on: '".concat(t,"'"));if("current-season"===t){var r=ln(e.SeasonDetails.find(function(t){return"Active"===t.Status}).range,2),o=r[0],a=r[1];return new Bn("".concat(n(o),"...=").concat(n("N/A"===a?new Date:a)))}var i=Number(t.split("-")[1]),c=e.SeasonDetails.find(function(t){return t["Season Number"]===i});if(!c)throw new Error("Invalid season specified; ".concat(i," is not a valid season number; failed on str: '").concat(t,"'"));var s=ln(c.range,2),u=s[0],l=s[1];return new Bn("".concat(n(u),"...=").concat(n(l)))}}(t,{SeasonDetails:n});if(console.log("Failed to parse DataType"),Ae.VALID_STRING_LITERAL_RE.test("'".concat(t,"'")))throw new Ye.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you forget to wrap string literals in double or single quotes?"));if(t.includes("'")&&t.includes('"'))throw new Ye.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you encase in mismatching quote types?"));if(t.includes(".=")||t.includes(".."))throw new Ye.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; were you trying to use a range? Ranges must be of the format x...y or x...=y and may only be int-int or date-date"));throw new Ye.SyntaxException("Invalid DataType declaration; could not parse to valid Field or Declared Data Type; got: '".concat(t,"'"))}(e,r,o)}catch(r){for(var i in Rn.FIELD_EXTRACT_FN_MAP)if(e.includes(i)||i.includes(e))throw new Ye.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"], did you mean to use '").concat(i,"' as a field instead?"));throw console.error(r),new Ye.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"]; error: ").concat(r.message))}return a}var Zn=function(){function t(e){if(gn(this,t),e!==tr._)throw new Error("Cannot instantiate FilterSyntaxParser directly; use createAndParse method instead.")}return vn(t,[{key:"toString",value:function(){var t=un(this.filters.localFilters);return t.push.apply(t,un(this.filters.globalFilters)),"[\n".concat(t.map(function(t){return t.toString("   ")}).join(";\n"),"\n]")}},{key:"parseGlobalFilterFn",value:function(t,e){var n=Ae.anchorExp(Ae.VALID_GLOBAL_FILTER_RE);if(!n.test(e))throw new Ye.SyntaxException('Invalid global filter format; must follow the case insensitive regex format "'.concat(n.source,"\" ; got: '").concat(e,"'"));var r=Ye.tokenizeWithNestedEnclosures(e,",",1);if(t===Hn)return{localFilters:[],globalFilters:[new Hn(r)]};throw new Ye.SyntaxException("Global filter function ".concat(t.str," not mapped in parseGlobalFilterFn"))}},{key:"parseClauseFn",value:function(e,n){var r=this;console.log("Parsing clause fn:",e.name,n);var o=Ye.tokenizeWithNestedEnclosures(n,",",1);if(console.log("Got argArr:",o),e===qn&&o.length<2)throw new Ye.SyntaxException("XOR clause must have at least two arguments; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));if(e===zn&&1!==o.length)throw new Ye.SyntaxException("NOT clause must have exactly one argument; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));var a=o.reduce(function(t,e){var n,o;return(n=t.localFilters).push.apply(n,un(r.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,un(r.parseFilters(e).globalFilters)),t},t.getEmptyFilters());if(a.globalFilters.length>0)throw new Ye.SyntaxException("Global filters not allowed in clause functions; got: ".concat(a.globalFilters,' from string: "').concat(n,'"'));if(e===zn&&1!==a.localFilters.length)throw new Ye.SyntaxException("NOT clause must have exactly one argument; got: ".concat(a.length,' arguments from string: "').concat(n,'"'));return{localFilters:[new e(a)],globalFilters:[]}}},{key:"parseBaseFilter",value:function(t){console.log("Parsing base filter:",t);var e=this.HM,n=Ye.tokenizeWithNestedEnclosures(t," ",0,!0);if(console.log("Got tokens: ",n,"; Length: ".concat(n.length)),3!==n.length)throw new Ye.SyntaxException("Invalid base filter format; all filters must be of the form: ['X', operator, 'Y']; got tokens: [".concat(n.join(", "),"]"));var r=ln(n,3),o=r[0],a=r[1],i=r[2];if(!Tn[a])throw new Ye.SyntaxException('Invalid operator in base filter; got: "'.concat(a,'" as the operator in filter: [').concat(t,"]"));var c=Tn[a];if(o=Qn("left",o,t,e,this.SeasonDetails),i=Qn("right",i,t,e,this.SeasonDetails),("in"===a||"!in"===a)&&!(i instanceof Gn||i instanceof Bn||i instanceof Rn&&Ln.has(i.str)))throw new Ye.TypeException("When using any 'in' or '!in' operator, the right side of the operator must be a Set, Range, or a Field composed of a set (i.e. p1.picks, p2.prebans, etc.); error found in filter: '".concat(t,"'"));if(i instanceof Bn)if("Date"===i.data.type){if(!o.str.includes("date"))throw new Ye.TypeException("When using a Date Range, the left side of the operator must be a date field; ".concat(o.str," is not a date field; error found in filter: '").concat(t,"'"))}else if("Int"===i.data.type&&!xn.has(o.str))throw new Ye.TypeException("When using an Int Range, the left side of the operator must be an integer field; ".concat(o.str," is not an integer field; error found in filter: '").concat(t,"'"));if(i instanceof jn&&o instanceof jn)throw new Ye.SyntaxException("Either left or right side of filter must be a data field (a property of a battle); both ".concat(o," and ").concat(i,' are user declared data types in filter: "').concat(t,'"'));var s;return s=o instanceof jn?function(t){return c(o.data,i.extractData(t))}:i instanceof jn?function(t){return c(o.extractData(t),i.data)}:function(t){return c(o.extractData(t),i.extractData(t))},console.log("Returning base local filter",[new Xn(t,s).toString()]),{localFilters:[new Xn(t,s)],globalFilters:[]}}},{key:"parseFilters",value:function(e){var n=this;if(console.log('Parsing filter string: "'.concat(e||this.preParsedString,'"')),""===e)return console.log("Empty filter string; Returning empty filters"),t.getEmptyFilters();var r,o=(e=e.trim()).split(";").filter(function(t){return t.length>0}),a=wn(o);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=Ye.getCharCounts(i);if(c["("]!==c[")"])throw new Ye.SyntaxException('Imbalanced parentheses in following string: "'.concat(i,'"'));if(c["{"]!==c["}"])throw new Ye.SyntaxException("Imbalanced braces ('{', '}') in following string: \"".concat(i,'"'));if((c['"']||0)%2!=0)throw new Ye.SyntaxException('Imbalanced double quotes in following string: "'.concat(i,'"'));if((c["'"]||0)%2!=0)throw console.log("Imbalanced single quotes in following string:",i,"; got:",c["'"]),new Ye.SyntaxException('Imbalanced single quotes in following string: "'.concat(i,'"'))}}catch(t){a.e(t)}finally{a.f()}if(o.length>1)return console.log("Processing <".concat(o.length,"> filters; filters: ").concat(o)),o.reduce(function(t,e){var r,o;return(r=t.localFilters).push.apply(r,un(n.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,un(n.parseFilters(e).globalFilters)),t},t.getEmptyFilters());var s=o[0];if(s.length<4)throw new Ye.SyntaxException("Filter string cannot be valid (less than 4 characters); got filter string: [".concat(s,"]"));var u=s.split("("),l=Jn[u[0]];if(console.log("Trying to look for Fn ; got:",u[0],"from string:",s),l){if(Yn.has(l))return console.log("Found clause fn; dispatching to clause fn parser"),this.parseClauseFn(l,s);if($n.has(l))return console.log("Found global filter fn; dispatching to global filter fn parser"),this.parseGlobalFilterFn(l,s);throw new Error('could not parse filter string as Fn: "'.concat(e,'" ; did not map to any defined pattern'))}return console.log("Did not find Fn; dispatching to base filter parser"),this.parseBaseFilter(s)}}],[{key:"getEmptyFilters",value:function(){return{localFilters:[],globalFilters:[]}}},{key:"createAndParse",value:(e=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){sn(a,r,o,i,c,"next",t)}function c(t){sn(a,r,o,i,c,"throw",t)}i(void 0)})}}(an().m(function e(n){var r,o,a,i,c,s=arguments;return an().w(function(e){for(;;)switch(e.n){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:null,o=s.length>2&&void 0!==s[2]?s[2]:null,console.log("Initialized parsing of string:",n),a=new t(tr._),i=r){e.n=2;break}return e.n=1,Zt.getHeroManager();case 1:i=e.v;case 2:if(r=i,c=o){e.n=4;break}return e.n=3,on.getSeasonDetails();case 3:c=e.v;case 4:return o=c,a.rawString=n,a.HM=r,a.SeasonDetails=o,a.preParsedString=On(n),a.globalFilters=[],a.filters=a.parseFilters(a.preParsedString),console.log("Got Filters\n"),console.log(a.toString()),e.a(2,a)}},e)})),function(t){return e.apply(this,arguments)})}]);var e}(),tr={_:Symbol("internal")};const er=Zn;function nr(t){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr(t)}function rr(t){return function(t){if(Array.isArray(t))return ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ar(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ar(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function ar(t,e){if(t){if("string"==typeof t)return ir(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(t,e):void 0}}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return sr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(sr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,sr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,sr(f,"constructor",u),sr(u,"constructor",s),s.displayName="GeneratorFunction",sr(u,o,"GeneratorFunction"),sr(f),sr(f,o,"Generator"),sr(f,r,function(){return this}),sr(f,"toString",function(){return"[object Generator]"}),(cr=function(){return{w:a,m:d}})()}function sr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}sr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){sr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},sr(t,e,n,r)}function ur(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function lr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ur(a,r,o,i,c,"next",t)}function c(t){ur(a,r,o,i,c,"throw",t)}i(void 0)})}}var fr={world_global:At.Keys.GLOBAL_USERS,world_eu:At.Keys.EU_USERS,world_asia:At.Keys.ASIA_USERS,world_jpn:At.Keys.JPN_USERS,world_kor:At.Keys.KOR_USERS};function dr(t,e){return{id:t.nick_no,name:t.nick_nm.toLowerCase(),code:t.code,rank:t.rank,world_code:e}}function pr(t){return hr.apply(this,arguments)}function hr(){return(hr=lr(cr().m(function t(e){var n;return cr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code from E7 server: ".concat(e)),t.n=1,Gt.fetchUserJSON(e);case 1:if(n=t.v){t.n=2;break}return console.log("Could not get user map from E7 server for world code: ".concat(e)),t.a(2,null);case 2:return console.log("Got user map from E7 server for world code: ".concat(e)),t.a(2,Object.fromEntries(n.users.map(function(t){return[t.nick_no,dr(t,e)]})))}},t)}))).apply(this,arguments)}var yr,gr,mr,vr,br,wr,Sr={getUserMap:(wr=lr(cr().m(function t(e){var n,r;return cr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code: ".concat(e)),t.n=1,At.get(fr[e]);case 1:if(null===(n=t.v)){t.n=2;break}return console.log("Got user map from cache"),t.a(2,n);case 2:return t.n=3,pr(e);case 3:return r=t.v,t.n=4,At.cache(fr[e],r);case 4:return t.a(2,r)}},t)})),function(t){return wr.apply(this,arguments)}),findUser:(br=lr(cr().m(function t(e){var n,r,o,a,i,c,s,u,l,f,p,h,y;return cr().w(function(t){for(;;)switch(t.n){case 0:if(!e.id){t.n=10;break}n=or(b),t.p=1,n.s();case 2:if((r=n.n()).done){t.n=6;break}return o=r.value,t.n=3,this.getUserMap(o);case 3:if(a=t.v,!(i=Object.values(a).find(function(t){return t.id===e.id}))){t.n=4;break}return console.log("Found user: ".concat(JSON.stringify(i)," in world code: ").concat(o)),t.a(2,{user:i,error:!1});case 4:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(o," from client-side means"));case 5:t.n=2;break;case 6:t.n=8;break;case 7:t.p=7,y=t.v,n.e(y);case 8:return t.p=8,n.f(),t.f(8);case 9:t.n=15;break;case 10:if(!e.name||!e.world_code){t.n=14;break}return c=[e.name,e.world_code],s=c[0],u=c[1],t.n=11,this.getUserMap(u);case 11:if(l=t.v,f=s.toLowerCase(),p=Object.values(l).find(function(t){return f===t.name.toLowerCase()}),!p){t.n=12;break}return console.log("Found user: ".concat(JSON.stringify(p)," in world code: ").concat(u)),t.a(2,{user:p,error:!1});case 12:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(u," from client-side means"));case 13:t.n=15;break;case 14:return console.error("Must pass a user object with either user.name and user.world_code or user.id to fetch user"),t.a(2,{user:null,error:"Must pass a user object with either user.name and user.world_code or user.id to fetch user"});case 15:return t.n=16,d.fetchUser(e);case 16:if(!(h=t.v).error){t.n=17;break}return t.a(2,{user:null,error:h.error});case 17:return t.a(2,{user:h.user,error:!1})}},t,this,[[1,7,8,9]])})),function(t){return br.apply(this,arguments)}),addP2ServersByID:(vr=lr(cr().m(function t(e){var n,r,o,a=this;return cr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Adding P2 servers by ID..."),n=Object.values(e),r=[],t.p=1,t.n=2,Promise.all(rr(b).map(function(t){return a.getUserMap(t)}));case 2:r=t.v,t.n=4;break;case 3:return t.p=3,o=t.v,console.error(o),n.forEach(function(t){return t["P2 Server"]="Not Found"}),t.a(2);case 4:if(0!==r.length){t.n=5;break}return console.error("Failed to get any user maps"),n.forEach(function(t){return t["P2 Server"]="Not Found"}),t.a(2);case 5:n.forEach(function(t){var e,n=null===(e=r.find(function(e){return e[t["P2 ID"]]}))||void 0===e?void 0:e[t["P2 ID"]].world_code;n?t["P2 Server"]=a.convertServerStr(n):(console.log("Could not find user with ID: ".concat(t["P2 ID"]," in client-side means ; typeof: ").concat(nr(t["P2 ID"]),", id type: ").concat(nr(Object.keys(USER_MAPS[0])[0]))),t["P2 Server"]="Not Found")});case 6:return t.a(2)}},t,null,[[1,3]])})),function(t){return vr.apply(this,arguments)}),setUser:(mr=lr(cr().m(function t(e){return cr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.cache(At.Keys.USER,e);case 1:return t.a(2)}},t)})),function(t){return mr.apply(this,arguments)}),getUser:(gr=lr(cr().m(function t(){return cr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.get(At.Keys.USER);case 1:return t.a(2,t.v)}},t)})),function(){return gr.apply(this,arguments)}),clearUserData:function(){var t=lr(cr().m(function t(){return cr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.clearUserData();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),clearUserDataLists:(yr=lr(cr().m(function t(){return cr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.delete(At.Keys.GLOBAL_USERS);case 1:return t.n=2,At.delete(At.Keys.EU_USERS);case 2:return t.n=3,At.delete(At.Keys.ASIA_USERS);case 3:return t.n=4,At.delete(At.Keys.JPN_USERS);case 4:return t.n=5,At.delete(At.Keys.KOR_USERS);case 5:return t.a(2)}},t)})),function(){return yr.apply(this,arguments)}),convertServerStr:function(t){return w[t]}};const Pr=Sr;function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function Er(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(_r(t)+" is not iterable")}function kr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Tr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Tr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Tr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Tr(f,"constructor",u),Tr(u,"constructor",s),s.displayName="GeneratorFunction",Tr(u,o,"GeneratorFunction"),Tr(f),Tr(f,o,"Generator"),Tr(f,r,function(){return this}),Tr(f,"toString",function(){return"[object Generator]"}),(kr=function(){return{w:a,m:d}})()}function Tr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Tr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Tr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Tr(t,e,n,r)}function Or(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Ar(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Or(a,r,o,i,c,"next",t)}function c(t){Or(a,r,o,i,c,"throw",t)}i(void 0)})}}function Ir(t){return function(t){if(Array.isArray(t))return Cr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Fr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Fr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Lr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(n),!0).forEach(function(e){Rr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Rr(t,e,n){return(e=function(t){var e=function(t){if("object"!=_r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Fr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Fr(t,e){if(t){if("string"==typeof t)return Cr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Cr(t,e):void 0}}function Cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Nr=_.filter(function(t){return t.includes(" Pick ")||t.includes("ban ")});function Mr(t){var e={};console.log("Processing ".concat(t.length," battles into dict..."));var n,r=jr(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;console.log("Processing battle: ".concat(o)),e[o["Seq Num"]]=o}}catch(t){r.e(t)}finally{r.f()}return e}function Br(t,e){var n,r,o,a=function(t){var n,r;return null!==(n=null===(r=Zt.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},i={"Date/Time":t.time,"Seq Num":t.seq_num,"P1 ID":t.p1_id.toString(),"P2 ID":t.p2_id.toString(),"P1 League":null!==(n=t.grades[0])&&void 0!==n?n:"","P2 League":null!==(r=t.grades[1])&&void 0!==r?r:"","P1 Points":null!==(o=t.scores[0])&&void 0!==o?o:null,Win:1===t.winner?"W":"L","First Pick":1===t.first_pick?"True":"False","P1 Preban 1":a(t.p1_preban[0]),"P1 Preban 2":a(t.p1_preban[1]),"P2 Preban 1":a(t.p2_preban[0]),"P2 Preban 2":a(t.p2_preban[1]),"P1 Pick 1":a(t.p1_picks[0]),"P1 Pick 2":a(t.p1_picks[1]),"P1 Pick 3":a(t.p1_picks[2]),"P1 Pick 4":a(t.p1_picks[3]),"P1 Pick 5":a(t.p1_picks[4]),"P2 Pick 1":a(t.p2_picks[0]),"P2 Pick 2":a(t.p2_picks[1]),"P2 Pick 3":a(t.p2_picks[2]),"P2 Pick 4":a(t.p2_picks[3]),"P2 Pick 5":a(t.p2_picks[4]),"P1 Postban":a(t.postbans[1]),"P2 Postban":a(t.postbans[0])};return i["P1 Picks"]=[i["P1 Pick 1"],i["P1 Pick 2"],i["P1 Pick 3"],i["P1 Pick 4"],i["P1 Pick 5"]],i["P2 Picks"]=[i["P2 Pick 1"],i["P2 Pick 2"],i["P2 Pick 3"],i["P2 Pick 4"],i["P2 Pick 5"]],i["P1 Prebans"]=[i["P1 Preban 1"],i["P1 Preban 2"]],i["P2 Prebans"]=[i["P2 Preban 1"],i["P2 Preban 2"]],i}function Gr(t){var e,n=jr(Nr);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=t[r]?t[r]:"Empty"}}catch(t){n.e(t)}finally{n.f()}return t["P1 Points"]=Number(t["P1 Points"])||t["P1 Points"],t["P1 Picks"]=[t["P1 Pick 1"],t["P1 Pick 2"],t["P1 Pick 3"],t["P1 Pick 4"],t["P1 Pick 5"]],t["P2 Picks"]=[t["P2 Pick 1"],t["P2 Pick 2"],t["P2 Pick 3"],t["P2 Pick 4"],t["P2 Pick 5"]],t["P1 Prebans"]=[t["P1 Preban 1"],t["P1 Preban 2"]],t["P2 Prebans"]=[t["P2 Preban 1"],t["P2 Preban 2"]],t}function Ur(t,e){var n,r,o=function(t){return Zt.getHeroByName(t,e).prime};return{"Date/Time":t["Date/Time"],"Seq Num":t["Seq Num"],"P1 ID":t["P1 ID"],"P2 ID":t["P2 ID"],"P1 League":null!==(n=P[t["P1 League"]])&&void 0!==n?n:"","P2 League":null!==(r=P[t["P2 League"]])&&void 0!==r?r:"","P1 Points":t["P1 Points"],Win:"W"===t.Win?1:0,"First Pick":"True"===t["First Pick"]?1:0,"P1 Preban 1":o(t["P1 Preban 1"]),"P1 Preban 2":o(t["P1 Preban 2"]),"P2 Preban 1":o(t["P2 Preban 1"]),"P2 Preban 2":o(t["P2 Preban 2"]),"P1 Pick 1":o(t["P1 Pick 1"]),"P1 Pick 2":o(t["P1 Pick 2"]),"P1 Pick 3":o(t["P1 Pick 3"]),"P1 Pick 4":o(t["P1 Pick 4"]),"P1 Pick 5":o(t["P1 Pick 5"]),"P2 Pick 1":o(t["P2 Pick 1"]),"P2 Pick 2":o(t["P2 Pick 2"]),"P2 Pick 3":o(t["P2 Pick 3"]),"P2 Pick 4":o(t["P2 Pick 4"]),"P2 Pick 5":o(t["P2 Pick 5"]),"P1 Postban":o(t["P1 Postban"]),"P2 Postban":o(t["P2 Postban"]),"P1 Picks":t["P1 Picks"].map(o).reduce(function(t,e){return t*e},1),"P2 Picks":t["P2 Picks"].map(o).reduce(function(t,e){return t*e},1),"P1 Prebans":t["P1 Prebans"].map(o).reduce(function(t,e){return t*e},1),"P2 Prebans":t["P2 Prebans"].map(o).reduce(function(t,e){return t*e},1)}}function Hr(t){return(100*t).toFixed(2)+"%"}function Vr(t,e){var n=t.filter(function(t){return t.Win}).length,r=t.length,o=0!==r?n/r:0;return{games_won:n,games_appeared:r,total_games:e,appearance_rate:Hr(0!==e?r/e:0),win_rate:Hr(o),"+/-":2*n-r}}var Kr,Wr,qr,zr,Jr,Yr,$r,Xr,Qr={loaded_servers:new Set,getBattles:(Xr=Ar(kr().m(function t(){var e,n,r,o;return kr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting battles"),t.n=1,At.get(At.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return Xr.apply(this,arguments)}),removeBattles:($r=Ar(kr().m(function t(){return kr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.delete(At.Keys.BATTLES);case 1:return t.n=2,At.delete(At.Keys.UPLOADED_BATTLES);case 2:return t.n=3,At.delete(At.Keys.FILTERED_BATTLES);case 3:console.log("Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']");case 4:return t.a(2)}},t)})),function(){return $r.apply(this,arguments)}),removeFilteredBattles:(Yr=Ar(kr().m(function t(){return kr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.delete(At.Keys.FILTERED_BATTLES);case 1:console.log("Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']");case 2:return t.a(2)}},t)})),function(){return Yr.apply(this,arguments)}),applyFilter:(Jr=Ar(kr().m(function t(e){var n,r,o,a,i,c,s,u,l,f,d,p;return kr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.localFilters||[],o=e.globalFilters||[],a=Object.values(n),i=jr(o);try{for(i.s();!(c=i.n()).done;)s=c.value,console.log("Applying global filter: ".concat(s)),u=a.length,a=s.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),console.log("Filtered ".concat(u-a.length," out of ").concat(u,"; new total = ").concat(a.length))}catch(t){i.e(t)}finally{i.f()}l=jr(r),t.p=2,d=kr().m(function t(){var e,r;return kr().w(function(t){for(;;)switch(t.n){case 0:e=f.value,console.log("Applying local filter: ".concat(e)),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=Dr(t,2),r=(n[0],n[1]);return e.call(r)})),console.log("Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length));case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(Er(d()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,p=t.v,l.e(p);case 7:return t.p=7,l.f(),t.f(7);case 8:return console.log("Caching filtered battles ; total = ".concat(Object.keys(n).length)),t.n=9,At.cache(At.Keys.FILTERED_BATTLES,n);case 9:return console.log("Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters")),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return Jr.apply(this,arguments)}),getNumericalBattles:(zr=Ar(kr().m(function t(e,n){var r,o;return kr().w(function(t){for(;;)if(0===t.n)return r=function(t,e){return[t,Ur(e,n)]},o=Object.fromEntries(Object.entries(e).map(function(t){var e=Dr(t,2),n=e[0],o=e[1];return r(n,o)})),t.a(2,o)},t)})),function(t,e){return zr.apply(this,arguments)}),extendBattles:(qr=Ar(kr().m(function t(e){var n,r,o,a,i;return kr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.get(At.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=Lr(Lr({},i),Mr(e)),t.n=5,At.cache(At.Keys.BATTLES,r);case 5:return console.log("Extended user data in cache"),t.a(2,r)}},t)})),function(t){return qr.apply(this,arguments)}),cacheQuery:(Wr=Ar(kr().m(function t(e,n,r){var o,a,i,c;return kr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No query battles provided to cacheQuery"),t.a(2,[]);case 1:return console.log("Caching queried battles: ".concat(e," battles; modified [BATTLES]")),o=function(t){return Br(t,r)},a=e.map(o),i=Pr.convertServerStr(n.world_code),a.map(function(t){t["P1 Server"]=i}),t.n=2,Pr.addP2ServersByID(a);case 2:return t.n=3,this.extendBattles(a);case 3:return c=t.v,console.log("Cached queried battles in cache; modified [BATTLES]"),t.a(2,c)}},t,this)})),function(t,e,n){return Wr.apply(this,arguments)}),cacheUpload:(Kr=Ar(kr().m(function t(e){var n,r;return kr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No uploaded battles provided to cacheUpload"),t.a(2,er.emptyFilters());case 1:return n=e.map(Gr),t.n=2,At.cache(At.Keys.UPLOADED_BATTLES,n);case 2:return t.n=3,this.extendBattles(n);case 3:return r=t.v,console.log("Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]"),t.a(2,r)}},t,this)})),function(t){return Kr.apply(this,arguments)}),getStats:function(){var t=Ar(kr().m(function t(e,n,r,o,a){var i,c,s,u,l,f,d,p,h,y,g;return kr().w(function(t){for(;;)switch(t.n){case 0:return i=r.localFilters.length+r.globalFilters.length,t.n=1,this.applyFilter(r);case 1:return c=t.v,s=Object.values(e),u=Object.values(c),t.n=2,this.getNumericalBattles(c,o);case 2:return l=t.v,f=re(s,n,i>0?l:null,a),t.n=3,this.getPrebanStats(l,o);case 3:return d=t.v,t.n=4,this.getFirstPickStats(l,o);case 4:return p=t.v,t.n=5,this.getGeneralStats(l,o);case 5:return h=t.v,t.n=6,this.getHeroStats(l,o);case 6:return y=t.v,t.n=7,this.getServerStats(u);case 7:return g=t.v,t.a(2,{battles:s,filteredBattles:u,plotContent:f,prebanStats:d,generalStats:h,firstPickStats:p,playerHeroStats:y.playerHeroStats,enemyHeroStats:y.enemyHeroStats,serverStats:g})}},t,this)}));return function(e,n,r,o,a){return t.apply(this,arguments)}}(),getPrebanStats:function(t,e){var n=Zt.getHeroByName("Empty",e).prime,r=Object.values(t);if(0===r.length)return[];var o,a=function(t){return Ir(new Set(r)).map(function(e){return e[t]}).filter(function(t){return t&&t!==n})},i=a("P1 Preban 1"),c=a("P1 Preban 2"),s=new Set([].concat(Ir(i),Ir(c))),u=[],l=jr(s);try{for(l.s();!(o=l.n()).done;){var f=o.value;u.push(f)}}catch(t){l.e(t)}finally{l.f()}var d,p=jr(s);try{for(p.s();!(d=p.n()).done;){var h,y=d.value,g=jr(s);try{for(g.s();!(h=g.n()).done;){var m=h.value;y<m&&u.push(y*m)}}catch(t){g.e(t)}finally{g.f()}}}catch(t){p.e(t)}finally{p.f()}for(var v=r.length,b=[],w=function(){var t=P[S],n=r.filter(function(e){return e["P1 Prebans"]%t===0}),o=n.length;if(o<1)return 1;var a=n.reduce(function(t,e){return t+e.Win},0),i=v>0?o/v:0,c=o>0?a/o:0,s=2*a-o;b.push({preban:e.prime_pair_lookup[t],wins:a,appearances:o,appearance_rate:Hr(i),win_rate:Hr(c),"+/-":s})},S=0,P=u;S<P.length;S++)w();return b.sort(function(t,e){return e.appearances-t.appearances}),b},getFirstPickStats:function(t,e){var n=Object.values(t).filter(function(t){return t["First Pick"]});if(0===n.length)return[];var r,o=n.length,a={},i=jr(n);try{for(i.s();!(r=i.n()).done;){var c=r.value,s=c["P1 Pick 1"];s in a||(a[s]={wins:0,appearances:0}),a[s].wins+=c.Win?1:0,a[s].appearances+=1}}catch(t){i.e(t)}finally{i.f()}var u=Object.entries(a).map(function(t){var n=Dr(t,2),r=n[0],a=n[1];return{hero:Zt.getHeroByPrime(r,e).name,wins:a.wins,appearances:a.appearances,win_rate:Hr(a.wins/a.appearances),appearance_rate:Hr(a.appearances/o),"+/-":2*a.wins-a.appearances}});return u.sort(function(t,e){return e.appearances-t.appearances}),u},getGeneralStats:function(t,e){var n=Object.values(t);n.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var r=0,o=0;if(n.length>1)for(var a=0;a<n.length-1;a++){var i=[n[a],n[a+1]],c=i[0],s=i[1]["P1 Points"]-c["P1 Points"];s<-40||(r+=s,o+=1)}for(var u=o>0?r/o:0,l=n.length,f=n.filter(function(t){return 1===t["First Pick"]}),d=n.filter(function(t){return 1!==t["First Pick"]}),p=f.length,h=d.length,y=f.reduce(function(t,e){return t+e.Win},0),g=d.reduce(function(t,e){return t+e.Win},0),m=l?p/l:0,v=l?h/l:0,b=p?y/p:0,w=h?g/h:0,S=l?(y+g)/l:0,P=0,_=0,E=0,k=0,T=0,O=n;T<O.length;T++)1===O[T].Win?(E+=1,P=Math.max(P,E),k=0):(E=0,k+=1,_=Math.max(_,k));var A="N/A";return{first_pick_count:p,second_pick_count:h,first_pick_rate:p?Hr(m):A,second_pick_rate:h?Hr(v):A,first_pick_winrate:p?Hr(b):A,second_pick_winrate:h?Hr(w):A,total_winrate:l?Hr(S):A,total_battles:l,total_wins:y+g,max_win_streak:P,max_loss_streak:_,avg_ppg:u.toFixed(2)}},getHeroStats:function(t,e){var n=e.heroes,r=Object.values(t);if(0===r.length)return{playerHeroStats:[],enemyHeroStats:[]};var o,a=r.length,i=[],c=[],s=jr(n);try{var u=function(){var t=o.value;if(t.name===e.Empty.name)return 1;var n=t.prime,s=r.filter(function(t){return t["P1 Picks"]%n===0}),u=r.filter(function(t){return t["P2 Picks"]%n===0});s.length>0&&i.push(Lr(Lr({},Vr(s,a)),{},{hero:t.name})),u.length>0&&c.push(Lr(Lr({},Vr(u,a)),{},{hero:t.name}))};for(s.s();!(o=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}return{playerHeroStats:i.sort(function(t,e){return t.hero.localeCompare(e.hero)}),enemyHeroStats:c.sort(function(t,e){return t.hero.localeCompare(e.hero)})}},getServerStats:function(t){for(var e=[],n=t.length,r=function(){var r=a[o],i=t.filter(function(t){return t["P2 Server"]===r}),c=i.length,s=i.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),u=c>0?s/c:"N/A",l=n>0?c/n:"N/A",f=i.filter(function(t){return"True"===t["First Pick"]}),d=f.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),p=f.length>0?d/f.length:"N/A",h=i.filter(function(t){return"False"===t["First Pick"]}),y=h.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),g=h.length>0?y/h.length:"N/A";e.push({server:r,count:c,wins:s,win_rate:Hr(u),frequency:Hr(l),"+/-":2*s-c,fp_games:f.length,sp_games:h.length,fp_wr:Hr(p),sp_wr:Hr(g)})},o=0,a=Object.values(w);o<a.length;o++)r();return e.sort(function(t,e){return t.server.localeCompare(e.server)}),e}};const Zr=Qr;function to(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return eo(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(eo(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,eo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,eo(f,"constructor",u),eo(u,"constructor",s),s.displayName="GeneratorFunction",eo(u,o,"GeneratorFunction"),eo(f),eo(f,o,"Generator"),eo(f,r,function(){return this}),eo(f,"toString",function(){return"[object Generator]"}),(to=function(){return{w:a,m:d}})()}function eo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}eo=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){eo(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},eo(t,e,n,r)}function no(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function ro(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){no(a,r,o,i,c,"next",t)}function c(t){no(a,r,o,i,c,"throw",t)}i(void 0)})}}var oo,ao,io,co,so;const uo={updateSidebar:(so=ro(to().m(function t(e){var n,r,o,a;return to().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.getUser();case 1:n=t.v,r=document.getElementById("heroStatsOrQuery"),n?(console.log("Found user: ".concat(n,"; showing hero stats in sidebar")),o=e.heroStatsURL,r.innerHTML="\n            <a href=".concat(o,' class="pc-link">\n                <span class="pc-micon"><i data-feather="bar-chart-2"></i></span>\n                <span class="pc-mtext">Hero Stats</span>\n            </a>\n            ')):(console.log("Found user: ".concat(n,"; showing user query in sidebar")),a=e.userQueryURL,r.innerHTML="\n            <a href=".concat(a,' class="pc-link">\n                <span class="pc-micon"><i data-feather="download"></i></span>\n                <span class="pc-mtext">Query User Data</span>\n            </a>\n            ')),feather.replace();case 2:return t.a(2)}},t)})),function(t){return so.apply(this,arguments)}),updateSwitchUserBtn:(co=ro(to().m(function t(e){var n;return to().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.getUser();case 1:n=t.v,document.getElementById("user-options").innerHTML=n?'\n            <button name="switch_user" class="btn btn-primary" type="submit" action="switch-user" id="switch-user-btn">\n                Switch User\n            </button>\n            ':"";case 2:return t.a(2)}},t)})),function(t){return co.apply(this,arguments)}),queryAndCacheBattles:(io=ro(to().m(function t(e,n,r){var o=this;return to().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,d.fetchBattleData(e).then(function(t){return t.json()}).then(function(){var t=ro(to().m(function t(a){var i,c,s;return to().w(function(t){for(;;)switch(t.n){case 0:if(!a.success){t.n=2;break}return i=a.battles,t.n=1,Zr.cacheQuery(i,e,r);case 1:console.log("Cached queried battles"),t.n=3;break;case 2:c=null,"upload"===n.get("source")?c='{{ url_for("home_blueprint.upload_battle_data")}}':(s="Error while fetching data: ".concat(a.error),c=o.addStrParam('{{ url_for("home_blueprint.user_query") }}',"errorMSG",s)),window.location.replace(c);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),function(t,e,n){return io.apply(this,arguments)}),addStrParam:function(t,e,n){var r=encodeURIComponent(n);return"".concat(t,"?").concat(e,"=").concat(r)},addStrParams:function(t,e){for(var n in e)t=this.addStrParam(t,n,e[n]);return t},validateFilterSyntax:(ao=ro(to().m(function t(e){var n,r,o;return to().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Zt.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.p=2,t.n=3,er.createAndParse(e,n);case 3:return t.v,r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0);case 4:return t.p=4,o=t.v,console.error(o),r.textContent="Validation Failed: ".concat(o.message),r.classList.remove("text-safe"),r.classList.add("text-danger"),t.a(2,!1)}},t,null,[[2,4]])})),function(t){return ao.apply(this,arguments)}),validateFilterSyntaxNoCatch:(oo=ro(to().m(function t(e){var n,r;return to().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Zt.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.n=2,er.createAndParse(e,n);case 2:return r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0)}},t)})),function(t){return oo.apply(this,arguments)})};function lo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return fo(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(fo(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,fo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,fo(f,"constructor",u),fo(u,"constructor",s),s.displayName="GeneratorFunction",fo(u,o,"GeneratorFunction"),fo(f),fo(f,o,"Generator"),fo(f,r,function(){return this}),fo(f,"toString",function(){return"[object Generator]"}),(lo=function(){return{w:a,m:d}})()}function fo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}fo=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){fo(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},fo(t,e,n,r)}function po(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var ho,yo={HeroManager:Zt,BattleManager:Zr,SeasonManager:on,UserManager:Pr,ClientCache:At,getFilters:(ho=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){po(a,r,o,i,c,"next",t)}function c(t){po(a,r,o,i,c,"throw",t)}i(void 0)})}}(lo().m(function t(e){var n,r,o;return lo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,At.getFilterStr();case 1:if(n=t.v){t.n=2;break}return t.a(2,er.getEmptyFilters());case 2:return t.n=3,on.getSeasonDetails();case 3:return r=t.v,t.n=4,er.createAndParse(n,e,r);case 4:return o=t.v,t.a(2,o.filters)}},t)})),function(t){return ho.apply(this,arguments)})};const go=yo;var mo={"Current Season":"date in current-season",Wins:"is-win = true",Losses:"is-win = false","First Pick":"is-first-pick = true","Second Pick":"is-first-pick = false","Champion+ Opponent":"p2.league in {champion, warlord, emperor, legend}","Warlord+ Opponent":"p2.league in {warlord, emperor, legend}","Emperor+ Opponent":"p2.league in {emperor, legend}","Legend Opponent":"p2.league = 'legend'",extendFilters:function(t,e){var n=mo[e];return";"!==(t=t.replace(/\s+$/,"")).slice(-1)&&t.length>0?t+=";\n":";"===t.slice(-1)&&(t+="\n"),"".concat(t).concat(n,";")}};const vo=mo;function bo(t){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(t)}function wo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return So(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,c=0,s=t,d.n=n,i}};function p(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],p=d.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,d.v=r,d.n=a[1]):p<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,d.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(d.n=-1),p(c,s)):d.n=s:d.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(So(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,So(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,So(f,"constructor",u),So(u,"constructor",s),s.displayName="GeneratorFunction",So(u,o,"GeneratorFunction"),So(f),So(f,o,"Generator"),So(f,r,function(){return this}),So(f,"toString",function(){return"[object Generator]"}),(wo=function(){return{w:a,m:d}})()}function So(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}So=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){So(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},So(t,e,n,r)}function Po(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function _o(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Po(a,r,o,i,c,"next",t)}function c(t){Po(a,r,o,i,c,"throw",t)}i(void 0)})}}console.log("Attaching DOMContentLoaded listener"),document.addEventListener("DOMContentLoaded",_o(wo().m(function t(){var e,n,r,o,a,i,c,s,u,l,f,d,h;return wo().w(function(t){for(;;)switch(t.n){case 0:return e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries()),console.log("GOT PARAMS:",n),r=document.getElementById("auto-zoom-flag"),t.n=1,go.ClientCache.getFlag("autoZoom");case 1:return r.checked=t.v,r.addEventListener("click",_o(wo().m(function t(){return wo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,go.ClientCache.setFlag("autoZoom",r.checked);case 1:return t.a(2)}},t)}))),t.n=2,go.UserManager.getUser();case 2:return(o=t.v)||(window.location.href=URLS.addStrParam(URLS.userQueryURL,"errorMSG","Type1: no user")),e.get("errorMSG")&&((a=document.getElementById("filterMSG")).textContent=e.get("errorMSG"),a.classList.remove("text-safe"),a.classList.add("text-danger")),document.getElementById("switch-user-btn").addEventListener("click",_o(wo().m(function t(){return wo().w(function(t){for(;;)switch(t.n){case 0:return console.log("Clearing User Data"),t.n=1,go.ClientCache.clearUserData();case 1:window.location.href=URLS.userQueryURL;case 2:return t.a(2)}},t)}))),console.log("POPULATING DATA PROCESS INITIATED"),t.p=3,console.log("Getting Season Details"),t.n=4,go.SeasonManager.getSeasonDetails();case 4:return i=t.v,console.log("Got season details:",i,bo(i)),console.log("Getting Stats"),t.n=5,go.ClientCache.getStats();case 5:c=t.v,console.time("populateTables"),console.log("POPULATING TABLES, CARD CONTENT, AND PLOTS"),p.functions.populateSeasonDetailsTable("SeasonDetails",i),p.functions.populateHeroStatsTable("PlayerTable",c.playerHeroStats),p.functions.populateHeroStatsTable("OpponentTable",c.enemyHeroStats),p.functions.populatePlayerFirstPickTable("FirstPickStats",c.firstPickStats),p.functions.populatePlayerPrebansTable("PrebanStats",c.prebanStats),p.functions.populateServerStatsTable("server-stats",c.serverStats),s=p.functions.populateFullBattlesTable("BattlesTable",c.battles,o),y.functions.populateGeneralStats(c.generalStats),y.functions.populateRankPlot(c.plotContent),console.log("FINISHED POPULATING"),console.timeEnd("populateTables"),console.log("Setting listener for filter-battle-table checkbox"),(u=document.getElementById("filter-battle-table")).addEventListener("click",_o(wo().m(function t(){return wo().w(function(t){for(;;)switch(t.n){case 0:u.checked?p.functions.replaceDatatableData(s,c.filteredBattles):p.functions.replaceDatatableData(s,c.battles);case 1:return t.a(2)}},t)}))),t.n=7;break;case 6:t.p=6,h=t.v,console.error("Error loading data:",h);case 7:return document.getElementById("content-body").classList.remove("d-none"),CodeMirror.defineMode("filterSyntax",function(){return{token:function(t,e){return Ae.tokenMatch(t)}}}),l=document.getElementById("codeArea"),(f=CodeMirror.fromTextArea(l,{mode:"filterSyntax",lineNumbers:!0,theme:"default"})).setSize(null,185),t.n=8,go.ClientCache.getFilterStr();case 8:(d=t.v)&&f.setValue(d),document.getElementById("premade-filters").addEventListener("click",function(t){console.log("Attempting to add a premade filter"),t.preventDefault();var e=t.target.closest(".dropdown-item");if(e){var n=e.textContent.trim();console.log("Target found:",n);var r=f.getValue(),o=vo.extendFilters(r,n);f.setValue(o)}}),document.getElementById("filterForm").addEventListener("submit",function(){var t=_o(wo().m(function t(e){var n,o,a,i,c,s,u;return wo().w(function(t){for(;;)switch(t.n){case 0:if(e.preventDefault(),document.getElementById("codeArea").value=f.getValue(),console.log("Processing Filter Action"),n=e.submitter,o=null==n?void 0:n.value,a=f.getValue(),"apply"!==o){t.n=4;break}return t.n=1,uo.validateFilterSyntax(a);case 1:if(!t.v){t.n=3;break}return t.n=2,go.ClientCache.setFilterStr(a);case 2:i=document.getElementById("auto-zoom-flag"),c=i.checked,s={autoZoom:c,query:"false"},window.location.href=URLS.addStrParams(URLS.loadData,s);case 3:t.n=8;break;case 4:if("check"!==o){t.n=6;break}return console.log("Checking Str",a),t.n=5,uo.validateFilterSyntax(a);case 5:t.n=8;break;case 6:if("clear"!==o){t.n=8;break}if(f.setValue(""),console.log("Found applied filter",d,"when clearing"),!d){t.n=8;break}return console.log("Found filter str",d),t.n=7,go.ClientCache.setFilterStr("");case 7:u={autoZoom:r.checked,query:"false"},window.location.href=URLS.addStrParams(URLS.loadData,u);case 8:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),f.on("change",function(){f.save()}),l.classList.remove("codemirror-hidden");case 9:return t.a(2)}},t,null,[[3,6]])})))})()})();