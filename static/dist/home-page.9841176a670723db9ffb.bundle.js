/*! For license information please see home-page.9841176a670723db9ffb.bundle.js.LICENSE.txt */
(()=>{var t={809:function(t,e){var n,r,o;r=[],n=function t(){var e,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},i=0,s={};function c(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new d(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let e=this._config.newline;e||(a=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,a)),t=[...t.split(e).slice(r)].join(e)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(t))&&(t=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+t;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=a.meta.cursor,this._finished||(this._partialLine=r.substring(t-this._baseIndex),this._baseIndex=t),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)n.postMessage({results:a,workerId:s.WORKER_ID,finished:r});else if(T(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!T(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){T(this._config.error)?this._config.error(t):o&&this._config.error&&n.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function u(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),c.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=g(this._chunkLoaded,this),e.onerror=g(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t,n=this._config.downloadRequestHeaders;for(t in n)e.setRequestHeader(t,n[t])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(t=>null!==(t=t.getResponseHeader("Content-Range"))?parseInt(t.substring(t.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){t=e.statusText||t,this._sendError(new Error(t))}}function l(t){(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),c.call(this,t);var e,n,r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=g(this._chunkLoaded,this),e.onerror=g(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input,o=(this._config.chunkSize&&(o=Math.min(this._start+this._config.chunkSize,this._input.size),t=n.call(t,this._start,o)),e.readAsText(t,this._config.encoding));r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;c.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){var t,n;if(!this._finished)return t=this._config.chunkSize,e=t?(n=e.substring(0,t),e.substring(t)):(n=e,""),this._finished=!e,this.parseChunk(n)}}function p(t){c.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=g(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=g(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=g(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=g(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(t){var e,n,r,o,a=Math.pow(2,53),i=-a,c=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,f=0,p=0,d=!1,E=!1,S=[],m={data:[],errors:[],meta:{}};function g(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function v(){if(m&&r&&(w("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(m.data=m.data.filter(function(t){return!g(t)})),A()){if(m)if(Array.isArray(m.data[0])){for(var e=0;A()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){T(t.transformHeader)&&(e=t.transformHeader(e,n)),S.push(e)}}function o(e,n){for(var r=t.header?{}:[],o=0;o<e.length;o++){var s=o,l=e[o];l=((e,n)=>(e=>(t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)))(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((t=>{if(c.test(t)&&(t=parseFloat(t),i<t&&t<a))return 1})(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n)(s=t.header?o>=S.length?"__parsed_extra":S[o]:s,l=t.transform?t.transform(l,s):l),"__parsed_extra"===s?(r[s]=r[s]||[],r[s].push(l)):r[s]=l}return t.header&&(o>S.length?w("FieldMismatch","TooManyFields","Too many fields: expected "+S.length+" fields but parsed "+o,p+n):o<S.length&&w("FieldMismatch","TooFewFields","Too few fields: expected "+S.length+" fields but parsed "+o,p+n)),r}var l;m&&(t.header||t.dynamicTyping||t.transform)&&(l=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(o),l=m.data.length):m.data=o(m.data,0),t.header&&m.meta&&(m.meta.fields=S),p+=l)}function A(){return t.header&&0===S.length}function w(t,e,n,r){t={type:t,code:e,message:n},void 0!==r&&(t.row=r),m.errors.push(t)}T(t.step)&&(o=t.step,t.step=function(e){m=e,A()?v():(v(),0!==m.data.length&&(f+=e.data.length,t.preview&&f>t.preview?n.abort():(m.data=m.data[0],o(m,l))))}),this.parse=function(o,a,i){var c=t.quoteChar||'"';return t.newline||(t.newline=this.guessLineEndings(o,c)),r=!1,t.delimiter?T(t.delimiter)&&(t.delimiter=t.delimiter(o),m.meta.delimiter=t.delimiter):((c=((e,n,r,o,a)=>{var i,c,u,l;a=a||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var f=0;f<a.length;f++){for(var p,d=a[f],h=0,E=0,S=0,m=(u=void 0,new _({comments:o,delimiter:d,newline:n,preview:10}).parse(e)),y=0;y<m.data.length;y++)r&&g(m.data[y])?S++:(E+=p=m.data[y].length,void 0===u?u=p:0<p&&(h+=Math.abs(p-u),u=p));0<m.data.length&&(E/=m.data.length-S),(void 0===c||h<=c)&&(void 0===l||l<E)&&1.99<E&&(c=h,i=d,l=E)}return{successful:!!(t.delimiter=i),bestDelimiter:i}})(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=c.bestDelimiter:(r=!0,t.delimiter=s.DefaultDelimiter),m.meta.delimiter=t.delimiter),c=y(t),t.preview&&t.header&&c.preview++,e=o,n=new _(c),m=n.parse(e,a,i),v(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=T(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(d=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return E},this.abort=function(){E=!0,n.abort(),m.meta.aborted=!0,T(t.complete)&&t.complete(m),e=""},this.guessLineEndings=function(t,e){t=t.substring(0,1048576),e=new RegExp(h(e)+"([^]*?)"+h(e),"gm");var n=(t=t.replace(e,"")).split("\r");if(t=1<(e=t.split("\n")).length&&e[0].length<n[0].length,1===n.length||t)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(t){var e=(t=t||{}).delimiter,n=t.newline,r=t.comments,o=t.step,a=t.preview,i=t.fastMode,c=null,u=!1,l=null==t.quoteChar?'"':t.quoteChar,f=l;if(void 0!==t.escapeChar&&(f=t.escapeChar),("string"!=typeof e||-1<s.BAD_DELIMITERS.indexOf(e))&&(e=","),r===e)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var p=0,d=!1;this.parse=function(s,_,E){if("string"!=typeof s)throw new Error("Input must be a string");var S=s.length,m=e.length,y=n.length,g=r.length,v=T(o),A=[],w=[],b=[],O=p=0;if(!s)return U();if(i||!1!==i&&-1===s.indexOf(l)){for(var R=s.split(n),P=0;P<R.length;P++){if(b=R[P],p+=b.length,P!==R.length-1)p+=n.length;else if(E)return U();if(!r||b.substring(0,g)!==r){if(v){if(A=[],k(b.split(e)),j(),d)return U()}else k(b.split(e));if(a&&a<=P)return A=A.slice(0,a),U(!0)}}return U()}for(var L=s.indexOf(e,p),C=s.indexOf(n,p),I=new RegExp(h(f)+h(l),"g"),N=s.indexOf(l,p);;)if(s[p]===l)for(N=p,p++;;){if(-1===(N=s.indexOf(l,N+1)))return E||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:A.length,index:p}),F();if(N===S-1)return F(s.substring(p,N).replace(I,l));if(l===f&&s[N+1]===f)N++;else if(l===f||0===N||s[N-1]!==f){-1!==L&&L<N+1&&(L=s.indexOf(e,N+1));var D=M(-1===(C=-1!==C&&C<N+1?s.indexOf(n,N+1):C)?L:Math.min(L,C));if(s.substr(N+1+D,m)===e){b.push(s.substring(p,N).replace(I,l)),s[p=N+1+D+m]!==l&&(N=s.indexOf(l,p)),L=s.indexOf(e,p),C=s.indexOf(n,p);break}if(D=M(C),s.substring(N+1+D,N+1+D+y)===n){if(b.push(s.substring(p,N).replace(I,l)),x(N+1+D+y),L=s.indexOf(e,p),N=s.indexOf(l,p),v&&(j(),d))return U();if(a&&A.length>=a)return U(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:A.length,index:p}),N++}}else if(r&&0===b.length&&s.substring(p,p+g)===r){if(-1===C)return U();p=C+y,C=s.indexOf(n,p),L=s.indexOf(e,p)}else if(-1!==L&&(L<C||-1===C))b.push(s.substring(p,L)),p=L+m,L=s.indexOf(e,p);else{if(-1===C)break;if(b.push(s.substring(p,C)),x(C+y),v&&(j(),d))return U();if(a&&A.length>=a)return U(!0)}return F();function k(t){A.push(t),O=p}function M(t){var e=0;return-1!==t&&(t=s.substring(N+1,t))&&""===t.trim()?t.length:e}function F(t){return E||(void 0===t&&(t=s.substring(p)),b.push(t),p=S,k(b),v&&j()),U()}function x(t){p=t,k(b),b=[],C=s.indexOf(n,p)}function U(r){if(t.header&&!_&&A.length&&!u){var o=A[0],a=Object.create(null),i=new Set(o);let e=!1;for(let n=0;n<o.length;n++){let r=o[n];if(a[r=T(t.transformHeader)?t.transformHeader(r,n):r]){let t,s=a[r];for(;t=r+"_"+s,s++,i.has(t););i.add(t),o[n]=t,a[r]++,e=!0,(c=null===c?{}:c)[t]=r}else a[r]=1,o[n]=r;i.add(r)}u=!0}return{data:A,errors:w,meta:{delimiter:e,linebreak:n,aborted:d,truncated:!!r,cursor:O+(_||0),renamedHeaders:c}}}function j(){o(U()),A=[],w=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return p}}function E(t){var e=t.data,n=a[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,S(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(T(n.userStep)){for(var i=0;i<e.results.data.length&&(n.userStep({data:e.results.data[i],errors:e.results.errors,meta:e.results.meta},o),!r);i++);delete e.results}else T(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&S(e.workerId,e.results)}function S(t,e){var n=a[t];T(n.userComplete)&&n.userComplete(e),n.terminate(),delete a[t]}function m(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e,n=Array.isArray(t)?[]:{};for(e in t)n[e]=y(t[e]);return n}function g(t,e){return function(){t.apply(e,arguments)}}function T(t){return"function"==typeof t}return s.parse=function(e,r){var o=(r=r||{}).dynamicTyping||!1;if(T(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!T(r.transform)&&r.transform,!r.worker||!s.WORKERS_SUPPORTED)return o=null,s.NODE_STREAM_INPUT,"string"==typeof e?(e=(t=>65279!==t.charCodeAt(0)?t:t.slice(1))(e),o=new(r.download?u:f)(r)):!0===e.readable&&T(e.read)&&T(e.on)?o=new p(r):(n.File&&e instanceof File||e instanceof Object)&&(o=new l(r)),o.stream(e);(o=(()=>{var e;return!!s.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,r=t.toString();return s.BLOB_URL||(s.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(e=new n.Worker(e)).onmessage=E,e.id=i++,a[e.id]=e)})()).userStep=r.step,o.userChunk=r.chunk,o.userComplete=r.complete,o.userError=r.error,r.step=T(r.step),r.chunk=T(r.chunk),r.complete=T(r.complete),r.error=T(r.error),delete r.worker,o.postMessage({input:e,config:r,workerId:o.id})},s.unparse=function(t,e){var n=!1,r=!0,o=",",a="\r\n",i='"',c=i+i,u=!1,l=null,f=!1,p=((()=>{if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(o=e.delimiter),"boolean"!=typeof e.quotes&&"function"!=typeof e.quotes&&!Array.isArray(e.quotes)||(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(i=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(c=e.escapeChar+i),e.escapeFormulae instanceof RegExp?f=e.escapeFormulae:"boolean"==typeof e.escapeFormulae&&e.escapeFormulae&&(f=/^[=+\-@\t\r].*$/)}})(),new RegExp(h(i),"g"));if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return d(null,t,u);if("object"==typeof t[0])return d(l||Object.keys(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),d(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function d(t,e,n){var i="",s=("string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t)&&0<t.length),c=!Array.isArray(e[0]);if(s&&r){for(var u=0;u<t.length;u++)0<u&&(i+=o),i+=_(t[u],u);0<e.length&&(i+=a)}for(var l=0;l<e.length;l++){var f=(s?t:e[l]).length,p=!1,d=s?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!s&&(p="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&s){for(var h=[],E=0;E<f;E++){var S=c?t[E]:E;h.push(e[l][S])}p=""===h.join("").trim()}if(!p){for(var m=0;m<f;m++){0<m&&!d&&(i+=o);var y=s&&c?t[m]:m;i+=_(e[l][y],m)}l<e.length-1&&(!n||0<f&&!d)&&(i+=a)}}return i}function _(t,e){var r,a;return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(a=!1,f&&"string"==typeof t&&f.test(t)&&(t="'"+t,a=!0),r=t.toString().replace(p,c),(a=a||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||((t,e)=>{for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1})(r,s.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!r&&!!n.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=_,s.ParserHandle=d,s.NetworkStreamer=u,s.FileStreamer=l,s.StringStreamer=f,s.ReadableStreamStreamer=p,n.jQuery&&((e=n.jQuery).fn.parse=function(t){var r=t.config||{},o=[];return this.each(function(t){if("INPUT"!==e(this).prop("tagName").toUpperCase()||"file"!==e(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:e.extend({},r)})}),a(),this;function a(){if(0===o.length)T(t.complete)&&t.complete();else{var n,r,a,c,u=o[0];if(T(t.before)){var l=t.before(u.file,u.inputElem);if("object"==typeof l){if("abort"===l.action)return n="AbortError",r=u.file,a=u.inputElem,c=l.reason,void(T(t.error)&&t.error({name:n},r,a,c));if("skip"===l.action)return void i();"object"==typeof l.config&&(u.instanceConfig=e.extend(u.instanceConfig,l.config))}else if("skip"===l)return void i()}var f=u.instanceConfig.complete;u.instanceConfig.complete=function(t){T(f)&&f(t,u.file,u.inputElem),i()},s.parse(u.file,u.instanceConfig)}}function i(){o.splice(0,1),a()}}),o&&(n.onmessage=function(t){t=t.data,void 0===s.WORKER_ID&&t&&(s.WORKER_ID=t.workerId),"string"==typeof t.input?n.postMessage({workerId:s.WORKER_ID,results:s.parse(t.input,t.config),finished:!0}):(n.File&&t.input instanceof File||t.input instanceof Object)&&(t=s.parse(t.input,t.config))&&n.postMessage({workerId:s.WORKER_ID,results:t,finished:!0})}),(u.prototype=Object.create(c.prototype)).constructor=u,(l.prototype=Object.create(c.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(c.prototype)).constructor=p,s},void 0===(o="function"==typeof n?n.apply(e,r):n)||(t.exports=o)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}(()=>{"use strict";const t=(t,e)=>e.some(e=>t instanceof e);let e,r;const o=new WeakMap,a=new WeakMap,i=new WeakMap;let s={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return o.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return f(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function c(t){s=t(s)}function u(t){return(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(p(this),e),f(this.request)}:function(...e){return f(t.apply(p(this),e))}}function l(n){return"function"==typeof n?u(n):(n instanceof IDBTransaction&&function(t){if(o.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});o.set(t,e)}(n),t(n,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(n,s):n)}function f(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(f(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return i.set(e,t),e}(t);if(a.has(t))return a.get(t);const e=l(t);return e!==t&&(a.set(t,e),i.set(e,t)),e}const p=t=>i.get(t);const d=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],_=new Map;function E(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(_.get(e))return _.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=h.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!d.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return _.set(e,a),a}c(t=>({...t,get:(e,n,r)=>E(e,n)||t.get(e,n,r),has:(e,n)=>!!E(e,n)||t.has(e,n)}));const S=["continue","continuePrimaryKey","advance"],m={},y=new WeakMap,g=new WeakMap,T={get(t,e){if(!S.includes(e))return t[e];let n=m[e];return n||(n=m[e]=function(...t){y.set(this,g.get(this)[e](...t))}),n}};async function*v(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,T);for(g.set(n,e),i.set(n,p(e));e;)yield n,e=await(y.get(n)||e.continue()),y.delete(n)}function A(e,n){return n===Symbol.asyncIterator&&t(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===n&&t(e,[IDBIndex,IDBObjectStore])}function w(t){return t.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())}function b(t){return t.reduce((t,e)=>(t[e]=(t[e]||0)+1,t),{})}c(t=>({...t,get:(e,n,r)=>A(e,n)?v:t.get(e,n,r),has:(e,n)=>A(e,n)||t.has(e,n)}));const O={DE:"de",KO:"ko",PT:"pt",TH:"th",ZH_TW:"zh-TW",JA:"ja",EN:"en",FR:"fr",ZH_CN:"zh-CN",ES:"es"},R=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),P="world_global",L="world_kor",C="world_jpn",I="world_asia",N="world_eu",D={[P]:"Global",[L]:"Korea",[C]:"Japan",[I]:"Asia",[N]:"Europe"},k={[D.world_global]:P,[D.world_kor]:L,[D.world_jpn]:C,[D.world_asia]:I,[D.world_eu]:N},M=Object.fromEntries(Object.values(D).map(t=>[t.toLowerCase(),t])),F={set_speed:"Speed",set_acc:"Hit",set_cri:"Critical",set_res:"Resist",set_def:"Defense",set_att:"Attack",set_max_hp:"Health",set_cri_dmg:"Destruction",set_coop:"Unity",set_immune:"Immunity",set_rage:"Rage",set_vampire:"Lifesteal",set_shield:"Protection",set_revenge:"Revenge",set_penetrate:"Penetration",set_torrent:"Torrent",set_counter:"Counter",set_scar:"Injury"},x=864e5,U={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},j=Object.fromEntries(Object.keys(U).sort((t,e)=>U[t]-U[e]).map(t=>[t,w(t)])),B={SEASON:"Season",SEASON_CODE:"Season Code",DATE_TIME:"Date/Time",SECONDS:"Seconds",TURNS:"Turns",SEQ_NUM:"Seq Num",P1_ID:"P1 ID",P1_SERVER:"P1 Server",P2_ID:"P2 ID",P2_SERVER:"P2 Server",P1_LEAGUE:"P1 League",P2_LEAGUE:"P2 League",P1_POINTS:"P1 Points",POINT_GAIN:"Point Gain",WIN:"Win",FIRST_PICK:"First Pick",FIRST_TURN:"First Turn",FIRST_TURN_HERO:"First Turn Hero",CR_BAR:"CR Bar",P1_PREBANS:"P1 Prebans",P2_PREBANS:"P2 Prebans",P1_PICKS:"P1 Picks",P2_PICKS:"P2 Picks",P1_POSTBAN:"P1 Postban",P2_POSTBAN:"P2 Postban",P1_EQUIPMENT:"P1 Equipment",P2_EQUIPMENT:"P2 Equipment",P1_ARTIFACTS:"P1 Artifacts",P2_ARTIFACTS:"P2 Artifacts",P1_MVP:"P1 MVP",P2_MVP:"P2 MVP",P1_PICKS_PRIMES:"P1 Picks Primes",P1_PICKS_PRIME_PRODUCT:"P1 Picks Prime Product",P2_PICKS_PRIMES:"P2 Picks Primes",P2_PICKS_PRIME_PRODUCT:"P2 Picks Prime Product",P1_PREBANS_PRIMES:"P1 Prebans Primes",P1_PREBANS_PRIME_PRODUCT:"P1 Prebans Prime Product",P2_PREBANS_PRIMES:"P2 Prebans Primes",P2_PREBANS_PRIME_PRODUCT:"P2 Prebans Prime Product"},G=Object.values(B).filter(t=>!t.toLowerCase().includes("prime")),H=[B.P1_EQUIPMENT,B.P2_EQUIPMENT,B.P1_ARTIFACTS,B.P2_ARTIFACTS,B.CR_BAR,B.P1_PREBANS,B.P2_PREBANS,B.P1_PICKS,B.P2_PICKS],K=[B.FIRST_PICK,B.FIRST_TURN,B.WIN],V=[B.SECONDS,B.TURNS,B.P1_POINTS,B.POINT_GAIN],W=[B.P1_LEAGUE,B.P2_LEAGUE],Y="Hero Name",q="Battles",z="Pick Rate",Q="Wins",J="Win rate",X="Postbans",Z="Postban Rate",tt="Success Rate",et="+/-",nt="Point Gain",rt="Avg CR",ot="First Turns",at="First Turn Rate",it="https://epic7.onstove.com",st=it+"/gg";const ct=function(t){const e=new Uint8Array(t+1),n=[];for(let r=2;r<=t;r++)if(!e[r]){n.push(r);for(let n=r*r;n<=t;n+=r)e[n]=1}return n}(3e4);async function ut(t,e){const n=t.transaction(e,"readwrite");n.objectStore(e).clear(),await n.done}const lt={USER:"current-user",BATTLES:"battles",RAW_UPLOAD:"raw-upload",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",STATS:"stats",FILTER_STR:"filter-str"},ft={GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},pt={...lt,...ft,LANG:"lang",HERO_MANAGER:"hero-manager",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",ID_SEARCH_FLAG:"id-search",ARTIFACTS:"artifacts",ARTIFACTS_LOWERCASE_NAMES_MAP:"artifacts-lowercase-names-map",ARTIFACT_OBJECT_LIST:"artifact-object-list",HOME_PAGE_STATE:"home-page-state",INTER_PAGE_MANAGER:"inter-page-manager"};let dt={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:{...pt},MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:async()=>function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),s=f(i);return r&&i.addEventListener("upgradeneeded",t=>{r(f(i.result),t.oldVersion,t.newVersion,f(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),s.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),s}(dt.consts.DB_NAME,dt.consts.DB_VERSION,{upgrade(t){t.objectStoreNames.contains(dt.consts.STORE_NAME)&&t.deleteObjectStore(dt.consts.STORE_NAME),t.objectStoreNames.contains(dt.consts.STORE_NAME)||t.createObjectStore(dt.consts.STORE_NAME),t.objectStoreNames.contains(dt.consts.META_STORE_NAME)||t.createObjectStore(dt.consts.META_STORE_NAME)}}),get:async function(t){const e=await this.openDB(),n=await e.get(this.consts.STORE_NAME,t);if(null===n)return null;return await this.checkCacheTimeout(t)?n:null},cache:async function(t,e){const n=await this.openDB();await n.put(this.consts.STORE_NAME,e,t),await this.setTimestamp(t,Date.now())},delete:async function(t){const e=await this.openDB();await e.delete(this.consts.STORE_NAME,t),await this.deleteTimestamp(t)},deleteDB:async function(){await indexedDB.deleteDatabase(this.consts.DB_NAME)},getTimestamp:async function(t){const e=await this.openDB(),n=`${t+this.MetaKeys.TIMESTAMP}`;return await e.get(this.consts.META_STORE_NAME,n)??0},setTimestamp:async function(t,e){const n=await this.openDB(),r=`${t+this.MetaKeys.TIMESTAMP}`;await n.put(this.consts.META_STORE_NAME,e,r),await n.get(this.consts.META_STORE_NAME,r)},deleteTimestamp:async function(t){const e=await this.openDB(),n=`${t+this.MetaKeys.TIMESTAMP}`;await e.delete(this.consts.META_STORE_NAME,n)},clearData:async function(){const t=await this.openDB();await ut(t,this.consts.STORE_NAME),await ut(t,this.consts.META_STORE_NAME)},clearUserData:async function(){const t=Object.values(lt);await Promise.all(t.map(t=>this.delete(t)))},clearUserLists:async function(){const t=Object.values(ft);await Promise.all(t.map(t=>this.delete(t)))},clearSeasonData:async function(){await this.delete(pt.SEASON_DETAILS)},checkCacheTimeout:async function(t){const e=await this.getTimestamp(t),n=Date.now();return!(!e||n-e>dt.consts.CACHE_TIMEOUT)||(await this.delete(t),!1)},getFilterStr:async function(){return await this.get(dt.Keys.FILTER_STR)},setFilterStr:async function(t){await this.cache(dt.Keys.FILTER_STR,t)},getLang:async function(){return await this.get(dt.Keys.LANG)??O.EN},setLang:async function(t){await this.cache(dt.Keys.LANG,t)},getStats:async function(){return await this.get(dt.Keys.STATS)},setStats:async function(t){await this.cache(pt.STATS,t)}};const ht=dt,_t={unwrapHtmlElt:function(t){const e=document.getElementById(t);if(null===e)throw new Error(`Could not find element with ID ${t}`);return e},setText:function(t,e){this.unwrapHtmlElt(t).textContent=e}};function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function St(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gt(r.key),r)}}function yt(t,e,n){return e&&mt(t.prototype,e),n&&mt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gt(t){var e=function(t,e){if("object"!=Et(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Et(e)?e:e+""}var Tt=function(){return yt(function t(){St(this,t)},[{key:"SELECT_DATA_MSG",get:function(){return this._SELECT_DATA_MSG||(this._SELECT_DATA_MSG=_t.unwrapHtmlElt("select-data-msg"))}},{key:"FILTER_MSG",get:function(){return this._FILTER_MSG||(this._FILTER_MSG=_t.unwrapHtmlElt("filterMSG"))}},{key:"SELECT_DATA_BODY",get:function(){return this._SELECT_DATA_BODY||(this._SELECT_DATA_BODY=_t.unwrapHtmlElt("select-data-body"))}},{key:"SHOW_STATS_BODY",get:function(){return this._SHOW_STATS_BODY||(this._SHOW_STATS_BODY=_t.unwrapHtmlElt("show-stats-body"))}},{key:"LOAD_DATA_BODY",get:function(){return this._LOAD_DATA_BODY||(this._LOAD_DATA_BODY=_t.unwrapHtmlElt("load-data-body"))}},{key:"CLEAR_DATA_BTN",get:function(){return this._CLEAR_DATA_BTN||(this._CLEAR_DATA_BTN=_t.unwrapHtmlElt("clear-data-btn"))}},{key:"UPLOAD_FORM",get:function(){return this._UPLOAD_FORM||(this._UPLOAD_FORM=_t.unwrapHtmlElt("uploadForm"))}},{key:"CSV_FILE",get:function(){return this._CSV_FILE||(this._CSV_FILE=_t.unwrapHtmlElt("csvFile"))}},{key:"USER_QUERY_FORM_NAME",get:function(){return this._USER_QUERY_FORM_NAME||(this._USER_QUERY_FORM_NAME=_t.unwrapHtmlElt("user-query-form-name"))}},{key:"USER_QUERY_FORM_SERVER",get:function(){return this._USER_QUERY_FORM_SERVER||(this._USER_QUERY_FORM_SERVER=_t.unwrapHtmlElt("user-query-form-server"))}},{key:"AUTO_ZOOM_FLAG",get:function(){return this._AUTO_ZOOM_FLAG||(this._AUTO_ZOOM_FLAG=_t.unwrapHtmlElt("auto-zoom-flag"))}},{key:"FOOTER_BODY",get:function(){return this._FOOTER||(this._FOOTER=_t.unwrapHtmlElt("footer-body"))}},{key:"USER_NAME",get:function(){return this._USER_NAME||(this._USER_NAME=_t.unwrapHtmlElt("user-name"))}},{key:"USER_ID",get:function(){return this._USER_ID||(this._USER_ID=_t.unwrapHtmlElt("user-id"))}},{key:"USER_SERVER",get:function(){return this._USER_SERVER||(this._USER_SERVER=_t.unwrapHtmlElt("user-server"))}},{key:"BATTLE_FILTER_TOGGLE",get:function(){return this._BATTLE_FILTER_TOGGLER||(this._BATTLE_FILTER_TOGGLER=_t.unwrapHtmlElt("filter-battle-table"))}},{key:"ID_SEARCH_FLAG",get:function(){return this._ID_SEARCH_FLAG||(this._ID_SEARCH_FLAG=_t.unwrapHtmlElt("id-search-flag"))}},{key:"SEASON_DETAILS_TBL",get:function(){return this._SEASON_DETAILS_TBL||(this._SEASON_DETAILS_TBL=_t.unwrapHtmlElt("season-details-tbl"))}},{key:"PERFORMANCE_STATS_TBL",get:function(){return this._PERFORMANCE_STATS_TBL||(this._PERFORMANCE_STATS_TBL=_t.unwrapHtmlElt("performance-stats-tbl"))}},{key:"FIRST_PICK_STATS_TBL",get:function(){return this._FIRST_PICK_STATS_TBL||(this._FIRST_PICK_STATS_TBL=_t.unwrapHtmlElt("first-pick-stats-tbl"))}},{key:"PREBAN_STATS_TBL",get:function(){return this._PREBAN_STATS_TBL||(this._PREBAN_STATS_TBL=_t.unwrapHtmlElt("preban-stats-tbl"))}},{key:"PLAYER_TBL",get:function(){return this._PLAYER_TBL||(this._PLAYER_TBL=_t.unwrapHtmlElt("player-tbl"))}},{key:"OPPONENT_TBL",get:function(){return this._OPPONENT_TBL||(this._OPPONENT_TBL=_t.unwrapHtmlElt("opponent-tbl"))}},{key:"BATTLES_TBL",get:function(){return this._BATTLE_TBL||(this._BATTLE_TBL=_t.unwrapHtmlElt("battles-tbl"))}},{key:"RANK_PLOT",get:function(){return this._RANK_PLOT||(this._RANK_PLOT=_t.unwrapHtmlElt("rank-plot"))}},{key:"MESSAGE_ELEMENTS_LIST",get:function(){return[this.SELECT_DATA_MSG,this.FILTER_MSG]}}])}(),vt=function(){return yt(function t(){St(this,t)},[{key:"SIDEBAR_HIDE_BTN",get:function(){return this._SIDEBAR_HIDE_BTN||(this._SIDEBAR_HIDE_BTN=_t.unwrapHtmlElt("sidebar-hide"))}},{key:"CLEAR_DATA_BTN",get:function(){return this._CLEAR_DATA_BTN||(this._CLEAR_DATA_BTN=_t.unwrapHtmlElt("clear-data-btn"))}},{key:"EXPORT_CSV_BTN",get:function(){return this._EXPORT_CSV_BTN||(this._EXPORT_CSV_BTN=_t.unwrapHtmlElt("export-csv-btn"))}},{key:"OFFICIAL_SITE_BTN",get:function(){return this._OFFICIAL_SITE_BTN||(this._OFFICIAL_SITE_BTN=_t.unwrapHtmlElt("official-site-btn"))}},{key:"USER_NAME",get:function(){return this._USER_NAME||(this._USER_NAME=_t.unwrapHtmlElt("user-name"))}},{key:"USER_ID",get:function(){return this._USER_ID||(this._USER_ID=_t.unwrapHtmlElt("user-id"))}},{key:"USER_SERVER",get:function(){return this._USER_SERVER||(this._USER_SERVER=_t.unwrapHtmlElt("user-server"))}},{key:"SIDEBAR_CONTROL",get:function(){return this._SIDEBAR_CONTROL||(this._SIDEBAR_CONTROL=_t.unwrapHtmlElt("sidebar-control"))}}])}(),At=function(){return yt(function t(){St(this,t)},[{key:"SEARCH_DOMAINS",get:function(){return this._SEARCH_DOMAINS||(this._SEARCH_DOMAINS=_t.unwrapHtmlElt("search-domains"))}},{key:"SEARCH_SUBMIT_BTN",get:function(){return this._SEARCH_SUBMIT_BTN||(this._SEARCH_SUBMIT_BTN=_t.unwrapHtmlElt("search-submit-btn"))}},{key:"SEARCH_FORM",get:function(){return this._SEARCH_FORM||(this._SEARCH_FORM=_t.unwrapHtmlElt("searchForm"))}},{key:"SEARCH_TABLE_CONTAINER",get:function(){return this._SEARCH_TABLE_CONTAINER||(this._SEARCH_TABLE_CONTAINER=_t.unwrapHtmlElt("search-table-container"))}}])}(),wt=function(){return yt(function t(){St(this,t)},[{key:"FILTER_SYNTAX_RULES_CONTAINER",get:function(){return this._FILTER_SYNTAX_RULES||(this._FILTER_SYNTAX_RULES=_t.unwrapHtmlElt("filter-syntax-rules-container"))}},{key:"ALL_CONTENT_CONTAINER",get:function(){return this._ALL_CONTENT_CONTAINER||(this._ALL_CONTENT_CONTAINER=_t.unwrapHtmlElt("all-content-container"))}}])}();const bt={HOME_PAGE:new Tt,NAV_BAR:new vt,SEARCH_PAGE:new At,FILTER_SYNTAX_PAGE:new wt,get BODY_FOOTER_CONTAINER(){return this._BODY_FOOTER_CONTAINER||(this._BODY_FOOTER_CONTAINER=_t.unwrapHtmlElt("body-footer-container"))}};function Ot(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Rt(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Rt(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Rt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Rt(f,"constructor",u),Rt(u,"constructor",c),c.displayName="GeneratorFunction",Rt(u,o,"GeneratorFunction"),Rt(f),Rt(f,o,"Generator"),Rt(f,r,function(){return this}),Rt(f,"toString",function(){return"[object Generator]"}),(Ot=function(){return{w:a,m:p}})()}function Rt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Rt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Rt(t,e,n,r)}function Pt(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Lt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Pt(a,r,o,i,s,"next",t)}function s(t){Pt(a,r,o,i,s,"throw",t)}i(void 0)})}}var Ct,It,Nt,Dt,kt,Mt;const Ft={test:function(t){t.rank_plot},fetchFromPython:(Mt=Lt(Ot().m(function t(e){var n,r;return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=3;break}return t.n=2,fetch(e);case 2:n=t.v;case 3:return t.n=4,n.json();case 4:return r=t.v,t.a(2,r||null)}},t)})),function(t){return Mt.apply(this,arguments)}),fetchHeroData:(kt=Lt(Ot().m(function t(){return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},t,this)})),function(){return kt.apply(this,arguments)}),rsFetchBattleData:(Dt=Lt(Ot().m(function t(e){return Ot().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})});case 2:return t.a(2,t.v)}},t)})),function(t){return Dt.apply(this,arguments)}),fetchSeasonDetails:(Nt=Lt(Ot().m(function t(){var e,n,r;return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.seasonDetails),t.a(2,{seasonDetails:r,error:!1});case 3:return t.a(2,{seasonDetails:null,error:n.error});case 4:return t.a(2)}},t)})),function(){return Nt.apply(this,arguments)}),fetchArtifactJson:(It=Lt(Ot().m(function t(){var e,n,r;return Ot().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_artifact_json");case 1:return e=t.v,t.n=2,e.json();case 2:if(!(n=t.v).success){t.n=3;break}return r=JSON.parse(n.artifactJson),t.a(2,r);case 3:return t.a(2,null);case 4:return t.a(2)}},t)})),function(){return It.apply(this,arguments)}),fetchUser:(Ct=Lt(Ot().m(function t(e){var n,r,o;return Ot().w(function(t){for(;;)switch(t.n){case 0:if(e.name&&e.world_code||e.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:e})});case 2:return n=t.v,t.n=3,n.json();case 3:if(r=t.v,n.ok){t.n=4;break}throw new Error("Flask server error: ".concat(r.error));case 4:if(r.foundUser){t.n=6;break}if(e.world_code){t.n=5;break}return t.a(2,{user:null,ok:!0});case 5:return t.a(2,{user:null,ok:!0});case 6:return o=r.user,"Found user: ".concat(JSON.stringify(o)),t.a(2,{user:o,ok:!0})}},t)})),function(t){return Ct.apply(this,arguments)})};async function xt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error: status: ${e.status}`);const n=await e.json();return Object.keys(n),n}catch(t){return console.error("Error fetching global user data:",t),null}}const Ut={fetchHeroJSON:async function(t=null){let e=await xt("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");return e?(t&&e[t]?e=e[t]:t&&!e[t]&&(console.error("Could not find hero data for language:",t),e=null),e):null},fetchUserJSON:async function(t){if(t=t.replace("world_",""),![...R].some(e=>e.replace("world_","")===t))return console.error(`Could not find world code: ${t}`),null;const e=`https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_${t}.json`,n=await xt(e);return n&&"object"==typeof n&&"users"in n&&Array.isArray(n.users)&&n.users.length,n},fetchArtifactJSON:async function(t=null){let e=await xt("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_artifact.json"),n=null;if(e&&t&&"object"==typeof e&&t in e){let n=e;if(Array.isArray(n[t]))return n[t]}return n},fetchInfo:async function(t,e,n="en"){const r=new URLSearchParams({nick_no:t,world_code:e,lang:n});try{const t=await fetch("https://epic7.onstove.com/gg/gameApi/getUserInfo",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!t.ok)return console.error("Error fetching battle list:",t.status,t.statusText),null;return await t.json()}catch(t){return console.error("Request failed:",t),null}}},jt="~Fodder",Bt="~Empty";const Gt={getHeroDicts:async function(t=O.EN){const e=await ht.get(ht.Keys.HERO_MANAGER);return e||this.fetchAndCacheHeroManager(t)},createHeroManager:function(t){for(let[e,n]of t.entries()){const t=ct[e];n.prime=t}let e={heroes:[],Empty:{attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"N/A",prime:1},Fodder:{attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"N/A",prime:1},name_lookup:{},code_lookup:{},prime_lookup:{},prime_pair_lookup:{}};return e.heroes=t,e=function(t){const e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:Bt,prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:jt,prime:ct[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(e),e=function(t){t.name_lookup=t.heroes.reduce((t,e)=>(t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t),{}),t.prime_lookup=t.heroes.reduce((t,e)=>(t[e.prime]=e,t),{}),t.code_lookup=t.heroes.reduce((t,e)=>(t[e.code]=e,t),{});let e=t.heroes.reduce((t,e)=>(t[e.prime]=e.name,t),{});const n=Object.keys(t.prime_lookup).length-1;for(let r=0;r<n-1;r++){const o=ct[r];for(let a=r+1;a<n;a++){const n=ct[a],r=o*n,i=t.prime_lookup[o].name,s=t.prime_lookup[n].name;e[r]=[i,s].sort().join(", ")}}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.name].join(", "),t.prime_pair_lookup=e,t}(e),e},fetchHeroManager:async function(t=O.EN){const e=(await Ut.fetchHeroJSON()??await Ft.fetchHeroData())[t];return this.createHeroManager(e)},fetchAndCacheHeroManager:async function(t=O.EN){const e=await this.fetchHeroManager(t);return await ht.cache(ht.Keys.HERO_MANAGER,e),e},deleteHeroManager:async function(){await ht.delete(ht.Keys.HERO_MANAGER)},getHeroByName:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;const n=t.toLowerCase().replace(/\s+/g,"");return e.name_lookup[n]??null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?e.code_lookup[t]??null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]},EMPTY_NAME:Bt,FODDER_NAME:jt};const Ht={async getArtifactCodeToNameMap(){let t=await ht.get(ht.Keys.ARTIFACTS);return t||(t=await this.fetchAndCacheArtifacts()),t},getArtifactLowercaseNameMap:async function(){let t=await ht.get(ht.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP);if(null!==t)return t;const e=await this.getArtifactCodeToNameMap();return t=Object.fromEntries(Object.values(e).filter(t=>null!==t).map(t=>[t.toLowerCase(),t])),await ht.cache(ht.Keys.ARTIFACTS_LOWERCASE_NAMES_MAP,t),t},getArtifactObjectList:async function(){let t=await ht.get(ht.Keys.ARTIFACT_OBJECT_LIST);if(null!==t)return t;const e=await this.getArtifactCodeToNameMap();return t=Object.entries(e).map(([t,e])=>({id:t,name:e})),await ht.cache(ht.Keys.ARTIFACT_OBJECT_LIST,t),t},fetchAndCacheArtifacts:async function(){const t=await async function(){let t=await Ut.fetchArtifactJSON("en");return null===t&&(t=await Ft.fetchArtifactJson()),null===t?(console.error("Could not get artifact Json map from E7 server or flask server"),null):Object.fromEntries(t.filter(t=>null!==t.name).map(t=>[t.code,t.name]))}();return null===t?{}:(await ht.cache(ht.Keys.ARTIFACTS,t),t)},clearArtifactData:async function(){await ht.delete(ht.Keys.ARTIFACTS)},convertCodeToName:function(t,e){return e[t]||t}},$t={date:t=>t[B.DATE_TIME]?new Date(`${t[B.DATE_TIME].slice(0,10)}T00:00:00`):"N/A",season:t=>t[B.SEASON_CODE],"is-first-pick":t=>t[B.FIRST_PICK]?1:0,"is-win":t=>t[B.WIN]?1:0,"victory-points":t=>t[B.P1_POINTS],"p1.picks":t=>t[B.P1_PICKS],"p2.picks":t=>t[B.P2_PICKS],"p1.prebans":t=>t[B.P1_PREBANS],"p2.prebans":t=>t[B.P2_PREBANS],"p1.postban":t=>t[B.P1_POSTBAN],"p2.postban":t=>t[B.P2_POSTBAN],prebans:t=>[...t[B.P1_PREBANS],...t[B.P2_PREBANS]],"p1.pick1":t=>t[B.P1_PICKS][0],"p1.pick2":t=>t[B.P1_PICKS][1],"p1.pick3":t=>t[B.P1_PICKS][2],"p1.pick4":t=>t[B.P1_PICKS][3],"p1.pick5":t=>t[B.P1_PICKS][4],"p2.pick1":t=>t[B.P2_PICKS][0],"p2.pick2":t=>t[B.P2_PICKS][1],"p2.pick3":t=>t[B.P2_PICKS][2],"p2.pick4":t=>t[B.P2_PICKS][3],"p2.pick5":t=>t[B.P2_PICKS][4],"p1.league":t=>t[B.P1_LEAGUE],"p2.league":t=>t[B.P2_LEAGUE],"p1.server":t=>t[B.P1_SERVER],"p2.server":t=>t[B.P2_SERVER],"p1.id":t=>Number(t[B.P1_ID]),"p2.id":t=>Number(t[B.P2_ID]),"p1.mvp":t=>t[B.P1_MVP],"p2.mvp":t=>t[B.P2_MVP],"is-first-turn":t=>t[B.FIRST_TURN],"first-turn-hero":t=>t[B.FIRST_TURN_HERO],turns:t=>t[B.TURNS],seconds:t=>t[B.SECONDS],"point-gain":t=>t[B.POINT_GAIN]};function Kt(t,e="i"){return new RegExp(`^(?:${t.source})(?=[,)\\s;]|$)`,e)}function Vt(t,e="i"){return new RegExp(`^(?:${t.source})$`,e)}function Wt(t,e="i"){if(t.length<1)throw new Error("orRegex must have at least one pattern");let n=`(?:${t[0].source})`;for(let e=1;e<t.length;e++)n+=`|(?:${t[e].source})`;return new RegExp(n,e)}const Yt=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),qt=Object.keys($t),zt=new RegExp(`^(?:${qt.map(Yt).join("|")})`,"i"),Qt=new RegExp(`(?:${["and","or","xor","not"].map(Yt).join("|")})(?=\\()`,"i"),Jt=new RegExp(`(?:${["last-n"].map(Yt).join("|")})(?=\\()`,"i"),Xt=new RegExp(`(?:${["p1.equipment","p2.equipment","p1.artifact","p2.artifact","p1.cr","p2.cr"].map(Yt).join("|")})(?=\\()`,"i"),Zt=Wt([Qt,Jt,Xt]),te=/.*/i,ee=/\d{4}-\d{2}-\d{2}/,ne=/\{\s*\}/,re=/-?\d+/,oe=/season-[1-9]+[0-9]*f?|current-season|last-season/i,ae=/pvp_rta_ss[1-9]+[0-9]*f?/i,ie=new RegExp(`^${ee.source}$`,"i"),se=new RegExp(`(?:${oe.source})`,"i"),ce=te.source,ue=re.source,le=ee.source,fe=zt.source,pe=se.source,de=new RegExp(`(["'])(${ce})\\1`,"i"),he=Vt(de),_e=de.source,Ee=new RegExp(`(?:${_e}|${ce}|${le})`,"i"),Se=new RegExp(`(?:${fe}|${pe})`,"i"),me=Ee.source,ye=new RegExp(`\\{\\s*(?:${me}\\s*)(?:,\\s*${me}\\s*)*,?\\s*\\}|${ne.source}`,"i"),ge=new RegExp(`${ue}\\.\\.\\.=?${ue}|${le}\\.\\.\\.=?${le}`),Te=new RegExp(`^${ge.source}$`);let ve={STRING_RE:te,DATE_RE:ee,INT_RE:re,EMPTY_SET_RE:ne,SET_ELEMENT_RE:Ee,SET_RE:ye,SET_LITERAL_RE:Vt(ye),STRING_LITERAL_RE:he,DATE_LITERAL_RE:ie,INT_LITERAL_RE:/^-?\d+$/,BOOL_LITERAL_RE:/^(true|false)$/i,RANGE_RE:ge,RANGE_LITERAL_RE:Te,SEASON_RE:oe,SEASON_LITERAL_RE:Vt(oe),SEASON_CODE_RE:ae,SEASON_CODE_LITERAL_RE:Vt(ae),DATA_WORD_RE:se,DATA_WORD_LITERAL_RE:Vt(se),FIELD_WORD_RE:zt,FIELD_WORD_LITERAL_RE:Vt(zt),DATAFIELD_RE:Se,GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:Vt(he),CLAUSE_FUNCTIONS_RE:Qt,DIRECT_FUNCTIONS_RE:Xt,GLOBAL_FUNCTIONS_RE:Jt,FUNCTIONS_RE:Zt,FUNCTION_CALL_RE:/\(.*\)/i,padRegex:Kt,anchorExp:Vt,tokenMatch:function(t){return t.match(Zt)?"keyword":t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?"operator":t.match(new RegExp(`[a-z0-9."'}=)-]${Se.source}(?=[,)\\s;]|$)`,"i"))?null:t.match(Kt(zt))?"field":t.match(Kt(se))?"declared-data":t.match(Kt(de))?"string":t.match(Kt(ye))?"set":t.match(Kt(ge))?"range":t.match(/[^(,\s;.=0-9\-]+\d+/i)?null:t.match(Kt(re))||t.match(Kt(ee))||t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?"declared-data":t.match(/[\(\)\{\}\;\,]/)?"bracket":(t.next(),null)},orRegex:Wt,escapeRegex:Yt};function Ae(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return we(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(we(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,we(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,we(f,"constructor",u),we(u,"constructor",c),c.displayName="GeneratorFunction",we(u,o,"GeneratorFunction"),we(f),we(f,o,"Generator"),we(f,r,function(){return this}),we(f,"toString",function(){return"[object Generator]"}),(Ae=function(){return{w:a,m:p}})()}function we(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}we=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){we(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},we(t,e,n,r)}function be(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Oe(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){be(a,r,o,i,s,"next",t)}function s(t){be(a,r,o,i,s,"throw",t)}i(void 0)})}}var Re,Pe,Le,Ce={fetchAndCacheSeasonDetails:(Le=Oe(Ae().m(function t(){var e,n,r,o,a,i,s;return Ae().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ft.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))}),t["Season Number"]=String(t["Season Number"])}),n.sort(function(t,e){return parseInt(t["Season Number"])-parseInt(e["Season Number"])}),r=[n[0]],o=n[0],n.slice(1).forEach(function(t){var e=new Date(+o.range[1]+x),n=new Date(+t.range[0]-x),a=o["Season Number"]+"f",i={"Season Number":a,Code:"pvp_rta_ss"+a,Season:"Pre ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};r.push(i),r.push(t),o=t}),o.range[1]<new Date&&(a=new Date(+r.at(-1).range[1]+x),i=o["Season Number"]+"f",s={"Season Number":i,Code:"pvp_rta_ss"+i,Season:"Active Pre-Season",Start:a.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[a,new Date]},r.push(s)),r.reverse(),t.n=3,ht.cache(ht.Keys.SEASON_DETAILS,r);case 3:return t.a(2,r)}},t)})),function(){return Le.apply(this,arguments)}),getSeasonDetails:(Pe=Oe(Ae().m(function t(){var e,n;return Ae().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.get(ht.Keys.SEASON_DETAILS);case 1:if(null==(e=t.v)){t.n=2;break}n=e,t.n=4;break;case 2:return t.n=3,Ce.fetchAndCacheSeasonDetails();case 3:n=t.v;case 4:return t.a(2,n)}},t)})),function(){return Pe.apply(this,arguments)}),clearSeasonDetails:(Re=Oe(Ae().m(function t(){return Ae().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.delete(ht.Keys.SEASON_DETAILS);case 1:case 2:return t.a(2)}},t)})),function(){return Re.apply(this,arguments)}),getSeasonNumFromCode:function(t){return t.split("_")[-1]}};const Ie=Ce;class Ne extends Error{constructor(t){super(t),this.name="Filter Syntax Exception"}}class De extends Error{constructor(t){super(t),this.name="Filter Type Exception"}}class ke extends Error{constructor(t){super(t),this.name="Filter Validation Error"}}const Me={"(":")","{":"}",'"':'"',"'":"'"},Fe={"'":'"','"':"'"},xe=Object.fromEntries(Object.entries(Me).filter(([t,e])=>t!==e).map(([t,e])=>[e,t]));function Ue(t){const e={};for(const n of t)e[n]=(e[n]||0)+1;return e}const je={SyntaxException:Ne,TypeException:De,ValidationError:ke,getCharCounts:Ue,tokenizeWithNestedEnclosures:function(t,e=" ",n=0,r=!0){const o=[];let a="",i=[];for(let s=0;s<t.length;s++){const c=t[s];if(e.includes(c)&&i.length===n)a&&(o.push(r?a.trim():a),a="");else if(xe[c]){const e=xe[c];if(i.length>n&&(a+=c),i[i.length-1]!==e){const e=Ue(t);throw(e["'"]||0)%2!=0||(e['"']||0)%2!=0?new Ne(`Error tokenizing: Unbalanced closing character at position ${s}; got string: '${t}' ; if a str type has quote characters in it, wrap it in the opposite quote character.`):new Ne(`Error tokenizing: Unbalanced closing character at position ${s}; got string: '${t}'`)}i.pop()}else i.length>=n&&(a+=c),!Me[c]||Fe[c]&&i[i.length-1]===Fe[c]||(i[i.length-1]===Me[c]&&c===Me[c]?i.pop():i.push(c))}if(i.length>0)throw new Error(`Unbalanced enclosures in input string; unresolved characters from enclosure stack: [ ${i.join(", ")} ]`);return a&&o.push(r?a.trim():a),o},parseDate:function(t){if(!ve.DATE_LITERAL_RE.test(t))throw new Ne(`Invalid date; must be in the format: YYYY-MM-DD ( regex: ${ve.DATE_LITERAL_RE.source} ); got: '${t}'`);const e=t.split(" ")[0],n=new Date(`${e}T00:00:00`);if(isNaN(n.getTime()))throw new Ne(`Invalid date; could not be parsed as a valid date; got: '${t}'`);const r=n.toISOString().split("T")[0],[o,a,i]=r.split("-").map(Number);if(n.getFullYear()!==o||n.getMonth()+1!==a||n.getDate()!==i)throw new Ne(`Invalid date; parsed date: ${n.toISOString()} does not match passed in string: ${e}`);return n.toISOString(),n.constructor.name,n},tryConvert:function(t,e,n,r=null){null===r&&(r=`Could not convert ${n} to ${e}`);try{return t(n)}catch(t){throw new De(`${r}: ${t.message}`)}},trimSurroundingQuotes:function(t){return t.replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}},Be=new Set("'\"(),_-.=; ><!1234567890{}~abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),Ge=Object.fromEntries(Object.values(F).map(t=>[t.toLowerCase(),t]));class He{}const $e={Hero:new class extends He{parse(t,e){return Gt.getHeroByName(t,e.HeroDicts)?.name??null}parserType="Hero"},League:new class extends He{parse(t){return j[t]}parserType="League"},Server:new class extends He{parse(t){return M[t]}parserType="Server"},Equipment:new class extends He{parse(t){return Ge[t.toLowerCase()]}parserType="Equipment"},Artifact:new class extends He{parse(t,e){return e.ARTIFACT_LOWERCASE_STRINGS_MAP[t.toLowerCase()]}parserType="Artifact"},Season:new class extends He{parse(t,e){let n;if("current-season"===t)return e.SEASON_DETAILS[0].Code;if("last-season"===t)return e.SEASON_DETAILS[1].Code;if(ve.SEASON_LITERAL_RE.test(t))n=t.split("-").at(-1);else{if(!ve.SEASON_CODE_LITERAL_RE.test(t))return null;n=t.split("_ss").at(-1)}e.SEASON_DETAILS.map(t=>t.Code.split("_").at(-1));return e.SEASON_DETAILS.find(t=>t.Code.split("_ss").at(-1)===n)?.Code}parserType="Season Code"}},Ke=new Set(["p1.picks","p2.picks","p1.prebans","p2.prebans","prebans"]),Ve={FIELD:"FIELD",RANGE:"RANGE",SET:"SET",INT:"INT",DATE:"DATE",BOOL:"BOOL",STRING:"STRING"};class We{}class Ye extends We{type=Ve.FIELD;rawString;extractFn;constructor(t){if(super(),this.rawString=t,!$t[t])throw new Error("Invalid field");this.extractFn=$t[t]}getData(){throw new Error("Not implemented for Field")}extractData(t){return this.extractFn(t)}asString(){return`${this.rawString}`}}class qe extends We{rawString;constructor(t){super(),this.rawString=t}getData(){return this.data}extractData(t){throw new Error("Not implemented for Literals")}asString(){return`${this.fmtString}`}}class ze extends qe{type=Ve.STRING;fmtString;data;constructor(t,e,n=Object.values($e)){super(t),t=je.trimSurroundingQuotes(t),this.data=this.processString(t,e,n),this.fmtString=this.data}processString(t,e,n){const r=function(t,e,n){for(const r of n){const n=r.parse(t,e);if(r.parserType,n)return n}return null}(t,e,n);if(!r){const e=n.map(t=>t.parserType).join(", ");throw new je.ValidationError(`Invalid string literal: '${t}' ; clould not be parsed as a valid instance of any of the following: [${e}]`)}return r}}class Qe extends qe{type=Ve.INT;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){const e=parseInt(t);if(isNaN(e))throw new je.ValidationError(`Invalid integer literal: '${t}'`);return e}}class Je extends qe{type=Ve.BOOL;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){if("true"===t)return!0;if("false"===t)return!1;throw new je.ValidationError(`Invalid boolean literal: '${t}'`)}}class Xe extends qe{type=Ve.DATE;fmtString;data;constructor(t){super(t),this.data=this.processString(t),this.fmtString=t}processString(t){return je.parseDate(t)}}class Ze{start;end;endInclusive;constructor(t,e,n){this.start=t,this.end=e,this.endInclusive=n}has(t){return typeof t==typeof this.start&&(!(t<this.start)&&(!(t>this.end)&&(t!==this.end||this.endInclusive)))}includes(t){return this.has(t)}}const tn=[t=>ve.DATE_LITERAL_RE.test(t)?new Xe(t):null,t=>ve.INT_LITERAL_RE.test(t)?new Qe(t):null];function en(t,e,n,r){let o=r(t),a=r(e);return null===o||null===a?null:new Ze(o.data,a.data,n)}class nn extends qe{type=Ve.RANGE;fmtString;data;constructor(t,e){super(t),this.fmtString=t,this.data=this.processString(t,e)}processString(t,e){const n=t.split("..."),r=n[0];let o="="===n[1].charAt(0);const a=n[1].slice(o?1:0);for(const t of tn){const e=en(r,a,o,t);if(null!==e)return e}throw new je.ValidationError(`Invalid range literal: '${t}' ; ranges must be homogenous and of the format x...y or x...=y for the types: [Date, Integer]`)}}const rn=[...tn],on=(t,e,n)=>ve.STRING_RE.test(t)?new ze(t,e,n):null;class an extends qe{type=Ve.SET;fmtString;data;constructor(t,e,n=Object.values($e)){super(t),this.fmtString=t,this.data=this.processString(t,e,n)}processString(t,e,n){const r=je.tokenizeWithNestedEnclosures(t,",",1,!0),o=new Set;for(const a of r){for(const t of rn){const e=t(a);e&&o.add(e.data)}const r=on(a,e,n);if(!r)throw new je.ValidationError(`Invalid set element: '${t}' ; could not be parsed as a valid instance of any of the following types: [Date, Integer, String]`);o.add(r.data)}return this.fmtString=`{${Array.from(o).join(", ")}}`,o}}const sn={StringLiteral:ze,IntLiteral:Qe,BoolLiteral:Je,DateLiteral:Xe,RangeLiteral:nn,SetLiteral:an,Field:Ye,BaseEltTypes:Ve,FIELD_EXTRACT_FN_MAP:$t,parseBaseElement:function(t,e){if(ve.STRING_LITERAL_RE.test(t))return new ze(t,e);if(ve.INT_LITERAL_RE.test(t))return new Qe(t);if(ve.BOOL_LITERAL_RE.test(t))return new Je(t);if(ve.DATE_LITERAL_RE.test(t))return new Xe(t);if(ve.RANGE_LITERAL_RE.test(t))return new nn(t,e);if(ve.SET_LITERAL_RE.test(t))return new an(t,e);if(ve.SEASON_LITERAL_RE.test(t))return new ze(t,e,[$e.Season]);if(ve.FIELD_WORD_LITERAL_RE.test(t))return new Ye(t);throw new je.ValidationError(`Invalid base element: '${t}' ; could not be parsed as a Field or Literal.`)},COLLECTION_FIELDS_SET:Ke},cn={">":(t,e)=>t>e,"<":(t,e)=>t<e,"=":(t,e)=>t===e,">=":(t,e)=>t>=e,"<=":(t,e)=>t<=e,"!=":(t,e)=>t!==e},un="in",ln="compare";class fn{}class pn extends fn{type=un;opStr;negate=!1;constructor(t=!1){super(),this.negate=t,this.opStr=this.negate?"!in":"in"}call(t,e){const n=Array.isArray(e)?e.includes(t):e.has(t);return this.negate?!n:n}}class dn extends fn{type=ln;opStr;compareFn;constructor(t){if(super(),this.opStr=t,this.compareFn=cn[t],!this.compareFn)throw new Error(`Unknown operator: ${t}`)}call(t,e){return this.compareFn(t,e)}}function hn(t){switch(t){case"in":return new pn;case"!in":return new pn(!0);default:return new dn(t)}}const _n="and",En="or",Sn="xor",mn="not",yn="last-n",gn="equipment",Tn="artifact",vn="cr",An="base-filter",wn="CLAUSE_FN",bn="HERO_LIST_FN",On="GLOBAL_FN",Rn="BASE_FILTER";class Pn{constructor(...t){}}class Ln extends Pn{}class Cn extends Ln{fnType=wn;fns=[];constructor(...t){super(),this.fns=t}asString(t=""){let e="";const n=t+"   ";return this.fns.forEach(t=>e+=`${t.asString(n)},\n`),`${t}${this.fnName}(\n${e.trimEnd()}\n${t})`}}class In extends Cn{fnName=_n;fnType=wn;call(t){return this.fns.every(e=>e.call(t))}}class Nn extends Cn{fnName=En;fnType=wn;call(t){return this.fns.some(e=>e.call(t))}}class Dn extends Cn{fnName=Sn;fnType=wn;call(t){let e=!1;for(let n of this.fns)e=!e&&n.call(t)||e&&!n.call(t);return e}}class kn extends Cn{fnName=mn;fnType=wn;constructor(...t){if(super(...t),1!==this.fns.length)throw new je.SyntaxException(`Invalid NOT function call ; accepts exactly 1 argument ; got: [${this.fns}]`)}call(t){return!this.fns[0].call(t)}}class Mn extends Ln{fnType=bn;getHeroes(t){return this.isPlayer1?t[B.P1_PICKS]:t[B.P2_PICKS]}asString(t=""){return`${t}${this.fnName}(${this.argFmtString})`}}class Fn extends Mn{fnName=vn;fnType=bn;heroName;crThreshold=0;operator;targetField;isPlayer1=!1;argFmtString;constructor(t,e){super();const n=t.includes(",")?",":" ",r=je.tokenizeWithNestedEnclosures(t,n,1,!0);if(3!==r.length)throw new je.SyntaxException(`Invalid CR function call ; accepts exactly 3 arguments ; got: [${r}] from str: ${t}`);const o=parseInt(r[2]);if(isNaN(o))throw new je.TypeException(`Invalid CR function call ; third argument must be a valid integer literal ; got: '${r[2]}' from str: ${t}`);const a=hn(r[1]);if(!(a instanceof dn))throw new je.TypeException(`Invalid CR function call ; second argument must be a valid comparison operator ; got: '${r[1]}' from str: ${t}`);this.heroName=new sn.StringLiteral(r[0],e,[$e.Hero]).data,this.crThreshold=o,this.operator=a,this.isPlayer1=t.includes("p1."),this.targetField=t=>t[B.CR_BAR],this.argFmtString=`${this.heroName} ${this.operator.opStr} ${this.crThreshold}`}call(t){const e=this.getHeroes(t),n=this.targetField(t).find(t=>t[0]===this.heroName);return!!n&&(!!e.includes(this.heroName)&&this.operator.call(n,this.crThreshold))}}function xn(t,e){for(const n in t)if(t[n]>(e[n]||0))return!1;return!0}class Un extends Mn{fnName=gn;fnType=bn;heroName;targetEquipCounts;isPlayer1=!1;argFmtString;targetField;constructor(t,e){super();const n=je.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==n.length)throw new je.SyntaxException(`Invalid equipment function call ; accepts exactly 2 arguments ; got: [${n}] from str: ${t}`);const r=n[1].includes("{")?n[1]:`{${n[1]}}`;let o=je.tokenizeWithNestedEnclosures(r,",",1,!0);o=o.map(t=>new sn.StringLiteral(t,e,[$e.Equipment]).data),this.targetEquipCounts=b(o),this.heroName=new sn.StringLiteral(n[0],e,[$e.Hero]).data,this.isPlayer1=t.includes("p1."),this.argFmtString=`${this.heroName}, {${o.join(",")}}`,this.targetField=t=>this.isPlayer1?t[B.P1_EQUIPMENT]:t[B.P2_EQUIPMENT]}call(t){const e=this.getHeroes(t),n=this.targetField(t);for(let t=0;t<e.length;t++)if(e[t]===this.heroName){const e=b(n[t]);return xn(this.targetEquipCounts,e)}return!1}}class jn extends Mn{fnName=Tn;fnType=bn;heroName;targetArtifacts;isPlayer1=!1;argFmtString;targetField;constructor(t,e){super();const n=je.tokenizeWithNestedEnclosures(t,",",1,!0);if(2!==n.length)throw new je.SyntaxException(`Invalid artifact function call ; accepts exactly 2 arguments ; got: [${n}] from str: ${t}`);const r=n[1].includes("{")?n[1]:`{${n[1]}}`;let o=je.tokenizeWithNestedEnclosures(r,",",1,!0);o=o.map(t=>new sn.StringLiteral(t,e,[$e.Artifact]).data),this.targetArtifacts=o,this.heroName=new sn.StringLiteral(n[0],e,[$e.Hero]).data,this.isPlayer1=t.includes("p1."),this.argFmtString=`${this.heroName}, {${o.join(", ")}}`,this.targetField=t=>this.isPlayer1?t[B.P1_ARTIFACTS]:t[B.P2_ARTIFACTS]}call(t){const e=this.getHeroes(t),n=this.targetField(t);for(let t=0;t<e.length;t++)if(e[t]===this.heroName)return this.targetArtifacts.some(e=>n[t].includes(e));return!1}}class Bn extends Pn{fnType=On;asString(t=""){return`${t}${this.fnName}(${this.argFmtString})`}}class Gn extends Bn{fnName=yn;fnType=On;argFmtString;n;constructor(t){super();const e=je.tokenizeWithNestedEnclosures(t,",",1,!0);if(1!==e.length)throw new je.SyntaxException(`Invalid last-n function call ; accepts exactly 1 argument ; got: [${e}] from str: ${t}`);this.n=new sn.IntLiteral(e[0]).data,this.argFmtString=`${this.n}`}call(t){return t.slice(-this.n)}}function Hn(t,e,n){const r=`${t.asString()} ${e.opStr} ${n.asString()}`;if(t instanceof sn.Field&&n instanceof sn.Field)throw new je.ValidationError(`Invalid base filter; fields cannot be compared with other fields ; got string: [${r}]`);if(t.type!==sn.BaseEltTypes.FIELD&&n.type!==sn.BaseEltTypes.FIELD)throw new je.ValidationError(`Invalid base filter; every base filter must have at least one field ; got string: [${r}]`);if(e instanceof pn&&(o=n,!(sn.COLLECTION_FIELDS_SET.has(o.rawString)||n instanceof sn.RangeLiteral||n instanceof sn.SetLiteral)))throw new je.ValidationError(`Invalid base filter; 'in' operators can only be used with Ranges, Sets, or Fields that correspond to sets like 'p1.picks' ; got string: [${r}]`);var o;return!0}class $n extends Ln{fnType=Rn;fnName=An;fmtString;fn;constructor(t,e){super();const n=je.tokenizeWithNestedEnclosures(t," ",0,!0);if(3!==n.length)throw new je.SyntaxException(`Invalid base filter; filters must have 3 tokens and be of the form: ['X', operator, 'Y']; got: [${n}] tokens from str: ${t}`);let[r,o,a]=n;const i=hn(o),s=sn.parseBaseElement(r,e),c=sn.parseBaseElement(a,e);if(s.asString(),c.asString(),Hn(s,i,c),s instanceof sn.Field&&!(c instanceof sn.Field))this.fn=t=>i.call(s.extractData(t),c.getData());else{if(s instanceof sn.Field||!(c instanceof sn.Field))throw new je.ValidationError("Invalid base filter; filters must contain a Field and a Literal; got: "+t);this.fn=t=>i.call(s.getData(),c.extractData(t))}this.fmtString=`${s.asString()} ${o} ${c.asString()}`}call(t){return this.fn(t)}asString(t=""){return`${t}${this.fmtString}`}}const Kn={[An]:$n,[_n]:In,[En]:Nn,[mn]:kn,[Sn]:Dn,[yn]:Gn,[gn]:Un,[Tn]:jn,[vn]:Fn},Vn={AND:In,OR:Nn,NOT:kn,XOR:Dn,LAST_N:Gn,EQUIPMENT:Un,ARTIFACT:jn,CR:Fn,BASE_FILTER:$n};function Wn(t){return function(t,e,n){for(let r of t)if(!e.has(r))throw new je.SyntaxException(`Invalid character within <${n}> ; ' ${r} ' is not allowed; got string: '${t}'`)}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),Be,"Main Filter String"),t=t.toLowerCase()}class Yn{_filters;rawString;preParsedString;references;constructor(){this._filters=[],this.rawString="",this.preParsedString="",this.references={HeroDicts:null,ARTIFACT_LOWERCASE_STRINGS_MAP:{},SEASON_DETAILS:[]}}async addReferences(t=null){if(null===(t=t||await Gt.getHeroDicts()))throw new Error("Hero Manager could not be retrieved to parse filters.");const e=await Ie.getSeasonDetails();if(null===e)throw new Error("Season Details could not be retrieved to parse filters.");const n=await Ht.getArtifactLowercaseNameMap();this.references={HeroDicts:t,ARTIFACT_LOWERCASE_STRINGS_MAP:n,SEASON_DETAILS:e}}getFilters(){return function(t){const e=[],n=[];for(const r of t)r instanceof Bn?e.push(r):n.push(r);return[...e,...n]}(this._filters)}asString(){return`[\n${this._filters.map(t=>t.asString("   ")).join(";\n")};\n]`}static async getFiltersFromCache(t=null){const e=await ht.get(ht.Keys.FILTER_STR);if(null===e)return[];return(await this.fromFilterStr(e,t)).getFilters()}static async fromFilterStr(t,e=null){const n=new Yn;return n.rawString=t,await n.addReferences(e),n.preParsedString=Wn(t),n._filters=n.parse(n.preParsedString),n}parseList(t){return t.reduce((t,e)=>(t.push(...this.parse(e)),t),[])}parse(t){if(""===(t=t.trim()))return[];if(t.includes(";")){const e=t.split(";");return this.parseList(e)}const e=t.split("(")[0].replace(/p[1-2]\./i,""),n=je.tokenizeWithNestedEnclosures(t,",",1,!0);switch(e){case _n:case En:case mn:case Sn:const r=function(t,e){for(const n of t)if(n instanceof Bn)throw new je.SyntaxException(`Global filters not allowed in clause functions; got: ${n.asString()} from string: "${e}"`);return t.filter(t=>t instanceof Ln)}(this.parseList(n),t);return[new Kn[e](...r)];case yn:return[new Vn.LAST_N(t)];case gn:case Tn:case vn:return[new Kn[e](t,this.references)];default:if(ve.FUNCTION_CALL_RE.test(t))throw new je.SyntaxException(`Filter String is not a valid function call but a parenthese block was detected; got: ${t}`);return[new Vn.BASE_FILTER(t,this.references)]}}}function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function zn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Qn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zn(r.key),r)}}function Xn(t,e,n){return e&&Jn(t.prototype,e),n&&Jn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zn(t){var e=function(t,e){if("object"!=qn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qn(e)?e:e+""}var tr={RED:"text-danger",GREEN:"text-safe"},er=Xn(function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.docElement=n,this.classList=r});function nr(t){if(!t instanceof er)throw new Error("Only instances of TextPacket can be passed to this function")}var rr={queue:[],autoClearElements:[],TextPacket:er,STYLES:tr,clearStyles:function(t){for(var e=0,n=Object.values(tr);e<n.length;e++){var r=n[e];t.classList.remove(r)}},write:function(t){nr(t),t.docElement.textContent=t.text,this.clearStyles(t.docElement),t.classList.forEach(function(e){t.docElement.classList.add(e)})},push:function(t){nr(t),this.queue.push(t)},pushFromObj:function(t){var e=t.text,n=t.docElement,r=t.classList;this.push(new er(e,n,r))},bindAutoClear:function(t){var e,n=zn(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.autoClearElements.push(r)}}catch(t){n.e(t)}finally{n.f()}},processQueue:function(){var t=this;this.queue.forEach(function(e){t.write(e)}),this.queue=[]},clearMessages:function(){var t,e=zn(this.autoClearElements);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.textContent="",this.clearStyles(n)}}catch(t){e.e(t)}finally{e.f()}}};var or,ar,ir={queueSelectDataMsgGreen:function(t){rr.push(new er(t,bt.HOME_PAGE.SELECT_DATA_MSG,[tr.GREEN]))},queueSelectDataMsgRed:function(t){rr.push(new er(t,bt.HOME_PAGE.SELECT_DATA_MSG,[tr.RED]))},queueFilterMsgGreen:function(t){rr.push(new er(t,bt.HOME_PAGE.FILTER_MSG,[tr.GREEN]))},queueFilterMsgRed:function(t){rr.push(new er(t,bt.HOME_PAGE.FILTER_MSG,[tr.RED]))}};function sr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return cr(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(cr(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,cr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,cr(f,"constructor",u),cr(u,"constructor",c),c.displayName="GeneratorFunction",cr(u,o,"GeneratorFunction"),cr(f),cr(f,o,"Generator"),cr(f,r,function(){return this}),cr(f,"toString",function(){return"[object Generator]"}),(sr=function(){return{w:a,m:p}})()}function cr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}cr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){cr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},cr(t,e,n,r)}function ur(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}const lr={validateFilterSyntax:(or=sr().m(function t(e){var n,r,o;return sr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Gt.getHeroDicts();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.p=2,t.n=3,Yn.fromFilterStr(e,n);case 3:return t.v.asString(),rr.write(new er("Validation Passed",r,[rr.STYLES.GREEN])),t.a(2,!0);case 4:return t.p=4,o=t.v,console.error(o),rr.write(new er("Validation Failed: ".concat(o.message),r,[rr.STYLES.RED])),t.a(2,!1)}},t,null,[[2,4]])}),ar=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=or.apply(t,e);function a(t){ur(o,n,r,a,i,"next",t)}function i(t){ur(o,n,r,a,i,"throw",t)}a(void 0)})},function(t){return ar.apply(this,arguments)}),setScrollPercent:function(t){"Scrolling to ".concat(t,"%");var e=t/100*(document.documentElement.scrollHeight-window.innerHeight),n=document.documentElement,r=n.style.scrollBehavior;n.style.scrollBehavior="auto",window.scrollTo({top:e}),n.style.scrollBehavior=r},getScrollPercent:function(){var t=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight;return 0===e?0:t/e*100},setVisibility:function(t,e){e?t.classList.remove("d-none"):t.classList.add("d-none")}};var fr={SELECT_DATA:"select-data",SHOW_STATS:"show-stats",LOAD_DATA:"load-data"};const pr={[P]:ht.Keys.GLOBAL_USERS,[N]:ht.Keys.EU_USERS,[I]:ht.Keys.ASIA_USERS,[C]:ht.Keys.JPN_USERS,[L]:ht.Keys.KOR_USERS};function dr(t,e){return{id:t.nick_no,name:t.nick_nm,code:t.code,rank:t.rank,world_code:e}}async function hr(t){const e=await ht.get(pr[t]);if(null!==e)return e;const n=await async function(t){const e=await Ut.fetchUserJSON(t);if(!e||"object"==typeof e&&!("users"in e))return null;const n=e;return Object.fromEntries(n.users.map(e=>[e.nick_no,dr(e,t)]))}(t);return await ht.cache(pr[t],n),n}const _r=t=>D[t];async function Er(t,e){const n=await hr(e),r=n?Object.values(n):[];if(0===r.length)return _r(e),{user:null,ok:!1};let o,a;if(t.id)o=t.id,a=t=>t.id;else{if(!t.name)throw new Error("Must pass a user object with either user.name or user.id to find user");o=t.name.toLowerCase(),a=t=>t.name.toLowerCase()}return function(t,e,n){const r=e.find(e=>n(e)===t);return r?(JSON.stringify(r),{user:r,ok:!0}):{user:null,ok:!0}}(o,r,a)}const Sr={getUserMap:hr,findUser:async function(t){if(JSON.stringify(t),!t.name&&!t.id||!t.world_code)throw new Error("Must pass a user object with either user.name or user.id, and user.world_code to find user");let e=t.id?`Numeric ID: ${t.id}`:`Name: '${t.name}'`,n=null;if(n=await Er(t,t.world_code),n.ok||(n=await Ft.fetchUser(t)),n.ok){const r=n.user;if(null===r)throw new Error(`Could not find user with ${e} in Server: ${_r(t.world_code)}`);return r}throw new Error(`Function did not properly terminate: ${JSON.stringify(n)}`)},setUser:async function(t){await ht.cache(ht.Keys.USER,t)},getUser:async function(){return await ht.get(ht.Keys.USER)},clearUserData:async function(){await ht.clearUserData()},clearUserDataLists:async function(){await ht.clearUserLists()}};function mr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return yr(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(yr(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,yr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,yr(f,"constructor",u),yr(u,"constructor",c),c.displayName="GeneratorFunction",yr(u,o,"GeneratorFunction"),yr(f),yr(f,o,"Generator"),yr(f,r,function(){return this}),yr(f,"toString",function(){return"[object Generator]"}),(mr=function(){return{w:a,m:p}})()}function yr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}yr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){yr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},yr(t,e,n,r)}function gr(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Tr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){gr(a,r,o,i,s,"next",t)}function s(t){gr(a,r,o,i,s,"throw",t)}i(void 0)})}}var vr=new Set(Object.values(fr));function Ar(t){return!!vr.has(t)||(console.error("Invalid page state: ".concat(t)),!1)}function wr(t){switch(t){case fr.SELECT_DATA:return bt.HOME_PAGE.SELECT_DATA_BODY;case fr.SHOW_STATS:return bt.HOME_PAGE.SHOW_STATS_BODY;case fr.LOAD_DATA:return bt.HOME_PAGE.LOAD_DATA_BODY;default:console.error("Invalid page state: ".concat(t))}}var br,Or,Rr,Pr={getState:(Rr=Tr(mr().m(function t(){var e,n,r,o;return mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.get(ht.Keys.HOME_PAGE_STATE);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=fr.SELECT_DATA;case 4:return t.a(2,o)}},t)})),function(){return Rr.apply(this,arguments)}),setState:(Or=Tr(mr().m(function t(e){return mr().w(function(t){for(;;)switch(t.n){case 0:if(Ar(e)){t.n=1;break}return t.a(2);case 1:return t.n=2,ht.cache(ht.Keys.HOME_PAGE_STATE,e);case 2:return t.a(2)}},t)})),function(t){return Or.apply(this,arguments)}),resetState:(br=Tr(mr().m(function t(){return mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.delete(ht.Keys.HOME_PAGE_STATE);case 1:return t.a(2)}},t)})),function(){return br.apply(this,arguments)})};function Lr(t){t?(bt.HOME_PAGE.USER_NAME.innerText=t.name,bt.HOME_PAGE.USER_ID.innerText=t.id,bt.HOME_PAGE.USER_SERVER.innerText=D[t.world_code]):(bt.HOME_PAGE.USER_NAME.innerText="(None)",bt.HOME_PAGE.USER_ID.innerText="(None)",bt.HOME_PAGE.USER_SERVER.innerText="(None)")}function Cr(t){return Ir.apply(this,arguments)}function Ir(){return(Ir=Tr(mr().m(function t(e){return mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Sr.clearUserData();case 1:if(Lr(e),!e){t.n=2;break}return t.n=2,Sr.setUser(e);case 2:return t.a(2)}},t)}))).apply(this,arguments)}function Nr(){return(Nr=Tr(mr().m(function t(){return mr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Cr(null);case 1:return t.a(2)}},t)}))).apply(this,arguments)}var Dr={homePageSetView:function(t){if(Ar(t)){for(var e=0,n=Object.values(fr);e<n.length;e++){var r=n[e];if(t!==r){var o=wr(r);"Hiding ".concat(o.id),lr.setVisibility(o,!1)}}var a=wr(t);"Showing ".concat(a.id),lr.setVisibility(a,!0)}},homePageSetUser:Cr,homePageDrawUserInfo:Lr,homePageClearUserData:function(){return Nr.apply(this,arguments)}};const kr={ACTIONS:{CLEAR_USER:"CLEAR_USER",SHOW_NO_USER_MSG:"SHOW_NO_USER_MSG",SHOW_DATA_ALREADY_CLEARED_MSG:"SHOW_DATA_ALREADY_CLEARED_MSG",QUERY_USER:"QUERY_USER"},getState:async function(){return await ht.get(ht.Keys.INTER_PAGE_MANAGER)??{actions:[],messages:[]}},setState:async function(t){await ht.cache(ht.Keys.INTER_PAGE_MANAGER,t)},pushActions:async function(t){let e=await this.getState();e.actions.push(...t),await this.setState(e)},pushMessages:async function(t){let e=await this.getState();e.messages.push(...t),await this.setState(e)},pushState:async function(t){let e=await this.getState();e.actions.push(...t.actions),e.messages.push(...t.messages),await this.setState(e)},flushState:async function(){const t=await this.getState();return await ht.delete(ht.Keys.INTER_PAGE_MANAGER),t}};function Mr(t){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr(t)}function Fr(t){return function(t){if(Array.isArray(t))return Gr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Br(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||Br(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ur(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Mr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Br(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Br(t,e){if(t){if("string"==typeof t)return Gr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gr(t,e):void 0}}function Gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Hr=function(t){return t.filter(function(t){return t[B.FIRST_PICK]})};function $r(t){return(100*t).toFixed(2)+"%"}function Kr(t,e){return $r(0!==e?t/e:0)}function Vr(t,e){var n=t[B.CR_BAR].find(function(t){return t[0]===e});return n?n[1]:null}function Wr(t,e,n){var r,o,a=function(t){return t.filter(function(t){return t[B.WIN]})}(t).length,i=t.length,s=0!==e?i/e:0,c=0!==i?a/i:0,u=t.reduce(function(t,e){return t+(e[B.P1_POSTBAN]===n||e[B.P2_POSTBAN]===n)},0),l=t.reduce(function(t,e){return t+(e[B.WIN]||e[B.P1_POSTBAN]===n||e[B.P2_POSTBAN]===n)},0),f=t.reduce(function(t,e){return t+e[B.POINT_GAIN]},0),p=0,d=0,h=0,_=jr(t);try{for(_.s();!(o=_.n()).done;){var E=Vr(o.value,n);null!==E&&0!==E&&(p+=1,d+=E,100===E&&(h+=1))}}catch(t){_.e(t)}finally{_.f()}var S=Kr(d/100,p);return Ur(Ur(Ur(Ur(Ur(Ur(Ur(Ur(Ur(Ur(r={},Y,n),q,i),z,$r(s)),Q,a),J,$r(c)),X,u),Z,Kr(u,i)),tt,Kr(l,i)),et,2*a-i),nt,f),Ur(Ur(Ur(r,rt,S),ot,h),at,Kr(h,p))}function Yr(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Set,r=0,o=Object.values(t);r<o.length;r++){var a=o[r];(e?a[B.P1_PICKS_PRIMES]:a[B.P2_PICKS_PRIMES]).forEach(function(t){n.add(t)})}return n}function qr(t){var e=Math.floor(t/60),n=(t%60).toFixed(1);return 0===e?"".concat(n," secs"):"".concat(e," : ").concat(n,"s")}const zr={getHeroStats:function(t,e){if(0===t.length)return{playerHeroStats:[],enemyHeroStats:[]};var n,r=t.length,o=Yr(t,!0),a=Yr(t,!1),i=[],s=[],c=jr(o);try{var u=function(){var o=n.value,a=Gt.getHeroByPrime(o,e),s=t.filter(function(t){return t[B.P1_PICKS_PRIME_PRODUCT]%o===0});s.length>0&&i.push(Wr(s,r,a.name))};for(c.s();!(n=c.n()).done;)u()}catch(t){c.e(t)}finally{c.f()}var l,f=jr(a);try{var p=function(){var n=l.value,o=Gt.getHeroByPrime(n,e),a=t.filter(function(t){return t[B.P2_PICKS_PRIME_PRODUCT]%n===0});a.length>0&&s.push(Wr(a,r,o.name))};for(f.s();!(l=f.n()).done;)p()}catch(t){f.e(t)}finally{f.f()}var d=Y;return{playerHeroStats:i.sort(function(t,e){return t[d].localeCompare(e[d])}),enemyHeroStats:s.sort(function(t,e){return t[d].localeCompare(e[d])})}},getFirstPickStats:function(t,e){if(0===(t=Hr(Object.values(t))).length)return[];var n,r=t.length,o={},a=jr(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(0!==i[B.P1_PICKS_PRIMES].length){var s=i[B.P1_PICKS_PRIMES][0];s in o||(o[s]={wins:0,appearances:0}),o[s].wins+=i[B.WIN],o[s].appearances+=1}}}catch(t){a.e(t)}finally{a.f()}var c=Object.entries(o).map(function(t){var n=xr(t,2),o=n[0],a=n[1];return{hero:Gt.getHeroByPrime(o,e).name,wins:a.wins,appearances:a.appearances,win_rate:$r(a.wins/a.appearances),appearance_rate:$r(a.appearances/r),"+/-":2*a.wins-a.appearances}});return c.sort(function(t,e){return e.appearances-t.appearances}),c},getPrebanStats:function(t,e){var n=Gt.getHeroByName(Gt.EMPTY_NAME,e).prime;if(0===t.length)return[];var r,o=function(e,r){return Fr(new Set(t.map(function(t){return t[e][r]}).filter(function(t){return t&&t!==n})))},a=o(B.P1_PREBANS_PRIMES,0),i=o(B.P1_PREBANS_PRIMES,1),s=new Set([].concat(Fr(a),Fr(i))),c=[],u=jr(s);try{for(u.s();!(r=u.n()).done;){var l=r.value;c.push(l)}}catch(t){u.e(t)}finally{u.f()}var f,p=jr(s);try{for(p.s();!(f=p.n()).done;){var d,h=f.value,_=jr(s);try{for(_.s();!(d=_.n()).done;){var E=d.value;h<E&&c.push(h*E)}}catch(t){_.e(t)}finally{_.f()}}}catch(t){p.e(t)}finally{p.f()}for(var S=t.length,m=[],y=function(){var n=T[g],r=t.filter(function(t){return t["P1 Prebans Prime Product"]%n===0}),o=r.length;if(o<1)return 1;var a=r.reduce(function(t,e){return t+e.Win},0),i=S>0?o/S:0,s=o>0?a/o:0,c=2*a-o;m.push({preban:e.prime_pair_lookup[n],wins:a,appearances:o,appearance_rate:$r(i),win_rate:$r(s),"+/-":c})},g=0,T=c;g<T.length;g++)y();return m.sort(function(t,e){return e.appearances-t.appearances}),m},getPerformanceStats:function(t){var e,n={servers:[],leagues:[]},r=t.length,o=Object.values(D),a=Object.values(j),i=jr([].concat(Fr(o.map(function(t){return["Server: ".concat(t),function(e){return e["P2 Server"]===t}]})),Fr(a.map(function(t){return["League: ".concat(t),function(e){return e["P2 League"]===t}]}))));try{for(i.s();!(e=i.n()).done;){var s=xr(e.value,2),c=s[0],u=s[1],l=t.filter(u);if(0!==l.length){var f=l.length,p=l.reduce(function(t,e){return t+e.Win},0),d=f>0?p/f:"N/A",h=r>0?f/r:"N/A",_=l.filter(function(t){return t["First Pick"]}),E=_.reduce(function(t,e){return t+e.Win},0),S=l.filter(function(t){return!t["First Pick"]}),m=S.reduce(function(t,e){return t+e.Win},0);(c.toLowerCase().includes("server")?n.servers:n.leagues).push({label:c,count:f,wins:p,win_rate:"N/A"===d?"N/A":$r(d),frequency:$r(h),"+/-":2*p-f,fp_games:_.length,sp_games:S.length,fp_wr:_.length>0?$r(E/_.length):"N/A",sp_wr:S.length>0?$r(m/S.length):"N/A"})}}}catch(t){i.e(t)}finally{i.f()}return[].concat(Fr(n.servers),Fr(n.leagues.slice(-4)))},getGeneralStats:function(t,e){t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var n,r=t.length,o=t.reduce(function(t,e){return t+e["Point Gain"]},0),a=r>0?o/r:0,i=t.reduce(function(t,e){return t+e.Turns},0),s=r>0?i/r:0,c=t.length>0?Math.max.apply(Math,Fr(t.map(function(t){return t.Turns}))):0,u=t.reduce(function(t,e){return t+e.Seconds},0),l=r>0?u/r:0,f=t.length>0?Math.max.apply(Math,Fr(t.map(function(t){return t.Seconds}))):0,p=qr(l),d=qr(f),h=t.reduce(function(t,e){return t+e["First Turn"]},0),_=Hr(t),E=function(t){return t.filter(function(t){return!t[B.FIRST_PICK]})}(t),S=_.length,m=E.length,y=_.reduce(function(t,e){return t+e.Win},0),g=E.reduce(function(t,e){return t+e.Win},0),T=r?S/r:0,v=r?m/r:0,A=S?y/S:0,w=m?g/m:0,b=r?(y+g)/r:0,O=0,R=0,P=0,L=0,C=jr(t);try{for(C.s();!(n=C.n()).done;){n.value.Win?(P+=1,O=Math.max(O,P),L=0):(P=0,L+=1,R=Math.max(R,L))}}catch(t){C.e(t)}finally{C.f()}var I="N/A";return{first_pick_count:S,second_pick_count:m,first_pick_rate:S?$r(T):I,second_pick_rate:m?$r(v):I,first_pick_winrate:S?$r(A):I,second_pick_winrate:m?$r(w):I,total_winrate:r?$r(b):I,total_battles:r,total_wins:y+g,max_win_streak:O,max_loss_streak:R,avg_ppg:a.toFixed(2),avg_turns:s.toFixed(2),avg_time:p,max_turns:c,max_time:d,first_turn_games:h,first_turn_rate:r?$r(h/r):I}}};function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function Jr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Xr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Zr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Qr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function to(t,e){var n=function(t){var n,r;return null!==(n=null===(r=Gt.getHeroByName(t,e))||void 0===r?void 0:r.prime)&&void 0!==n?n:e.Fodder.prime},r=function(t,e){return t*e};t[B.P1_PICKS_PRIMES]=t[B.P1_PICKS].map(n),t[B.P2_PICKS_PRIMES]=t[B.P2_PICKS].map(n),t[B.P1_PICKS_PRIME_PRODUCT]=t[B.P1_PICKS_PRIMES].reduce(r,1),t[B.P2_PICKS_PRIME_PRODUCT]=t[B.P2_PICKS_PRIMES].reduce(r,1),t[B.P1_PREBANS_PRIMES]=t[B.P1_PREBANS].map(n),t[B.P2_PREBANS_PRIMES]=t[B.P2_PREBANS].map(n),t[B.P1_PREBANS_PRIME_PRODUCT]=t[B.P1_PREBANS_PRIMES].reduce(r,1),t[B.P2_PREBANS_PRIME_PRODUCT]=t[B.P2_PREBANS_PRIMES].reduce(r,1)}function eo(t,e,n){var r,o=function(t){var n,r;return null!==(n=null===(r=Gt.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},a=function(e,r){return r.map(function(r,o){return r?function(t){return Ht.convertCodeToName(t,n)||"None"}(r):function(e,n){return"p1"===e?t.p2_postban===t.p1_picks[n]:t.p1_postban===t.p2_picks[n]}(e,o)?"n/a":"None"})},i=function(t){return t.map(function(t){return t.map(function(t){return F[t]||t})})},s=t.cr_bar.find(function(t){return 100===t[1]}),c=!!s&&t.p1_picks.includes(s[0]),u=(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(r={},B.SEASON,t.season_name||"None"),B.SEASON_CODE,t.season_code||"None"),B.DATE_TIME,t.date_time),B.SECONDS,t.seconds),B.TURNS,t.turns),B.SEQ_NUM,t.seq_num),B.P1_ID,t.p1_id.toString()),B.P1_SERVER,D[t.p1_server]||t.p1_server||"None"),B.P2_ID,t.p2_id.toString()),B.P2_SERVER,D[t.p2_server]||t.p2_server||"None"),Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(r,B.P1_LEAGUE,w(t.p1_league)||"None"),B.P2_LEAGUE,w(t.p2_league)||"None"),B.P1_POINTS,t.p1_win_score),B.POINT_GAIN,t.p1_point_delta||null),B.WIN,1===t.win),B.FIRST_PICK,1===t.first_pick),B.FIRST_TURN,!!c),B.FIRST_TURN_HERO,s?o(s[0]):"n/a"),B.CR_BAR,t.cr_bar.map(function(t){return t&&2==t.length?[o(t[0]),t[1]]:["n/a",0]})),B.P1_PREBANS,t.p1_prebans.map(o)),Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(Zr(r,B.P2_PREBANS,t.p2_prebans.map(o)),B.P1_PICKS,t.p1_picks.map(o)),B.P2_PICKS,t.p2_picks.map(o)),B.P1_POSTBAN,o(t.p1_postban)),B.P2_POSTBAN,o(t.p2_postban)),B.P1_EQUIPMENT,i(t.p1_equipment)),B.P2_EQUIPMENT,i(t.p2_equipment)),B.P1_ARTIFACTS,a("p1",t.p1_artifacts)),B.P2_ARTIFACTS,a("p2",t.p2_artifacts)),B.P1_MVP,o(t.p1_mvp)),Zr(r,B.P2_MVP,o(t.p2_mvp)));return to(u,e),u}function no(t,e,n){n=null!=n?n:Ht.getArtifactCodeToNameMap();var r,o=[],a=Jr(t);try{for(a.s();!(r=a.n()).done;){var i=eo(r.value,e,n);o.push([i["Seq Num"],i])}}catch(t){a.e(t)}finally{a.f()}return Object.fromEntries(o)}function ro(t,e){var n=t.map(function(t){var n,r=Jr(H);try{for(r.s();!(n=r.n()).done;){var o=n.value;t[o]=JSON.parse(t[o])}}catch(t){r.e(t)}finally{r.f()}var a,i=Jr(K);try{for(i.s();!(a=i.n()).done;){var s=a.value;t[s]="true"===t[s].toLowerCase()}}catch(t){i.e(t)}finally{i.f()}var c,u=Jr(V);try{for(u.s();!(c=u.n()).done;){var l=c.value;t[l]=Number(t[l].replace("'",""))}}catch(t){u.e(t)}finally{u.f()}var f,p=Jr(W);try{for(p.s();!(f=p.n()).done;){var d=f.value;t[d]=w(t[d])}}catch(t){p.e(t)}finally{p.f()}return to(t,e),t});return Object.fromEntries(n.map(function(t){return[t["Seq Num"],t]}))}function oo(t){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oo(t)}function ao(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function io(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ao(Object(n),!0).forEach(function(e){so(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function so(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=oo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=oo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function co(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(oo(t)+" is not iterable")}function uo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,s=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,e)||fo(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=fo(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function fo(t,e){if(t){if("string"==typeof t)return po(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?po(t,e):void 0}}function po(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ho(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return _o(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(_o(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,_o(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,_o(f,"constructor",u),_o(u,"constructor",c),c.displayName="GeneratorFunction",_o(u,o,"GeneratorFunction"),_o(f),_o(f,o,"Generator"),_o(f,r,function(){return this}),_o(f,"toString",function(){return"[object Generator]"}),(ho=function(){return{w:a,m:p}})()}function _o(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_o=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){_o(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},_o(t,e,n,r)}function Eo(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function So(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Eo(a,r,o,i,s,"next",t)}function s(t){Eo(a,r,o,i,s,"throw",t)}i(void 0)})}}var mo,yo,go,To,vo,Ao,wo,bo,Oo={loaded_servers:new Set,getBattles:(bo=So(ho().m(function t(){var e,n,r,o;return ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.get(ht.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return bo.apply(this,arguments)}),removeBattles:(wo=So(ho().m(function t(){return ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.delete(ht.Keys.BATTLES);case 1:return t.n=2,ht.delete(ht.Keys.UPLOADED_BATTLES);case 2:return t.n=3,ht.delete(ht.Keys.FILTERED_BATTLES);case 3:case 4:return t.a(2)}},t)})),function(){return wo.apply(this,arguments)}),removeFilteredBattles:(Ao=So(ho().m(function t(){return ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.delete(ht.Keys.FILTERED_BATTLES);case 1:case 2:return t.a(2)}},t)})),function(){return Ao.apply(this,arguments)}),applyFilter:(vo=So(ho().m(function t(e){var n,r,o,a,i,s,c,u,l,f,p,d;return ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.filter(function(t){return t instanceof Ln}),o=e.filter(function(t){return t instanceof Bn}),a=Object.values(n),i=lo(o);try{for(i.s();!(s=i.n()).done;)c=s.value,"Applying global filter: ".concat(c.asString()),u=a.length,a=c.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),"Filtered ".concat(u-a.length," out of ").concat(u,"; new total = ").concat(a.length)}catch(t){i.e(t)}finally{i.f()}l=lo(r),t.p=2,p=ho().m(function t(){var e,r;return ho().w(function(t){for(;;)switch(t.n){case 0:e=f.value,"Applying local filter: ".concat(e.asString()),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=uo(t,2),r=(n[0],n[1]);return e.call(r)})),"Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length);case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(co(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,l.e(d);case 7:return t.p=7,l.f(),t.f(7);case 8:return"Caching filtered battles ; total = ".concat(Object.keys(n).length),t.n=9,ht.cache(ht.Keys.FILTERED_BATTLES,n);case 9:return"Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters"),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return vo.apply(this,arguments)}),extendBattles:(To=So(ho().m(function t(e){var n,r,o,a,i;return ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ht.get(ht.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=io(io({},i),e),t.n=5,ht.cache(ht.Keys.BATTLES,r);case 5:return t.a(2,r)}},t)})),function(t){return To.apply(this,arguments)}),cacheQuery:(go=So(ho().m(function t(e,n,r){var o,a;return ho().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,[]);case 1:return"Caching queried battles: ".concat(e.length," battles; modified [BATTLES];"),o=no(e,n,r),t.n=2,this.extendBattles(o);case 2:return a=t.v,t.a(2,a)}},t,this)})),function(t,e,n){return go.apply(this,arguments)}),cacheUpload:(yo=So(ho().m(function t(e,n){var r,o;return ho().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.error("No uploaded battles provided to cacheUpload"),t.a(2,{});case 1:return r=ro(e,n),t.n=2,ht.cache(ht.Keys.UPLOADED_BATTLES,r);case 2:return t.n=3,this.extendBattles(r);case 3:return o=t.v,t.a(2,o)}},t,this)})),function(t,e){return yo.apply(this,arguments)}),getStats:(mo=So(ho().m(function t(e,n,r){var o,a,i,s,c,u,l,f,p,d;return ho().w(function(t){for(;;)switch(t.n){case 0:return o=n.length,"Applying ".concat(o," filters"),a=Object.values(e),t.n=1,this.applyFilter(n);case 1:return i=t.v,s=Object.values(i),c=o>0,t.n=2,zr.getPrebanStats(s,r);case 2:return u=t.v,t.n=3,zr.getFirstPickStats(s,r);case 3:return l=t.v,t.n=4,zr.getGeneralStats(s,r);case 4:return f=t.v,t.n=5,zr.getHeroStats(s,r);case 5:return p=t.v,t.n=6,zr.getPerformanceStats(s);case 6:return d=t.v,t.a(2,{battles:a,filteredBattlesObj:i,prebanStats:u,generalStats:f,firstPickStats:l,playerHeroStats:p.playerHeroStats,enemyHeroStats:p.enemyHeroStats,performanceStats:d,numFilters:o,areFiltersApplied:c})}},t,this)})),function(t,e,n){return mo.apply(this,arguments)})};const Ro={changeLang:async function(t){await Po.ClientCache.setLang(t),await Po.HeroManager.fetchAndCacheHeroManager(t),window.location.reload()},getLang:async function(){return await Po.ClientCache.getLang()}};let Po={HeroManager:Gt,BattleManager:Oo,SeasonManager:Ie,UserManager:Sr,ClientCache:ht,ArtifactManager:Ht,LangManager:Ro};function Lo(){window.location.href=URL_UTILS.HOME_PAGE_URL}function Co(){document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",async function(e){if(!("dataset"in t)||!t.dataset||"object"!=typeof t.dataset||!("nav"in t.dataset))return;const n=t.dataset.nav;if(Object.values(fr).includes(n))if(n===fr.SELECT_DATA)await Pr.setState(fr.SELECT_DATA),Lo();else if(n===fr.SHOW_STATS){await Sr.getUser()?(await Pr.setState(fr.SHOW_STATS),Lo()):(await Pr.setState(fr.SELECT_DATA),await kr.pushState({messages:["Active user not found; you must either query a valid user or upload battles to view hero stats."],actions:[kr.ACTIONS.SHOW_NO_USER_MSG]}),Lo())}})})}function Io(){bt.NAV_BAR.CLEAR_DATA_BTN.addEventListener("click",async function(){await Sr.getUser()?(await Pr.setState(fr.SELECT_DATA),await kr.pushActions([kr.ACTIONS.CLEAR_USER])):(await Pr.setState(fr.SELECT_DATA),await kr.pushActions([kr.ACTIONS.SHOW_DATA_ALREADY_CLEARED_MSG])),Lo()})}function No(){[bt.NAV_BAR.CLEAR_DATA_BTN,bt.NAV_BAR.EXPORT_CSV_BTN,bt.NAV_BAR.OFFICIAL_SITE_BTN].forEach(t=>{t.addEventListener("touchstart",()=>{t.classList.add("touch-hover"),setTimeout(()=>t.classList.remove("touch-hover"),150)})})}function Do(t,e="en"){t?(bt.NAV_BAR.USER_NAME.innerText=t.name,bt.NAV_BAR.USER_ID.innerText=t.id,bt.NAV_BAR.USER_SERVER.innerText=D[t.world_code],bt.NAV_BAR.OFFICIAL_SITE_BTN.onclick=()=>{window.open(function(t,e){const n=`${it}/${e}/gg/battlerecord/${t.world_code}/${t.id}`;return n}(t,e),"_blank","noopener,noreferrer")}):(bt.NAV_BAR.USER_NAME.innerText="(None)",bt.NAV_BAR.USER_ID.innerText="(None)",bt.NAV_BAR.USER_SERVER.innerText="(None)",bt.NAV_BAR.OFFICIAL_SITE_BTN.onclick=()=>{window.open(st,"_blank","noopener,noreferrer")})}function ko(){bt.NAV_BAR.EXPORT_CSV_BTN.addEventListener("click",async function(){const t=await Po.UserManager.getUser();if(!t)return await kr.pushState({messages:["User not found; cannot export data without an active user"],actions:[kr.ACTIONS.SHOW_NO_USER_MSG]}),await Pr.setState(fr.SELECT_DATA),void Lo();const e=(new Date).toISOString().split("T")[0]||"",n=`${t.name} (${t.id}) ${e}.csv`,r=await Po.BattleManager.getBattles();!function(t,e){const n=new Blob(["\ufeff"+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.download=e,r.href=window.URL.createObjectURL(n),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}(function(t){const e=G,n=[];n.push(e.map(t=>`"${t}"`).join(","));for(const r of t){const t=e.map(t=>{let e=r[t]??"";return Array.isArray(e)&&(e=JSON.stringify(e).replace(/"/g,'""')),`"${e}"`});n.push(t.join(","))}return n.join("\n")}(Object.values(r)),n)})}let Mo={addNavListeners:Co,addClearDataBtnListener:Io,writeUserInfo:Do,initialize:async function(){Do(await Sr.getUser()),Co(),Io(),ko(),No()},navToHome:Lo,addExportCSVBtnListener:ko,addBraceButtonListeners:No,eraseUserFromPage:async function(){await Sr.clearUserData(),Do(null)},setUserOnPage:async function(t){await Sr.setUser(t),Do(t,await Ro.getLang())}};function Fo(t){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fo(t)}function xo(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=Fo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Fo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fo(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Uo={SOURCE:{QUERY:"query",UPLOAD:"upload",STATS:"stats"}},jo=xo(xo(xo({},fr.SELECT_DATA,0),fr.SHOW_STATS,0),fr.LOAD_DATA,0),Bo={SOURCE:"SOURCE",AUTO_ZOOM:"AUTO_ZOOM",AUTO_QUERY:"AUTO_QUERY",STATS_POST_RENDER_COMPLETED:"STATS_POST_RENDER_COMPLETED",STATS_PRE_RENDER_COMPLETED:"STATS_PRE_RENDER_COMPLETED",HOME_PAGE_STATE:"STATE",SCROLL_PERCENTS:"SCROLL_PERCENTS",CODE_MIRROR_EDITOR:"CODE_MIRROR_EDITOR",TRY_SET_USER:"TRY_SET_USER",IGNORE_RELAYOUT:"IGNORE_RELAYOUT"},Go={KEYS:Bo,VALUES:Uo,SOURCE:null,AUTO_QUERY:null,AUTO_ZOOM:!1,STATS_POST_RENDER_COMPLETED:!1,STATS_PRE_RENDER_COMPLETED:!1,HOME_PAGE_STATE:null,SCROLL_PERCENTS:jo,CODE_MIRROR_EDITOR:null,TRY_SET_USER:null,IGNORE_RELAYOUT:!1,popKey:function(t){var e=this[t];return this[t]=this._getDefault(t),e},readKey:function(t){return this[t]},_getDefault:function(t){switch(t){case Bo.AUTO_ZOOM:return!1;case Bo.SOURCE:case Bo.AUTO_QUERY:return null;case Bo.STATS_POST_RENDER_COMPLETED:case Bo.STATS_PRE_RENDER_COMPLETED:return!1;case Bo.HOME_PAGE_STATE:return null;case Bo.SCROLL_PERCENTS:return jo;case Bo.CODE_MIRROR_EDITOR:throw new Error("No default value for key: ".concat(t," ; do not use popKey or _getDefault for this key"));case Bo.TRY_SET_USER:return null;case Bo.IGNORE_RELAYOUT:return!1;default:return null}}};function Ho(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return $o(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):($o(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,$o(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,$o(f,"constructor",u),$o(u,"constructor",c),c.displayName="GeneratorFunction",$o(u,o,"GeneratorFunction"),$o(f),$o(f,o,"Generator"),$o(f,r,function(){return this}),$o(f,"toString",function(){return"[object Generator]"}),(Ho=function(){return{w:a,m:p}})()}function $o(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$o=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){$o(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},$o(t,e,n,r)}function Ko(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Vo(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ko(a,r,o,i,s,"next",t)}function s(t){Ko(a,r,o,i,s,"throw",t)}i(void 0)})}}function Wo(t){rr.write(new er(t,bt.HOME_PAGE.SELECT_DATA_MSG,[rr.STYLES.RED]))}function Yo(){return Yo=Vo(Ho().m(function t(e){var n,r,o;return Ho().w(function(t){for(;;)switch(t.n){case 0:n=bt.HOME_PAGE.ID_SEARCH_FLAG,r=Po.ClientCache.Keys.ID_SEARCH_FLAG,n.addEventListener("click",Vo(Ho().m(function t(){return Ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Po.ClientCache.cache(r,n.checked);case 1:return t.a(2)}},t)}))),(o=document.getElementById("userForm")).addEventListener("submit",function(){var t=Vo(Ho().m(function t(n){var r,a,i,s,c,u;return Ho().w(function(t){for(;;)switch(t.n){case 0:if(n.preventDefault(),r=new FormData(o),a=r.get("username"),i=r.get("server"),a){t.n=1;break}Wo("Must enter username"),t.n=4;break;case 1:return t.p=1,t.n=2,Po.ClientCache.get(Po.ClientCache.Keys.ID_SEARCH_FLAG);case 2:return s=t.v,c=s?{id:a,world_code:i}:{name:a,world_code:i},Go.TRY_SET_USER=c,Go.AUTO_QUERY=!0,Go.SOURCE=Go.VALUES.SOURCE.QUERY,e(fr.LOAD_DATA),t.a(2);case 3:t.p=3,u=t.v,console.error("Caught Error:",u),Wo(u.message);case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),Yo.apply(this,arguments)}function qo(){return qo=Vo(Ho().m(function t(e){var n,r;return Ho().w(function(t){for(;;)switch(t.n){case 0:(n=document.getElementById("auto-query-flag")).addEventListener("click",Vo(Ho().m(function t(){return Ho().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Po.ClientCache.cache(Po.ClientCache.Keys.AUTO_QUERY_FLAG,n.checked);case 1:return t.a(2)}},t)}))),r=null,bt.HOME_PAGE.CSV_FILE.addEventListener("change",function(t){r=t.target.files[0]}),bt.HOME_PAGE.UPLOAD_FORM.addEventListener("submit",function(){var t=Vo(Ho().m(function t(o){var a,i;return Ho().w(function(t){for(;;)switch(t.n){case 0:if(o.preventDefault(),a=n.checked,t.p=1,r){t.n=2;break}return Wo("Must upload a file"),t.a(2);case 2:return"Selected File: ".concat(r.name," ; content: ").concat(JSON.stringify(r)),t.n=3,Po.ClientCache.cache(Po.ClientCache.Keys.RAW_UPLOAD,r);case 3:return Go.AUTO_QUERY=a,Go.SOURCE=Go.VALUES.SOURCE.UPLOAD,e(fr.LOAD_DATA),t.a(2);case 4:t.p=4,i=t.v,console.error("Caught Error:",i),Wo(i.message);case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),qo.apply(this,arguments)}function zo(t){!function(t){Yo.apply(this,arguments)}(t),function(t){qo.apply(this,arguments)}(t)}function Qo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Jo(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Jo(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Jo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Jo(f,"constructor",u),Jo(u,"constructor",c),c.displayName="GeneratorFunction",Jo(u,o,"GeneratorFunction"),Jo(f),Jo(f,o,"Generator"),Jo(f,r,function(){return this}),Jo(f,"toString",function(){return"[object Generator]"}),(Qo=function(){return{w:a,m:p}})()}function Jo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Jo=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Jo(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Jo(t,e,n,r)}function Xo(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Zo(){return Zo=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Xo(a,r,o,i,s,"next",t)}function s(t){Xo(a,r,o,i,s,"throw",t)}i(void 0)})}}(Qo().m(function t(){var e,n;return Qo().w(function(t){for(;;)switch(t.n){case 0:return e=document.getElementById("auto-query-flag"),t.n=1,ht.get(ht.Keys.AUTO_QUERY_FLAG);case 1:return e.checked=t.v,n=bt.HOME_PAGE.ID_SEARCH_FLAG,t.n=2,ht.get(ht.Keys.ID_SEARCH_FLAG);case 2:n.checked=t.v;case 3:return t.a(2)}},t)})),Zo.apply(this,arguments)}var ta={runLogic:function(){return Zo.apply(this,arguments)},initialize:function(t){zo(t)}};function ea(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return na(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?na(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function na(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ra(t){var e=$("#".concat(t));$.fn.dataTable.isDataTable(e)&&e.DataTable().clear().destroy()}function oa(t){var e,n=ea(t=structuredClone(t));try{for(n.s();!(e=n.n()).done;){var r,o=e.value,a=ea(H);try{for(a.s();!(r=a.n()).done;){var i=r.value;o[i]=JSON.stringify(o[i])}}catch(t){a.e(t)}finally{a.f()}}}catch(t){n.e(t)}finally{n.f()}return t}function aa(t){var e=Number(t.replace("%",""));return e>50?"text-over50":e<50?"text-below50":""}function ia(t){var e=document.getElementById("".concat(t,"-body"));if(!e)throw new Error("Could not find tbody with id ".concat(t,"-body"));return e}var sa={populateHeroStatsTable:function(t,e){ra(t),ia(t).innerHTML="";var n=t.toLowerCase().includes("player"),r=n?"Player":"Enemy",o=[Y,q,z,Q,J,Z,tt,et,nt,rt,at],a=o.filter(function(t){return t!==tt}),i=n?o:a,s=$("#".concat(t)).DataTable({layout:{topStart:"buttons"},language:{info:"Total rows: _TOTAL_"},order:[[2,"desc"]],buttons:{name:"primary",buttons:["copy",{extend:"csv",text:"CSV",filename:r+" Hero Stats"},{extend:"excel",text:"Excel",filename:r+" Hero Stats"}]},columnDefs:[{targets:"_all",className:"nowrap"},{targets:4,createdCell:function(t,e){var n=Number(e.replace("%",""));n<50?t.style.color="red":n>50&&(t.style.color="mediumspringgreen")}}],pageLength:50,scrollY:"300px",deferRender:!0,scroller:!0,scrollCollapse:!1,columns:i.map(function(t){return{data:t}})});return s.rows.add(e).draw(),s},populateSeasonDetailsTable:function(t,e){var n=ia(t);n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t["Season Number"],"</td>\n            <td>").concat(t.Season,"</td>\n            <td>").concat(t.Start,"</td>\n            <td>").concat(t.End,"</td>\n            <td>").concat(t.Status,"</td>\n            "),n.appendChild(e)})},populateServerStatsTable:function(t,e){var n=ia(t);n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr"),r=t.label.includes("Server")?"cm-keyword":"cm-declared-data";e.innerHTML='\n            <td class="'.concat(r,'">').concat(t.label,"</td>\n            <td>").concat(t.count,"</td>\n            <td>").concat(t.frequency,"</td>\n            <td>").concat(t.wins,'</td>\n            <td class="').concat(aa(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],'</td>\n            <td class="').concat(aa(t.fp_wr),'">').concat(t.fp_wr,'</td>\n            <td class="').concat(aa(t.sp_wr),'">').concat(t.sp_wr,"</td>\n            "),n.appendChild(e)})},populatePlayerPrebansTable:function(t,e){var n=ia(t);n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.preban,"</td>\n            <td>").concat(t.appearances,"</td>\n            <td>").concat(t.appearance_rate,'</td>\n            <td class="').concat(aa(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)})},populatePlayerFirstPickTable:function(t,e){var n=ia(t);n.innerHTML="",e.forEach(function(t){var e=document.createElement("tr");e.innerHTML="\n            <td>".concat(t.hero,"</td>\n            <td>").concat(t.appearances,"</td>\n            <td>").concat(t.appearance_rate,'</td>\n            <td class="').concat(aa(t.win_rate),'">').concat(t.win_rate,"</td>\n            <td>").concat(t["+/-"],"</td>\n            "),n.appendChild(e)})},populateFullBattlesTable:function(t,e,n){var r;ra(t),e=oa(e),ia(t).innerHTML="";var o=(new Date).toISOString().split("T")[0]||"";r=n?"".concat(n.name," (").concat(n.id,") ").concat(o):0===e.length?"Empty":"UID(".concat(e[0]["P1 ID"],") ").concat(o);var a=$("#".concat(t)).DataTable({layout:{topStart:"buttons"},language:{info:"Total rows: _TOTAL_"},order:[[2,"desc"]],columnDefs:[{targets:"_all",className:"nowrap"}],rowCallback:function(t,e,n){var r=t.cells[14],o=t.cells[15],a=t.cells[16];!0===e.Win?r.style.color="mediumspringgreen":!1===e.Win&&(r.style.color="red"),!0===e["First Pick"]&&(o.style.color="deepskyblue"),!0===e["First Turn"]&&(a.style.color="deepskyblue")},buttons:{name:"primary",buttons:["copy",{extend:"csv",text:"CSV",filename:r},{extend:"excel",text:"Excel",filename:r}]},pageLength:50,scrollY:"300px",deferRender:!0,scroller:!0,scrollCollapse:!1,columns:Object.values(B).filter(function(t){return!t.toLowerCase().includes("prime")}).map(function(t){return{data:t}})});return a.rows.add(e).draw(),a},replaceDatatableData:function(t,e){$("#".concat(t)).DataTable().clear().rows.add(e).draw()},replaceBattleData:function(t){t=oa(t);var e=bt.HOME_PAGE.BATTLES_TBL.id;this.replaceDatatableData(e,t)}},ca=function(t){_t.setText("total-battles",t.total_battles),_t.setText("first-pick-count",t.first_pick_count),_t.setText("first-pick-rate"," (".concat(t.first_pick_rate,")")),_t.setText("second-pick-count",t.second_pick_count),_t.setText("second-pick-rate"," (".concat(t.second_pick_rate,")")),_t.setText("total-winrate",t.total_winrate),_t.setText("first-pick-winrate",t.first_pick_winrate),_t.setText("second-pick-winrate",t.second_pick_winrate),_t.setText("total-wins",t.total_wins),_t.setText("max-win-streak",t.max_win_streak),_t.setText("max-loss-streak",t.max_loss_streak),_t.setText("avg-ppg",t.avg_ppg),_t.setText("avg-turns",t.avg_turns),_t.setText("avg-time",t.avg_time),_t.setText("max-turns",t.max_turns),_t.setText("max-time",t.max_time),_t.setText("first-turn-games",t.first_turn_games),_t.setText("first-turn-rate",t.first_turn_rate)},ua={"Current Season":"season = current-season","Last Season":"season = last-season","First Pick":"is-first-pick = true","Second Pick":"is-first-pick = false","Champion+ Opponent":"p2.league in {champion, warlord, emperor, legend}","Warlord+ Opponent":"p2.league in {warlord, emperor, legend}","Emperor+ Opponent":"p2.league in {emperor, legend}","Legend Opponent":"p2.league = 'legend'",Wins:"is-win = true",Losses:"is-win = false",extendFilters:function(t,e){var n=ua[e];return";"!==(t=t.replace(/\s+$/,"")).slice(-1)&&t.length>0?t+=";\n":";"===t.slice(-1)&&(t+="\n"),"".concat(t).concat(n,";")}};const la=ua,fa=16,pa=8,da=2,ha=1;function _a(t){const e=t;return{markerSize:Math.max(da,6-.5*Math.log10(e)),lineWidth:Math.max(ha,3-.5*Math.log10(e))}}function Ea(t,e){const n={startX:null,endX:null,startY:null,endY:null};for(const[r,o]of t.entries())o["Seq Num"]in e&&(n.startX=null===n.startX||r<n.startX?r-.5:n.startX,n.startY=null===n.startY||o["P1 Points"]<n.startY+50?o["P1 Points"]-50:n.startY,n.endX=null===n.endX||r>n.endX?r+.5:n.endX,n.endY=null===n.endY||o["P1 Points"]>n.endY-50?o["P1 Points"]+50:n.endY);return n}function Sa(t,e,n,r=null){e.sort((t,e)=>t["Date/Time"].localeCompare(e["Date/Time"])),n||(n={name:`UID: ${e[0]["P1 ID"]}`});const o=e.map((t,e)=>e),a=e.map(t=>t["P1 Points"]),i=[];for(let[t,n]of e.entries())r&&n["Seq Num"]in r?i.push("#ff9900"):i.push("#0df8fd");const s=e.map(t=>[t["Date/Time"].slice(0,10),t["P1 League"]]),c=_a(e.length),u={x:o,y:a,mode:"lines+markers",line:{color:"#4f9293",width:c.lineWidth},marker:{symbol:"circle",size:c.markerSize,color:i},customdata:s,hovertemplate:"Points: %{y}<br>Date: %{customdata[0]}<br>League: %{customdata[1]}<extra></extra>"},l={autosize:!0,font:{family:"Roboto, Open Sans"},title:{text:`${n.name}'s RTA Point Plot`,font:{size:24,color:"#dddddd"},xanchor:"center",yanchor:"top",y:.95,x:.5},xaxis:{title:{text:"Battle Number (Chronological)",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!1,tickfont:{size:12,color:"#dddddd"},range:null},yaxis:{title:{text:"Victory Points",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!0,zerolinecolor:"#dddddd",zerolinewidth:2,tickfont:{size:12,color:"#dddddd"},range:null},plot_bgcolor:"#1e222d",paper_bgcolor:"#1e222d"},f={responsive:!0};let p,d=!0;return p=document.getElementById("rank-plot"),p||(d=!1,p=document.createElement("div"),p.id="rank-plot",t.appendChild(p)),p.style.width="100%",p.style.height="100%",d?Plotly.react(p,[u],l,f):Plotly.newPlot(p,[u],l,f),p}function ma(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return ya(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(ya(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,ya(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,ya(f,"constructor",u),ya(u,"constructor",c),c.displayName="GeneratorFunction",ya(u,o,"GeneratorFunction"),ya(f),ya(f,o,"Generator"),ya(f,r,function(){return this}),ya(f,"toString",function(){return"[object Generator]"}),(ma=function(){return{w:a,m:p}})()}function ya(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ya=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){ya(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},ya(t,e,n,r)}function ga(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ta(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ga(a,r,o,i,s,"next",t)}function s(t){ga(a,r,o,i,s,"throw",t)}i(void 0)})}}function va(){var t=bt.HOME_PAGE.RANK_PLOT;t.__zoomListenerAttached||(t.__zoomListenerAttached=!0,t.on("plotly_relayout",function(){var e=Ta(ma().m(function e(n){var r,o,a,i,s,c,u;return ma().w(function(e){for(;;)switch(e.n){case 0:if(!Go.popKey(Go.KEYS.IGNORE_RELAYOUT)){e.n=1;break}return e.a(2);case 1:return e.n=2,ht.getStats();case 2:r=e.v,o=Object.values(r.battles).length,a=_a(o),void 0!==n["xaxis.range[0]"]?(i=[n["xaxis.range[0]"],n["xaxis.range[1]"]],s=o/(i[1]-i[0]),c=Math.min(Math.max(a.markerSize*s,a.markerSize),fa),u=Math.min(Math.max(a.lineWidth*s,a.lineWidth),pa),Plotly.restyle(t,{"marker.size":[c],"line.width":[u]})):Plotly.restyle(t,{"marker.size":[a.markerSize],"line.width":[a.lineWidth]});case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()))}function Aa(t,e){var n,r;(n=bt.HOME_PAGE.AUTO_ZOOM_FLAG).addEventListener("click",Ta(ma().m(function t(){return ma().w(function(t){for(;;)switch(t.n){case 0:return n.checked,t.n=1,Po.ClientCache.cache(Po.ClientCache.Keys.AUTO_ZOOM_FLAG,n.checked);case 1:return t.a(2)}},t)}))),(r=bt.HOME_PAGE.BATTLE_FILTER_TOGGLE).addEventListener("click",Ta(ma().m(function t(){var e;return ma().w(function(t){for(;;)switch(t.n){case 0:return r.checked,t.n=1,Po.ClientCache.getStats();case 1:e=t.v,r.checked?(e.filteredBattlesObj,sa.replaceBattleData(Object.values(e.filteredBattlesObj))):sa.replaceBattleData(e.battles);case 2:return t.a(2)}},t)}))),function(t){document.getElementById("premade-filters").addEventListener("click",function(e){e.preventDefault();var n=e.target.closest(".dropdown-item");if(n){var r=n.textContent.trim(),o=t.getValue(),a=la.extendFilters(o,r);t.setValue(a)}})}(t),function(t,e){document.getElementById("filterForm").addEventListener("submit",function(){var n=Ta(ma().m(function n(r){var o,a,i,s;return ma().w(function(n){for(;;)switch(n.n){case 0:return r.preventDefault(),document.getElementById("codeArea").value=t.getValue(),o=r.submitter,a=null==o?void 0:o.value,i=t.getValue(),n.n=1,Po.ClientCache.getFilterStr();case 1:if(s=n.v,"apply"!==a){n.n=5;break}return n.n=2,lr.validateFilterSyntax(i);case 2:if(!n.v){n.n=4;break}return n.n=3,Po.ClientCache.setFilterStr(i);case 3:case 8:return Go.AUTO_QUERY=!1,Go.SOURCE=Go.VALUES.SOURCE.STATS,e(fr.LOAD_DATA),n.a(2);case 4:n.n=9;break;case 5:if("check"!==a){n.n=7;break}return n.n=6,lr.validateFilterSyntax(i);case 6:case 9:return n.a(2);case 7:if("clear"!==a){n.n=9;break}if(t.setValue(""),!s){n.n=9;break}return n.n=8,Po.ClientCache.setFilterStr("")}},n)}));return function(t){return n.apply(this,arguments)}}())}(t,e)}let wa=0;function ba(){return wa+=1,`id-${wa}`}let Oa=null;const Ra="nest",Pa="adj";class La{htmlElt;children;childArr;constructor(t){this.htmlElt=t,this.children={},this.childArr=[]}static fromID(t){return new La(_t.unwrapHtmlElt(t))}static fromElt(t){return new La(t)}get id(){return this.htmlElt.id}set id(t){this.htmlElt.id=t}addClass(...t){this.htmlElt.classList.add(...t)}addStyle(t){this.htmlElt.setAttribute("style",t)}removeClass(...t){this.htmlElt.classList.remove(...t)}addAttributes(t){for(const[e,n]of Object.entries(t))this.htmlElt.setAttribute(e,n)}appendChild(t){if(t instanceof La)return this.htmlElt.appendChild(t.htmlElt),t.id||(t.id=ba()),this.children[t.id]=t,this.childArr.push(t),t;if(t instanceof HTMLElement){let e=new La(t);return this.appendChild(e)}throw new Error("Only instances of HTMLConstructor or HTMLElement can be passed to this function")}setInnerHtml(t){this.htmlElt.innerHTML=t}appendInnerHTML(t){this.htmlElt.insertAdjacentHTML("beforeend",t)}constructChild(t,e={}){e.id||(e.id=ba());let n=document.createElement(t),r=new La(n);return r.addAttributes(e),this.appendChild(r),r}addTextContent(t){this.htmlElt.textContent=t}compose(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.option===Ra)return n.children?n.children=[...n.children,...t.slice(e+1)]:n.children=t.slice(e+1),n.option=Pa,void this.compose([n]);if(n.textContent instanceof Array){const t=[];for(const e of n.textContent){const r=Object.assign({},n);r.textContent=e,t.push(r)}this.compose(t);continue}let r=this.constructChild(n.tag,n.attributes);n.classes&&r.addClass(...n.classes),n.children&&r.compose(n.children),n.textContent&&r.addTextContent(n.textContent),n.style&&r.addStyle(n.style),n.innerHtml&&r.setInnerHtml(n.innerHtml)}}}class Ca extends La{thead;tbody;constructor(t,e,n){super(t),this.constructChild("thead",{id:e}),this.constructChild("tbody",{id:n}),this.thead=this.children[e],this.tbody=this.children[n]}static createFromIDs(t,e,n){const r=document.createElement("table");return r.id=t,new Ca(r,e,n)}addColumns(t){const e=this.thead.constructChild("tr");t.forEach(t=>{e.constructChild("th",{scope:"col"}).addTextContent(t)})}}function Ia(t){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(t)}function Na(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Da(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Da(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Da(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Da(f,"constructor",u),Da(u,"constructor",c),c.displayName="GeneratorFunction",Da(u,o,"GeneratorFunction"),Da(f),Da(f,o,"Generator"),Da(f,r,function(){return this}),Da(f,"toString",function(){return"[object Generator]"}),(Na=function(){return{w:a,m:p}})()}function Da(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Da=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Da(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Da(t,e,n,r)}function ka(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ma(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ka(a,r,o,i,s,"next",t)}function s(t){ka(a,r,o,i,s,"throw",t)}i(void 0)})}}function Fa(t){return xa.apply(this,arguments)}function xa(){return(xa=Ma(Na().m(function t(e){var n,r,o,a,i,s,c,u,l,f,p,d,h;return Na().w(function(t){for(;;)switch(t.n){case 0:return n=_t.unwrapHtmlElt("rank-plot-container"),t.n=1,Sr.getUser();case 1:return r=t.v,t.n=2,ht.get(ht.Keys.AUTO_ZOOM_FLAG);case 2:o=t.v,a=Sa(n,e.battles,r,e.numFilters>0?e.filteredBattlesObj:null),va(),o&&e.areFiltersApplied&&(i=Ea(e.battles,e.filteredBattlesObj),s=Object.values(e.battles).length,c=Object.values(e.filteredBattlesObj).length,u=_a(s),l=s/c,f=Math.min(Math.max(u.markerSize*l,u.markerSize),fa),p=Math.min(Math.max(u.lineWidth*l,u.lineWidth),pa),d={"xaxis.range":[i.startX,i.endX],"yaxis.range":[i.startY,i.endY]},h={"marker.size":[f],"line.width":[p]},Go.IGNORE_RELAYOUT=!0,Plotly.restyle(a,h),Plotly.relayout(a,d));case 3:return t.a(2)}},t)}))).apply(this,arguments)}function Ua(){return ja.apply(this,arguments)}function ja(){return(ja=Ma(Na().m(function t(){var e,n,r,o;return Na().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Sr.getUser();case 1:if(e=t.v){t.n=2;break}return t.a(2);case 2:return t.p=3,t.n=4,Po.SeasonManager.getSeasonDetails();case 4:return Ia(n=t.v),t.n=5,Po.ClientCache.getStats();case 5:return r=t.v,console.time("populateTables"),sa.populateSeasonDetailsTable("season-details-tbl",n),sa.populateHeroStatsTable("player-tbl",r.playerHeroStats),sa.populateHeroStatsTable("opponent-tbl",r.enemyHeroStats),sa.populatePlayerFirstPickTable("first-pick-stats-tbl",r.firstPickStats),sa.populatePlayerPrebansTable("preban-stats-tbl",r.prebanStats),sa.populateServerStatsTable("performance-stats-tbl",r.performanceStats),bt.HOME_PAGE.BATTLE_FILTER_TOGGLE.checked?sa.populateFullBattlesTable("battles-tbl",Object.values(r.filteredBattlesObj),e):sa.populateFullBattlesTable("battles-tbl",r.battles,e),ca(r.generalStats),t.n=6,Fa(r);case 6:console.timeEnd("populateTables"),t.n=8;break;case 7:t.p=7,o=t.v,console.error("Error loading data:",o);case 8:return t.a(2)}},t,null,[[3,7]])}))).apply(this,arguments)}function Ba(){return Ga.apply(this,arguments)}function Ga(){return(Ga=Ma(Na().m(function t(){var e,n,r;return Na().w(function(t){for(;;)switch(t.n){case 0:return CodeMirror.defineMode("filterSyntax",function(){return{token:function(t,e){return ve.tokenMatch(t)}}}),e=document.getElementById("codeArea"),(n=CodeMirror.fromTextArea(e,{mode:"filterSyntax",lineNumbers:!0,theme:"default"})).setSize(null,185),t.n=1,Po.ClientCache.getFilterStr();case 1:return(r=t.v)&&n.setValue(r),n.on("change",function(){n.save()}),e.classList.remove("codemirror-hidden"),Go.CODE_MIRROR_EDITOR=n,t.a(2,n)}},t)}))).apply(this,arguments)}function Ha(){return(Ha=Ma(Na().m(function t(){return Na().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Ua();case 1:return t.a(2)}},t)}))).apply(this,arguments)}function $a(){return($a=Ma(Na().m(function t(){var e;return Na().w(function(t){for(;;)switch(t.n){case 0:if(e=Go.CODE_MIRROR_EDITOR){t.n=1;break}return console.error("Editor not found in CONTEXT"),t.a(2);case 1:e.refresh();case 2:return t.a(2)}},t)}))).apply(this,arguments)}function Ka(){return Ka=Ma(Na().m(function t(e){var n,r,o;return Na().w(function(t){for(;;)switch(t.n){case 0:return n=bt.HOME_PAGE.AUTO_ZOOM_FLAG,t.n=1,Po.ClientCache.get(Po.ClientCache.Keys.AUTO_ZOOM_FLAG);case 1:return r=t.v,n.checked=r,t.n=2,Po.ClientCache.getStats();case 2:return o=t.v,bt.HOME_PAGE.BATTLE_FILTER_TOGGLE.checked&&sa.replaceBattleData(Object.values(o.filteredBattlesObj)),t.n=3,Sr.getUser();case 3:if(t.v){t.n=4;break}return e(fr.SELECT_DATA),t.a(2);case 4:case 5:bt.HOME_PAGE.CSV_FILE.value="",bt.HOME_PAGE.USER_QUERY_FORM_NAME.value="";case 6:return t.a(2)}},t)})),Ka.apply(this,arguments)}function Va(){for(var t=[bt.HOME_PAGE.FIRST_PICK_STATS_TBL,bt.HOME_PAGE.PREBAN_STATS_TBL,bt.HOME_PAGE.SEASON_DETAILS_TBL],e=function(){if(Oa)return Oa;const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);const e=t.offsetWidth-t.clientWidth;return t.remove(),Oa=e,e}(),n=0,r=t;n<r.length;n++){var o=r[n].querySelector("thead");o&&o.style.setProperty("padding-right","".concat(e,"px"))}}function Wa(){return Wa=Ma(Na().m(function t(e){var n;return Na().w(function(t){for(;;)switch(t.n){case 0:return Va(),t.n=1,Ba();case 1:return n=t.v,t.n=2,Aa(n,e);case 2:return t.a(2)}},t)})),Wa.apply(this,arguments)}var Ya={preFirstRenderLogic:function(){return Ha.apply(this,arguments)},postFirstRenderLogic:function(){return $a.apply(this,arguments)},runLogic:function(t){return Ka.apply(this,arguments)},initialize:function(t){return Wa.apply(this,arguments)},populateContent:Ua},qa=n(809);function za(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Qa(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Qa(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Qa(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Qa(f,"constructor",u),Qa(u,"constructor",c),c.displayName="GeneratorFunction",Qa(u,o,"GeneratorFunction"),Qa(f),Qa(f,o,"Generator"),Qa(f,r,function(){return this}),Qa(f,"toString",function(){return"[object Generator]"}),(za=function(){return{w:a,m:p}})()}function Qa(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Qa=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Qa(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Qa(t,e,n,r)}function Ja(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Xa(t){return function(t){if(Array.isArray(t))return Za(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Za(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Za(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ti=Object.values(B);var ei,ni={parseUpload:(ei=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ja(a,r,o,i,s,"next",t)}function s(t){Ja(a,r,o,i,s,"throw",t)}i(void 0)})}}(za().m(function t(e){var n,r,o,a;return za().w(function(t){for(;;)switch(t.n){case 0:return this.validateCSV(e),t.n=1,e.text();case 1:if(n=t.v,(r=qa.parse(n,{header:!0,skipEmptyLines:!0,quoteChar:'"',dynamicTyping:!1})).meta.fields.forEach(function(t,e){var n=t.trim().replace(/"/g,"");if(n!==ti[e])throw new Error("Header ".concat(n," does not match expected column ").concat(ti[e]," at index ").concat(e))}),!(r.errors.length>0)){t.n=2;break}throw o=r.errors[0],new Error("Failed to parse CSV: Row ".concat(o.row,", ").concat(o.message));case 2:return r.data,a=r.data,this.postParseValidation(a),t.a(2,a)}},t,this)})),function(t){return ei.apply(this,arguments)}),validateCSV:function(t){if(!t.name.endsWith(".csv"))throw new Error("File must be .csv");if(t.size>52428800)throw new Error("File must be smaller than ".concat(50,"mb, got ").concat(t.size/1048576,"mb File."))},postParseValidation:function(t){if(t.length<2)throw new Error("File must have at least 1 battle");!function(t){for(var e=new Set,n=new Set,r=0;r<t.length;r++){var o=[t[r]["P1 ID"],t[r]["P1 Server"]],a=o[0],i=o[1],s=r+1;if(""===a.trim()||!a)throw new Error("Detected an empty ID for Player 1: failed at row: ".concat(s));if(""===i.trim()||!i)throw new Error("Detected an empty Server for Player 1: failed at row: ".concat(s));if(e.add(a),e.size>1)throw new Error("File must have exactly one ID for Player 1: found IDS: [".concat(Xa(e),"]; failed at row: ").concat(s));if(n.add(i),n.size>1)throw new Error("File must exactly one Server for Player 1: found Servers: [".concat(Xa(n),"]; failed at row: ").concat(s))}}(t)}};const ri=ni;function oi(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return ai(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(ai(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,ai(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,ai(f,"constructor",u),ai(u,"constructor",c),c.displayName="GeneratorFunction",ai(u,o,"GeneratorFunction"),ai(f),ai(f,o,"Generator"),ai(f,r,function(){return this}),ai(f,"toString",function(){return"[object Generator]"}),(oi=function(){return{w:a,m:p}})()}function ai(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ai=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){ai(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},ai(t,e,n,r)}function ii(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function si(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ii(a,r,o,i,s,"next",t)}function s(t){ii(a,r,o,i,s,"throw",t)}i(void 0)})}}function ci(){return ui.apply(this,arguments)}function ui(){return(ui=si(oi().m(function t(){var e,n,r,o,a;return oi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Po.ClientCache.get(Po.ClientCache.Keys.RAW_UPLOAD);case 1:return e=t.v,t.n=2,ri.parseUpload(e);case 2:return n=t.v,r=n[0]["P1 ID"],o=k[n[0]["P1 Server"]],t.n=3,Po.UserManager.findUser({id:r,world_code:o});case 3:if(a=t.v){t.n=4;break}throw new Error("File Upload Error: User not found");case 4:return t.a(2,{user:a,battleArr:n})}},t)}))).apply(this,arguments)}function li(t,e){return fi.apply(this,arguments)}function fi(){return(fi=si(oi().m(function t(e,n){var r,o,a,i,s;return oi().w(function(t){for(;;)switch(t.n){case 0:return JSON.stringify(e),t.n=1,Po.ArtifactManager.getArtifactCodeToNameMap();case 1:return r=t.v,t.n=2,Ft.rsFetchBattleData(e);case 2:if((o=t.v).ok){t.n=4;break}return t.n=3,o.json();case 3:throw a=t.v,new Error(a.error);case 4:return t.n=5,o.json();case 5:return i=t.v,s=i.battles,t.n=6,Po.BattleManager.cacheQuery(s,n,r);case 6:case 7:return t.a(2)}},t)}))).apply(this,arguments)}function pi(t,e,n){return di.apply(this,arguments)}function di(){return di=si(oi().m(function t(e,n,r){var o,a,i,s;return oi().w(function(t){for(;;)switch(t.n){case 0:return a=[Go.VALUES.SOURCE.QUERY,Go.VALUES.SOURCE.UPLOAD,Go.VALUES.SOURCE.STATS],i=a[1],s=a[2],n===a[0]||n===i?(o=fr.SELECT_DATA,ir.queueSelectDataMsgRed("Failed to load data: ".concat(e.message))):n===s?(o=fr.SHOW_STATS,ir.queueFilterMsgRed("Failed to load data: ".concat(e.message))):(console.error("Invalid source: ".concat(n," ; redirecting to select data")),o=fr.SELECT_DATA,ir.queueSelectDataMsgRed("Failed to load data: ".concat(e.message))),console.error(e),t.n=1,Mo.eraseUserFromPage();case 1:return t.n=2,r(o);case 2:return t.a(2)}},t)})),di.apply(this,arguments)}function hi(t){return _i.apply(this,arguments)}function _i(){return(_i=si(oi().m(function t(e){var n;return oi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Po.UserManager.findUser(e);case 1:if(n=t.v,JSON.stringify(n),null===n){t.n=2;break}return t.a(2,n);case 2:return t.a(2,null)}},t)}))).apply(this,arguments)}function Ei(t){return Si.apply(this,arguments)}function Si(){return(Si=si(oi().m(function t(e){var n;return oi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Po.UserManager.clearUserData();case 1:return t.n=2,Po.UserManager.setUser(e);case 2:return t.n=3,Po.LangManager.getLang();case 3:n=t.v,Mo.writeUserInfo(e,n);case 4:return t.a(2)}},t)}))).apply(this,arguments)}function mi(){return mi=si(oi().m(function t(e){var n,r,o,a,i,s,c,u,l,f,p,d;return oi().w(function(t){for(;;)switch(t.n){case 0:return n=null,r=null,o=null,t.p=1,t.n=2,Po.HeroManager.getHeroDicts();case 2:n=t.v,r=Go.popKey(Go.KEYS.SOURCE),o=Go.popKey(Go.KEYS.AUTO_QUERY),t.n=5;break;case 3:return t.p=3,f=t.v,console.error("Could not load reference and context variables: ",f),t.n=4,e(fr.SELECT_DATA);case 4:return t.a(2);case 5:if(t.p=5,a=null,r!==Go.VALUES.SOURCE.UPLOAD){t.n=9;break}return t.n=6,ci();case 6:return i=t.v,a=i.user,t.n=7,Ei(a);case 7:return t.n=8,Po.BattleManager.cacheUpload(i.battleArr,n);case 8:t.n=12;break;case 9:if(r!==Go.VALUES.SOURCE.QUERY){t.n=12;break}if(null!==(s=Go.popKey(Go.KEYS.TRY_SET_USER))){t.n=10;break}throw new Error("TRY_SET_USER User missing from CONTEXT");case 10:return t.n=11,hi(s);case 11:return a=t.v,t.n=12,Ei(a);case 12:if(null!==a){t.n=14;break}return t.n=13,Po.UserManager.getUser();case 13:a=t.v;case 14:if(!o&&r!==Go.VALUES.SOURCE.QUERY){t.n=15;break}return t.n=15,li(a,n);case 15:return t.n=16,Po.BattleManager.getBattles();case 16:return c=t.v,t.n=17,Yn.getFiltersFromCache(n);case 17:return u=t.v,"Received Filters: ".concat(JSON.stringify(u)),t.n=18,Po.BattleManager.getStats(c,u,n);case 18:return l=t.v,t.n=19,Po.ClientCache.setStats(l);case 19:return t.n=20,Ya.populateContent();case 20:return Go.STATS_PRE_RENDER_COMPLETED=!0,t.n=21,e(fr.SHOW_STATS);case 21:return t.a(2);case 22:return t.p=22,p=t.v,t.p=23,t.n=24,pi(p,r,e);case 24:return t.a(2);case 25:return t.p=25,d=t.v,console.error("Something went wrong ; redirecting to select data ; error:",d),t.n=26,Mo.eraseUserFromPage();case 26:return t.n=27,e(fr.SELECT_DATA);case 27:return t.a(2)}},t,null,[[23,25],[5,22],[1,3]])})),mi.apply(this,arguments)}var yi={runLogic:function(t){return mi.apply(this,arguments)},initialize:function(){}};function gi(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Ti(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ti(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Ti(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Ti(f,"constructor",u),Ti(u,"constructor",c),c.displayName="GeneratorFunction",Ti(u,o,"GeneratorFunction"),Ti(f),Ti(f,o,"Generator"),Ti(f,r,function(){return this}),Ti(f,"toString",function(){return"[object Generator]"}),(gi=function(){return{w:a,m:p}})()}function Ti(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ti=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Ti(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Ti(t,e,n,r)}function vi(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ai(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){vi(a,r,o,i,s,"next",t)}function s(t){vi(a,r,o,i,s,"throw",t)}i(void 0)})}}function wi(){Go.IGNORE_RELAYOUT=!0,setTimeout(function(){Plotly.Plots.resize(document.getElementById("rank-plot"))},20)}function bi(t){return Oi.apply(this,arguments)}function Oi(){return Oi=Ai(gi().m(function t(e){return gi().w(function(t){for(;;)switch(t.n){case 0:if(Go.STATS_PRE_RENDER_COMPLETED){t.n=2;break}return t.n=1,Ya.preFirstRenderLogic(e);case 1:Go.STATS_PRE_RENDER_COMPLETED=!0;case 2:return t.n=3,Ya.runLogic(e);case 3:return t.n=4,Dr.homePageSetView(fr.SHOW_STATS);case 4:if(Go.STATS_POST_RENDER_COMPLETED){t.n=6;break}return t.n=5,Ya.postFirstRenderLogic();case 5:Go.STATS_POST_RENDER_COMPLETED=!0;case 6:wi();case 7:return t.a(2)}},t)})),Oi.apply(this,arguments)}function Ri(){return Pi.apply(this,arguments)}function Pi(){return(Pi=Ai(gi().m(function t(){var e;return gi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Pr.getState();case 1:e=t.v,Go.SCROLL_PERCENTS[e]=lr.getScrollPercent(),rr.clearMessages(),rr.processQueue();case 2:return t.a(2)}},t)}))).apply(this,arguments)}function Li(t){return Ci.apply(this,arguments)}function Ci(){return(Ci=Ai(gi().m(function t(e){var n,r;return gi().w(function(t){for(;;)switch(t.n){case 0:if("Switching to state: ".concat(e,", with CONTEXT: "),Ar(e)){t.n=1;break}return t.a(2);case 1:return Ri(),t.n=2,Pr.setState(e);case 2:r=e,t.n=r===fr.SELECT_DATA?3:r===fr.SHOW_STATS?6:r===fr.LOAD_DATA?8:11;break;case 3:return t.n=4,ta.runLogic(Li);case 4:return t.n=5,Dr.homePageSetView(e);case 5:return t.a(3,12);case 6:return t.n=7,bi(Li);case 7:return t.a(3,12);case 8:return t.n=9,Dr.homePageSetView(e);case 9:return t.n=10,yi.runLogic(Li);case 10:return t.a(3,12);case 11:console.error("Invalid page state: ".concat(e));case 12:n=Go.SCROLL_PERCENTS[e],setTimeout(function(){lr.setScrollPercent(n)},0);case 13:return t.a(2)}},t)}))).apply(this,arguments)}function Ii(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Ni(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Ni(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Ni(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Ni(f,"constructor",u),Ni(u,"constructor",c),c.displayName="GeneratorFunction",Ni(u,o,"GeneratorFunction"),Ni(f),Ni(f,o,"Generator"),Ni(f,r,function(){return this}),Ni(f,"toString",function(){return"[object Generator]"}),(Ii=function(){return{w:a,m:p}})()}function Ni(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ni=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Ni(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Ni(t,e,n,r)}function Di(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function ki(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Di(a,r,o,i,s,"next",t)}function s(t){Di(a,r,o,i,s,"throw",t)}i(void 0)})}}function Mi(){document.querySelectorAll(".nav-link").forEach(function(t){t.addEventListener("click",function(){var t=ki(Ii().m(function t(e){var n,r;return Ii().w(function(t){for(;;)switch(t.n){case 0:return n=this.dataset.nav,t.n=1,Pr.getState();case 1:if(r=t.v,!Object.values(fr).includes(n)){t.n=6;break}if(r!==n){t.n=2;break}return"Already in state: ".concat(r," ; returning"),t.a(2);case 2:if(n!==fr.SELECT_DATA){t.n=3;break}Li(fr.SELECT_DATA,Go),t.n=5;break;case 3:if(n!==fr.SHOW_STATS){t.n=5;break}return t.n=4,Sr.getUser();case 4:t.v?Li(fr.SHOW_STATS,Go):(ir.queueSelectDataMsgRed("User not found; Must either query a valid user or upload battles to view hero stats"),Li(fr.SELECT_DATA,Go));case 5:t.n=7;break;case 6:"Navigating to: ".concat(this.href);case 7:return t.a(2)}},t,this)}));return function(e){return t.apply(this,arguments)}}())}),bt.HOME_PAGE.CLEAR_DATA_BTN.addEventListener("click",function(){var t=ki(Ii().m(function t(e){var n;return Ii().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Sr.getUser();case 1:if(!(n=t.v)){t.n=4;break}return t.n=2,Mo.eraseUserFromPage();case 2:return ir.queueSelectDataMsgGreen("Cleared data of user ".concat(n.name," (").concat(n.id,")")),t.n=3,Li(fr.SELECT_DATA);case 3:Go.SCROLL_PERCENTS[fr.SHOW_STATS]=0,t.n=5;break;case 4:return ir.queueSelectDataMsgGreen("Data already cleared"),t.n=5,Li(fr.SELECT_DATA);case 5:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),bt.NAV_BAR.SIDEBAR_HIDE_BTN.addEventListener("click",function(t){wi()}),bt.NAV_BAR.SIDEBAR_CONTROL.addEventListener("click",function(t){wi()})}var Fi=["Hero Name","Battles","Pick Rate","Wins","Win Rate","Postban Rate","Success Rate","+/-","Point Gain","Avg CR","First Turn Rate"],xi=[{tbl:bt.HOME_PAGE.SEASON_DETAILS_TBL,cols:["","Season","Start","End","Status"]},{tbl:bt.HOME_PAGE.PERFORMANCE_STATS_TBL,cols:["","Battles","Freq","Wins","Win Rate","+/-","FP WR","SP WR"]},{tbl:bt.HOME_PAGE.FIRST_PICK_STATS_TBL,cols:["Hero","Battles","Pick Rate","Win Rate","+/-"]},{tbl:bt.HOME_PAGE.PREBAN_STATS_TBL,cols:["Preban","Battles","Ban Rate","Win Rate","+/-"]},{tbl:bt.HOME_PAGE.PLAYER_TBL,cols:Fi},{tbl:bt.HOME_PAGE.OPPONENT_TBL,cols:Fi.filter(function(t){return!t.toLowerCase().includes("success")})},{tbl:bt.HOME_PAGE.BATTLES_TBL,cols:Object.values(B).filter(function(t){return!t.toLowerCase().includes("prime")})}];function Ui(){xi.forEach(function(t){var e,n,r;e=t.tbl,n=t.cols,r=e.id,new Ca(e,r+"-head",r+"-body").addColumns(n)})}function ji(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Bi(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bi(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function Bi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Gi(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return Hi(u,"_invoke",function(n,r,o){var a,s,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,s=0,c=t,p.n=n,i}};function d(n,r){for(s=n,c=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(s=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,s=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),s=l,c=h;(e=s<2?t:c)||!f;){a||(s?s<3?(s>1&&(p.n=-1),d(s,c)):p.n=c:p.v=c);try{if(u=2,a){if(s||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==i)break}catch(e){a=t,s=1,c=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function s(){}function c(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Hi(e={},r,function(){return this}),e),f=u.prototype=s.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Hi(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=u,Hi(f,"constructor",u),Hi(u,"constructor",c),c.displayName="GeneratorFunction",Hi(u,o,"GeneratorFunction"),Hi(f),Hi(f,o,"Generator"),Hi(f,r,function(){return this}),Hi(f,"toString",function(){return"[object Generator]"}),(Gi=function(){return{w:a,m:p}})()}function Hi(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Hi=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Hi(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Hi(t,e,n,r)}function $i(t,e,n,r,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Ki(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){$i(a,r,o,i,s,"next",t)}function s(t){$i(a,r,o,i,s,"throw",t)}i(void 0)})}}function Vi(t,e){return Wi.apply(this,arguments)}function Wi(){return(Wi=Ki(Gi().m(function t(e,n){var r,o,a,i;return Gi().w(function(t){for(;;)switch(t.n){case 0:r=!1,i=e,t.n=i===kr.ACTIONS.CLEAR_USER?1:i===kr.ACTIONS.SHOW_DATA_ALREADY_CLEARED_MSG?5:i===kr.ACTIONS.SHOW_NO_USER_MSG?6:i===kr.ACTIONS.QUERY_USER?7:8;break;case 1:return t.n=2,Sr.getUser();case 2:return o=t.v,t.n=3,Mo.eraseUserFromPage();case 3:return ir.queueSelectDataMsgGreen("Cleared data of user ".concat(o.name," (").concat(o.id,")")),t.n=4,Li(fr.SELECT_DATA);case 4:return r=!0,t.a(3,9);case 5:return ir.queueSelectDataMsgGreen("Data already cleared"),t.a(3,9);case 6:return a=n.pop()||"Cannot perform action; no active user found.",ir.queueSelectDataMsgRed(a),t.a(3,9);case 7:return Go.AUTO_QUERY=!0,Li(fr.LOAD_DATA),r=!0,t.a(3,9);case 8:return console.error("Invalid action: ".concat(e)),t.a(3,9);case 9:return t.a(2,r)}},t)}))).apply(this,arguments)}function Yi(){return qi.apply(this,arguments)}function qi(){return(qi=Ki(Gi().m(function t(){var e,n,r,o,a,i;return Gi().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,kr.flushState();case 1:e=t.v,n=!1,r=ji(e.actions),t.p=2,r.s();case 3:if((o=r.n()).done){t.n=6;break}return a=o.value,t.n=4,Vi(a,e.messages);case 4:n=t.v;case 5:t.n=3;break;case 6:t.n=8;break;case 7:t.p=7,i=t.v,r.e(i);case 8:return t.p=8,r.f(),t.f(8);case 9:return t.a(2,n)}},t,null,[[2,7,8,9]])}))).apply(this,arguments)}function zi(){return Qi.apply(this,arguments)}function Qi(){return(Qi=Ki(Gi().m(function t(){var e,n,r,o,a;return Gi().w(function(t){for(;;)switch(t.n){case 0:Mi(),Ui(),e=0,n=[ta,Ya,yi];case 1:if(!(e<n.length)){t.n=3;break}return r=n[e],t.n=2,r.initialize(Li);case 2:e++,t.n=1;break;case 3:return t.n=4,Sr.getUser();case 4:return o=t.v,t.n=5,Ro.getLang();case 5:a=t.v,Mo.writeUserInfo(o,a),Mo.addExportCSVBtnListener(),Mo.addBraceButtonListeners(),rr.bindAutoClear(bt.HOME_PAGE.MESSAGE_ELEMENTS_LIST);case 6:return t.a(2)}},t)}))).apply(this,arguments)}function Ji(){return(Ji=Ki(Gi().m(function t(){return Gi().w(function(t){for(;;)switch(t.n){case 0:document.addEventListener("DOMContentLoaded",Ki(Gi().m(function t(){var e;return Gi().w(function(t){for(;;)switch(t.n){case 0:return zi(),t.n=1,Pr.getState();case 1:if((e=t.v)!==fr.LOAD_DATA){t.n=3;break}return e=fr.SELECT_DATA,t.n=2,Mo.eraseUserFromPage();case 2:return t.n=3,Pr.setState(e);case 3:return Go.HOME_PAGE_STATE=e,t.n=4,Yi();case 4:if(t.v){t.n=5;break}return t.n=5,Li(e);case 5:lr.setVisibility(bt.HOME_PAGE.FOOTER_BODY,!0);case 6:return t.a(2)}},t)})));case 1:return t.a(2)}},t)}))).apply(this,arguments)}!function(){Ji.apply(this,arguments)}()})()})();