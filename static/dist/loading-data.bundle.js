/*! For license information please see loading-data.bundle.js.LICENSE.txt */
(()=>{var t={809:function(t,e){var n,r;n=function t(){var e,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},i=0,c={};function s(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new d(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let e=this._config.newline;e||(a=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,a)),t=[...t.split(e).slice(r)].join(e)}this.isFirstChunk&&S(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(t))&&(t=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+t;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=a.meta.cursor,this._finished||(this._partialLine=r.substring(t-this._baseIndex),this._baseIndex=t),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)n.postMessage({results:a,workerId:c.WORKER_ID,finished:r});else if(S(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!S(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){S(this._config.error)?this._config.error(t):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:t,finished:!1})}}function u(t){var e;(t=t||{}).chunkSize||(t.chunkSize=c.RemoteChunkSize),s.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t,n=this._config.downloadRequestHeaders;for(t in n)e.setRequestHeader(t,n[t])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(t=>null!==(t=t.getResponseHeader("Content-Range"))?parseInt(t.substring(t.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){t=e.statusText||t,this._sendError(new Error(t))}}function l(t){(t=t||{}).chunkSize||(t.chunkSize=c.LocalChunkSize),s.call(this,t);var e,n,r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input,o=(this._config.chunkSize&&(o=Math.min(this._start+this._config.chunkSize,this._input.size),t=n.call(t,this._start,o)),e.readAsText(t,this._config.encoding));r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;s.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){var t,n;if(!this._finished)return t=this._config.chunkSize,e=t?(n=e.substring(0,t),e.substring(t)):(n=e,""),this._finished=!e,this.parseChunk(n)}}function p(t){s.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=w(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(t){var e,n,r,o,a=Math.pow(2,53),i=-a,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,f=0,p=0,d=!1,g=!1,v=[],m={data:[],errors:[],meta:{}};function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function _(){if(m&&r&&(P("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(m.data=m.data.filter(function(t){return!w(t)})),E()){if(m)if(Array.isArray(m.data[0])){for(var e=0;E()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){S(t.transformHeader)&&(e=t.transformHeader(e,n)),v.push(e)}}function o(e,n){for(var r=t.header?{}:[],o=0;o<e.length;o++){var c=o,l=e[o];l=((e,n)=>(e=>(t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)))(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((t=>{if(s.test(t)&&(t=parseFloat(t),i<t&&t<a))return 1})(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n)(c=t.header?o>=v.length?"__parsed_extra":v[o]:c,l=t.transform?t.transform(l,c):l),"__parsed_extra"===c?(r[c]=r[c]||[],r[c].push(l)):r[c]=l}return t.header&&(o>v.length?P("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+o,p+n):o<v.length&&P("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+o,p+n)),r}var l;m&&(t.header||t.dynamicTyping||t.transform)&&(l=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(o),l=m.data.length):m.data=o(m.data,0),t.header&&m.meta&&(m.meta.fields=v),p+=l)}function E(){return t.header&&0===v.length}function P(t,e,n,r){t={type:t,code:e,message:n},void 0!==r&&(t.row=r),m.errors.push(t)}S(t.step)&&(o=t.step,t.step=function(e){m=e,E()?_():(_(),0!==m.data.length&&(f+=e.data.length,t.preview&&f>t.preview?n.abort():(m.data=m.data[0],o(m,l))))}),this.parse=function(o,a,i){var s=t.quoteChar||'"';return t.newline||(t.newline=this.guessLineEndings(o,s)),r=!1,t.delimiter?S(t.delimiter)&&(t.delimiter=t.delimiter(o),m.meta.delimiter=t.delimiter):((s=((e,n,r,o,a)=>{var i,s,u,l;a=a||[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var f=0;f<a.length;f++){for(var p,d=a[f],h=0,g=0,v=0,m=(u=void 0,new y({comments:o,delimiter:d,newline:n,preview:10}).parse(e)),b=0;b<m.data.length;b++)r&&w(m.data[b])?v++:(g+=p=m.data[b].length,void 0===u?u=p:0<p&&(h+=Math.abs(p-u),u=p));0<m.data.length&&(g/=m.data.length-v),(void 0===s||h<=s)&&(void 0===l||l<g)&&1.99<g&&(s=h,i=d,l=g)}return{successful:!!(t.delimiter=i),bestDelimiter:i}})(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=s.bestDelimiter:(r=!0,t.delimiter=c.DefaultDelimiter),m.meta.delimiter=t.delimiter),s=b(t),t.preview&&t.header&&s.preview++,e=o,n=new y(s),m=n.parse(e,a,i),_(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=S(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(d=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),m.meta.aborted=!0,S(t.complete)&&t.complete(m),e=""},this.guessLineEndings=function(t,e){t=t.substring(0,1048576),e=new RegExp(h(e)+"([^]*?)"+h(e),"gm");var n=(t=t.replace(e,"")).split("\r");if(t=1<(e=t.split("\n")).length&&e[0].length<n[0].length,1===n.length||t)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(t){var e=(t=t||{}).delimiter,n=t.newline,r=t.comments,o=t.step,a=t.preview,i=t.fastMode,s=null,u=!1,l=null==t.quoteChar?'"':t.quoteChar,f=l;if(void 0!==t.escapeChar&&(f=t.escapeChar),("string"!=typeof e||-1<c.BAD_DELIMITERS.indexOf(e))&&(e=","),r===e)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<c.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var p=0,d=!1;this.parse=function(c,y,g){if("string"!=typeof c)throw new Error("Input must be a string");var v=c.length,m=e.length,b=n.length,w=r.length,_=S(o),E=[],P=[],k=[],O=p=0;if(!c)return M();if(i||!1!==i&&-1===c.indexOf(l)){for(var T=c.split(n),A=0;A<T.length;A++){if(k=T[A],p+=k.length,A!==T.length-1)p+=n.length;else if(g)return M();if(!r||k.substring(0,w)!==r){if(_){if(E=[],L(k.split(e)),B(),d)return M()}else L(k.split(e));if(a&&a<=A)return E=E.slice(0,a),M(!0)}}return M()}for(var I=c.indexOf(e,p),D=c.indexOf(n,p),j=new RegExp(h(f)+h(l),"g"),R=c.indexOf(l,p);;)if(c[p]===l)for(R=p,p++;;){if(-1===(R=c.indexOf(l,R+1)))return g||P.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:E.length,index:p}),C();if(R===v-1)return C(c.substring(p,R).replace(j,l));if(l===f&&c[R+1]===f)R++;else if(l===f||0===R||c[R-1]!==f){-1!==I&&I<R+1&&(I=c.indexOf(e,R+1));var x=F(-1===(D=-1!==D&&D<R+1?c.indexOf(n,R+1):D)?I:Math.min(I,D));if(c.substr(R+1+x,m)===e){k.push(c.substring(p,R).replace(j,l)),c[p=R+1+x+m]!==l&&(R=c.indexOf(l,p)),I=c.indexOf(e,p),D=c.indexOf(n,p);break}if(x=F(D),c.substring(R+1+x,R+1+x+b)===n){if(k.push(c.substring(p,R).replace(j,l)),N(R+1+x+b),I=c.indexOf(e,p),R=c.indexOf(l,p),_&&(B(),d))return M();if(a&&E.length>=a)return M(!0);break}P.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:E.length,index:p}),R++}}else if(r&&0===k.length&&c.substring(p,p+w)===r){if(-1===D)return M();p=D+b,D=c.indexOf(n,p),I=c.indexOf(e,p)}else if(-1!==I&&(I<D||-1===D))k.push(c.substring(p,I)),p=I+m,I=c.indexOf(e,p);else{if(-1===D)break;if(k.push(c.substring(p,D)),N(D+b),_&&(B(),d))return M();if(a&&E.length>=a)return M(!0)}return C();function L(t){E.push(t),O=p}function F(t){return-1!==t&&(t=c.substring(R+1,t))&&""===t.trim()?t.length:0}function C(t){return g||(void 0===t&&(t=c.substring(p)),k.push(t),p=v,L(k),_&&B()),M()}function N(t){p=t,L(k),k=[],D=c.indexOf(n,p)}function M(r){if(t.header&&!y&&E.length&&!u){var o=E[0],a=Object.create(null),i=new Set(o);let e=!1;for(let n=0;n<o.length;n++){let r=o[n];if(a[r=S(t.transformHeader)?t.transformHeader(r,n):r]){let t,c=a[r];for(;t=r+"_"+c,c++,i.has(t););i.add(t),o[n]=t,a[r]++,e=!0,(s=null===s?{}:s)[t]=r}else a[r]=1,o[n]=r;i.add(r)}e&&console.warn("Duplicate headers found and renamed."),u=!0}return{data:E,errors:P,meta:{delimiter:e,linebreak:n,aborted:d,truncated:!!r,cursor:O+(y||0),renamedHeaders:s}}}function B(){o(M()),E=[],P=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return p}}function g(t){var e=t.data,n=a[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(S(n.userStep)){for(var i=0;i<e.results.data.length&&(n.userStep({data:e.results.data[i],errors:e.results.errors,meta:e.results.meta},o),!r);i++);delete e.results}else S(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&v(e.workerId,e.results)}function v(t,e){var n=a[t];S(n.userComplete)&&n.userComplete(e),n.terminate(),delete a[t]}function m(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e,n=Array.isArray(t)?[]:{};for(e in t)n[e]=b(t[e]);return n}function w(t,e){return function(){t.apply(e,arguments)}}function S(t){return"function"==typeof t}return c.parse=function(e,r){var o=(r=r||{}).dynamicTyping||!1;if(S(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!S(r.transform)&&r.transform,!r.worker||!c.WORKERS_SUPPORTED)return o=null,c.NODE_STREAM_INPUT,"string"==typeof e?(e=(t=>65279!==t.charCodeAt(0)?t:t.slice(1))(e),o=new(r.download?u:f)(r)):!0===e.readable&&S(e.read)&&S(e.on)?o=new p(r):(n.File&&e instanceof File||e instanceof Object)&&(o=new l(r)),o.stream(e);(o=(()=>{var e;return!!c.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,r=t.toString();return c.BLOB_URL||(c.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(e=new n.Worker(e)).onmessage=g,e.id=i++,a[e.id]=e)})()).userStep=r.step,o.userChunk=r.chunk,o.userComplete=r.complete,o.userError=r.error,r.step=S(r.step),r.chunk=S(r.chunk),r.complete=S(r.complete),r.error=S(r.error),delete r.worker,o.postMessage({input:e,config:r,workerId:o.id})},c.unparse=function(t,e){var n=!1,r=!0,o=",",a="\r\n",i='"',s=i+i,u=!1,l=null,f=!1,p=((()=>{if("object"==typeof e){if("string"!=typeof e.delimiter||c.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(o=e.delimiter),"boolean"!=typeof e.quotes&&"function"!=typeof e.quotes&&!Array.isArray(e.quotes)||(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(i=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(s=e.escapeChar+i),e.escapeFormulae instanceof RegExp?f=e.escapeFormulae:"boolean"==typeof e.escapeFormulae&&e.escapeFormulae&&(f=/^[=+\-@\t\r].*$/)}})(),new RegExp(h(i),"g"));if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return d(null,t,u);if("object"==typeof t[0])return d(l||Object.keys(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),d(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function d(t,e,n){var i="",c=("string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t)&&0<t.length),s=!Array.isArray(e[0]);if(c&&r){for(var u=0;u<t.length;u++)0<u&&(i+=o),i+=y(t[u],u);0<e.length&&(i+=a)}for(var l=0;l<e.length;l++){var f=(c?t:e[l]).length,p=!1,d=c?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!c&&(p="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&c){for(var h=[],g=0;g<f;g++){var v=s?t[g]:g;h.push(e[l][v])}p=""===h.join("").trim()}if(!p){for(var m=0;m<f;m++){0<m&&!d&&(i+=o);var b=c&&s?t[m]:m;i+=y(e[l][b],m)}l<e.length-1&&(!n||0<f&&!d)&&(i+=a)}}return i}function y(t,e){var r,a;return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(a=!1,f&&"string"==typeof t&&f.test(t)&&(t="'"+t,a=!0),r=t.toString().replace(p,s),(a=a||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||((t,e)=>{for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1})(r,c.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=d,c.NetworkStreamer=u,c.FileStreamer=l,c.StringStreamer=f,c.ReadableStreamStreamer=p,n.jQuery&&((e=n.jQuery).fn.parse=function(t){var r=t.config||{},o=[];return this.each(function(t){if("INPUT"!==e(this).prop("tagName").toUpperCase()||"file"!==e(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:e.extend({},r)})}),a(),this;function a(){if(0===o.length)S(t.complete)&&t.complete();else{var n,r,a,s=o[0];if(S(t.before)){var u=t.before(s.file,s.inputElem);if("object"==typeof u){if("abort"===u.action)return n=s.file,r=s.inputElem,a=u.reason,void(S(t.error)&&t.error({name:"AbortError"},n,r,a));if("skip"===u.action)return void i();"object"==typeof u.config&&(s.instanceConfig=e.extend(s.instanceConfig,u.config))}else if("skip"===u)return void i()}var l=s.instanceConfig.complete;s.instanceConfig.complete=function(t){S(l)&&l(t,s.file,s.inputElem),i()},c.parse(s.file,s.instanceConfig)}}function i(){o.splice(0,1),a()}}),o&&(n.onmessage=function(t){t=t.data,void 0===c.WORKER_ID&&t&&(c.WORKER_ID=t.workerId),"string"==typeof t.input?n.postMessage({workerId:c.WORKER_ID,results:c.parse(t.input,t.config),finished:!0}):(n.File&&t.input instanceof File||t.input instanceof Object)&&(t=c.parse(t.input,t.config))&&n.postMessage({workerId:c.WORKER_ID,results:t,finished:!0})}),(u.prototype=Object.create(s.prototype)).constructor=u,(l.prototype=Object.create(s.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(s.prototype)).constructor=p,c},void 0===(r=n.apply(e,[]))||(t.exports=r)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(){var n,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(t,o,a,i){var c=o&&o.prototype instanceof u?o:u,l=Object.create(c.prototype);return e(l,"_invoke",function(t,e,o){var a,i,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:n,a:d,f:d.bind(n,4),d:function(t,e){return a=t,i=0,c=n,p.n=e,s}};function d(t,e){for(i=t,c=e,r=0;!f&&u&&!o&&r<l.length;r++){var o,a=l[r],d=p.p,h=a[2];t>3?(o=h===e)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=d&&((o=t<2&&d<a[1])?(i=0,p.v=e,p.n=a[1]):d<h&&(o=t<3||a[0]>e||e>h)&&(a[4]=t,a[5]=e,p.n=h,i=0))}if(o||t>1)return s;throw f=!0,e}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),i=l,c=h;(r=i<2?n:c)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,c)):p.n=c:p.v=c);try{if(u=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((r=(f=p.n<0)?c:t.call(e,p))!==s)break}catch(t){a=n,i=1,c=t}finally{u=1}}return{value:r,done:f}}}(t,a,i),!0),l}var s={};function u(){}function l(){}function f(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(e(r={},a,function(){return this}),r),d=f.prototype=u.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,e(d,"constructor",f),e(f,"constructor",l),l.displayName="GeneratorFunction",e(f,i,"GeneratorFunction"),e(d),e(d,i,"Generator"),e(d,a,function(){return this}),e(d,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:h}})()}function e(t,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,r,o){if(n)a?a(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r;else{var i=function(n,r){e(t,n,function(t){return this._invoke(n,r,t)})};i("next",0),i("throw",1),i("return",2)}},e(t,n,r,o)}function r(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,s,"next",t)}function s(t){r(i,o,a,c,s,"throw",t)}c(void 0)})}}var a,i,c,s,u,l;const f={test:function(t){console.log("Got data in test:",t.rank_plot)},fetchFromPython:(l=o(t().m(function e(n){var r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(n);case 1:if((r=t.v).ok){t.n=3;break}return console.log("Retrying Fetch..."),t.n=2,fetch(n);case 2:r=t.v;case 3:return t.n=4,r.json();case 4:return o=t.v,t.a(2,o||null)}},e)})),function(t){return l.apply(this,arguments)}),fetchHeroData:(u=o(t().m(function e(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},e,this)})),function(){return u.apply(this,arguments)}),fetchBattleData:(s=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return s.apply(this,arguments)}),fetchSeasonDetails:(c=o(t().m(function e(){var n,r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return n=t.v,t.n=2,n.json();case 2:if(!(r=t.v).success){t.n=3;break}return o=JSON.parse(r.seasonDetails),t.a(2,{seasonDetails:o,error:!1});case 3:return t.a(2,{seasonDetails:null,error:r.error});case 4:return t.a(2)}},e)})),function(){return c.apply(this,arguments)}),fetchUser:(i=o(t().m(function e(n){var r,o,a,i,c;return t().w(function(t){for(;;)switch(t.n){case 0:if(n.name&&n.world_code||n.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:n})});case 2:return r=t.v,t.n=3,r.json();case 3:if(o=t.v,t.p=4,!r.ok){t.n=9;break}if(o.foundUser){t.n=7;break}if(!n.name){t.n=5;break}return a=n.world_code.replace("world_",""),t.a(2,{user:null,error:'Could not find user: "'.concat(n.name,'" in world_code: ').concat(a)});case 5:if(!n.id){t.n=6;break}return t.a(2,{user:null,error:"Could not find user with ID: ".concat(n.id)});case 6:t.n=8;break;case 7:return i=o.user,console.log("Server communication successful; received response data for user"),console.log("Found user: ".concat(JSON.stringify(i))),t.a(2,{user:i,error:!1});case 8:t.n=10;break;case 9:return console.log("Server communication unsuccessful"),t.a(2,{user:null,error:o.error});case 10:t.n=12;break;case 11:return t.p=11,c=t.v,console.error("Error fetching and caching user: ".concat(c)),t.a(2,{user:null,error:c.message});case 12:return t.a(2)}},e,null,[[4,11]])})),function(t){return i.apply(this,arguments)}),fetchDataFromID:(a=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass ID to fetch user");case 1:return t.n=2,fetch("/api/get_battle_data_from_id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return a.apply(this,arguments)})};var p,d=n(809),h=n.n(d),y=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),g={world_global:"Global",world_kor:"Korea",world_jpn:"Japan",world_asia:"Asia",world_eu:"Europe"},v=864e5,m={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},b=["Date/Time","Seq Num","P1 ID","P1 Server","P1 League","P1 Points","P2 ID","P2 Server","P2 League","Win","First Pick","P1 Preban 1","P1 Preban 2","P2 Preban 1","P2 Preban 2","P1 Pick 1","P1 Pick 2","P1 Pick 3","P1 Pick 4","P1 Pick 5","P2 Pick 1","P2 Pick 2","P2 Pick 3","P2 Pick 4","P2 Pick 5","P1 Postban","P2 Postban"],w=function(t){for(var e=new Uint8Array(30001),n=[],r=2;r<=t;r++)if(!e[r]){n.push(r);for(var o=r*r;o<=t;o+=r)e[o]=1}return n}(3e4);function S(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return _(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(_(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,_(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,_(f,"constructor",u),_(u,"constructor",s),s.displayName="GeneratorFunction",_(u,o,"GeneratorFunction"),_(f),_(f,o,"Generator"),_(f,r,function(){return this}),_(f,"toString",function(){return"[object Generator]"}),(S=function(){return{w:a,m:p}})()}function _(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){_(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},_(t,e,n,r)}function E(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function P(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function O(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return T(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,T(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,T(f,"constructor",u),T(u,"constructor",s),s.displayName="GeneratorFunction",T(u,o,"GeneratorFunction"),T(f),T(f,o,"Generator"),T(f,r,function(){return this}),T(f,"toString",function(){return"[object Generator]"}),(O=function(){return{w:a,m:p}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){T(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},T(t,e,n,r)}function A(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){A(a,r,o,i,c,"next",t)}function c(t){A(a,r,o,i,c,"throw",t)}i(void 0)})}}function D(t){return j.apply(this,arguments)}function j(){return(j=I(O().m(function t(e){var n,r,o;return O().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error: status: ".concat(n.status));case 2:return t.n=3,n.json();case 3:return r=t.v,console.log("Fetched data from E7 Server; keys:",Object.keys(r)),t.a(2,r);case 4:return t.p=4,o=t.v,console.error("Error fetching global user data:",o),t.a(2,null)}},t,null,[[0,4]])}))).apply(this,arguments)}function R(){return R=I(O().m(function t(){var e,n,r=arguments;return O().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,D("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find hero data for language:",e),n=null),t.a(2,n)}},t)})),R.apply(this,arguments)}function x(){return(x=I(O().m(function t(e){var n,r;return O().w(function(t){for(;;)switch(t.n){case 0:if(e=e.replace("world_",""),P(y).some(function(t){return t.replace("world_","")===e})){t.n=1;break}return console.error("Could not find world code: ".concat(e)),t.a(2,null);case 1:return console.log("Fetching users for world code: ".concat(e," from E7 Server...")),n="https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_".concat(e,".json"),t.n=2,D(n);case 2:return(r=t.v)&&console.log("Got user data for world: ".concat(e," ; Found ").concat(r.users.length," users")),t.a(2,r)}},t)}))).apply(this,arguments)}p=S().m(function t(e){var n,r,o;return S().w(function(t){for(;;)switch(t.n){case 0:return this.validateCSV(e),t.n=1,e.text();case 1:if(n=t.v,(r=h().parse(n,{header:!0,skipEmptyLines:!0,quoteChar:'"',dynamicTyping:!1})).meta.fields.forEach(function(t,e){var n=t.trim().replace(/"/g,"");if(n!==b[e])throw new Error("Header ".concat(n," does not match expected column ").concat(b[e]," at index ").concat(e))}),!(r.errors.length>0)){t.n=2;break}throw o=r.errors[0],new Error("Failed to parse CSV: Row ".concat(o.row,", ").concat(o.message));case 2:return t.a(2,r.data)}},t,this)});const L={fetchHeroJSON:function(){return R.apply(this,arguments)},fetchUserJSON:function(t){return x.apply(this,arguments)}},F=(t,e)=>e.some(e=>t instanceof e);let C,N;const M=new WeakMap,B=new WeakMap,G=new WeakMap;let U={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return M.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function H(t){U=t(U)}function K(t){return"function"==typeof t?(e=t,(N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(q(this),t),V(this.request)}:function(...t){return V(e.apply(q(this),t))}):(t instanceof IDBTransaction&&function(t){if(M.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});M.set(t,e)}(t),F(t,C||(C=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,U):t);var e}function V(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(V(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return G.set(e,t),e}(t);if(B.has(t))return B.get(t);const e=K(t);return e!==t&&(B.set(t,e),G.set(e,t)),e}const q=t=>G.get(t);function W(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),c=V(i);return r&&i.addEventListener("upgradeneeded",t=>{r(V(i.result),t.oldVersion,t.newVersion,V(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const z=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],Y=new Map;function X(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Y.get(e))return Y.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=J.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!z.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return Y.set(e,a),a}H(t=>({...t,get:(e,n,r)=>X(e,n)||t.get(e,n,r),has:(e,n)=>!!X(e,n)||t.has(e,n)}));const $=["continue","continuePrimaryKey","advance"],Q={},Z=new WeakMap,tt=new WeakMap,et={get(t,e){if(!$.includes(e))return t[e];let n=Q[e];return n||(n=Q[e]=function(...t){Z.set(this,tt.get(this)[e](...t))}),n}};async function*nt(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,et);for(tt.set(n,e),G.set(n,q(e));e;)yield n,e=await(Z.get(n)||e.continue()),Z.delete(n)}function rt(t,e){return e===Symbol.asyncIterator&&F(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&F(t,[IDBIndex,IDBObjectStore])}function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return it(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(it(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,it(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,it(f,"constructor",u),it(u,"constructor",s),s.displayName="GeneratorFunction",it(u,o,"GeneratorFunction"),it(f),it(f,o,"Generator"),it(f,r,function(){return this}),it(f,"toString",function(){return"[object Generator]"}),(at=function(){return{w:a,m:p}})()}function it(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}it=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){it(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},it(t,e,n,r)}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function st(t,e,n){return(e=function(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ut(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function lt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ut(a,r,o,i,c,"next",t)}function c(t){ut(a,r,o,i,c,"throw",t)}i(void 0)})}}function ft(t,e){return pt.apply(this,arguments)}function pt(){return(pt=lt(at().m(function t(e,n){var r;return at().w(function(t){for(;;)switch(t.n){case 0:return(r=e.transaction(n,"readwrite")).objectStore(n).clear(),t.n=1,r.done;case 1:return t.a(2)}},t)}))).apply(this,arguments)}H(t=>({...t,get:(e,n,r)=>rt(e,n)?nt:t.get(e,n,r),has:(e,n)=>rt(e,n)||t.has(e,n)}));var dt,ht,yt,gt,vt,mt,bt,wt,St,_t,Et,Pt,kt,Ot,Tt,At,It,Dt,jt={USER:"current-user",HERO_MANAGER:"hero-manager",BATTLES:"battles",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",FILTER_STR:"filter-str",STATS:"stats",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},Rt={autoZoom:jt.AUTO_ZOOM_FLAG,autoQuery:jt.AUTO_QUERY_FLAG},xt={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach(function(e){st(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},jt),MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:(Dt=lt(at().m(function t(){return at().w(function(t){for(;;)if(0===t.n)return t.a(2,W(xt.consts.DB_NAME,xt.consts.DB_VERSION,{upgrade:function(t){t.objectStoreNames.contains(xt.consts.STORE_NAME)&&(t.deleteObjectStore(xt.consts.STORE_NAME),console.log("Old store deleted")),t.objectStoreNames.contains(xt.consts.STORE_NAME)||(console.log("Created data store"),t.createObjectStore(xt.consts.STORE_NAME)),t.objectStoreNames.contains(xt.consts.META_STORE_NAME)||(console.log("Created meta data store"),t.createObjectStore(xt.consts.META_STORE_NAME))}}))},t)})),function(){return Dt.apply(this,arguments)}),get:(It=lt(at().m(function t(e){var n,r;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.get(this.consts.STORE_NAME,e);case 2:if(null===(r=t.v)){t.n=3;break}console.log("Found ".concat(e," in cache")),t.n=4;break;case 3:return console.log("".concat(e," not found in cache; returning null")),t.a(2,null);case 4:return t.n=5,this.checkCacheTimeout(e);case 5:if(!t.v){t.n=6;break}return console.log("Timeout not reached, using cache for ".concat(e)),t.a(2,r);case 6:return console.log("Timeout reached, returning null for ".concat(e)),t.a(2,null);case 7:return t.a(2)}},t,this)})),function(t){return It.apply(this,arguments)}),cache:(At=lt(at().m(function t(e,n){var r;return at().w(function(t){for(;;)switch(t.n){case 0:return console.log("Caching ".concat(e," with data: ").concat(n)),t.n=1,this.openDB();case 1:return r=t.v,t.n=2,r.put(this.consts.STORE_NAME,n,e);case 2:return t.n=3,this.setTimestamp(e,Date.now());case 3:return t.a(2)}},t,this)})),function(t,e){return At.apply(this,arguments)}),delete:(Tt=lt(at().m(function t(e){var n;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.delete(this.consts.STORE_NAME,e);case 2:return t.n=3,this.deleteTimestamp(e);case 3:return t.a(2)}},t,this)})),function(t){return Tt.apply(this,arguments)}),deleteDB:(Ot=lt(at().m(function t(){return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,indexedDB.deleteDatabase(this.consts.DB_NAME);case 1:console.log("Database deleted");case 2:return t.a(2)}},t,this)})),function(){return Ot.apply(this,arguments)}),getTimestamp:(kt=lt(at().m(function t(e){var n,r,o;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.get(this.consts.META_STORE_NAME,r);case 2:return o=t.v,t.a(2,null!=o?o:null)}},t,this)})),function(t){return kt.apply(this,arguments)}),setTimestamp:(Pt=lt(at().m(function t(e,n){var r,o,a;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return r=t.v,o="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,r.put(this.consts.META_STORE_NAME,n,o);case 2:return t.n=3,r.get(this.consts.META_STORE_NAME,o);case 3:a=t.v,console.log("Timestamp set: ".concat(a));case 4:return t.a(2)}},t,this)})),function(t,e){return Pt.apply(this,arguments)}),deleteTimestamp:(Et=lt(at().m(function t(e){var n,r;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.delete(this.consts.META_STORE_NAME,r);case 2:console.log("Timestamp deleted for <".concat(e,">"));case 3:return t.a(2)}},t,this)})),function(t){return Et.apply(this,arguments)}),clearData:(_t=lt(at().m(function t(){var e;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return e=t.v,t.n=2,ft(e,this.consts.STORE_NAME);case 2:return t.n=3,ft(e,this.consts.META_STORE_NAME);case 3:console.log("All data cleared from data cache and meta data cache");case 4:return t.a(2)}},t,this)})),function(){return _t.apply(this,arguments)}),clearUserData:(St=lt(at().m(function t(){var e,n=this;return at().w(function(t){for(;;)switch(t.n){case 0:return e=[jt.USER,jt.BATTLES,jt.UPLOADED_BATTLES,jt.FILTERED_BATTLES,jt.FILTER_STR,jt.STATS],t.n=1,Promise.all(e.map(function(t){return n.delete(t)}));case 1:console.log("User data cleared from data cache");case 2:return t.a(2)}},t)})),function(){return St.apply(this,arguments)}),clearSeasonData:(wt=lt(at().m(function t(){return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.delete(jt.SEASON_DETAILS);case 1:console.log("Season data cleared from data cache");case 2:return t.a(2)}},t,this)})),function(){return wt.apply(this,arguments)}),checkCacheTimeout:(bt=lt(at().m(function t(e){var n,r;return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getTimestamp(e);case 1:if(n=t.v,r=Date.now(),console.log("Checking Timeout for <".concat(e,"> | Current time: ").concat(r,", cache timestamp: ").concat(n,", difference: ").concat(r-n," ms")),n&&!(r-n>xt.consts.CACHE_TIMEOUT)){t.n=3;break}return console.log("Cache timeout reached, clearing data from <".concat(e,">")),t.n=2,this.delete(e);case 2:return t.a(2,!1);case 3:return t.a(2,!0)}},t,this)})),function(t){return bt.apply(this,arguments)}),getFilterStr:(mt=lt(at().m(function t(){return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(xt.Keys.FILTER_STR);case 1:return t.a(2,t.v)}},t,this)})),function(){return mt.apply(this,arguments)}),setFilterStr:(vt=lt(at().m(function t(e){return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(xt.Keys.FILTER_STR,e);case 1:return t.a(2)}},t,this)})),function(t){return vt.apply(this,arguments)}),getStats:(gt=lt(at().m(function t(){return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(xt.Keys.STATS);case 1:return t.a(2,t.v)}},t,this)})),function(){return gt.apply(this,arguments)}),setStats:(yt=lt(at().m(function t(e){return at().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(jt.STATS,e);case 1:return t.a(2)}},t,this)})),function(t){return yt.apply(this,arguments)}),getFlag:(ht=lt(at().m(function t(e){var n;return at().w(function(t){for(;;)switch(t.n){case 0:if(n=Rt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.get(n);case 2:return t.a(2,t.v)}},t,this)})),function(t){return ht.apply(this,arguments)}),setFlag:(dt=lt(at().m(function t(e,n){var r;return at().w(function(t){for(;;)switch(t.n){case 0:if(r=Rt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.cache(r,n);case 2:return t.a(2)}},t,this)})),function(t,e){return dt.apply(this,arguments)})};const Lt=xt;function Ft(t){var e={};for(var n in t)Array.isArray(t[n])&&t[n].length>0?e[n]=[t[n][0],"Length: ".concat(t[n].length)]:e[n]=t[n];console.log(e)}function Ct(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Nt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t,e){if(t){if("string"==typeof t)return Mt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(t,e):void 0}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Bt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Gt(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Gt(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Gt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Gt(f,"constructor",u),Gt(u,"constructor",s),s.displayName="GeneratorFunction",Gt(u,o,"GeneratorFunction"),Gt(f),Gt(f,o,"Generator"),Gt(f,r,function(){return this}),Gt(f,"toString",function(){return"[object Generator]"}),(Bt=function(){return{w:a,m:p}})()}function Gt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Gt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Gt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Gt(t,e,n,r)}function Ut(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Ht(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Ut(a,r,o,i,c,"next",t)}function c(t){Ut(a,r,o,i,c,"throw",t)}i(void 0)})}}var Kt,Vt,qt,Wt,zt={getHeroManager:(Wt=Ht(Bt().m(function t(){var e,n,r,o;return Bt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.get(Lt.Keys.HERO_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=this.fetchAndCacheHeroManager();case 4:return t.a(2,o)}},t,this)})),function(){return Wt.apply(this,arguments)}),createHeroManager:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Nt(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Ct(e.value,2),o=r[0],a=r[1],i=w[o];a.prime=i}}catch(t){n.e(t)}finally{n.f()}var c={heroes:t};return c=function(t){console.log("Adding Lookup Dicts"),console.log("\tAdding name lookup"),t.name_lookup=t.heroes.reduce(function(t,e){return t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t},{}),console.log("\tAdding prime lookup"),t.prime_lookup=t.heroes.reduce(function(t,e){return t[e.prime]=e,t},{}),console.log("\tAdding code lookup"),t.code_lookup=t.heroes.reduce(function(t,e){return t[e.code]=e,t},{}),console.log("\tAdding prime pair lookup");var e=t.heroes.reduce(function(t,e){return t[e.prime]=e.name,t},{}),n=Object.keys(t.prime_lookup).length-1;console.log("\tAdding prime pair lookup; primes to process",n);for(var r=0;r<n-1;r++)for(var o=w[r],a=r+1;a<n;a++){var i=w[a],c=o*i,s=t.prime_lookup[o].name,u=t.prime_lookup[i].name;e[c]=[s,u].sort().join(", ")}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.prime],t.prime_pair_lookup=e,t}(c=function(t){var e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:w[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(c)),c},fetchHeroManager:(qt=Ht(Bt().m(function t(){var e,n,r,o,a,i;return Bt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,L.fetchHeroJSON();case 1:if(a=e=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==e;case 2:if(!o){t.n=3;break}i=e,t.n=5;break;case 3:return t.n=4,f.fetchHeroData();case 4:i=t.v;case 5:return n=i.en,r=this.createHeroManager(n),console.log("Created HeroManager using raw data received from server"),t.a(2,r)}},t,this)})),function(){return qt.apply(this,arguments)}),fetchAndCacheHeroManager:(Vt=Ht(Bt().m(function t(){var e;return Bt().w(function(t){for(;;)switch(t.n){case 0:return console.log("HeroManager not found in cache, fetching from server and caching it"),t.n=1,this.fetchHeroManager();case 1:return e=t.v,t.n=2,Lt.cache(Lt.Keys.HERO_MANAGER,e);case 2:return console.log("Cached HeroManager using raw data recieved from server"),Ft(e),t.a(2,e)}},t,this)})),function(){return Vt.apply(this,arguments)}),deleteHeroManager:(Kt=Ht(Bt().m(function t(){return Bt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.delete(Lt.Keys.HERO_MANAGER);case 1:console.log("Removed hero manager from cache");case 2:return t.a(2)}},t)})),function(){return Kt.apply(this,arguments)}),getHeroByName:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;var r=t.toLowerCase().replace(/\s+/g,"");return null!==(n=e.name_lookup[r])&&void 0!==n?n:null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?null!==(n=e.code_lookup[t])&&void 0!==n?n:null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}};const Jt=zt;function Yt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Xt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){if(t){if("string"==typeof t)return $t(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(t,e):void 0}}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Qt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])}),e||(e={name:"UID: ".concat(t[0]["P1 ID"])});var o,a=t.map(function(t,e){return e}),i=t.map(function(t){return t["P1 Points"]}),c=[],s={startX:null,endX:null,startY:null,endY:null},u=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Xt(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(u.s();!(o=u.n()).done;){var l=Yt(o.value,2),f=l[0],p=l[1];n&&p["Seq Num"]in n?(!0===r&&(s.startX=f<s.startX||null===s.startX?f-.5:s.startX,s.startY=p["P1 Points"]<s.startY+50||null===s.startY?p["P1 Points"]-50:s.startY,s.endX=f>s.endX||null===s.endX?f+.5:s.endX,s.endY=p["P1 Points"]>s.endY-50||null===s.endY?p["P1 Points"]+50:s.endY),c.push("#ff9900")):c.push("#0df8fd")}}catch(t){u.e(t)}finally{u.f()}var d={x:a,y:i,mode:"lines+markers",line:{color:"#4f9293",width:2},marker:{symbol:"circle",size:4,color:c},customdata:t.map(function(t){return[t["Date/Time"].slice(0,10),t["P1 League"]]}),hovertemplate:"Points: %{y}<br>Date: %{customdata[0]}<br>League: %{customdata[1]}<extra></extra>"},h={autosize:!0,font:{family:"Roboto, Open Sans"},title:{text:"".concat(e.name,"'s RTA Point Plot"),font:{size:24,color:"#dddddd"},xanchor:"center",yanchor:"top",y:.95,x:.5},xaxis:{title:{text:"Battle Number (Chronological)",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!1,tickfont:{size:12,color:"#dddddd"},range:s.startX?[s.startX,s.endX]:null},yaxis:{title:{text:"Victory Points",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!0,zerolinecolor:"#dddddd",zerolinewidth:2,tickfont:{size:12,color:"#dddddd"},range:s.startY?[s.startY,s.endY]:null},plot_bgcolor:"#1e222d",paper_bgcolor:"#1e222d"},y="plot-".concat(Math.random().toString(36).substr(2,9));return'<div id="'.concat(y,'"></div>')+"\n<script>\n    Plotly.newPlot('".concat(y,"', [").concat(JSON.stringify(d),"], ").concat(JSON.stringify(h),", ").concat(JSON.stringify({responsive:!0}),");\n<\/script>\n")}function Zt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")(?=[,)\\s;]|$)"),e)}function te(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")$"),e)}var ee=/[a-z][a-z0-9.\s]*/i,ne=/\d{4}-\d{2}-\d{2}/,re=/\{\s*\}/,oe=/\d+/,ae=/season-[1-9]+[0-9]*(\.[1-9]*)?|current-season/i,ie=new RegExp("^".concat(ne.source,"$"),"i"),ce=new RegExp("(?:".concat(ae.source,")"),"i"),se=/(?:date|is-first-pick|is-win|victory-points|p1.picks|p1.prebans|p2.prebans|prebans|p2.picks|p1.pick1|p1.pick2|p1.pick3|p1.pick4|p1.pick5|p2.pick1|p2.pick2|p2.pick3|p2.pick4|p2.pick5|p1.league|p2.league|p1.postban|p2.postban|p1.server|p2.server)/i,ue=ee.source,le=oe.source,fe=ne.source,pe=se.source,de=ce.source,he=new RegExp('"('.concat(ue,")\"|'(").concat(ue,")'"),"i"),ye=new RegExp(te(he),"i"),ge=he.source,ve=new RegExp("(?:".concat(ge,"|").concat(ue,"|").concat(fe,")"),"i"),me=new RegExp("(?:".concat(pe,"|").concat(de,")"),"i"),be=ve.source,we=new RegExp("\\{\\s*(?:".concat(be,"\\s*)(?:,\\s*").concat(be,"\\s*)*,?\\s*\\}|").concat(re.source),"i"),Se=new RegExp("".concat(le,"\\.\\.\\.").concat(le,"|").concat(fe,"\\.\\.\\.").concat(fe,"|").concat(le,"\\.\\.\\.=").concat(le,"|").concat(fe,"\\.\\.\\.=").concat(fe)),_e=new RegExp("^".concat(Se.source,"$")),Ee={VALID_STRING_RE:ee,VALID_DATE_RE:ne,VALID_INT_RE:oe,EMPTY_SET_RE:re,SET_ELEMENT_RE:ve,VALID_SET_RE:we,VALID_STRING_LITERAL_RE:ye,VALID_DATE_LITERAL_RE:ie,VALID_INT_LITERAL_RE:/^\d+$/,VALID_BOOL_LITERAL_RE:/^(true|false)$/i,VALID_RANGE_RE:Se,VALID_RANGE_LITERAL_RE:_e,VALID_SEASON_RE:ae,VALID_SEASON_LITERAL_RE:te(ae),VALID_DATA_WORD_RE:ce,VALID_DATA_WORD_LITERAL_RE:te(ce),VALID_FIELD_WORD_RE:se,VALID_DATAFIELD_RE:me,VALID_GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:te(ye),padRegex:Zt,anchorExp:te,tokenMatch:function(t){return t.match(/AND(?=\()|OR(?=\()|XOR(?=\()|NOT(?=\()|LAST-N(?=\()/i)?(console.log("Matched stream as clause:",t),"keyword"):t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?(console.log("Matched stream as operator:",t),"operator"):t.match(new RegExp("[a-z0-9.\"'}=)-]".concat(me.source,"(?=[,)\\s;]|$)"),"i"))?(console.log("Matched stream as field with preceding fragment:",t),null):t.match(Zt(me))?(console.log("Matched stream as Data Field:",t),"datafield"):t.match(/[^(,\s;.=0-9]+\d+/i)?(console.log("Matched stream as non-num null"),null):t.match(Zt(Se))?(console.log("Matched stream as range:",t),"range"):t.match(Zt(oe))?(console.log("Matched stream as number:",t),"number"):t.match(Zt(ne))?(console.log("Matched stream as date:",t),"date"):t.match(Zt(we))?(console.log("Matched stream as set:",t),"set"):t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?(console.log("Matched stream as bool:",t),"bool"):t.match(Zt(he))?(console.log("Matched stream as string:",t),"string"):t.match(/[\(\)\{\}\;\,]/)?(console.log("Matched stream as bracket:",t),"bracket"):(t.next(),console.log("Matched stream as null:",t),null)}};function Pe(t){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pe(t)}function ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Te(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Te(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Te(t,e){if(t){if("string"==typeof t)return Ae(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(t,e):void 0}}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,je(r.key),r)}}function De(t,e,n){return e&&Ie(t.prototype,e),n&&Ie(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function je(t){var e=function(t){if("object"!=Pe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pe(e)?e:e+""}function Re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xe(t,e,n){return e=Me(e),function(t,e){if(e&&("object"==Pe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ce()?Reflect.construct(e,n||[],Me(t).constructor):e.apply(t,n))}function Le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}function Fe(t){var e="function"==typeof Map?new Map:void 0;return Fe=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Ce())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Ne(o,n.prototype),o}(t,arguments,Me(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ne(n,t)},Fe(t)}function Ce(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ce=function(){return!!t})()}function Ne(t,e){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ne(t,e)}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}var Be=function(t){function e(t){var n;return Re(this,e),(n=xe(this,e,[t])).name="Filter Syntax Exception",n}return Le(e,t),De(e)}(Fe(Error)),Ge=function(t){function e(t){var n;return Re(this,e),(n=xe(this,e,[t])).name="Filter Type Exception",n}return Le(e,t),De(e)}(Fe(Error)),Ue=function(t){function e(t){var n;return Re(this,e),(n=xe(this,e,[t])).name="Filter Validation Error",n}return Le(e,t),De(e)}(Fe(Error)),He={"(":")","{":"}",'"':'"',"'":"'"},Ke=Object.fromEntries(Object.entries(He).filter(function(t){var e=ke(t,2);return e[0]!==e[1]}).map(function(t){var e=ke(t,2),n=e[0];return[e[1],n]}));const Ve={SyntaxException:Be,TypeException:Ge,ValidationError:Ue,retrieveEnclosure:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:")";if(e===n)throw new Error("Enclosure characters must be different: ".concat(e," = ").concat(n));var r,o=!1,a=0,i="",c=Oe(function(t){return function(t){if(Array.isArray(t))return Ae(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Te(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).entries());try{for(c.s();!(r=c.n()).done;){var s=ke(r.value,2),u=s[0],l=s[1];if(l===e){if(a+=1,!o){o=!0;continue}}else l===n&&(a-=1);if(0===a&&o){if(u!=t.length-1)throw new Be("Enclosure should not be resolved before end of string; resolved at index: ".concat(u,"; input string: ").concat(t));return i}if(a<0)throw new Be("Unbalanced enclosure at index: ".concat(u," of input string: ").concat(t,'; balance of "').concat(e,"...").concat(n,'" enclosures became negative.'));o&&(i+=l)}}catch(t){c.e(t)}finally{c.f()}if(!o)throw new Be("Enclosure of type ".concat(e,"...").concat(n," not found in string; input string: ").concat(t));if(a>0)throw new Be("Enclosure could not be resolved; too many '".concat(n,"'; balance = +{count}; input string {string}"))},retrieveArgs:function(t){var e,n=0,r=[],o="",a=Oe(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;if("("===i){if(1===(n+=1))continue}else")"===i&&(n-=1);1===n&&","===i?(r.push(o.trim()),o=""):n>=1&&(o+=i)}}catch(t){a.e(t)}finally{a.f()}return o.trim()&&r.push(o.trim()),r},getCharCounts:function(t){var e,n={},r=Oe(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=(n[o]||0)+1}}catch(t){r.e(t)}finally{r.f()}return n},tokenizeWithNestedEnclosures:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],a="",i=[],c=0;c<t.length;c++){var s=t[c];if(e.includes(s)&&i.length===n)a&&(o.push(r?a.trim():a),a="");else if(Ke[s]){var u=Ke[s];if(i.length>n&&(a+=s),i[i.length-1]!==u)throw new Error("Unbalanced closing bracket at position ".concat(c));i.pop()}else i.length>=n&&(a+=s),He[s]&&(i[i.length-1]===He[s]&&s===He[s]?i.pop():i.push(s))}if(i.length>0)throw new Error("Unbalanced enclosures in input string; unresolved characters from enclosure stack: ",i);return a&&o.push(r?a.trim():a),o},parseDate:function(t){if(!Ee.VALID_DATE_LITERAL_RE.test(t))throw new Be("Invalid date; must be in the format: YYYY-MM-DD ( regex: ".concat(Ee.VALID_DATE_LITERAL_RE.source," ); got: '").concat(t,"'"));var e=t.split(" ")[0],n=new Date("".concat(e,"T00:00:00"));if(isNaN(n.getTime()))throw new Be("Invalid date; could not be parsed as a valid date; got: '".concat(t,"'"));var r=ke(n.toISOString().split("T")[0].split("-").map(Number),3),o=r[0],a=r[1],i=r[2];if(n.getFullYear()!==o||n.getMonth()+1!==a||n.getDate()!==i)throw new Be("Invalid date; parsed date: ".concat(n.toISOString()," does not match passed in string: ").concat(e));return console.log("Parsed date: ".concat(n.toISOString()," ; ").concat(n.constructor.name)),n},tryConvert:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===r&&(r="Could not convert ".concat(n," to ").concat(e));try{return t(n)}catch(t){throw new Ge("".concat(r,": ").concat(t.message))}}};function qe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return We(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(We(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,We(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,We(f,"constructor",u),We(u,"constructor",s),s.displayName="GeneratorFunction",We(u,o,"GeneratorFunction"),We(f),We(f,o,"Generator"),We(f,r,function(){return this}),We(f,"toString",function(){return"[object Generator]"}),(qe=function(){return{w:a,m:p}})()}function We(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}We=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){We(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},We(t,e,n,r)}function ze(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Je(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ze(a,r,o,i,c,"next",t)}function c(t){ze(a,r,o,i,c,"throw",t)}i(void 0)})}}var Ye,Xe,$e,Qe={fetchAndCacheSeasonDetails:($e=Je(qe().m(function t(){var e,n,r,o,a,i;return qe().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))})}),n.sort(function(t,e){return t["Season Number"]-e["Season Number"]}),r=[n[0]],o=n[0],n.slice(1).forEach(function(t){var e=new Date(+o.range[1]+v),n=new Date(+t.range[0]-v),a={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};r.push(a),r.push(t),o=t}),o.range[1]<new Date&&(a=new Date(+r.at(-1).range[1]+v),i={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(season.Season),Start:a.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[a,new Date]},r.push(i)),r.reverse(),t.n=3,Lt.cache(Lt.Keys.SEASON_DETAILS,r);case 3:return t.a(2,r)}},t)})),function(){return $e.apply(this,arguments)}),getSeasonDetails:(Xe=Je(qe().m(function t(){var e,n,r,o;return qe().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.get(Lt.Keys.SEASON_DETAILS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,Qe.fetchAndCacheSeasonDetails();case 4:o=t.v;case 5:return t.a(2,o)}},t)})),function(){return Xe.apply(this,arguments)}),clearSeasonDetails:(Ye=Je(qe().m(function t(){return qe().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.delete(Lt.Keys.SEASON_DETAILS);case 1:console.log("Season details cleared from data cache");case 2:return t.a(2)}},t)})),function(){return Ye.apply(this,arguments)})};const Ze=Qe;function tn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return en(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(en(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,en(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,en(f,"constructor",u),en(u,"constructor",s),s.displayName="GeneratorFunction",en(u,o,"GeneratorFunction"),en(f),en(f,o,"Generator"),en(f,r,function(){return this}),en(f,"toString",function(){return"[object Generator]"}),(tn=function(){return{w:a,m:p}})()}function en(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}en=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){en(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},en(t,e,n,r)}function nn(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function rn(t){return function(t){if(Array.isArray(t))return vn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||gn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||gn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(t,e,n){return e=sn(e),function(t,e){if(e&&("object"==mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cn()?Reflect.construct(e,n||[],sn(t).constructor):e.apply(t,n))}function cn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(cn=function(){return!!t})()}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}function un(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ln(t,e)}function ln(t,e){return ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ln(t,e)}function fn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hn(r.key),r)}}function dn(t,e,n){return e&&pn(t.prototype,e),n&&pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function hn(t){var e=function(t){if("object"!=mn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mn(e)?e:e+""}function yn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=gn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function gn(t,e){if(t){if("string"==typeof t)return vn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(t,e):void 0}}function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}var bn=new Set("'\"(),-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function wn(t,e){var n="object"===mn(e)?JSON.stringify(e):"".concat(e);if(e instanceof Set)return e.has(t);if("object"===mn(e)&&null!==e&&!Array.isArray(e)&&["start","end","endInclusive","type"].every(function(t){return e.hasOwnProperty(t)}))return t>=e.start&&(e.endInclusive?t<=e.end:t<e.end);if(Array.isArray(e))return e.includes(t);throw new Error("Invalid match pattern for 'in' operators; got: '".concat(t,"' and '").concat(n,"' (").concat(e.constructor.name,")"))}var Sn={">":function(t,e){return t>e},"<":function(t,e){return t<e},"=":function(t,e){return t===e},in:function(t,e){return wn(t,e)},">=":function(t,e){return t>=e},"<=":function(t,e){return t<=e},"!=":function(t,e){return t!==e},"!in":function(t,e){return!wn(t,e)}};function _n(t){return function(t,e){var n,r=yn(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.has(o))throw new Ve.SyntaxException("Invalid character within <".concat("Main Filter String","> ; ' ").concat(o," ' is not allowed; got string: '").concat(t,"'"))}}catch(t){r.e(t)}finally{r.f()}}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),bn),t.toLowerCase()}var En,Pn,kn,On=new Set(["victory-points"]),Tn=new Set(["prebans","p1.picks","p2.picks","p1.prebans","p2.prebans"]),An=function(){return dn(function t(e){fn(this,t);var n=t.FIELD_EXTRACT_FN_MAP[e];if(!n)throw new Ve.ValidationError("Invalid field type: '".concat(e,"'; valid types are: ").concat(Object.keys(t.FIELD_EXTRACT_FN_MAP).join(", ")));console.log("Found valid field type: ",e),this.str=e,this.extractData=n},[{key:"toString",value:function(){return this.str}}])}();En=An,kn={date:function(t){var e;return t["Date/Time"]?new Date("".concat(null===(e=t["Date/Time"])||void 0===e?void 0:e.slice(0,10),"T00:00:00")):"N/A"},"is-first-pick":function(t){return"True"===t["First Pick"]?1:0},"is-win":function(t){return"W"===t.Win?1:0},"victory-points":function(t){return t["P1 Points"]},"p1.picks":function(t){return t["P1 Picks"]},"p2.picks":function(t){return t["P2 Picks"]},"p1.prebans":function(t){return t["P1 Prebans"]},"p2.prebans":function(t){return t["P2 Prebans"]},"p1.postban":function(t){return t["P1 Postban"]},"p2.postban":function(t){return t["P2 Postban"]},prebans:function(t){return[].concat(rn(t["P1 Prebans"]),rn(t["P2 Prebans"]))},"p1.pick1":function(t){return t["P1 Pick 1"]},"p1.pick2":function(t){return t["P1 Pick 2"]},"p1.pick3":function(t){return t["P1 Pick 3"]},"p1.pick4":function(t){return t["P1 Pick 4"]},"p1.pick5":function(t){return t["P1 Pick 5"]},"p2.pick1":function(t){return t["P2 Pick 1"]},"p2.pick2":function(t){return t["P2 Pick 2"]},"p2.pick3":function(t){return t["P2 Pick 3"]},"p2.pick4":function(t){return t["P2 Pick 4"]},"p2.pick5":function(t){return t["P2 Pick 5"]},"p1.league":function(t){return m[t["P1 League"]]},"p2.league":function(t){return m[t["P2 League"]]},"p1.server":function(t){return t["P1 Server"]},"p2.server":function(t){return t["P2 Server"]}},(Pn=hn(Pn="FIELD_EXTRACT_FN_MAP"))in En?Object.defineProperty(En,Pn,{value:kn,enumerable:!0,configurable:!0,writable:!0}):En[Pn]=kn;var In=function(){return dn(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;fn(this,t),this.rawString=e,this.data=this.getData(e,n)},[{key:"toString",value:function(){return"".concat(this.data)}}])}(),Dn=function(t){function e(){return fn(this,e),an(this,e,arguments)}return un(e,t),dn(e,[{key:"getData",value:function(t,e){if(t=(t=t.replace(/'/g,"").replace(/"/g,"")).trim(),!Ee.VALID_STRING_RE.test(t))throw new Ve.SyntaxException("Invalid string; all string content must start with a letter followed by either num, hyphen or period ( case insensitive regex: ".concat(Ee.VALID_STRING_LITERAL_RE.source," ); got: '").concat(t,"'"));t=t.replace(/"|'/g,"");var n=Jt.getHeroByName(t,e),r=m[t],o=Object.values(g).find(function(e){return e.toLowerCase()===t});if(!(n||r||o))throw new Ve.SyntaxException("Invalid string; All strings must either be a valid hero, league name, or server; got: '".concat(t,"'"));return n?n.name:r||o}},{key:"toString",value:function(){return'"'.concat(this.data,'"')}}])}(In),jn=function(t){function e(){return fn(this,e),an(this,e,arguments)}return un(e,t),dn(e,[{key:"getData",value:function(t){return Ve.parseDate(t)}},{key:"toString",value:function(){return"".concat(this.data)}}])}(In),Rn=function(t){function e(){return fn(this,e),an(this,e,arguments)}return un(e,t),dn(e,[{key:"getData",value:function(t){if(!Ee.VALID_INT_LITERAL_RE.test(t))throw new Ve.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));var e=parseInt(t);if(isNaN(e))throw new Ve.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));return e}},{key:"toString",value:function(){return"".concat(this.data)}}])}(In),xn=function(t){function e(){return fn(this,e),an(this,e,arguments)}return un(e,t),dn(e,[{key:"getData",value:function(t){if(!Ee.VALID_BOOL_LITERAL_RE.test(t))throw new Ve.SyntaxException("Invalid boolean; must be 'true' or 'false'; got: '".concat(t,"'"));return"true"===t?1:0}},{key:"toString",value:function(){return"".concat(this.data?"true":"false")}}])}(In),Ln=function(t){function e(){return fn(this,e),an(this,e,arguments)}return un(e,t),dn(e,[{key:"getData",value:function(t){var e=t.split("...");if(2!==e.length)throw new Ve.SyntaxException("Invalid range; ranges must be of the format x...y or x...=y ; got more than two values when splitting string: '".concat(t,"'"));var n=on(e,2),r=n[0],o=n[1],a=!1;o.includes("=")&&(o=o.replace("=",""),a=!0);var i={start:null,end:null,endInclusive:a};if(Ee.VALID_DATE_LITERAL_RE.test(r)){if(i.start=Ve.tryConvert(Ve.parseDate,"Date",r,"Could not convert '".concat(r,"' to Date in declared range: '").concat(t,"'")),i.end=Ve.tryConvert(Ve.parseDate,"Date",o,"Could not convert '".concat(o,"' to Date in declared range: '").concat(t,"' ; Ranges must have homogenous types")),i.start>i.end)throw new Ve.SyntaxException("Invalid range; start date must be on or before end date; ".concat(i.start," > ").concat(i.end));i.type="Date"}else{if(!Ee.VALID_INT_LITERAL_RE.test(r))throw new Ve.SyntaxException("Invalid range; must be of the format x...y or x...=y ; got: '".concat(t,"'"));if(i.start=Ve.tryConvert(function(t){return new Rn(t)},"Int",r,"Could not convert '".concat(r,"' to Int in declared range: '").concat(t,"'")).data,i.end=Ve.tryConvert(function(t){return new Rn(t)},"Int",o,"Could not convert '".concat(o,"' to Int in declared range: '").concat(t,"' ; Ranges must have homogenous types")).data,i.start>i.end)throw new Ve.SyntaxException("Invalid range; start integer must be equal to or less than end integer; ".concat(i.start," > ").concat(i.end));i.type="Int"}return console.log("Built Range: ".concat(JSON.stringify(i))),i}},{key:"toString",value:function(){var t=this.data.endInclusive?"...=":"...";return"Date"===this.data.type?"".concat(this.data.start.toISOString()).concat(t).concat(this.data.end.toISOString(),")"):"Int"===this.data.type?"".concat(this.data.start,"...").concat(t).concat(this.data.end):"Error Converting Range to String => < ".concat(this.data.start,"...").concat(t).concat(this.data.end," >")}}])}(In),Fn=function(t){function e(){return fn(this,e),an(this,e,arguments)}return un(e,t),dn(e,[{key:"getData",value:function(t,e){if(!Ee.VALID_SET_RE.test(t))throw new Ve.SyntaxException("Invalid set; must be in the format: { element1, element2,... }, where elements have either string format or date format; ( case insensitive regex: ".concat(Ee.VALID_SET_RE.source," ) (Just chat gpt this one bro); got: '").concat(t,"'"));var n=t.replace(/^\{|\}$/g,"").split(",").map(function(t){return t.trim()}).filter(function(t){return""!==t}).map(function(t){if(Ee.VALID_STRING_RE.test(t))return new Dn(t,e);if(Ee.VALID_DATE_LITERAL_RE.test(t))return new jn(t);throw new Ve.SyntaxException("Invalid set element; must be a string or date; got: '".concat(t,"'"))});console.log("GOT ELEMENTS: ",n);var r,o=new Set,a=yn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;o.add(i.constructor.name)}}catch(t){a.e(t)}finally{a.f()}if(o=rn(o),console.log("GOT TYPES: ",o),o.size>1)throw new Ve.SyntaxException("Invalid set; all set elements must have the same data type; got: types: [".concat(o.join(", "),"]"));return this.Type=o[0],new Set(n.map(function(t){return t.data}))}},{key:"toString",value:function(){return"{".concat(this.data.map(function(t){return t.toString()}).join(", "),"}")}}])}(In);var Cn=function(){return dn(function t(){fn(this,t)},[{key:"call",value:function(t){throw new Error("Base class ".concat(this.constructor.name," does not implement the 'call' method. Implement this method in a subclass."))}}])}(),Nn=function(t){function e(t){var n;if(fn(this,e),(n=an(this,e)).name="last-N",1!==t.length)throw new Ve.SyntaxException("".concat(n.name," expects 1 argument, got ").concat(t.length));var r=Number(t[0]);if(!Number.isInteger(r))throw new Ve.TypeException("".concat(n.name," expects an integer argument, could not parse '").concat(t[0],"' as integer"));return n.str="".concat(n.name,"(").concat(r,")"),n.n=r,n}return un(e,t),dn(e,[{key:"call",value:function(t){return t.sort(function(t,e){return t["Seq Num"]-e["Seq Num"]}),t.slice(-this.n)}}])}(function(t){function e(){return fn(this,e),an(this,e)}return un(e,t),dn(e,[{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Cn)),Mn=function(t){function e(t){var n;return fn(this,e),(n=an(this,e)).fns=t,console.log("Clause Fn constructor got fns:",t),n}return un(e,t),dn(e,[{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=t+"   ";return this.fns.localFilters.forEach(function(t){return e+="".concat(t.toString(n),",\n")}),console.log("Clause Fn toString got output:",e),"".concat(t).concat(this.str,"(\n").concat(e.trimEnd(),"\n").concat(t,")")}}])}(Cn),Bn=function(t){function e(t){var n;return fn(this,e),(n=an(this,e,[t])).str="AND",n}return un(e,t),dn(e,[{key:"call",value:function(t){return this.fns.localFilters.every(function(e){return e.call(t)})}}])}(Mn),Gn=function(t){function e(t){var n;return fn(this,e),(n=an(this,e,[t])).str="OR",n}return un(e,t),dn(e,[{key:"call",value:function(t){return this.fns.localFilters.some(function(e){return e.call(t)})}}])}(Mn),Un=function(t){function e(t){var n;return fn(this,e),(n=an(this,e,[t])).str="XOR",n}return un(e,t),dn(e,[{key:"call",value:function(t){var e,n=!1,r=yn(this.fns.localFilters);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=!n&&o.call(t)||n&&!o.call(t)}}catch(t){r.e(t)}finally{r.f()}return n}}])}(Mn),Hn=function(t){function e(t){var n;return fn(this,e),(n=an(this,e,[t])).str="NOT",n}return un(e,t),dn(e,[{key:"call",value:function(t){return!this.fns.localFilters[0].call(t)}}])}(Mn),Kn={and:Bn,or:Gn,xor:Un,not:Hn,"last-n":Nn},Vn=new Set([Bn,Gn,Un,Hn]),qn=new Set([Nn]),Wn=function(){return dn(function t(e,n){fn(this,t),this.str=e,this.fn=n},[{key:"call",value:function(t){return this.fn(t)}},{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}();function zn(t,e,n,r,o){var a=null;try{a=e in An.FIELD_EXTRACT_FN_MAP?new An(e):function(t,e,n){if(console.log("Trying to Parse DataType: ".concat(t)),Ee.VALID_STRING_LITERAL_RE.test(t))return console.log("Parsing as StringType"),new Dn(t,e);if(Ee.VALID_DATE_LITERAL_RE.test(t))return console.log("Parsing as DateType"),new jn(t);if(Ee.VALID_INT_LITERAL_RE.test(t))return console.log("Parsing as IntType"),new Rn(t);if(Ee.VALID_BOOL_LITERAL_RE.test(t))return console.log("Parsing as BoolType"),new xn(t);if(/\{.*\}/.test(t))return console.log("Parsing as SetType"),new Fn(t,e);if(Ee.VALID_RANGE_LITERAL_RE.test(t))return console.log("Parsing as RangeType"),new Ln(t);if(Ee.VALID_DATA_WORD_LITERAL_RE.test(t))return console.log("Parsing as DataWord"),function(t,e){if(Ee.VALID_SEASON_LITERAL_RE.test(t)){var n=function(t){return t.toISOString().slice(0,10)};if(e.SeasonDetails.length<1)throw new Error("Did not recieve any season details; failed on: '".concat(t,"'"));if("current-season"===t){var r=on(e.SeasonDetails.find(function(t){return"Active"===t.Status}).range,2),o=r[0],a=r[1];return new Ln("".concat(n(o),"...=").concat(n("N/A"===a?new Date:a)))}var i=Number(t.split("-")[1]),c=e.SeasonDetails.find(function(t){return t["Season Number"]===i});if(!c)throw new Error("Invalid season specified; ".concat(i," is not a valid season number; failed on str: '").concat(t,"'"));var s=on(c.range,2),u=s[0],l=s[1];return new Ln("".concat(n(u),"...=").concat(n(l)))}}(t,{SeasonDetails:n});if(console.log("Failed to parse DataType"),Ee.VALID_STRING_LITERAL_RE.test("'".concat(t,"'")))throw new Ve.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you forget to wrap string literals in double or single quotes?"));if(t.includes("'")&&t.includes('"'))throw new Ve.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you encase in mismatching quote types?"));if(t.includes(".=")||t.includes(".."))throw new Ve.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; were you trying to use a range? Ranges must be of the format x...y or x...=y and may only be int-int or date-date"));throw new Ve.SyntaxException("Invalid DataType declaration; could not parse to valid Field or Declared Data Type; got: '".concat(t,"'"))}(e,r,o)}catch(r){for(var i in An.FIELD_EXTRACT_FN_MAP)if(e.includes(i)||i.includes(e))throw new Ve.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"], did you mean to use '").concat(i,"' as a field instead?"));throw console.error(r),new Ve.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"]; error: ").concat(r.message))}return a}var Jn=function(){function t(e){if(fn(this,t),e!==Yn._)throw new Error("Cannot instantiate FilterSyntaxParser directly; use createAndParse method instead.")}return dn(t,[{key:"toString",value:function(){var t=rn(this.filters.localFilters);return t.push.apply(t,rn(this.filters.globalFilters)),"[\n".concat(t.map(function(t){return t.toString("   ")}).join(";\n"),"\n]")}},{key:"parseGlobalFilterFn",value:function(t,e){var n=Ee.anchorExp(Ee.VALID_GLOBAL_FILTER_RE);if(!n.test(e))throw new Ve.SyntaxException('Invalid global filter format; must follow the case insensitive regex format "'.concat(n.source,"\" ; got: '").concat(e,"'"));var r=Ve.tokenizeWithNestedEnclosures(e,",",1);if(t===Nn)return{localFilters:[],globalFilters:[new Nn(r)]};throw new Ve.SyntaxException("Global filter function ".concat(t.str," not mapped in parseGlobalFilterFn"))}},{key:"parseClauseFn",value:function(e,n){var r=this;console.log("Parsing clause fn:",e.name,n);var o=Ve.tokenizeWithNestedEnclosures(n,",",1);if(console.log("Got argArr:",o),e===Un&&o.length<2)throw new Ve.SyntaxException("XOR clause must have at least two arguments; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));if(e===Hn&&1!==o.length)throw new Ve.SyntaxException("NOT clause must have exactly one argument; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));var a=o.reduce(function(t,e){var n,o;return(n=t.localFilters).push.apply(n,rn(r.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,rn(r.parseFilters(e).globalFilters)),t},t.getEmptyFilters());if(a.globalFilters.length>0)throw new Ve.SyntaxException("Global filters not allowed in clause functions; got: ".concat(a.globalFilters,' from string: "').concat(n,'"'));if(e===Hn&&1!==a.localFilters.length)throw new Ve.SyntaxException("NOT clause must have exactly one argument; got: ".concat(a.length,' arguments from string: "').concat(n,'"'));return{localFilters:[new e(a)],globalFilters:[]}}},{key:"parseBaseFilter",value:function(t){console.log("Parsing base filter:",t);var e=this.HM,n=Ve.tokenizeWithNestedEnclosures(t," ",0,!0);if(console.log("Got tokens: ",n,"; Length: ".concat(n.length)),3!==n.length)throw new Ve.SyntaxException("Invalid base filter format; all filters must be of the form: ['X', operator, 'Y']; got tokens: [".concat(n.join(", "),"]"));var r=on(n,3),o=r[0],a=r[1],i=r[2];if(!Sn[a])throw new Ve.SyntaxException('Invalid operator in base filter; got: "'.concat(a,'" as the operator in filter: [').concat(t,"]"));var c=Sn[a];if(o=zn("left",o,t,e,this.SeasonDetails),i=zn("right",i,t,e,this.SeasonDetails),("in"===a||"!in"===a)&&!(i instanceof Fn||i instanceof Ln||i instanceof An&&Tn.has(i.str)))throw new Ve.TypeException("When using any 'in' or '!in' operator, the right side of the operator must be a Set, Range, or a Field composed of a set (i.e. p1.picks, p2.prebans, etc.); error found in filter: '".concat(t,"'"));if(i instanceof Ln)if("Date"===i.data.type){if(!o.str.includes("date"))throw new Ve.TypeException("When using a Date Range, the left side of the operator must be a date field; ".concat(o.str," is not a date field; error found in filter: '").concat(t,"'"))}else if("Int"===i.data.type&&!On.has(o.str))throw new Ve.TypeException("When using an Int Range, the left side of the operator must be an integer field; ".concat(o.str," is not an integer field; error found in filter: '").concat(t,"'"));if(i instanceof In&&o instanceof In)throw new Ve.SyntaxException("Either left or right side of filter must be a data field (a property of a battle); both ".concat(o," and ").concat(i,' are user declared data types in filter: "').concat(t,'"'));var s;return s=o instanceof In?function(t){return c(o.data,i.extractData(t))}:i instanceof In?function(t){return c(o.extractData(t),i.data)}:function(t){return c(o.extractData(t),i.extractData(t))},console.log("Returning base local filter",[new Wn(t,s).toString()]),{localFilters:[new Wn(t,s)],globalFilters:[]}}},{key:"parseFilters",value:function(e){var n=this;if(console.log('Parsing filter string: "'.concat(e||this.preParsedString,'"')),""===e)return console.log("Empty filter string; Returning empty filters"),t.getEmptyFilters();var r,o=(e=e.trim()).split(";").filter(function(t){return t.length>0}),a=yn(o);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=Ve.getCharCounts(i);if(c["("]!==c[")"])throw new Ve.SyntaxException('Imbalanced parentheses in following string: "'.concat(i,'"'));if(c["{"]!==c["}"])throw new Ve.SyntaxException("Imbalanced braces ('{', '}') in following string: \"".concat(i,'"'));if((c['"']||0)%2!=0)throw new Ve.SyntaxException('Imbalanced double quotes in following string: "'.concat(i,'"'));if((c["'"]||0)%2!=0)throw console.log("Imbalanced single quotes in following string:",i,"; got:",c["'"]),new Ve.SyntaxException('Imbalanced single quotes in following string: "'.concat(i,'"'))}}catch(t){a.e(t)}finally{a.f()}if(o.length>1)return console.log("Processing <".concat(o.length,"> filters; filters: ").concat(o)),o.reduce(function(t,e){var r,o;return(r=t.localFilters).push.apply(r,rn(n.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,rn(n.parseFilters(e).globalFilters)),t},t.getEmptyFilters());var s=o[0];if(s.length<4)throw new Ve.SyntaxException("Filter string cannot be valid (less than 4 characters); got filter string: [".concat(s,"]"));var u=s.split("("),l=Kn[u[0]];if(console.log("Trying to look for Fn ; got:",u[0],"from string:",s),l){if(Vn.has(l))return console.log("Found clause fn; dispatching to clause fn parser"),this.parseClauseFn(l,s);if(qn.has(l))return console.log("Found global filter fn; dispatching to global filter fn parser"),this.parseGlobalFilterFn(l,s);throw new Error('could not parse filter string as Fn: "'.concat(e,'" ; did not map to any defined pattern'))}return console.log("Did not find Fn; dispatching to base filter parser"),this.parseBaseFilter(s)}}],[{key:"getEmptyFilters",value:function(){return{localFilters:[],globalFilters:[]}}},{key:"createAndParse",value:(e=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){nn(a,r,o,i,c,"next",t)}function c(t){nn(a,r,o,i,c,"throw",t)}i(void 0)})}}(tn().m(function e(n){var r,o,a,i,c,s=arguments;return tn().w(function(e){for(;;)switch(e.n){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:null,o=s.length>2&&void 0!==s[2]?s[2]:null,console.log("Initialized parsing of string:",n),a=new t(Yn._),i=r){e.n=2;break}return e.n=1,Jt.getHeroManager();case 1:i=e.v;case 2:if(r=i,c=o){e.n=4;break}return e.n=3,Ze.getSeasonDetails();case 3:c=e.v;case 4:return o=c,a.rawString=n,a.HM=r,a.SeasonDetails=o,a.preParsedString=_n(n),a.globalFilters=[],a.filters=a.parseFilters(a.preParsedString),console.log("Got Filters\n"),console.log(a.toString()),e.a(2,a)}},e)})),function(t){return e.apply(this,arguments)})}]);var e}(),Yn={_:Symbol("internal")};const Xn=Jn;function $n(t){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(t)}function Qn(t){return function(t){if(Array.isArray(t))return er(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||tr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=tr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function tr(t,e){if(t){if("string"==typeof t)return er(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?er(t,e):void 0}}function er(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return rr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(rr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,rr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,rr(f,"constructor",u),rr(u,"constructor",s),s.displayName="GeneratorFunction",rr(u,o,"GeneratorFunction"),rr(f),rr(f,o,"Generator"),rr(f,r,function(){return this}),rr(f,"toString",function(){return"[object Generator]"}),(nr=function(){return{w:a,m:p}})()}function rr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}rr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){rr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},rr(t,e,n,r)}function or(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function ar(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){or(a,r,o,i,c,"next",t)}function c(t){or(a,r,o,i,c,"throw",t)}i(void 0)})}}var ir={world_global:Lt.Keys.GLOBAL_USERS,world_eu:Lt.Keys.EU_USERS,world_asia:Lt.Keys.ASIA_USERS,world_jpn:Lt.Keys.JPN_USERS,world_kor:Lt.Keys.KOR_USERS};function cr(t,e){return{id:t.nick_no,name:t.nick_nm.toLowerCase(),code:t.code,rank:t.rank,world_code:e}}function sr(t){return ur.apply(this,arguments)}function ur(){return(ur=ar(nr().m(function t(e){var n;return nr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code from E7 server: ".concat(e)),t.n=1,L.fetchUserJSON(e);case 1:if(n=t.v){t.n=2;break}return console.log("Could not get user map from E7 server for world code: ".concat(e)),t.a(2,null);case 2:return console.log("Got user map from E7 server for world code: ".concat(e)),t.a(2,Object.fromEntries(n.users.map(function(t){return[t.nick_no,cr(t,e)]})))}},t)}))).apply(this,arguments)}var lr,fr,pr,dr,hr,yr,gr={getUserMap:(yr=ar(nr().m(function t(e){var n,r;return nr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code: ".concat(e)),t.n=1,Lt.get(ir[e]);case 1:if(null===(n=t.v)){t.n=2;break}return console.log("Got user map from cache"),t.a(2,n);case 2:return t.n=3,sr(e);case 3:return r=t.v,t.n=4,Lt.cache(ir[e],r);case 4:return t.a(2,r)}},t)})),function(t){return yr.apply(this,arguments)}),findUser:(hr=ar(nr().m(function t(e){var n,r,o,a,i,c,s,u,l,p,d,h,g;return nr().w(function(t){for(;;)switch(t.n){case 0:if(!e.id){t.n=10;break}n=Zn(y),t.p=1,n.s();case 2:if((r=n.n()).done){t.n=6;break}return o=r.value,t.n=3,this.getUserMap(o);case 3:if(a=t.v,!(i=Object.values(a).find(function(t){return t.id===e.id}))){t.n=4;break}return console.log("Found user: ".concat(JSON.stringify(i)," in world code: ").concat(o)),t.a(2,{user:i,error:!1});case 4:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(o," from client-side means"));case 5:t.n=2;break;case 6:t.n=8;break;case 7:t.p=7,g=t.v,n.e(g);case 8:return t.p=8,n.f(),t.f(8);case 9:t.n=15;break;case 10:if(!e.name||!e.world_code){t.n=14;break}return c=[e.name,e.world_code],s=c[0],u=c[1],t.n=11,this.getUserMap(u);case 11:if(l=t.v,p=s.toLowerCase(),d=Object.values(l).find(function(t){return p===t.name.toLowerCase()}),!d){t.n=12;break}return console.log("Found user: ".concat(JSON.stringify(d)," in world code: ").concat(u)),t.a(2,{user:d,error:!1});case 12:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(u," from client-side means"));case 13:t.n=15;break;case 14:return console.error("Must pass a user object with either user.name and user.world_code or user.id to fetch user"),t.a(2,{user:null,error:"Must pass a user object with either user.name and user.world_code or user.id to fetch user"});case 15:return t.n=16,f.fetchUser(e);case 16:if(!(h=t.v).error){t.n=17;break}return t.a(2,{user:null,error:h.error});case 17:return t.a(2,{user:h.user,error:!1})}},t,this,[[1,7,8,9]])})),function(t){return hr.apply(this,arguments)}),addP2ServersByID:(dr=ar(nr().m(function t(e){var n,r,o,a=this;return nr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Adding P2 servers by ID..."),n=Object.values(e),r=[],t.p=1,t.n=2,Promise.all(Qn(y).map(function(t){return a.getUserMap(t)}));case 2:r=t.v,t.n=4;break;case 3:return t.p=3,o=t.v,console.error(o),n.forEach(function(t){return t["P2 Server"]="Not Found"}),t.a(2);case 4:if(0!==r.length){t.n=5;break}return console.error("Failed to get any user maps"),n.forEach(function(t){return t["P2 Server"]="Not Found"}),t.a(2);case 5:n.forEach(function(t){var e,n=null===(e=r.find(function(e){return e[t["P2 ID"]]}))||void 0===e?void 0:e[t["P2 ID"]].world_code;n?t["P2 Server"]=a.convertServerStr(n):(console.log("Could not find user with ID: ".concat(t["P2 ID"]," in client-side means ; typeof: ").concat($n(t["P2 ID"]),", id type: ").concat($n(Object.keys(USER_MAPS[0])[0]))),t["P2 Server"]="Not Found")});case 6:return t.a(2)}},t,null,[[1,3]])})),function(t){return dr.apply(this,arguments)}),setUser:(pr=ar(nr().m(function t(e){return nr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.cache(Lt.Keys.USER,e);case 1:return t.a(2)}},t)})),function(t){return pr.apply(this,arguments)}),getUser:(fr=ar(nr().m(function t(){return nr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.get(Lt.Keys.USER);case 1:return t.a(2,t.v)}},t)})),function(){return fr.apply(this,arguments)}),clearUserData:function(){var t=ar(nr().m(function t(){return nr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.clearUserData();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),clearUserDataLists:(lr=ar(nr().m(function t(){return nr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.delete(Lt.Keys.GLOBAL_USERS);case 1:return t.n=2,Lt.delete(Lt.Keys.EU_USERS);case 2:return t.n=3,Lt.delete(Lt.Keys.ASIA_USERS);case 3:return t.n=4,Lt.delete(Lt.Keys.JPN_USERS);case 4:return t.n=5,Lt.delete(Lt.Keys.KOR_USERS);case 5:return t.a(2)}},t)})),function(){return lr.apply(this,arguments)}),convertServerStr:function(t){return g[t]}};const vr=gr;function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function br(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(mr(t)+" is not iterable")}function wr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Sr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Sr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Sr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Sr(f,"constructor",u),Sr(u,"constructor",s),s.displayName="GeneratorFunction",Sr(u,o,"GeneratorFunction"),Sr(f),Sr(f,o,"Generator"),Sr(f,r,function(){return this}),Sr(f,"toString",function(){return"[object Generator]"}),(wr=function(){return{w:a,m:p}})()}function Sr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Sr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Sr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Sr(t,e,n,r)}function _r(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Er(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){_r(a,r,o,i,c,"next",t)}function c(t){_r(a,r,o,i,c,"throw",t)}i(void 0)})}}function Pr(t){return function(t){if(Array.isArray(t))return jr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Dr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Dr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Or(Object(n),!0).forEach(function(e){Ar(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ar(t,e,n){return(e=function(t){var e=function(t){if("object"!=mr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ir(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Dr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Dr(t,e){if(t){if("string"==typeof t)return jr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jr(t,e):void 0}}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Rr=b.filter(function(t){return t.includes(" Pick ")||t.includes("ban ")});function xr(t){var e={};console.log("Processing ".concat(t.length," battles into dict..."));var n,r=Ir(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;console.log("Processing battle: ".concat(o)),e[o["Seq Num"]]=o}}catch(t){r.e(t)}finally{r.f()}return e}function Lr(t,e){var n,r,o,a=function(t){var n,r;return null!==(n=null===(r=Jt.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},i={"Date/Time":t.time,"Seq Num":t.seq_num,"P1 ID":t.p1_id.toString(),"P2 ID":t.p2_id.toString(),"P1 League":null!==(n=t.grades[0])&&void 0!==n?n:"","P2 League":null!==(r=t.grades[1])&&void 0!==r?r:"","P1 Points":null!==(o=t.scores[0])&&void 0!==o?o:null,Win:1===t.winner?"W":"L","First Pick":1===t.first_pick?"True":"False","P1 Preban 1":a(t.p1_preban[0]),"P1 Preban 2":a(t.p1_preban[1]),"P2 Preban 1":a(t.p2_preban[0]),"P2 Preban 2":a(t.p2_preban[1]),"P1 Pick 1":a(t.p1_picks[0]),"P1 Pick 2":a(t.p1_picks[1]),"P1 Pick 3":a(t.p1_picks[2]),"P1 Pick 4":a(t.p1_picks[3]),"P1 Pick 5":a(t.p1_picks[4]),"P2 Pick 1":a(t.p2_picks[0]),"P2 Pick 2":a(t.p2_picks[1]),"P2 Pick 3":a(t.p2_picks[2]),"P2 Pick 4":a(t.p2_picks[3]),"P2 Pick 5":a(t.p2_picks[4]),"P1 Postban":a(t.postbans[1]),"P2 Postban":a(t.postbans[0])};return i["P1 Picks"]=[i["P1 Pick 1"],i["P1 Pick 2"],i["P1 Pick 3"],i["P1 Pick 4"],i["P1 Pick 5"]],i["P2 Picks"]=[i["P2 Pick 1"],i["P2 Pick 2"],i["P2 Pick 3"],i["P2 Pick 4"],i["P2 Pick 5"]],i["P1 Prebans"]=[i["P1 Preban 1"],i["P1 Preban 2"]],i["P2 Prebans"]=[i["P2 Preban 1"],i["P2 Preban 2"]],i}function Fr(t){var e,n=Ir(Rr);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=t[r]?t[r]:"Empty"}}catch(t){n.e(t)}finally{n.f()}return t["P1 Points"]=Number(t["P1 Points"])||t["P1 Points"],t["P1 Picks"]=[t["P1 Pick 1"],t["P1 Pick 2"],t["P1 Pick 3"],t["P1 Pick 4"],t["P1 Pick 5"]],t["P2 Picks"]=[t["P2 Pick 1"],t["P2 Pick 2"],t["P2 Pick 3"],t["P2 Pick 4"],t["P2 Pick 5"]],t["P1 Prebans"]=[t["P1 Preban 1"],t["P1 Preban 2"]],t["P2 Prebans"]=[t["P2 Preban 1"],t["P2 Preban 2"]],t}function Cr(t,e){var n,r,o=function(t){return Jt.getHeroByName(t,e).prime};return{"Date/Time":t["Date/Time"],"Seq Num":t["Seq Num"],"P1 ID":t["P1 ID"],"P2 ID":t["P2 ID"],"P1 League":null!==(n=m[t["P1 League"]])&&void 0!==n?n:"","P2 League":null!==(r=m[t["P2 League"]])&&void 0!==r?r:"","P1 Points":t["P1 Points"],Win:"W"===t.Win?1:0,"First Pick":"True"===t["First Pick"]?1:0,"P1 Preban 1":o(t["P1 Preban 1"]),"P1 Preban 2":o(t["P1 Preban 2"]),"P2 Preban 1":o(t["P2 Preban 1"]),"P2 Preban 2":o(t["P2 Preban 2"]),"P1 Pick 1":o(t["P1 Pick 1"]),"P1 Pick 2":o(t["P1 Pick 2"]),"P1 Pick 3":o(t["P1 Pick 3"]),"P1 Pick 4":o(t["P1 Pick 4"]),"P1 Pick 5":o(t["P1 Pick 5"]),"P2 Pick 1":o(t["P2 Pick 1"]),"P2 Pick 2":o(t["P2 Pick 2"]),"P2 Pick 3":o(t["P2 Pick 3"]),"P2 Pick 4":o(t["P2 Pick 4"]),"P2 Pick 5":o(t["P2 Pick 5"]),"P1 Postban":o(t["P1 Postban"]),"P2 Postban":o(t["P2 Postban"]),"P1 Picks":t["P1 Picks"].map(o).reduce(function(t,e){return t*e},1),"P2 Picks":t["P2 Picks"].map(o).reduce(function(t,e){return t*e},1),"P1 Prebans":t["P1 Prebans"].map(o).reduce(function(t,e){return t*e},1),"P2 Prebans":t["P2 Prebans"].map(o).reduce(function(t,e){return t*e},1)}}function Nr(t){return(100*t).toFixed(2)+"%"}function Mr(t,e){var n=t.filter(function(t){return t.Win}).length,r=t.length,o=0!==r?n/r:0;return{games_won:n,games_appeared:r,total_games:e,appearance_rate:Nr(0!==e?r/e:0),win_rate:Nr(o),"+/-":2*n-r}}var Br,Gr,Ur,Hr,Kr,Vr,qr,Wr,zr={loaded_servers:new Set,getBattles:(Wr=Er(wr().m(function t(){var e,n,r,o;return wr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting battles"),t.n=1,Lt.get(Lt.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return Wr.apply(this,arguments)}),removeBattles:(qr=Er(wr().m(function t(){return wr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.delete(Lt.Keys.BATTLES);case 1:return t.n=2,Lt.delete(Lt.Keys.UPLOADED_BATTLES);case 2:return t.n=3,Lt.delete(Lt.Keys.FILTERED_BATTLES);case 3:console.log("Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']");case 4:return t.a(2)}},t)})),function(){return qr.apply(this,arguments)}),removeFilteredBattles:(Vr=Er(wr().m(function t(){return wr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.delete(Lt.Keys.FILTERED_BATTLES);case 1:console.log("Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']");case 2:return t.a(2)}},t)})),function(){return Vr.apply(this,arguments)}),applyFilter:(Kr=Er(wr().m(function t(e){var n,r,o,a,i,c,s,u,l,f,p,d;return wr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.localFilters||[],o=e.globalFilters||[],a=Object.values(n),i=Ir(o);try{for(i.s();!(c=i.n()).done;)s=c.value,console.log("Applying global filter: ".concat(s)),u=a.length,a=s.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),console.log("Filtered ".concat(u-a.length," out of ").concat(u,"; new total = ").concat(a.length))}catch(t){i.e(t)}finally{i.f()}l=Ir(r),t.p=2,p=wr().m(function t(){var e,r;return wr().w(function(t){for(;;)switch(t.n){case 0:e=f.value,console.log("Applying local filter: ".concat(e)),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=kr(t,2),r=(n[0],n[1]);return e.call(r)})),console.log("Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length));case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(br(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,l.e(d);case 7:return t.p=7,l.f(),t.f(7);case 8:return console.log("Caching filtered battles ; total = ".concat(Object.keys(n).length)),t.n=9,Lt.cache(Lt.Keys.FILTERED_BATTLES,n);case 9:return console.log("Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters")),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return Kr.apply(this,arguments)}),getNumericalBattles:(Hr=Er(wr().m(function t(e,n){var r,o;return wr().w(function(t){for(;;)if(0===t.n)return r=function(t,e){return[t,Cr(e,n)]},o=Object.fromEntries(Object.entries(e).map(function(t){var e=kr(t,2),n=e[0],o=e[1];return r(n,o)})),t.a(2,o)},t)})),function(t,e){return Hr.apply(this,arguments)}),extendBattles:(Ur=Er(wr().m(function t(e){var n,r,o,a,i;return wr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.get(Lt.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=Tr(Tr({},i),xr(e)),t.n=5,Lt.cache(Lt.Keys.BATTLES,r);case 5:return console.log("Extended user data in cache"),t.a(2,r)}},t)})),function(t){return Ur.apply(this,arguments)}),cacheQuery:(Gr=Er(wr().m(function t(e,n,r){var o,a,i,c;return wr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No query battles provided to cacheQuery"),t.a(2,[]);case 1:return console.log("Caching queried battles: ".concat(e," battles; modified [BATTLES]")),o=function(t){return Lr(t,r)},a=e.map(o),i=vr.convertServerStr(n.world_code),a.map(function(t){t["P1 Server"]=i}),t.n=2,vr.addP2ServersByID(a);case 2:return t.n=3,this.extendBattles(a);case 3:return c=t.v,console.log("Cached queried battles in cache; modified [BATTLES]"),t.a(2,c)}},t,this)})),function(t,e,n){return Gr.apply(this,arguments)}),cacheUpload:(Br=Er(wr().m(function t(e){var n,r;return wr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No uploaded battles provided to cacheUpload"),t.a(2,Xn.emptyFilters());case 1:return n=e.map(Fr),t.n=2,Lt.cache(Lt.Keys.UPLOADED_BATTLES,n);case 2:return t.n=3,this.extendBattles(n);case 3:return r=t.v,console.log("Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]"),t.a(2,r)}},t,this)})),function(t){return Br.apply(this,arguments)}),getStats:function(){var t=Er(wr().m(function t(e,n,r,o,a){var i,c,s,u,l,f,p,d,h,y,g;return wr().w(function(t){for(;;)switch(t.n){case 0:return i=r.localFilters.length+r.globalFilters.length,t.n=1,this.applyFilter(r);case 1:return c=t.v,s=Object.values(e),u=Object.values(c),t.n=2,this.getNumericalBattles(c,o);case 2:return l=t.v,f=Qt(s,n,i>0?l:null,a),t.n=3,this.getPrebanStats(l,o);case 3:return p=t.v,t.n=4,this.getFirstPickStats(l,o);case 4:return d=t.v,t.n=5,this.getGeneralStats(l,o);case 5:return h=t.v,t.n=6,this.getHeroStats(l,o);case 6:return y=t.v,t.n=7,this.getServerStats(u);case 7:return g=t.v,t.a(2,{battles:s,filteredBattles:u,plotContent:f,prebanStats:p,generalStats:h,firstPickStats:d,playerHeroStats:y.playerHeroStats,enemyHeroStats:y.enemyHeroStats,serverStats:g})}},t,this)}));return function(e,n,r,o,a){return t.apply(this,arguments)}}(),getPrebanStats:function(t,e){var n=Jt.getHeroByName("Empty",e).prime,r=Object.values(t);if(0===r.length)return[];var o,a=function(t){return Pr(new Set(r)).map(function(e){return e[t]}).filter(function(t){return t&&t!==n})},i=a("P1 Preban 1"),c=a("P1 Preban 2"),s=new Set([].concat(Pr(i),Pr(c))),u=[],l=Ir(s);try{for(l.s();!(o=l.n()).done;){var f=o.value;u.push(f)}}catch(t){l.e(t)}finally{l.f()}var p,d=Ir(s);try{for(d.s();!(p=d.n()).done;){var h,y=p.value,g=Ir(s);try{for(g.s();!(h=g.n()).done;){var v=h.value;y<v&&u.push(y*v)}}catch(t){g.e(t)}finally{g.f()}}}catch(t){d.e(t)}finally{d.f()}for(var m=r.length,b=[],w=function(){var t=_[S],n=r.filter(function(e){return e["P1 Prebans"]%t===0}),o=n.length;if(o<1)return 1;var a=n.reduce(function(t,e){return t+e.Win},0),i=m>0?o/m:0,c=o>0?a/o:0,s=2*a-o;b.push({preban:e.prime_pair_lookup[t],wins:a,appearances:o,appearance_rate:Nr(i),win_rate:Nr(c),"+/-":s})},S=0,_=u;S<_.length;S++)w();return b.sort(function(t,e){return e.appearances-t.appearances}),b},getFirstPickStats:function(t,e){var n=Object.values(t).filter(function(t){return t["First Pick"]});if(0===n.length)return[];var r,o=n.length,a={},i=Ir(n);try{for(i.s();!(r=i.n()).done;){var c=r.value,s=c["P1 Pick 1"];s in a||(a[s]={wins:0,appearances:0}),a[s].wins+=c.Win?1:0,a[s].appearances+=1}}catch(t){i.e(t)}finally{i.f()}var u=Object.entries(a).map(function(t){var n=kr(t,2),r=n[0],a=n[1];return{hero:Jt.getHeroByPrime(r,e).name,wins:a.wins,appearances:a.appearances,win_rate:Nr(a.wins/a.appearances),appearance_rate:Nr(a.appearances/o),"+/-":2*a.wins-a.appearances}});return u.sort(function(t,e){return e.appearances-t.appearances}),u},getGeneralStats:function(t,e){var n=Object.values(t);n.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var r=0,o=0;if(n.length>1)for(var a=0;a<n.length-1;a++){var i=[n[a],n[a+1]],c=i[0],s=i[1]["P1 Points"]-c["P1 Points"];s<-40||(r+=s,o+=1)}for(var u=o>0?r/o:0,l=n.length,f=n.filter(function(t){return 1===t["First Pick"]}),p=n.filter(function(t){return 1!==t["First Pick"]}),d=f.length,h=p.length,y=f.reduce(function(t,e){return t+e.Win},0),g=p.reduce(function(t,e){return t+e.Win},0),v=l?d/l:0,m=l?h/l:0,b=d?y/d:0,w=h?g/h:0,S=l?(y+g)/l:0,_=0,E=0,P=0,k=0,O=0,T=n;O<T.length;O++)1===T[O].Win?(P+=1,_=Math.max(_,P),k=0):(P=0,k+=1,E=Math.max(E,k));var A="N/A";return{first_pick_count:d,second_pick_count:h,first_pick_rate:d?Nr(v):A,second_pick_rate:h?Nr(m):A,first_pick_winrate:d?Nr(b):A,second_pick_winrate:h?Nr(w):A,total_winrate:l?Nr(S):A,total_battles:l,total_wins:y+g,max_win_streak:_,max_loss_streak:E,avg_ppg:u.toFixed(2)}},getHeroStats:function(t,e){var n=e.heroes,r=Object.values(t);if(0===r.length)return{playerHeroStats:[],enemyHeroStats:[]};var o,a=r.length,i=[],c=[],s=Ir(n);try{var u=function(){var t=o.value;if(t.name===e.Empty.name)return 1;var n=t.prime,s=r.filter(function(t){return t["P1 Picks"]%n===0}),u=r.filter(function(t){return t["P2 Picks"]%n===0});s.length>0&&i.push(Tr(Tr({},Mr(s,a)),{},{hero:t.name})),u.length>0&&c.push(Tr(Tr({},Mr(u,a)),{},{hero:t.name}))};for(s.s();!(o=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}return{playerHeroStats:i.sort(function(t,e){return t.hero.localeCompare(e.hero)}),enemyHeroStats:c.sort(function(t,e){return t.hero.localeCompare(e.hero)})}},getServerStats:function(t){for(var e=[],n=t.length,r=function(){var r=a[o],i=t.filter(function(t){return t["P2 Server"]===r}),c=i.length,s=i.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),u=c>0?s/c:"N/A",l=n>0?c/n:"N/A",f=i.filter(function(t){return"True"===t["First Pick"]}),p=f.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),d=f.length>0?p/f.length:"N/A",h=i.filter(function(t){return"False"===t["First Pick"]}),y=h.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),g=h.length>0?y/h.length:"N/A";e.push({server:r,count:c,wins:s,win_rate:Nr(u),frequency:Nr(l),"+/-":2*s-c,fp_games:f.length,sp_games:h.length,fp_wr:Nr(d),sp_wr:Nr(g)})},o=0,a=Object.values(g);o<a.length;o++)r();return e.sort(function(t,e){return t.server.localeCompare(e.server)}),e}};const Jr=zr;function Yr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Xr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Xr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Xr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Xr(f,"constructor",u),Xr(u,"constructor",s),s.displayName="GeneratorFunction",Xr(u,o,"GeneratorFunction"),Xr(f),Xr(f,o,"Generator"),Xr(f,r,function(){return this}),Xr(f,"toString",function(){return"[object Generator]"}),(Yr=function(){return{w:a,m:p}})()}function Xr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Xr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Xr(t,e,n,r)}function $r(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var Qr,Zr={HeroManager:Jt,BattleManager:Jr,SeasonManager:Ze,UserManager:vr,ClientCache:Lt,getFilters:(Qr=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){$r(a,r,o,i,c,"next",t)}function c(t){$r(a,r,o,i,c,"throw",t)}i(void 0)})}}(Yr().m(function t(e){var n,r,o;return Yr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.getFilterStr();case 1:if(n=t.v){t.n=2;break}return t.a(2,Xn.getEmptyFilters());case 2:return t.n=3,Ze.getSeasonDetails();case 3:return r=t.v,t.n=4,Xn.createAndParse(n,e,r);case 4:return o=t.v,t.a(2,o.filters)}},t)})),function(t){return Qr.apply(this,arguments)})};const to=Zr;function eo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return no(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(no(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,no(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,no(f,"constructor",u),no(u,"constructor",s),s.displayName="GeneratorFunction",no(u,o,"GeneratorFunction"),no(f),no(f,o,"Generator"),no(f,r,function(){return this}),no(f,"toString",function(){return"[object Generator]"}),(eo=function(){return{w:a,m:p}})()}function no(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}no=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){no(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},no(t,e,n,r)}function ro(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function oo(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ro(a,r,o,i,c,"next",t)}function c(t){ro(a,r,o,i,c,"throw",t)}i(void 0)})}}var ao,io,co,so,uo;const lo={updateSidebar:(uo=oo(eo().m(function t(e){var n,r,o,a;return eo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.getUser();case 1:n=t.v,r=document.getElementById("heroStatsOrQuery"),n?(console.log("Found user: ".concat(n,"; showing hero stats in sidebar")),o=e.heroStatsURL,r.innerHTML="\n            <a href=".concat(o,' class="pc-link">\n                <span class="pc-micon"><i data-feather="bar-chart-2"></i></span>\n                <span class="pc-mtext">Hero Stats</span>\n            </a>\n            ')):(console.log("Found user: ".concat(n,"; showing user query in sidebar")),a=e.userQueryURL,r.innerHTML="\n            <a href=".concat(a,' class="pc-link">\n                <span class="pc-micon"><i data-feather="download"></i></span>\n                <span class="pc-mtext">Query User Data</span>\n            </a>\n            ')),feather.replace();case 2:return t.a(2)}},t)})),function(t){return uo.apply(this,arguments)}),updateSwitchUserBtn:(so=oo(eo().m(function t(e){var n;return eo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Lt.getUser();case 1:n=t.v,document.getElementById("user-options").innerHTML=n?'\n            <button name="switch_user" class="btn btn-primary" type="submit" action="switch-user" id="switch-user-btn">\n                Switch User\n            </button>\n            ':"";case 2:return t.a(2)}},t)})),function(t){return so.apply(this,arguments)}),queryAndCacheBattles:(co=oo(eo().m(function t(e,n,r){var o=this;return eo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,f.fetchBattleData(e).then(function(t){return t.json()}).then(function(){var t=oo(eo().m(function t(a){var i,c,s;return eo().w(function(t){for(;;)switch(t.n){case 0:if(!a.success){t.n=2;break}return i=a.battles,t.n=1,Jr.cacheQuery(i,e,r);case 1:console.log("Cached queried battles"),t.n=3;break;case 2:c=null,"upload"===n.get("source")?c='{{ url_for("home_blueprint.upload_battle_data")}}':(s="Error while fetching data: ".concat(a.error),c=o.addStrParam('{{ url_for("home_blueprint.user_query") }}',"errorMSG",s)),window.location.replace(c);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),function(t,e,n){return co.apply(this,arguments)}),addStrParam:function(t,e,n){var r=encodeURIComponent(n);return"".concat(t,"?").concat(e,"=").concat(r)},addStrParams:function(t,e){for(var n in e)t=this.addStrParam(t,n,e[n]);return t},validateFilterSyntax:(io=oo(eo().m(function t(e){var n,r,o;return eo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Jt.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.p=2,t.n=3,Xn.createAndParse(e,n);case 3:return t.v,r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0);case 4:return t.p=4,o=t.v,console.error(o),r.textContent="Validation Failed: ".concat(o.message),r.classList.remove("text-safe"),r.classList.add("text-danger"),t.a(2,!1)}},t,null,[[2,4]])})),function(t){return io.apply(this,arguments)}),validateFilterSyntaxNoCatch:(ao=oo(eo().m(function t(e){var n,r;return eo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Jt.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.n=2,Xn.createAndParse(e,n);case 2:return r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0)}},t)})),function(t){return ao.apply(this,arguments)})};function fo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return po(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(po(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,po(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,po(f,"constructor",u),po(u,"constructor",s),s.displayName="GeneratorFunction",po(u,o,"GeneratorFunction"),po(f),po(f,o,"Generator"),po(f,r,function(){return this}),po(f,"toString",function(){return"[object Generator]"}),(fo=function(){return{w:a,m:p}})()}function po(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}po=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){po(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},po(t,e,n,r)}function ho(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function yo(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ho(a,r,o,i,c,"next",t)}function c(t){ho(a,r,o,i,c,"throw",t)}i(void 0)})}}to.HeroManager.deleteHeroManager(),document.addEventListener("DOMContentLoaded",yo(fo().m(function t(){var e,n,r,o,a,i,c,s,u,l,f,p;return fo().w(function(t){for(;;)switch(t.n){case 0:return e=new URLSearchParams(window.location.search),n=Object.fromEntries(e.entries()),console.log("GOT PARAMS:",n),t.p=1,t.n=2,to.HeroManager.getHeroManager();case 2:return r=t.v,t.n=3,to.UserManager.getUser();case 3:if(o=t.v,"true"!==e.get("query")){t.n=4;break}return console.log("querying and caching user battles for user: ",JSON.stringify(o)),t.n=4,lo.queryAndCacheBattles(o,e,r);case 4:return a="true"===e.get("autoZoom"),t.n=5,to.BattleManager.getBattles(r);case 5:return i=t.v,t.n=6,to.getFilters(r);case 6:return c=t.v,console.log("Received Filters: ".concat(JSON.stringify(c))),t.n=7,to.BattleManager.getStats(i,o,c,r,a);case 7:return s=t.v,t.n=8,to.ClientCache.setStats(s);case 8:window.location.replace(URLS.statsURL),t.n=10;break;case 9:t.p=9,p=t.v,"upload"===(f=null===(u=e.get("source"))||void 0===u?void 0:u.toLowerCase())?l=URLS.uploadURL:"query"===f?l=URLS.userQueryURL:"stats"===f&&(errURLS=URLS.statsURLS),console.error("Failed to load data: ".concat(p.message)),window.location.replace(URLS.addStrParam(l,"errorMSG","Failed to load data: ".concat(p.message)));case 10:return t.a(2)}},t,null,[[1,9]])})))})()})();