/*! For license information please see upload.bundle.js.LICENSE.txt */
(()=>{var t={809:function(t,e){var n,r;n=function t(){var e,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,o=n.IS_PAPA_WORKER||!1,a={},i=0,c={};function s(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=b(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new d(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,e){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let e=this._config.newline;e||(a=this._config.quoteChar||'"',e=this._handle.guessLineEndings(t,a)),t=[...t.split(e).slice(r)].join(e)}this.isFirstChunk&&_(this._config.beforeFirstChunk)&&void 0!==(a=this._config.beforeFirstChunk(t))&&(t=a),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+t;var a=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=a.meta.cursor,this._finished||(this._partialLine=r.substring(t-this._baseIndex),this._baseIndex=t),a&&a.data&&(this._rowCount+=a.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,o)n.postMessage({results:a,workerId:c.WORKER_ID,finished:r});else if(_(this._config.chunk)&&!e){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=a=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!r||!_(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){_(this._config.error)?this._config.error(t):o&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:t,finished:!1})}}function u(t){var e;(t=t||{}).chunkSize||(t.chunkSize=c.RemoteChunkSize),s.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),r||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t,n=this._config.downloadRequestHeaders;for(t in n)e.setRequestHeader(t,n[t])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(t=>null!==(t=t.getResponseHeader("Content-Range"))?parseInt(t.substring(t.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){t=e.statusText||t,this._sendError(new Error(t))}}function l(t){(t=t||{}).chunkSize||(t.chunkSize=c.LocalChunkSize),s.call(this,t);var e,n,r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input,o=(this._config.chunkSize&&(o=Math.min(this._start+this._config.chunkSize,this._input.size),t=n.call(t,this._start,o)),e.readAsText(t,this._config.encoding));r||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function f(t){var e;s.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){var t,n;if(!this._finished)return t=this._config.chunkSize,e=t?(n=e.substring(0,t),e.substring(t)):(n=e,""),this._finished=!e,this.parseChunk(n)}}function p(t){s.call(this,t=t||{});var e=[],n=!0,r=!1;this.pause=function(){s.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){s.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=w(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function d(t){var e,n,r,o,a=Math.pow(2,53),i=-a,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,u=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,f=0,p=0,d=!1,g=!1,v=[],m={data:[],errors:[],meta:{}};function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function S(){if(m&&r&&(P("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(m.data=m.data.filter(function(t){return!w(t)})),E()){if(m)if(Array.isArray(m.data[0])){for(var e=0;E()&&e<m.data.length;e++)m.data[e].forEach(n);m.data.splice(0,1)}else m.data.forEach(n);function n(e,n){_(t.transformHeader)&&(e=t.transformHeader(e,n)),v.push(e)}}function o(e,n){for(var r=t.header?{}:[],o=0;o<e.length;o++){var c=o,l=e[o];l=((e,n)=>(e=>(t.dynamicTypingFunction&&void 0===t.dynamicTyping[e]&&(t.dynamicTyping[e]=t.dynamicTypingFunction(e)),!0===(t.dynamicTyping[e]||t.dynamicTyping)))(e)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((t=>{if(s.test(t)&&(t=parseFloat(t),i<t&&t<a))return 1})(n)?parseFloat(n):u.test(n)?new Date(n):""===n?null:n):n)(c=t.header?o>=v.length?"__parsed_extra":v[o]:c,l=t.transform?t.transform(l,c):l),"__parsed_extra"===c?(r[c]=r[c]||[],r[c].push(l)):r[c]=l}return t.header&&(o>v.length?P("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+o,p+n):o<v.length&&P("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+o,p+n)),r}var l;m&&(t.header||t.dynamicTyping||t.transform)&&(l=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(o),l=m.data.length):m.data=o(m.data,0),t.header&&m.meta&&(m.meta.fields=v),p+=l)}function E(){return t.header&&0===v.length}function P(t,e,n,r){t={type:t,code:e,message:n},void 0!==r&&(t.row=r),m.errors.push(t)}_(t.step)&&(o=t.step,t.step=function(e){m=e,E()?S():(S(),0!==m.data.length&&(f+=e.data.length,t.preview&&f>t.preview?n.abort():(m.data=m.data[0],o(m,l))))}),this.parse=function(o,a,i){var s=t.quoteChar||'"';return t.newline||(t.newline=this.guessLineEndings(o,s)),r=!1,t.delimiter?_(t.delimiter)&&(t.delimiter=t.delimiter(o),m.meta.delimiter=t.delimiter):((s=((e,n,r,o,a)=>{var i,s,u,l;a=a||[",","\t","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var f=0;f<a.length;f++){for(var p,d=a[f],h=0,g=0,v=0,m=(u=void 0,new y({comments:o,delimiter:d,newline:n,preview:10}).parse(e)),b=0;b<m.data.length;b++)r&&w(m.data[b])?v++:(g+=p=m.data[b].length,void 0===u?u=p:0<p&&(h+=Math.abs(p-u),u=p));0<m.data.length&&(g/=m.data.length-v),(void 0===s||h<=s)&&(void 0===l||l<g)&&1.99<g&&(s=h,i=d,l=g)}return{successful:!!(t.delimiter=i),bestDelimiter:i}})(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=s.bestDelimiter:(r=!0,t.delimiter=c.DefaultDelimiter),m.meta.delimiter=t.delimiter),s=b(t),t.preview&&t.header&&s.preview++,e=o,n=new y(s),m=n.parse(e,a,i),S(),d?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=_(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){l.streamer._halted?(d=!1,l.streamer.parseChunk(e,!0)):setTimeout(l.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),m.meta.aborted=!0,_(t.complete)&&t.complete(m),e=""},this.guessLineEndings=function(t,e){t=t.substring(0,1048576),e=new RegExp(h(e)+"([^]*?)"+h(e),"gm");var n=(t=t.replace(e,"")).split("\r");if(t=1<(e=t.split("\n")).length&&e[0].length<n[0].length,1===n.length||t)return"\n";for(var r=0,o=0;o<n.length;o++)"\n"===n[o][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function y(t){var e=(t=t||{}).delimiter,n=t.newline,r=t.comments,o=t.step,a=t.preview,i=t.fastMode,s=null,u=!1,l=null==t.quoteChar?'"':t.quoteChar,f=l;if(void 0!==t.escapeChar&&(f=t.escapeChar),("string"!=typeof e||-1<c.BAD_DELIMITERS.indexOf(e))&&(e=","),r===e)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<c.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var p=0,d=!1;this.parse=function(c,y,g){if("string"!=typeof c)throw new Error("Input must be a string");var v=c.length,m=e.length,b=n.length,w=r.length,S=_(o),E=[],P=[],k=[],O=p=0;if(!c)return M();if(i||!1!==i&&-1===c.indexOf(l)){for(var T=c.split(n),A=0;A<T.length;A++){if(k=T[A],p+=k.length,A!==T.length-1)p+=n.length;else if(g)return M();if(!r||k.substring(0,w)!==r){if(S){if(E=[],L(k.split(e)),B(),d)return M()}else L(k.split(e));if(a&&a<=A)return E=E.slice(0,a),M(!0)}}return M()}for(var I=c.indexOf(e,p),D=c.indexOf(n,p),j=new RegExp(h(f)+h(l),"g"),R=c.indexOf(l,p);;)if(c[p]===l)for(R=p,p++;;){if(-1===(R=c.indexOf(l,R+1)))return g||P.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:E.length,index:p}),C();if(R===v-1)return C(c.substring(p,R).replace(j,l));if(l===f&&c[R+1]===f)R++;else if(l===f||0===R||c[R-1]!==f){-1!==I&&I<R+1&&(I=c.indexOf(e,R+1));var x=F(-1===(D=-1!==D&&D<R+1?c.indexOf(n,R+1):D)?I:Math.min(I,D));if(c.substr(R+1+x,m)===e){k.push(c.substring(p,R).replace(j,l)),c[p=R+1+x+m]!==l&&(R=c.indexOf(l,p)),I=c.indexOf(e,p),D=c.indexOf(n,p);break}if(x=F(D),c.substring(R+1+x,R+1+x+b)===n){if(k.push(c.substring(p,R).replace(j,l)),N(R+1+x+b),I=c.indexOf(e,p),R=c.indexOf(l,p),S&&(B(),d))return M();if(a&&E.length>=a)return M(!0);break}P.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:E.length,index:p}),R++}}else if(r&&0===k.length&&c.substring(p,p+w)===r){if(-1===D)return M();p=D+b,D=c.indexOf(n,p),I=c.indexOf(e,p)}else if(-1!==I&&(I<D||-1===D))k.push(c.substring(p,I)),p=I+m,I=c.indexOf(e,p);else{if(-1===D)break;if(k.push(c.substring(p,D)),N(D+b),S&&(B(),d))return M();if(a&&E.length>=a)return M(!0)}return C();function L(t){E.push(t),O=p}function F(t){return-1!==t&&(t=c.substring(R+1,t))&&""===t.trim()?t.length:0}function C(t){return g||(void 0===t&&(t=c.substring(p)),k.push(t),p=v,L(k),S&&B()),M()}function N(t){p=t,L(k),k=[],D=c.indexOf(n,p)}function M(r){if(t.header&&!y&&E.length&&!u){var o=E[0],a=Object.create(null),i=new Set(o);let e=!1;for(let n=0;n<o.length;n++){let r=o[n];if(a[r=_(t.transformHeader)?t.transformHeader(r,n):r]){let t,c=a[r];for(;t=r+"_"+c,c++,i.has(t););i.add(t),o[n]=t,a[r]++,e=!0,(s=null===s?{}:s)[t]=r}else a[r]=1,o[n]=r;i.add(r)}e&&console.warn("Duplicate headers found and renamed."),u=!0}return{data:E,errors:P,meta:{delimiter:e,linebreak:n,aborted:d,truncated:!!r,cursor:O+(y||0),renamedHeaders:s}}}function B(){o(M()),E=[],P=[]}},this.abort=function(){d=!0},this.getCharIndex=function(){return p}}function g(t){var e=t.data,n=a[e.workerId],r=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){r=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(_(n.userStep)){for(var i=0;i<e.results.data.length&&(n.userStep({data:e.results.data[i],errors:e.results.errors,meta:e.results.meta},o),!r);i++);delete e.results}else _(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!r&&v(e.workerId,e.results)}function v(t,e){var n=a[t];_(n.userComplete)&&n.userComplete(e),n.terminate(),delete a[t]}function m(){throw new Error("Not implemented.")}function b(t){if("object"!=typeof t||null===t)return t;var e,n=Array.isArray(t)?[]:{};for(e in t)n[e]=b(t[e]);return n}function w(t,e){return function(){t.apply(e,arguments)}}function _(t){return"function"==typeof t}return c.parse=function(e,r){var o=(r=r||{}).dynamicTyping||!1;if(_(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!_(r.transform)&&r.transform,!r.worker||!c.WORKERS_SUPPORTED)return o=null,c.NODE_STREAM_INPUT,"string"==typeof e?(e=(t=>65279!==t.charCodeAt(0)?t:t.slice(1))(e),o=new(r.download?u:f)(r)):!0===e.readable&&_(e.read)&&_(e.on)?o=new p(r):(n.File&&e instanceof File||e instanceof Object)&&(o=new l(r)),o.stream(e);(o=(()=>{var e;return!!c.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,r=t.toString();return c.BLOB_URL||(c.BLOB_URL=e.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(e=new n.Worker(e)).onmessage=g,e.id=i++,a[e.id]=e)})()).userStep=r.step,o.userChunk=r.chunk,o.userComplete=r.complete,o.userError=r.error,r.step=_(r.step),r.chunk=_(r.chunk),r.complete=_(r.complete),r.error=_(r.error),delete r.worker,o.postMessage({input:e,config:r,workerId:o.id})},c.unparse=function(t,e){var n=!1,r=!0,o=",",a="\r\n",i='"',s=i+i,u=!1,l=null,f=!1,p=((()=>{if("object"==typeof e){if("string"!=typeof e.delimiter||c.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(o=e.delimiter),"boolean"!=typeof e.quotes&&"function"!=typeof e.quotes&&!Array.isArray(e.quotes)||(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(a=e.newline),"string"==typeof e.quoteChar&&(i=e.quoteChar),"boolean"==typeof e.header&&(r=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");l=e.columns}void 0!==e.escapeChar&&(s=e.escapeChar+i),e.escapeFormulae instanceof RegExp?f=e.escapeFormulae:"boolean"==typeof e.escapeFormulae&&e.escapeFormulae&&(f=/^[=+\-@\t\r].*$/)}})(),new RegExp(h(i),"g"));if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return d(null,t,u);if("object"==typeof t[0])return d(l||Object.keys(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||l),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),d(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function d(t,e,n){var i="",c=("string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e)),Array.isArray(t)&&0<t.length),s=!Array.isArray(e[0]);if(c&&r){for(var u=0;u<t.length;u++)0<u&&(i+=o),i+=y(t[u],u);0<e.length&&(i+=a)}for(var l=0;l<e.length;l++){var f=(c?t:e[l]).length,p=!1,d=c?0===Object.keys(e[l]).length:0===e[l].length;if(n&&!c&&(p="greedy"===n?""===e[l].join("").trim():1===e[l].length&&0===e[l][0].length),"greedy"===n&&c){for(var h=[],g=0;g<f;g++){var v=s?t[g]:g;h.push(e[l][v])}p=""===h.join("").trim()}if(!p){for(var m=0;m<f;m++){0<m&&!d&&(i+=o);var b=c&&s?t[m]:m;i+=y(e[l][b],m)}l<e.length-1&&(!n||0<f&&!d)&&(i+=a)}}return i}function y(t,e){var r,a;return null==t?"":t.constructor===Date?JSON.stringify(t).slice(1,25):(a=!1,f&&"string"==typeof t&&f.test(t)&&(t="'"+t,a=!0),r=t.toString().replace(p,s),(a=a||!0===n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||((t,e)=>{for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1})(r,c.BAD_DELIMITERS)||-1<r.indexOf(o)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?i+r+i:r)}},c.RECORD_SEP=String.fromCharCode(30),c.UNIT_SEP=String.fromCharCode(31),c.BYTE_ORDER_MARK="\ufeff",c.BAD_DELIMITERS=["\r","\n",'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!r&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=y,c.ParserHandle=d,c.NetworkStreamer=u,c.FileStreamer=l,c.StringStreamer=f,c.ReadableStreamStreamer=p,n.jQuery&&((e=n.jQuery).fn.parse=function(t){var r=t.config||{},o=[];return this.each(function(t){if("INPUT"!==e(this).prop("tagName").toUpperCase()||"file"!==e(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:e.extend({},r)})}),a(),this;function a(){if(0===o.length)_(t.complete)&&t.complete();else{var n,r,a,s=o[0];if(_(t.before)){var u=t.before(s.file,s.inputElem);if("object"==typeof u){if("abort"===u.action)return n=s.file,r=s.inputElem,a=u.reason,void(_(t.error)&&t.error({name:"AbortError"},n,r,a));if("skip"===u.action)return void i();"object"==typeof u.config&&(s.instanceConfig=e.extend(s.instanceConfig,u.config))}else if("skip"===u)return void i()}var l=s.instanceConfig.complete;s.instanceConfig.complete=function(t){_(l)&&l(t,s.file,s.inputElem),i()},c.parse(s.file,s.instanceConfig)}}function i(){o.splice(0,1),a()}}),o&&(n.onmessage=function(t){t=t.data,void 0===c.WORKER_ID&&t&&(c.WORKER_ID=t.workerId),"string"==typeof t.input?n.postMessage({workerId:c.WORKER_ID,results:c.parse(t.input,t.config),finished:!0}):(n.File&&t.input instanceof File||t.input instanceof Object)&&(t=c.parse(t.input,t.config))&&n.postMessage({workerId:c.WORKER_ID,results:t,finished:!0})}),(u.prototype=Object.create(s.prototype)).constructor=u,(l.prototype=Object.create(s.prototype)).constructor=l,(f.prototype=Object.create(f.prototype)).constructor=f,(p.prototype=Object.create(s.prototype)).constructor=p,c},void 0===(r=n.apply(e,[]))||(t.exports=r)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(){var n,r,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function c(t,o,a,i){var c=o&&o.prototype instanceof u?o:u,l=Object.create(c.prototype);return e(l,"_invoke",function(t,e,o){var a,i,c,u=0,l=o||[],f=!1,p={p:0,n:0,v:n,a:d,f:d.bind(n,4),d:function(t,e){return a=t,i=0,c=n,p.n=e,s}};function d(t,e){for(i=t,c=e,r=0;!f&&u&&!o&&r<l.length;r++){var o,a=l[r],d=p.p,h=a[2];t>3?(o=h===e)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=d&&((o=t<2&&d<a[1])?(i=0,p.v=e,p.n=a[1]):d<h&&(o=t<3||a[0]>e||e>h)&&(a[4]=t,a[5]=e,p.n=h,i=0))}if(o||t>1)return s;throw f=!0,e}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),i=l,c=h;(r=i<2?n:c)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,c)):p.n=c:p.v=c);try{if(u=2,a){if(i||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=a.return)&&r.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((r=(f=p.n<0)?c:t.call(e,p))!==s)break}catch(t){a=n,i=1,c=t}finally{u=1}}return{value:r,done:f}}}(t,a,i),!0),l}var s={};function u(){}function l(){}function f(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(e(r={},a,function(){return this}),r),d=f.prototype=u.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=f,e(d,"constructor",f),e(f,"constructor",l),l.displayName="GeneratorFunction",e(f,i,"GeneratorFunction"),e(d),e(d,i,"Generator"),e(d,a,function(){return this}),e(d,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:h}})()}function e(t,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}e=function(t,n,r,o){if(n)a?a(t,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[n]=r;else{var i=function(n,r){e(t,n,function(t){return this._invoke(n,r,t)})};i("next",0),i("throw",1),i("return",2)}},e(t,n,r,o)}function r(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,s,"next",t)}function s(t){r(i,o,a,c,s,"throw",t)}c(void 0)})}}var a,i,c,s,u,l,f;const p={test:function(t){console.log("Got data in test:",t.rank_plot)},fetchFromPython:(f=o(t().m(function e(n){var r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(n);case 1:if((r=t.v).ok){t.n=3;break}return console.log("Retrying Fetch..."),t.n=2,fetch(n);case 2:r=t.v;case 3:return t.n=4,r.json();case 4:return o=t.v,t.a(2,o||null)}},e)})),function(t){return f.apply(this,arguments)}),fetchHeroData:(l=o(t().m(function e(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.fetchFromPython("/api/get_hero_data");case 1:return t.a(2,t.v)}},e,this)})),function(){return l.apply(this,arguments)}),fetchBattleData:(u=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return u.apply(this,arguments)}),rsFetchBattleData:(s=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass user to fetch battles data");case 1:return t.n=2,fetch("/api/rs_get_battle_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return s.apply(this,arguments)}),fetchSeasonDetails:(c=o(t().m(function e(){var n,r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("/api/get_season_details");case 1:return n=t.v,t.n=2,n.json();case 2:if(!(r=t.v).success){t.n=3;break}return o=JSON.parse(r.seasonDetails),t.a(2,{seasonDetails:o,error:!1});case 3:return t.a(2,{seasonDetails:null,error:r.error});case 4:return t.a(2)}},e)})),function(){return c.apply(this,arguments)}),fetchUser:(i=o(t().m(function e(n){var r,o,a,i,c;return t().w(function(t){for(;;)switch(t.n){case 0:if(n.name&&n.world_code||n.id){t.n=1;break}throw new Error("Must pass a user object with either user.name and user.world_code or user.id to fetch user");case 1:return t.n=2,fetch("/api/get_user_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userData:n})});case 2:return r=t.v,t.n=3,r.json();case 3:if(o=t.v,t.p=4,!r.ok){t.n=9;break}if(o.foundUser){t.n=7;break}if(!n.name){t.n=5;break}return a=n.world_code.replace("world_",""),t.a(2,{user:null,error:'Could not find user: "'.concat(n.name,'" in world_code: ').concat(a)});case 5:if(!n.id){t.n=6;break}return t.a(2,{user:null,error:"Could not find user with ID: ".concat(n.id)});case 6:t.n=8;break;case 7:return i=o.user,console.log("Server communication successful; received response data for user"),console.log("Found user: ".concat(JSON.stringify(i))),t.a(2,{user:i,error:!1});case 8:t.n=10;break;case 9:return console.log("Server communication unsuccessful"),t.a(2,{user:null,error:o.error});case 10:t.n=12;break;case 11:return t.p=11,c=t.v,console.error("Error fetching and caching user: ".concat(c)),t.a(2,{user:null,error:c.message});case 12:return t.a(2)}},e,null,[[4,11]])})),function(t){return i.apply(this,arguments)}),fetchDataFromID:(a=o(t().m(function e(n){return t().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Must pass ID to fetch user");case 1:return t.n=2,fetch("/api/get_battle_data_from_id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n})});case 2:return t.a(2,t.v)}},e)})),function(t){return a.apply(this,arguments)})};var d=n(809),h=n.n(d),y=new Set(["world_kor","world_global","world_jpn","world_asia","world_eu"]),g={world_global:"Global",world_kor:"Korea",world_jpn:"Japan",world_asia:"Asia",world_eu:"Europe"},v=864e5,m={bronze:0,silver:1,gold:2,master:3,challenger:4,champion:5,warlord:6,emperor:7,legend:8},b=["Date/Time","Seq Num","P1 ID","P1 Server","P1 League","P1 Points","P2 ID","P2 Server","P2 League","Win","First Pick","P1 Preban 1","P1 Preban 2","P2 Preban 1","P2 Preban 2","P1 Pick 1","P1 Pick 2","P1 Pick 3","P1 Pick 4","P1 Pick 5","P2 Pick 1","P2 Pick 2","P2 Pick 3","P2 Pick 4","P2 Pick 5","P1 Postban","P2 Postban"],w=function(t){for(var e=new Uint8Array(30001),n=[],r=2;r<=t;r++)if(!e[r]){n.push(r);for(var o=r*r;o<=t;o+=r)e[o]=1}return n}(3e4);function _(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return S(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(S(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,S(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,S(f,"constructor",u),S(u,"constructor",s),s.displayName="GeneratorFunction",S(u,o,"GeneratorFunction"),S(f),S(f,o,"Generator"),S(f,r,function(){return this}),S(f,"toString",function(){return"[object Generator]"}),(_=function(){return{w:a,m:p}})()}function S(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}S=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){S(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},S(t,e,n,r)}function E(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}var P,k,O={parseUpload:(P=_().m(function t(e){var n,r,o;return _().w(function(t){for(;;)switch(t.n){case 0:return this.validateCSV(e),t.n=1,e.text();case 1:if(n=t.v,(r=h().parse(n,{header:!0,skipEmptyLines:!0,quoteChar:'"',dynamicTyping:!1})).meta.fields.forEach(function(t,e){var n=t.trim().replace(/"/g,"");if(n!==b[e])throw new Error("Header ".concat(n," does not match expected column ").concat(b[e]," at index ").concat(e))}),!(r.errors.length>0)){t.n=2;break}throw o=r.errors[0],new Error("Failed to parse CSV: Row ".concat(o.row,", ").concat(o.message));case 2:return t.a(2,r.data)}},t,this)}),k=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=P.apply(t,e);function a(t){E(o,n,r,a,i,"next",t)}function i(t){E(o,n,r,a,i,"throw",t)}a(void 0)})},function(t){return k.apply(this,arguments)}),validateCSV:function(t){if(!t.name.endsWith(".csv"))throw new Error("File must be .csv");if(t.size>10485760)throw new Error("File must be smaller than ".concat(10,"mb, got ").concat(t.size/1048576,"mb File."))}};const T=O,A=(t,e)=>e.some(e=>t instanceof e);let I,D;const j=new WeakMap,R=new WeakMap,x=new WeakMap;let L={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return j.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return N(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function F(t){L=t(L)}function C(t){return"function"==typeof t?(e=t,(D||(D=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(M(this),t),N(this.request)}:function(...t){return N(e.apply(M(this),t))}):(t instanceof IDBTransaction&&function(t){if(j.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});j.set(t,e)}(t),A(t,I||(I=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,L):t);var e}function N(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(N(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return x.set(e,t),e}(t);if(R.has(t))return R.get(t);const e=C(t);return e!==t&&(R.set(t,e),x.set(e,t)),e}const M=t=>x.get(t);function B(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),c=N(i);return r&&i.addEventListener("upgradeneeded",t=>{r(N(i.result),t.oldVersion,t.newVersion,N(i.transaction),t)}),n&&i.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{a&&t.addEventListener("close",()=>a()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}const G=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],H=new Map;function K(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(H.get(e))return H.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=U.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!G.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),o&&a.done]))[0]};return H.set(e,a),a}F(t=>({...t,get:(e,n,r)=>K(e,n)||t.get(e,n,r),has:(e,n)=>!!K(e,n)||t.has(e,n)}));const V=["continue","continuePrimaryKey","advance"],W={},q=new WeakMap,z=new WeakMap,J={get(t,e){if(!V.includes(e))return t[e];let n=W[e];return n||(n=W[e]=function(...t){q.set(this,z.get(this)[e](...t))}),n}};async function*Y(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,J);for(z.set(n,e),x.set(n,M(e));e;)yield n,e=await(q.get(n)||e.continue()),q.delete(n)}function X(t,e){return e===Symbol.asyncIterator&&A(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&A(t,[IDBIndex,IDBObjectStore])}function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function Q(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Z(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Z(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Z(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Z(f,"constructor",u),Z(u,"constructor",s),s.displayName="GeneratorFunction",Z(u,o,"GeneratorFunction"),Z(f),Z(f,o,"Generator"),Z(f,r,function(){return this}),Z(f,"toString",function(){return"[object Generator]"}),(Q=function(){return{w:a,m:p}})()}function Z(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Z=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Z(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Z(t,e,n,r)}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function et(t,e,n){return(e=function(t){var e=function(t){if("object"!=$(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function rt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){nt(a,r,o,i,c,"next",t)}function c(t){nt(a,r,o,i,c,"throw",t)}i(void 0)})}}function ot(t,e){return at.apply(this,arguments)}function at(){return(at=rt(Q().m(function t(e,n){var r;return Q().w(function(t){for(;;)switch(t.n){case 0:return(r=e.transaction(n,"readwrite")).objectStore(n).clear(),t.n=1,r.done;case 1:return t.a(2)}},t)}))).apply(this,arguments)}F(t=>({...t,get:(e,n,r)=>X(e,n)?Y:t.get(e,n,r),has:(e,n)=>X(e,n)||t.has(e,n)}));var it,ct,st,ut,lt,ft,pt,dt,ht,yt,gt,vt,mt,bt,wt,_t,St,Et,Pt={USER:"current-user",HERO_MANAGER:"hero-manager",BATTLES:"battles",UPLOADED_BATTLES:"uploaded-battles",FILTERED_BATTLES:"filtered-battles",FILTER_STR:"filter-str",STATS:"stats",SEASON_DETAILS:"season-details",AUTO_ZOOM_FLAG:"auto-zoom",AUTO_QUERY_FLAG:"auto-query",GLOBAL_USERS:"global-users",EU_USERS:"eu-users",ASIA_USERS:"asia-users",JPN_USERS:"jpn-users",KOR_USERS:"kor-users"},kt={autoZoom:Pt.AUTO_ZOOM_FLAG,autoQuery:Pt.AUTO_QUERY_FLAG},Ot={consts:{DB_NAME:"E7ArenaStatsClientDB",DB_VERSION:1,STORE_NAME:"DataStore",META_STORE_NAME:"MetaStore",CACHE_TIMEOUT:1728e5},Keys:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach(function(e){et(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Pt),MetaKeys:{TIMESTAMP:"timestamp"},loaded_UM:new Set,openDB:(Et=rt(Q().m(function t(){return Q().w(function(t){for(;;)if(0===t.n)return t.a(2,B(Ot.consts.DB_NAME,Ot.consts.DB_VERSION,{upgrade:function(t){t.objectStoreNames.contains(Ot.consts.STORE_NAME)&&(t.deleteObjectStore(Ot.consts.STORE_NAME),console.log("Old store deleted")),t.objectStoreNames.contains(Ot.consts.STORE_NAME)||(console.log("Created data store"),t.createObjectStore(Ot.consts.STORE_NAME)),t.objectStoreNames.contains(Ot.consts.META_STORE_NAME)||(console.log("Created meta data store"),t.createObjectStore(Ot.consts.META_STORE_NAME))}}))},t)})),function(){return Et.apply(this,arguments)}),get:(St=rt(Q().m(function t(e){var n,r;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.get(this.consts.STORE_NAME,e);case 2:if(null===(r=t.v)){t.n=3;break}console.log("Found ".concat(e," in cache")),t.n=4;break;case 3:return console.log("".concat(e," not found in cache; returning null")),t.a(2,null);case 4:return t.n=5,this.checkCacheTimeout(e);case 5:if(!t.v){t.n=6;break}return console.log("Timeout not reached, using cache for ".concat(e)),t.a(2,r);case 6:return console.log("Timeout reached, returning null for ".concat(e)),t.a(2,null);case 7:return t.a(2)}},t,this)})),function(t){return St.apply(this,arguments)}),cache:(_t=rt(Q().m(function t(e,n){var r;return Q().w(function(t){for(;;)switch(t.n){case 0:return console.log("Caching ".concat(e," with data: ").concat(n)),t.n=1,this.openDB();case 1:return r=t.v,t.n=2,r.put(this.consts.STORE_NAME,n,e);case 2:return t.n=3,this.setTimestamp(e,Date.now());case 3:return t.a(2)}},t,this)})),function(t,e){return _t.apply(this,arguments)}),delete:(wt=rt(Q().m(function t(e){var n;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,t.n=2,n.delete(this.consts.STORE_NAME,e);case 2:return t.n=3,this.deleteTimestamp(e);case 3:return t.a(2)}},t,this)})),function(t){return wt.apply(this,arguments)}),deleteDB:(bt=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,indexedDB.deleteDatabase(this.consts.DB_NAME);case 1:console.log("Database deleted");case 2:return t.a(2)}},t,this)})),function(){return bt.apply(this,arguments)}),getTimestamp:(mt=rt(Q().m(function t(e){var n,r,o;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.get(this.consts.META_STORE_NAME,r);case 2:return o=t.v,t.a(2,null!=o?o:null)}},t,this)})),function(t){return mt.apply(this,arguments)}),setTimestamp:(vt=rt(Q().m(function t(e,n){var r,o,a;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return r=t.v,o="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,r.put(this.consts.META_STORE_NAME,n,o);case 2:return t.n=3,r.get(this.consts.META_STORE_NAME,o);case 3:a=t.v,console.log("Timestamp set: ".concat(a));case 4:return t.a(2)}},t,this)})),function(t,e){return vt.apply(this,arguments)}),deleteTimestamp:(gt=rt(Q().m(function t(e){var n,r;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return n=t.v,r="".concat(e+this.MetaKeys.TIMESTAMP),t.n=2,n.delete(this.consts.META_STORE_NAME,r);case 2:console.log("Timestamp deleted for <".concat(e,">"));case 3:return t.a(2)}},t,this)})),function(t){return gt.apply(this,arguments)}),clearData:(yt=rt(Q().m(function t(){var e;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.openDB();case 1:return e=t.v,t.n=2,ot(e,this.consts.STORE_NAME);case 2:return t.n=3,ot(e,this.consts.META_STORE_NAME);case 3:console.log("All data cleared from data cache and meta data cache");case 4:return t.a(2)}},t,this)})),function(){return yt.apply(this,arguments)}),clearUserData:(ht=rt(Q().m(function t(){var e,n=this;return Q().w(function(t){for(;;)switch(t.n){case 0:return e=[Pt.USER,Pt.BATTLES,Pt.UPLOADED_BATTLES,Pt.FILTERED_BATTLES,Pt.FILTER_STR,Pt.STATS],t.n=1,Promise.all(e.map(function(t){return n.delete(t)}));case 1:console.log("User data cleared from data cache");case 2:return t.a(2)}},t)})),function(){return ht.apply(this,arguments)}),clearSeasonData:(dt=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.delete(Pt.SEASON_DETAILS);case 1:console.log("Season data cleared from data cache");case 2:return t.a(2)}},t,this)})),function(){return dt.apply(this,arguments)}),checkCacheTimeout:(pt=rt(Q().m(function t(e){var n,r;return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getTimestamp(e);case 1:if(n=t.v,r=Date.now(),console.log("Checking Timeout for <".concat(e,"> | Current time: ").concat(r,", cache timestamp: ").concat(n,", difference: ").concat(r-n," ms")),n&&!(r-n>Ot.consts.CACHE_TIMEOUT)){t.n=3;break}return console.log("Cache timeout reached, clearing data from <".concat(e,">")),t.n=2,this.delete(e);case 2:return t.a(2,!1);case 3:return t.a(2,!0)}},t,this)})),function(t){return pt.apply(this,arguments)}),getFilterStr:(ft=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(Ot.Keys.FILTER_STR);case 1:return t.a(2,t.v)}},t,this)})),function(){return ft.apply(this,arguments)}),setFilterStr:(lt=rt(Q().m(function t(e){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(Ot.Keys.FILTER_STR,e);case 1:return t.a(2)}},t,this)})),function(t){return lt.apply(this,arguments)}),getStats:(ut=rt(Q().m(function t(){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.get(Ot.Keys.STATS);case 1:return t.a(2,t.v)}},t,this)})),function(){return ut.apply(this,arguments)}),setStats:(st=rt(Q().m(function t(e){return Q().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.cache(Pt.STATS,e);case 1:return t.a(2)}},t,this)})),function(t){return st.apply(this,arguments)}),getFlag:(ct=rt(Q().m(function t(e){var n;return Q().w(function(t){for(;;)switch(t.n){case 0:if(n=kt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.get(n);case 2:return t.a(2,t.v)}},t,this)})),function(t){return ct.apply(this,arguments)}),setFlag:(it=rt(Q().m(function t(e,n){var r;return Q().w(function(t){for(;;)switch(t.n){case 0:if(r=kt[e]){t.n=1;break}throw new Error("No key found for flag <".concat(e,">"));case 1:return t.n=2,this.cache(r,n);case 2:return t.a(2)}},t,this)})),function(t,e){return it.apply(this,arguments)})};const Tt=Ot;function At(t){var e={};for(var n in t)Array.isArray(t[n])&&t[n].length>0?e[n]=[t[n][0],"Length: ".concat(t[n].length)]:e[n]=t[n];console.log(e)}function It(t){return function(t){if(Array.isArray(t))return Dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Dt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function jt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Rt(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Rt(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Rt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Rt(f,"constructor",u),Rt(u,"constructor",s),s.displayName="GeneratorFunction",Rt(u,o,"GeneratorFunction"),Rt(f),Rt(f,o,"Generator"),Rt(f,r,function(){return this}),Rt(f,"toString",function(){return"[object Generator]"}),(jt=function(){return{w:a,m:p}})()}function Rt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Rt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Rt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Rt(t,e,n,r)}function xt(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Lt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){xt(a,r,o,i,c,"next",t)}function c(t){xt(a,r,o,i,c,"throw",t)}i(void 0)})}}function Ft(t){return Ct.apply(this,arguments)}function Ct(){return(Ct=Lt(jt().m(function t(e){var n,r,o;return jt().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,fetch(e);case 1:if((n=t.v).ok){t.n=2;break}throw new Error("HTTP error: status: ".concat(n.status));case 2:return t.n=3,n.json();case 3:return r=t.v,console.log("Fetched data from E7 Server; keys:",Object.keys(r)),t.a(2,r);case 4:return t.p=4,o=t.v,console.error("Error fetching global user data:",o),t.a(2,null)}},t,null,[[0,4]])}))).apply(this,arguments)}function Nt(){return Nt=Lt(jt().m(function t(){var e,n,r=arguments;return jt().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,console.log("Fetching hero data (lang=".concat(null!=e?e:"all",") from E7 Server...")),t.n=1,Ft("https://static.smilegatemegaport.com/gameRecord/epic7/epic7_hero.json");case 1:return n=t.v,e&&n[e]?n=n[e]:e&&!n[e]&&(console.error("Could not find hero data for language:",e),n=null),t.a(2,n)}},t)})),Nt.apply(this,arguments)}function Mt(){return(Mt=Lt(jt().m(function t(e){var n,r;return jt().w(function(t){for(;;)switch(t.n){case 0:if(e=e.replace("world_",""),It(y).some(function(t){return t.replace("world_","")===e})){t.n=1;break}return console.error("Could not find world code: ".concat(e)),t.a(2,null);case 1:return console.log("Fetching users for world code: ".concat(e," from E7 Server...")),n="https://static.smilegatemegaport.com/gameRecord/epic7/epic7_user_world_".concat(e,".json"),t.n=2,Ft(n);case 2:return(r=t.v)&&console.log("Got user data for world: ".concat(e," ; Found ").concat(r.users.length," users")),t.a(2,r)}},t)}))).apply(this,arguments)}const Bt={fetchHeroJSON:function(){return Nt.apply(this,arguments)},fetchUserJSON:function(t){return Mt.apply(this,arguments)}};function Gt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Ut(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ut(t,e){if(t){if("string"==typeof t)return Ht(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(t,e):void 0}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Kt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Vt(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Vt(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Vt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Vt(f,"constructor",u),Vt(u,"constructor",s),s.displayName="GeneratorFunction",Vt(u,o,"GeneratorFunction"),Vt(f),Vt(f,o,"Generator"),Vt(f,r,function(){return this}),Vt(f,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:a,m:p}})()}function Vt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Vt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Vt(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Vt(t,e,n,r)}function Wt(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function qt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Wt(a,r,o,i,c,"next",t)}function c(t){Wt(a,r,o,i,c,"throw",t)}i(void 0)})}}var zt,Jt,Yt,Xt,$t={getHeroManager:(Xt=qt(Kt().m(function t(){var e,n,r,o;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.get(Tt.Keys.HERO_MANAGER);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=this.fetchAndCacheHeroManager();case 4:return t.a(2,o)}},t,this)})),function(){return Xt.apply(this,arguments)}),createHeroManager:function(t){var e,n=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ut(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Gt(e.value,2),o=r[0],a=r[1],i=w[o];a.prime=i}}catch(t){n.e(t)}finally{n.f()}var c={heroes:t};return c=function(t){console.log("Adding Lookup Dicts"),console.log("\tAdding name lookup"),t.name_lookup=t.heroes.reduce(function(t,e){return t[e.name.toLowerCase().replace(/\s+/g,"")]=e,t},{}),console.log("\tAdding prime lookup"),t.prime_lookup=t.heroes.reduce(function(t,e){return t[e.prime]=e,t},{}),console.log("\tAdding code lookup"),t.code_lookup=t.heroes.reduce(function(t,e){return t[e.code]=e,t},{}),console.log("\tAdding prime pair lookup");var e=t.heroes.reduce(function(t,e){return t[e.prime]=e.name,t},{}),n=Object.keys(t.prime_lookup).length-1;console.log("\tAdding prime pair lookup; primes to process",n);for(var r=0;r<n-1;r++)for(var o=w[r],a=r+1;a<n;a++){var i=w[a],c=o*i,s=t.prime_lookup[o].name,u=t.prime_lookup[i].name;e[c]=[s,u].sort().join(", ")}return e[t.Fodder.prime*t.Fodder.prime]=[t.Fodder.name,t.Fodder.prime],t.prime_pair_lookup=e,t}(c=function(t){var e=t.heroes.length,n={attribute_cd:"N/A",code:"N/A",grade:"N/A",job_cd:"N/A",name:"Empty",prime:1},r={attribute_cd:"N/A",code:"N/A",grade:"2/3",job_cd:"N/A",name:"Fodder",prime:w[e]};return t.heroes.push(n),t.heroes.push(r),t.Fodder=r,t.Empty=n,t}(c)),c},fetchHeroManager:(Yt=qt(Kt().m(function t(){var e,n,r,o,a,i;return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Bt.fetchHeroJSON();case 1:if(a=e=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==e;case 2:if(!o){t.n=3;break}i=e,t.n=5;break;case 3:return t.n=4,p.fetchHeroData();case 4:i=t.v;case 5:return n=i.en,r=this.createHeroManager(n),console.log("Created HeroManager using raw data received from server"),t.a(2,r)}},t,this)})),function(){return Yt.apply(this,arguments)}),fetchAndCacheHeroManager:(Jt=qt(Kt().m(function t(){var e;return Kt().w(function(t){for(;;)switch(t.n){case 0:return console.log("HeroManager not found in cache, fetching from server and caching it"),t.n=1,this.fetchHeroManager();case 1:return e=t.v,t.n=2,Tt.cache(Tt.Keys.HERO_MANAGER,e);case 2:return console.log("Cached HeroManager using raw data recieved from server"),At(e),t.a(2,e)}},t,this)})),function(){return Jt.apply(this,arguments)}),deleteHeroManager:(zt=qt(Kt().m(function t(){return Kt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.delete(Tt.Keys.HERO_MANAGER);case 1:console.log("Removed hero manager from cache");case 2:return t.a(2)}},t)})),function(){return zt.apply(this,arguments)}),getHeroByName:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");if(!t)return e.Empty;var r=t.toLowerCase().replace(/\s+/g,"");return null!==(n=e.name_lookup[r])&&void 0!==n?n:null},getHeroByPrime:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_lookup[t]},getHeroByCode:function(t,e){var n;if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return t?null!==(n=e.code_lookup[t])&&void 0!==n?n:null:e.Empty},getPairNamesByProduct:function(t,e){if(!e)throw new Error("HeroManager instance must be passed to lookup functions");return e.prime_pair_lookup[t]}};const Qt=$t;function Zt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||te(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(t,e){if(t){if("string"==typeof t)return ee(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(t,e):void 0}}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ne(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])}),e||(e={name:"UID: ".concat(t[0]["P1 ID"])});var o,a=t.map(function(t,e){return e}),i=t.map(function(t){return t["P1 Points"]}),c=[],s={startX:null,endX:null,startY:null,endY:null},u=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=te(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){i=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(i)throw o}}}}(t.entries());try{for(u.s();!(o=u.n()).done;){var l=Zt(o.value,2),f=l[0],p=l[1];n&&p["Seq Num"]in n?(!0===r&&(s.startX=f<s.startX||null===s.startX?f-.5:s.startX,s.startY=p["P1 Points"]<s.startY+50||null===s.startY?p["P1 Points"]-50:s.startY,s.endX=f>s.endX||null===s.endX?f+.5:s.endX,s.endY=p["P1 Points"]>s.endY-50||null===s.endY?p["P1 Points"]+50:s.endY),c.push("#ff9900")):c.push("#0df8fd")}}catch(t){u.e(t)}finally{u.f()}var d={x:a,y:i,mode:"lines+markers",line:{color:"#4f9293",width:2},marker:{symbol:"circle",size:4,color:c},customdata:t.map(function(t){return[t["Date/Time"].slice(0,10),t["P1 League"]]}),hovertemplate:"Points: %{y}<br>Date: %{customdata[0]}<br>League: %{customdata[1]}<extra></extra>"},h={autosize:!0,font:{family:"Roboto, Open Sans"},title:{text:"".concat(e.name,"'s RTA Point Plot"),font:{size:24,color:"#dddddd"},xanchor:"center",yanchor:"top",y:.95,x:.5},xaxis:{title:{text:"Battle Number (Chronological)",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!1,tickfont:{size:12,color:"#dddddd"},range:s.startX?[s.startX,s.endX]:null},yaxis:{title:{text:"Victory Points",font:{size:18,color:"#dddddd"}},showgrid:!0,gridcolor:"#8d8d8d",zeroline:!0,zerolinecolor:"#dddddd",zerolinewidth:2,tickfont:{size:12,color:"#dddddd"},range:s.startY?[s.startY,s.endY]:null},plot_bgcolor:"#1e222d",paper_bgcolor:"#1e222d"},y="plot-".concat(Math.random().toString(36).substr(2,9));return'<div id="'.concat(y,'"></div>')+"\n<script>\n    Plotly.newPlot('".concat(y,"', [").concat(JSON.stringify(d),"], ").concat(JSON.stringify(h),", ").concat(JSON.stringify({responsive:!0}),");\n<\/script>\n")}function re(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")(?=[,)\\s;]|$)"),e)}function oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"i";return new RegExp("^(?:".concat(t.source,")$"),e)}var ae=/[a-z][a-z0-9.\s]*/i,ie=/\d{4}-\d{2}-\d{2}/,ce=/\{\s*\}/,se=/\d+/,ue=/season-[1-9]+[0-9]*(\.[1-9]*)?|current-season/i,le=new RegExp("^".concat(ie.source,"$"),"i"),fe=new RegExp("(?:".concat(ue.source,")"),"i"),pe=/(?:date|is-first-pick|is-win|victory-points|p1.picks|p1.prebans|p2.prebans|prebans|p2.picks|p1.pick1|p1.pick2|p1.pick3|p1.pick4|p1.pick5|p2.pick1|p2.pick2|p2.pick3|p2.pick4|p2.pick5|p1.league|p2.league|p1.postban|p2.postban|p1.server|p2.server)/i,de=ae.source,he=se.source,ye=ie.source,ge=pe.source,ve=fe.source,me=new RegExp('"('.concat(de,")\"|'(").concat(de,")'"),"i"),be=new RegExp(oe(me),"i"),we=me.source,_e=new RegExp("(?:".concat(we,"|").concat(de,"|").concat(ye,")"),"i"),Se=new RegExp("(?:".concat(ge,"|").concat(ve,")"),"i"),Ee=_e.source,Pe=new RegExp("\\{\\s*(?:".concat(Ee,"\\s*)(?:,\\s*").concat(Ee,"\\s*)*,?\\s*\\}|").concat(ce.source),"i"),ke=new RegExp("".concat(he,"\\.\\.\\.").concat(he,"|").concat(ye,"\\.\\.\\.").concat(ye,"|").concat(he,"\\.\\.\\.=").concat(he,"|").concat(ye,"\\.\\.\\.=").concat(ye)),Oe=new RegExp("^".concat(ke.source,"$")),Te={VALID_STRING_RE:ae,VALID_DATE_RE:ie,VALID_INT_RE:se,EMPTY_SET_RE:ce,SET_ELEMENT_RE:_e,VALID_SET_RE:Pe,VALID_STRING_LITERAL_RE:be,VALID_DATE_LITERAL_RE:le,VALID_INT_LITERAL_RE:/^\d+$/,VALID_BOOL_LITERAL_RE:/^(true|false)$/i,VALID_RANGE_RE:ke,VALID_RANGE_LITERAL_RE:Oe,VALID_SEASON_RE:ue,VALID_SEASON_LITERAL_RE:oe(ue),VALID_DATA_WORD_RE:fe,VALID_DATA_WORD_LITERAL_RE:oe(fe),VALID_FIELD_WORD_RE:pe,VALID_DATAFIELD_RE:Se,VALID_GLOBAL_FILTER_RE:/last-n\(\d+\)/i,ANCHORED_STR_LITERAL_RE:oe(be),padRegex:re,anchorExp:oe,tokenMatch:function(t){return t.match(/AND(?=\()|OR(?=\()|XOR(?=\()|NOT(?=\()|LAST-N(?=\()/i)?(console.log("Matched stream as clause:",t),"keyword"):t.match(/\s+(?:!=|<|>|=|>=|<=|in|!in)(?=\s+)/i)?(console.log("Matched stream as operator:",t),"operator"):t.match(new RegExp("[a-z0-9.\"'}=)-]".concat(Se.source,"(?=[,)\\s;]|$)"),"i"))?(console.log("Matched stream as field with preceding fragment:",t),null):t.match(re(Se))?(console.log("Matched stream as Data Field:",t),"datafield"):t.match(/[^(,\s;.=0-9]+\d+/i)?(console.log("Matched stream as non-num null"),null):t.match(re(ke))?(console.log("Matched stream as range:",t),"range"):t.match(re(se))?(console.log("Matched stream as number:",t),"number"):t.match(re(ie))?(console.log("Matched stream as date:",t),"date"):t.match(re(Pe))?(console.log("Matched stream as set:",t),"set"):t.match(/(?:^|\s)(?:true|false)(?=[,)\s;]|$)/i)?(console.log("Matched stream as bool:",t),"bool"):t.match(re(me))?(console.log("Matched stream as string:",t),"string"):t.match(/[\(\)\{\}\;\,]/)?(console.log("Matched stream as bracket:",t),"bracket"):(t.next(),console.log("Matched stream as null:",t),null)}};function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function Ie(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||je(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=je(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function je(t,e){if(t){if("string"==typeof t)return Re(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(t,e):void 0}}function Re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fe(r.key),r)}}function Le(t,e,n){return e&&xe(t.prototype,e),n&&xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fe(t){var e=function(t){if("object"!=Ae(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ae(e)?e:e+""}function Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t,e,n){return e=He(e),function(t,e){if(e&&("object"==Ae(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ge()?Reflect.construct(e,n||[],He(t).constructor):e.apply(t,n))}function Me(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ue(t,e)}function Be(t){var e="function"==typeof Map?new Map:void 0;return Be=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Ge())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Ue(o,n.prototype),o}(t,arguments,He(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ue(n,t)},Be(t)}function Ge(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ge=function(){return!!t})()}function Ue(t,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ue(t,e)}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}var Ke=function(t){function e(t){var n;return Ce(this,e),(n=Ne(this,e,[t])).name="Filter Syntax Exception",n}return Me(e,t),Le(e)}(Be(Error)),Ve=function(t){function e(t){var n;return Ce(this,e),(n=Ne(this,e,[t])).name="Filter Type Exception",n}return Me(e,t),Le(e)}(Be(Error)),We=function(t){function e(t){var n;return Ce(this,e),(n=Ne(this,e,[t])).name="Filter Validation Error",n}return Me(e,t),Le(e)}(Be(Error)),qe={"(":")","{":"}",'"':'"',"'":"'"},ze=Object.fromEntries(Object.entries(qe).filter(function(t){var e=Ie(t,2);return e[0]!==e[1]}).map(function(t){var e=Ie(t,2),n=e[0];return[e[1],n]}));const Je={SyntaxException:Ke,TypeException:Ve,ValidationError:We,retrieveEnclosure:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"(",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:")";if(e===n)throw new Error("Enclosure characters must be different: ".concat(e," = ").concat(n));var r,o=!1,a=0,i="",c=De(function(t){return function(t){if(Array.isArray(t))return Re(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||je(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t).entries());try{for(c.s();!(r=c.n()).done;){var s=Ie(r.value,2),u=s[0],l=s[1];if(l===e){if(a+=1,!o){o=!0;continue}}else l===n&&(a-=1);if(0===a&&o){if(u!=t.length-1)throw new Ke("Enclosure should not be resolved before end of string; resolved at index: ".concat(u,"; input string: ").concat(t));return i}if(a<0)throw new Ke("Unbalanced enclosure at index: ".concat(u," of input string: ").concat(t,'; balance of "').concat(e,"...").concat(n,'" enclosures became negative.'));o&&(i+=l)}}catch(t){c.e(t)}finally{c.f()}if(!o)throw new Ke("Enclosure of type ".concat(e,"...").concat(n," not found in string; input string: ").concat(t));if(a>0)throw new Ke("Enclosure could not be resolved; too many '".concat(n,"'; balance = +{count}; input string {string}"))},retrieveArgs:function(t){var e,n=0,r=[],o="",a=De(t);try{for(a.s();!(e=a.n()).done;){var i=e.value;if("("===i){if(1===(n+=1))continue}else")"===i&&(n-=1);1===n&&","===i?(r.push(o.trim()),o=""):n>=1&&(o+=i)}}catch(t){a.e(t)}finally{a.f()}return o.trim()&&r.push(o.trim()),r},getCharCounts:function(t){var e,n={},r=De(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]=(n[o]||0)+1}}catch(t){r.e(t)}finally{r.f()}return n},tokenizeWithNestedEnclosures:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=[],a="",i=[],c=0;c<t.length;c++){var s=t[c];if(e.includes(s)&&i.length===n)a&&(o.push(r?a.trim():a),a="");else if(ze[s]){var u=ze[s];if(i.length>n&&(a+=s),i[i.length-1]!==u)throw new Error("Unbalanced closing bracket at position ".concat(c));i.pop()}else i.length>=n&&(a+=s),qe[s]&&(i[i.length-1]===qe[s]&&s===qe[s]?i.pop():i.push(s))}if(i.length>0)throw new Error("Unbalanced enclosures in input string; unresolved characters from enclosure stack: ",i);return a&&o.push(r?a.trim():a),o},parseDate:function(t){if(!Te.VALID_DATE_LITERAL_RE.test(t))throw new Ke("Invalid date; must be in the format: YYYY-MM-DD ( regex: ".concat(Te.VALID_DATE_LITERAL_RE.source," ); got: '").concat(t,"'"));var e=t.split(" ")[0],n=new Date("".concat(e,"T00:00:00"));if(isNaN(n.getTime()))throw new Ke("Invalid date; could not be parsed as a valid date; got: '".concat(t,"'"));var r=Ie(n.toISOString().split("T")[0].split("-").map(Number),3),o=r[0],a=r[1],i=r[2];if(n.getFullYear()!==o||n.getMonth()+1!==a||n.getDate()!==i)throw new Ke("Invalid date; parsed date: ".concat(n.toISOString()," does not match passed in string: ").concat(e));return console.log("Parsed date: ".concat(n.toISOString()," ; ").concat(n.constructor.name)),n},tryConvert:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===r&&(r="Could not convert ".concat(n," to ").concat(e));try{return t(n)}catch(t){throw new Ve("".concat(r,": ").concat(t.message))}}};function Ye(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return Xe(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(Xe(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,Xe(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,Xe(f,"constructor",u),Xe(u,"constructor",s),s.displayName="GeneratorFunction",Xe(u,o,"GeneratorFunction"),Xe(f),Xe(f,o,"Generator"),Xe(f,r,function(){return this}),Xe(f,"toString",function(){return"[object Generator]"}),(Ye=function(){return{w:a,m:p}})()}function Xe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xe=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){Xe(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},Xe(t,e,n,r)}function $e(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Qe(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){$e(a,r,o,i,c,"next",t)}function c(t){$e(a,r,o,i,c,"throw",t)}i(void 0)})}}var Ze,tn,en,nn={fetchAndCacheSeasonDetails:(en=Qe(Ye().m(function t(){var e,n,r,o,a,i;return Ye().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,p.fetchSeasonDetails();case 1:if(!(e=t.v).error){t.n=2;break}throw new Error("Could not fetch season details: ".concat(e.error));case 2:return(n=e.seasonDetails).forEach(function(t){t.range=[t.Start,t.End].map(function(t){return new Date("".concat(t.split(" ")[0],"T00:00:00"))})}),n.sort(function(t,e){return t["Season Number"]-e["Season Number"]}),r=[n[0]],o=n[0],n.slice(1).forEach(function(t){var e=new Date(+o.range[1]+v),n=new Date(+t.range[0]-v),a={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(t.Season),Start:e.toISOString().slice(0,10),End:n.toISOString().slice(0,10),Status:"Complete",range:[e,n]};r.push(a),r.push(t),o=t}),o.range[1]<new Date&&(a=new Date(+r.at(-1).range[1]+v),i={"Season Number":o["Season Number"]+.5,Code:null,Season:"Pre-Season: ".concat(season.Season),Start:a.toISOString().slice(0,10),End:"N/A",Status:"Active",range:[a,new Date]},r.push(i)),r.reverse(),t.n=3,Tt.cache(Tt.Keys.SEASON_DETAILS,r);case 3:return t.a(2,r)}},t)})),function(){return en.apply(this,arguments)}),getSeasonDetails:(tn=Qe(Ye().m(function t(){var e,n,r,o;return Ye().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.get(Tt.Keys.SEASON_DETAILS);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=5;break;case 3:return t.n=4,nn.fetchAndCacheSeasonDetails();case 4:o=t.v;case 5:return t.a(2,o)}},t)})),function(){return tn.apply(this,arguments)}),clearSeasonDetails:(Ze=Qe(Ye().m(function t(){return Ye().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.delete(Tt.Keys.SEASON_DETAILS);case 1:console.log("Season details cleared from data cache");case 2:return t.a(2)}},t)})),function(){return Ze.apply(this,arguments)})};const rn=nn;function on(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return an(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(an(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,an(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,an(f,"constructor",u),an(u,"constructor",s),s.displayName="GeneratorFunction",an(u,o,"GeneratorFunction"),an(f),an(f,o,"Generator"),an(f,r,function(){return this}),an(f,"toString",function(){return"[object Generator]"}),(on=function(){return{w:a,m:p}})()}function an(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}an=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){an(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},an(t,e,n,r)}function cn(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function sn(t){return function(t){if(Array.isArray(t))return _n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||wn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||wn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ln(t,e,n){return e=pn(e),function(t,e){if(e&&("object"==Sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fn()?Reflect.construct(e,n||[],pn(t).constructor):e.apply(t,n))}function fn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fn=function(){return!!t})()}function pn(t){return pn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pn(t)}function dn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hn(t,e)}function hn(t,e){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hn(t,e)}function yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mn(r.key),r)}}function vn(t,e,n){return e&&gn(t.prototype,e),n&&gn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mn(t){var e=function(t){if("object"!=Sn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sn(e)?e:e+""}function bn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=wn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function wn(t,e){if(t){if("string"==typeof t)return _n(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(t,e):void 0}}function _n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Sn(t){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(t)}var En=new Set("'\"(),-.=; ><!1234567890{}abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function Pn(t,e){var n="object"===Sn(e)?JSON.stringify(e):"".concat(e);if(e instanceof Set)return e.has(t);if("object"===Sn(e)&&null!==e&&!Array.isArray(e)&&["start","end","endInclusive","type"].every(function(t){return e.hasOwnProperty(t)}))return t>=e.start&&(e.endInclusive?t<=e.end:t<e.end);if(Array.isArray(e))return e.includes(t);throw new Error("Invalid match pattern for 'in' operators; got: '".concat(t,"' and '").concat(n,"' (").concat(e.constructor.name,")"))}var kn={">":function(t,e){return t>e},"<":function(t,e){return t<e},"=":function(t,e){return t===e},in:function(t,e){return Pn(t,e)},">=":function(t,e){return t>=e},"<=":function(t,e){return t<=e},"!=":function(t,e){return t!==e},"!in":function(t,e){return!Pn(t,e)}};function On(t){return function(t,e){var n,r=bn(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.has(o))throw new Je.SyntaxException("Invalid character within <".concat("Main Filter String","> ; ' ").concat(o," ' is not allowed; got string: '").concat(t,"'"))}}catch(t){r.e(t)}finally{r.f()}}(t=t.replace(/[\n\t\r]/g," ").replace(/\s+/g," "),En),t.toLowerCase()}var Tn,An,In,Dn=new Set(["victory-points"]),jn=new Set(["prebans","p1.picks","p2.picks","p1.prebans","p2.prebans"]),Rn=function(){return vn(function t(e){yn(this,t);var n=t.FIELD_EXTRACT_FN_MAP[e];if(!n)throw new Je.ValidationError("Invalid field type: '".concat(e,"'; valid types are: ").concat(Object.keys(t.FIELD_EXTRACT_FN_MAP).join(", ")));console.log("Found valid field type: ",e),this.str=e,this.extractData=n},[{key:"toString",value:function(){return this.str}}])}();Tn=Rn,In={date:function(t){var e;return t["Date/Time"]?new Date("".concat(null===(e=t["Date/Time"])||void 0===e?void 0:e.slice(0,10),"T00:00:00")):"N/A"},"is-first-pick":function(t){return"True"===t["First Pick"]?1:0},"is-win":function(t){return"W"===t.Win?1:0},"victory-points":function(t){return t["P1 Points"]},"p1.picks":function(t){return t["P1 Picks"]},"p2.picks":function(t){return t["P2 Picks"]},"p1.prebans":function(t){return t["P1 Prebans"]},"p2.prebans":function(t){return t["P2 Prebans"]},"p1.postban":function(t){return t["P1 Postban"]},"p2.postban":function(t){return t["P2 Postban"]},prebans:function(t){return[].concat(sn(t["P1 Prebans"]),sn(t["P2 Prebans"]))},"p1.pick1":function(t){return t["P1 Pick 1"]},"p1.pick2":function(t){return t["P1 Pick 2"]},"p1.pick3":function(t){return t["P1 Pick 3"]},"p1.pick4":function(t){return t["P1 Pick 4"]},"p1.pick5":function(t){return t["P1 Pick 5"]},"p2.pick1":function(t){return t["P2 Pick 1"]},"p2.pick2":function(t){return t["P2 Pick 2"]},"p2.pick3":function(t){return t["P2 Pick 3"]},"p2.pick4":function(t){return t["P2 Pick 4"]},"p2.pick5":function(t){return t["P2 Pick 5"]},"p1.league":function(t){return m[t["P1 League"]]},"p2.league":function(t){return m[t["P2 League"]]},"p1.server":function(t){return t["P1 Server"]},"p2.server":function(t){return t["P2 Server"]}},(An=mn(An="FIELD_EXTRACT_FN_MAP"))in Tn?Object.defineProperty(Tn,An,{value:In,enumerable:!0,configurable:!0,writable:!0}):Tn[An]=In;var xn=function(){return vn(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;yn(this,t),this.rawString=e,this.data=this.getData(e,n)},[{key:"toString",value:function(){return"".concat(this.data)}}])}(),Ln=function(t){function e(){return yn(this,e),ln(this,e,arguments)}return dn(e,t),vn(e,[{key:"getData",value:function(t,e){if(t=(t=t.replace(/'/g,"").replace(/"/g,"")).trim(),!Te.VALID_STRING_RE.test(t))throw new Je.SyntaxException("Invalid string; all string content must start with a letter followed by either num, hyphen or period ( case insensitive regex: ".concat(Te.VALID_STRING_LITERAL_RE.source," ); got: '").concat(t,"'"));t=t.replace(/"|'/g,"");var n=Qt.getHeroByName(t,e),r=m[t],o=Object.values(g).find(function(e){return e.toLowerCase()===t});if(!(n||r||o))throw new Je.SyntaxException("Invalid string; All strings must either be a valid hero, league name, or server; got: '".concat(t,"'"));return n?n.name:r||o}},{key:"toString",value:function(){return'"'.concat(this.data,'"')}}])}(xn),Fn=function(t){function e(){return yn(this,e),ln(this,e,arguments)}return dn(e,t),vn(e,[{key:"getData",value:function(t){return Je.parseDate(t)}},{key:"toString",value:function(){return"".concat(this.data)}}])}(xn),Cn=function(t){function e(){return yn(this,e),ln(this,e,arguments)}return dn(e,t),vn(e,[{key:"getData",value:function(t){if(!Te.VALID_INT_LITERAL_RE.test(t))throw new Je.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));var e=parseInt(t);if(isNaN(e))throw new Je.SyntaxException("Invalid integer; must be a number; got: '".concat(t,"'"));return e}},{key:"toString",value:function(){return"".concat(this.data)}}])}(xn),Nn=function(t){function e(){return yn(this,e),ln(this,e,arguments)}return dn(e,t),vn(e,[{key:"getData",value:function(t){if(!Te.VALID_BOOL_LITERAL_RE.test(t))throw new Je.SyntaxException("Invalid boolean; must be 'true' or 'false'; got: '".concat(t,"'"));return"true"===t?1:0}},{key:"toString",value:function(){return"".concat(this.data?"true":"false")}}])}(xn),Mn=function(t){function e(){return yn(this,e),ln(this,e,arguments)}return dn(e,t),vn(e,[{key:"getData",value:function(t){var e=t.split("...");if(2!==e.length)throw new Je.SyntaxException("Invalid range; ranges must be of the format x...y or x...=y ; got more than two values when splitting string: '".concat(t,"'"));var n=un(e,2),r=n[0],o=n[1],a=!1;o.includes("=")&&(o=o.replace("=",""),a=!0);var i={start:null,end:null,endInclusive:a};if(Te.VALID_DATE_LITERAL_RE.test(r)){if(i.start=Je.tryConvert(Je.parseDate,"Date",r,"Could not convert '".concat(r,"' to Date in declared range: '").concat(t,"'")),i.end=Je.tryConvert(Je.parseDate,"Date",o,"Could not convert '".concat(o,"' to Date in declared range: '").concat(t,"' ; Ranges must have homogenous types")),i.start>i.end)throw new Je.SyntaxException("Invalid range; start date must be on or before end date; ".concat(i.start," > ").concat(i.end));i.type="Date"}else{if(!Te.VALID_INT_LITERAL_RE.test(r))throw new Je.SyntaxException("Invalid range; must be of the format x...y or x...=y ; got: '".concat(t,"'"));if(i.start=Je.tryConvert(function(t){return new Cn(t)},"Int",r,"Could not convert '".concat(r,"' to Int in declared range: '").concat(t,"'")).data,i.end=Je.tryConvert(function(t){return new Cn(t)},"Int",o,"Could not convert '".concat(o,"' to Int in declared range: '").concat(t,"' ; Ranges must have homogenous types")).data,i.start>i.end)throw new Je.SyntaxException("Invalid range; start integer must be equal to or less than end integer; ".concat(i.start," > ").concat(i.end));i.type="Int"}return console.log("Built Range: ".concat(JSON.stringify(i))),i}},{key:"toString",value:function(){var t=this.data.endInclusive?"...=":"...";return"Date"===this.data.type?"".concat(this.data.start.toISOString()).concat(t).concat(this.data.end.toISOString(),")"):"Int"===this.data.type?"".concat(this.data.start,"...").concat(t).concat(this.data.end):"Error Converting Range to String => < ".concat(this.data.start,"...").concat(t).concat(this.data.end," >")}}])}(xn),Bn=function(t){function e(){return yn(this,e),ln(this,e,arguments)}return dn(e,t),vn(e,[{key:"getData",value:function(t,e){if(!Te.VALID_SET_RE.test(t))throw new Je.SyntaxException("Invalid set; must be in the format: { element1, element2,... }, where elements have either string format or date format; ( case insensitive regex: ".concat(Te.VALID_SET_RE.source," ) (Just chat gpt this one bro); got: '").concat(t,"'"));var n=t.replace(/^\{|\}$/g,"").split(",").map(function(t){return t.trim()}).filter(function(t){return""!==t}).map(function(t){if(Te.VALID_STRING_RE.test(t))return new Ln(t,e);if(Te.VALID_DATE_LITERAL_RE.test(t))return new Fn(t);throw new Je.SyntaxException("Invalid set element; must be a string or date; got: '".concat(t,"'"))});console.log("GOT ELEMENTS: ",n);var r,o=new Set,a=bn(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;o.add(i.constructor.name)}}catch(t){a.e(t)}finally{a.f()}if(o=sn(o),console.log("GOT TYPES: ",o),o.size>1)throw new Je.SyntaxException("Invalid set; all set elements must have the same data type; got: types: [".concat(o.join(", "),"]"));return this.Type=o[0],new Set(n.map(function(t){return t.data}))}},{key:"toString",value:function(){return"{".concat(this.data.map(function(t){return t.toString()}).join(", "),"}")}}])}(xn);var Gn=function(){return vn(function t(){yn(this,t)},[{key:"call",value:function(t){throw new Error("Base class ".concat(this.constructor.name," does not implement the 'call' method. Implement this method in a subclass."))}}])}(),Un=function(t){function e(t){var n;if(yn(this,e),(n=ln(this,e)).name="last-N",1!==t.length)throw new Je.SyntaxException("".concat(n.name," expects 1 argument, got ").concat(t.length));var r=Number(t[0]);if(!Number.isInteger(r))throw new Je.TypeException("".concat(n.name," expects an integer argument, could not parse '").concat(t[0],"' as integer"));return n.str="".concat(n.name,"(").concat(r,")"),n.n=r,n}return dn(e,t),vn(e,[{key:"call",value:function(t){return t.sort(function(t,e){return t["Seq Num"]-e["Seq Num"]}),t.slice(-this.n)}}])}(function(t){function e(){return yn(this,e),ln(this,e)}return dn(e,t),vn(e,[{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}(Gn)),Hn=function(t){function e(t){var n;return yn(this,e),(n=ln(this,e)).fns=t,console.log("Clause Fn constructor got fns:",t),n}return dn(e,t),vn(e,[{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="",n=t+"   ";return this.fns.localFilters.forEach(function(t){return e+="".concat(t.toString(n),",\n")}),console.log("Clause Fn toString got output:",e),"".concat(t).concat(this.str,"(\n").concat(e.trimEnd(),"\n").concat(t,")")}}])}(Gn),Kn=function(t){function e(t){var n;return yn(this,e),(n=ln(this,e,[t])).str="AND",n}return dn(e,t),vn(e,[{key:"call",value:function(t){return this.fns.localFilters.every(function(e){return e.call(t)})}}])}(Hn),Vn=function(t){function e(t){var n;return yn(this,e),(n=ln(this,e,[t])).str="OR",n}return dn(e,t),vn(e,[{key:"call",value:function(t){return this.fns.localFilters.some(function(e){return e.call(t)})}}])}(Hn),Wn=function(t){function e(t){var n;return yn(this,e),(n=ln(this,e,[t])).str="XOR",n}return dn(e,t),vn(e,[{key:"call",value:function(t){var e,n=!1,r=bn(this.fns.localFilters);try{for(r.s();!(e=r.n()).done;){var o=e.value;n=!n&&o.call(t)||n&&!o.call(t)}}catch(t){r.e(t)}finally{r.f()}return n}}])}(Hn),qn=function(t){function e(t){var n;return yn(this,e),(n=ln(this,e,[t])).str="NOT",n}return dn(e,t),vn(e,[{key:"call",value:function(t){return!this.fns.localFilters[0].call(t)}}])}(Hn),zn={and:Kn,or:Vn,xor:Wn,not:qn,"last-n":Un},Jn=new Set([Kn,Vn,Wn,qn]),Yn=new Set([Un]),Xn=function(){return vn(function t(e,n){yn(this,t),this.str=e,this.fn=n},[{key:"call",value:function(t){return this.fn(t)}},{key:"toString",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(this.str)}}])}();function $n(t,e,n,r,o){var a=null;try{a=e in Rn.FIELD_EXTRACT_FN_MAP?new Rn(e):function(t,e,n){if(console.log("Trying to Parse DataType: ".concat(t)),Te.VALID_STRING_LITERAL_RE.test(t))return console.log("Parsing as StringType"),new Ln(t,e);if(Te.VALID_DATE_LITERAL_RE.test(t))return console.log("Parsing as DateType"),new Fn(t);if(Te.VALID_INT_LITERAL_RE.test(t))return console.log("Parsing as IntType"),new Cn(t);if(Te.VALID_BOOL_LITERAL_RE.test(t))return console.log("Parsing as BoolType"),new Nn(t);if(/\{.*\}/.test(t))return console.log("Parsing as SetType"),new Bn(t,e);if(Te.VALID_RANGE_LITERAL_RE.test(t))return console.log("Parsing as RangeType"),new Mn(t);if(Te.VALID_DATA_WORD_LITERAL_RE.test(t))return console.log("Parsing as DataWord"),function(t,e){if(Te.VALID_SEASON_LITERAL_RE.test(t)){var n=function(t){return t.toISOString().slice(0,10)};if(e.SeasonDetails.length<1)throw new Error("Did not recieve any season details; failed on: '".concat(t,"'"));if("current-season"===t){var r=un(e.SeasonDetails.find(function(t){return"Active"===t.Status}).range,2),o=r[0],a=r[1];return new Mn("".concat(n(o),"...=").concat(n("N/A"===a?new Date:a)))}var i=Number(t.split("-")[1]),c=e.SeasonDetails.find(function(t){return t["Season Number"]===i});if(!c)throw new Error("Invalid season specified; ".concat(i," is not a valid season number; failed on str: '").concat(t,"'"));var s=un(c.range,2),u=s[0],l=s[1];return new Mn("".concat(n(u),"...=").concat(n(l)))}}(t,{SeasonDetails:n});if(console.log("Failed to parse DataType"),Te.VALID_STRING_LITERAL_RE.test("'".concat(t,"'")))throw new Je.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you forget to wrap string literals in double or single quotes?"));if(t.includes("'")&&t.includes('"'))throw new Je.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; did you encase in mismatching quote types?"));if(t.includes(".=")||t.includes(".."))throw new Je.SyntaxException("Invalid DataType declaration; got: '".concat(t,"'; were you trying to use a range? Ranges must be of the format x...y or x...=y and may only be int-int or date-date"));throw new Je.SyntaxException("Invalid DataType declaration; could not parse to valid Field or Declared Data Type; got: '".concat(t,"'"))}(e,r,o)}catch(r){for(var i in Rn.FIELD_EXTRACT_FN_MAP)if(e.includes(i)||i.includes(e))throw new Je.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"], did you mean to use '").concat(i,"' as a field instead?"));throw console.error(r),new Je.SyntaxException("Could not parse ".concat(t,' side of filter; got: "').concat(e,'" from filter: [').concat(n,"]; error: ").concat(r.message))}return a}var Qn=function(){function t(e){if(yn(this,t),e!==Zn._)throw new Error("Cannot instantiate FilterSyntaxParser directly; use createAndParse method instead.")}return vn(t,[{key:"toString",value:function(){var t=sn(this.filters.localFilters);return t.push.apply(t,sn(this.filters.globalFilters)),"[\n".concat(t.map(function(t){return t.toString("   ")}).join(";\n"),"\n]")}},{key:"parseGlobalFilterFn",value:function(t,e){var n=Te.anchorExp(Te.VALID_GLOBAL_FILTER_RE);if(!n.test(e))throw new Je.SyntaxException('Invalid global filter format; must follow the case insensitive regex format "'.concat(n.source,"\" ; got: '").concat(e,"'"));var r=Je.tokenizeWithNestedEnclosures(e,",",1);if(t===Un)return{localFilters:[],globalFilters:[new Un(r)]};throw new Je.SyntaxException("Global filter function ".concat(t.str," not mapped in parseGlobalFilterFn"))}},{key:"parseClauseFn",value:function(e,n){var r=this;console.log("Parsing clause fn:",e.name,n);var o=Je.tokenizeWithNestedEnclosures(n,",",1);if(console.log("Got argArr:",o),e===Wn&&o.length<2)throw new Je.SyntaxException("XOR clause must have at least two arguments; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));if(e===qn&&1!==o.length)throw new Je.SyntaxException("NOT clause must have exactly one argument; got: ".concat(o.length,' arguments from string: "').concat(n,'"'));var a=o.reduce(function(t,e){var n,o;return(n=t.localFilters).push.apply(n,sn(r.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,sn(r.parseFilters(e).globalFilters)),t},t.getEmptyFilters());if(a.globalFilters.length>0)throw new Je.SyntaxException("Global filters not allowed in clause functions; got: ".concat(a.globalFilters,' from string: "').concat(n,'"'));if(e===qn&&1!==a.localFilters.length)throw new Je.SyntaxException("NOT clause must have exactly one argument; got: ".concat(a.length,' arguments from string: "').concat(n,'"'));return{localFilters:[new e(a)],globalFilters:[]}}},{key:"parseBaseFilter",value:function(t){console.log("Parsing base filter:",t);var e=this.HM,n=Je.tokenizeWithNestedEnclosures(t," ",0,!0);if(console.log("Got tokens: ",n,"; Length: ".concat(n.length)),3!==n.length)throw new Je.SyntaxException("Invalid base filter format; all filters must be of the form: ['X', operator, 'Y']; got tokens: [".concat(n.join(", "),"]"));var r=un(n,3),o=r[0],a=r[1],i=r[2];if(!kn[a])throw new Je.SyntaxException('Invalid operator in base filter; got: "'.concat(a,'" as the operator in filter: [').concat(t,"]"));var c=kn[a];if(o=$n("left",o,t,e,this.SeasonDetails),i=$n("right",i,t,e,this.SeasonDetails),("in"===a||"!in"===a)&&!(i instanceof Bn||i instanceof Mn||i instanceof Rn&&jn.has(i.str)))throw new Je.TypeException("When using any 'in' or '!in' operator, the right side of the operator must be a Set, Range, or a Field composed of a set (i.e. p1.picks, p2.prebans, etc.); error found in filter: '".concat(t,"'"));if(i instanceof Mn)if("Date"===i.data.type){if(!o.str.includes("date"))throw new Je.TypeException("When using a Date Range, the left side of the operator must be a date field; ".concat(o.str," is not a date field; error found in filter: '").concat(t,"'"))}else if("Int"===i.data.type&&!Dn.has(o.str))throw new Je.TypeException("When using an Int Range, the left side of the operator must be an integer field; ".concat(o.str," is not an integer field; error found in filter: '").concat(t,"'"));if(i instanceof xn&&o instanceof xn)throw new Je.SyntaxException("Either left or right side of filter must be a data field (a property of a battle); both ".concat(o," and ").concat(i,' are user declared data types in filter: "').concat(t,'"'));var s;return s=o instanceof xn?function(t){return c(o.data,i.extractData(t))}:i instanceof xn?function(t){return c(o.extractData(t),i.data)}:function(t){return c(o.extractData(t),i.extractData(t))},console.log("Returning base local filter",[new Xn(t,s).toString()]),{localFilters:[new Xn(t,s)],globalFilters:[]}}},{key:"parseFilters",value:function(e){var n=this;if(console.log('Parsing filter string: "'.concat(e||this.preParsedString,'"')),""===e)return console.log("Empty filter string; Returning empty filters"),t.getEmptyFilters();var r,o=(e=e.trim()).split(";").filter(function(t){return t.length>0}),a=bn(o);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=Je.getCharCounts(i);if(c["("]!==c[")"])throw new Je.SyntaxException('Imbalanced parentheses in following string: "'.concat(i,'"'));if(c["{"]!==c["}"])throw new Je.SyntaxException("Imbalanced braces ('{', '}') in following string: \"".concat(i,'"'));if((c['"']||0)%2!=0)throw new Je.SyntaxException('Imbalanced double quotes in following string: "'.concat(i,'"'));if((c["'"]||0)%2!=0)throw console.log("Imbalanced single quotes in following string:",i,"; got:",c["'"]),new Je.SyntaxException('Imbalanced single quotes in following string: "'.concat(i,'"'))}}catch(t){a.e(t)}finally{a.f()}if(o.length>1)return console.log("Processing <".concat(o.length,"> filters; filters: ").concat(o)),o.reduce(function(t,e){var r,o;return(r=t.localFilters).push.apply(r,sn(n.parseFilters(e).localFilters)),(o=t.globalFilters).push.apply(o,sn(n.parseFilters(e).globalFilters)),t},t.getEmptyFilters());var s=o[0];if(s.length<4)throw new Je.SyntaxException("Filter string cannot be valid (less than 4 characters); got filter string: [".concat(s,"]"));var u=s.split("("),l=zn[u[0]];if(console.log("Trying to look for Fn ; got:",u[0],"from string:",s),l){if(Jn.has(l))return console.log("Found clause fn; dispatching to clause fn parser"),this.parseClauseFn(l,s);if(Yn.has(l))return console.log("Found global filter fn; dispatching to global filter fn parser"),this.parseGlobalFilterFn(l,s);throw new Error('could not parse filter string as Fn: "'.concat(e,'" ; did not map to any defined pattern'))}return console.log("Did not find Fn; dispatching to base filter parser"),this.parseBaseFilter(s)}}],[{key:"getEmptyFilters",value:function(){return{localFilters:[],globalFilters:[]}}},{key:"createAndParse",value:(e=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){cn(a,r,o,i,c,"next",t)}function c(t){cn(a,r,o,i,c,"throw",t)}i(void 0)})}}(on().m(function e(n){var r,o,a,i,c,s=arguments;return on().w(function(e){for(;;)switch(e.n){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:null,o=s.length>2&&void 0!==s[2]?s[2]:null,console.log("Initialized parsing of string:",n),a=new t(Zn._),i=r){e.n=2;break}return e.n=1,Qt.getHeroManager();case 1:i=e.v;case 2:if(r=i,c=o){e.n=4;break}return e.n=3,rn.getSeasonDetails();case 3:c=e.v;case 4:return o=c,a.rawString=n,a.HM=r,a.SeasonDetails=o,a.preParsedString=On(n),a.globalFilters=[],a.filters=a.parseFilters(a.preParsedString),console.log("Got Filters\n"),console.log(a.toString()),e.a(2,a)}},e)})),function(t){return e.apply(this,arguments)})}]);var e}(),Zn={_:Symbol("internal")};const tr=Qn;function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(t){return function(t){if(Array.isArray(t))return ar(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||or(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=or(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function or(t,e){if(t){if("string"==typeof t)return ar(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(t,e):void 0}}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ir(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return cr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(cr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,cr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,cr(f,"constructor",u),cr(u,"constructor",s),s.displayName="GeneratorFunction",cr(u,o,"GeneratorFunction"),cr(f),cr(f,o,"Generator"),cr(f,r,function(){return this}),cr(f,"toString",function(){return"[object Generator]"}),(ir=function(){return{w:a,m:p}})()}function cr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}cr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){cr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},cr(t,e,n,r)}function sr(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function ur(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){sr(a,r,o,i,c,"next",t)}function c(t){sr(a,r,o,i,c,"throw",t)}i(void 0)})}}var lr={world_global:Tt.Keys.GLOBAL_USERS,world_eu:Tt.Keys.EU_USERS,world_asia:Tt.Keys.ASIA_USERS,world_jpn:Tt.Keys.JPN_USERS,world_kor:Tt.Keys.KOR_USERS};function fr(t,e){return{id:t.nick_no,name:t.nick_nm.toLowerCase(),code:t.code,rank:t.rank,world_code:e}}function pr(t){return dr.apply(this,arguments)}function dr(){return(dr=ur(ir().m(function t(e){var n;return ir().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code from E7 server: ".concat(e)),t.n=1,Bt.fetchUserJSON(e);case 1:if(n=t.v){t.n=2;break}return console.log("Could not get user map from E7 server for world code: ".concat(e)),t.a(2,null);case 2:return console.log("Got user map from E7 server for world code: ".concat(e)),t.a(2,Object.fromEntries(n.users.map(function(t){return[t.nick_no,fr(t,e)]})))}},t)}))).apply(this,arguments)}var hr,yr,gr,vr,mr,br,wr={getUserMap:(br=ur(ir().m(function t(e){var n,r;return ir().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting user map for world code: ".concat(e)),t.n=1,Tt.get(lr[e]);case 1:if(null===(n=t.v)){t.n=2;break}return console.log("Got user map from cache"),t.a(2,n);case 2:return t.n=3,pr(e);case 3:return r=t.v,t.n=4,Tt.cache(lr[e],r);case 4:return t.a(2,r)}},t)})),function(t){return br.apply(this,arguments)}),findUser:(mr=ur(ir().m(function t(e){var n,r,o,a,i,c,s,u,l,f,d,h,g;return ir().w(function(t){for(;;)switch(t.n){case 0:if(!e.id){t.n=10;break}n=rr(y),t.p=1,n.s();case 2:if((r=n.n()).done){t.n=6;break}return o=r.value,t.n=3,this.getUserMap(o);case 3:if(a=t.v,!(i=Object.values(a).find(function(t){return t.id===e.id}))){t.n=4;break}return console.log("Found user: ".concat(JSON.stringify(i)," in world code: ").concat(o)),t.a(2,{user:i,error:!1});case 4:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(o," from client-side means"));case 5:t.n=2;break;case 6:t.n=8;break;case 7:t.p=7,g=t.v,n.e(g);case 8:return t.p=8,n.f(),t.f(8);case 9:t.n=15;break;case 10:if(!e.name||!e.world_code){t.n=14;break}return c=[e.name,e.world_code],s=c[0],u=c[1],t.n=11,this.getUserMap(u);case 11:if(l=t.v,f=s.toLowerCase(),d=Object.values(l).find(function(t){return f===t.name.toLowerCase()}),!d){t.n=12;break}return console.log("Found user: ".concat(JSON.stringify(d)," in world code: ").concat(u)),t.a(2,{user:d,error:!1});case 12:console.log("Could not find user with ID: ".concat(e.id," in world code: ").concat(u," from client-side means"));case 13:t.n=15;break;case 14:return console.error("Must pass a user object with either user.name and user.world_code or user.id to fetch user"),t.a(2,{user:null,error:"Must pass a user object with either user.name and user.world_code or user.id to fetch user"});case 15:return t.n=16,p.fetchUser(e);case 16:if(!(h=t.v).error){t.n=17;break}return t.a(2,{user:null,error:h.error});case 17:return t.a(2,{user:h.user,error:!1})}},t,this,[[1,7,8,9]])})),function(t){return mr.apply(this,arguments)}),addP2ServersByID:(vr=ur(ir().m(function t(e){var n,r,o,a=this;return ir().w(function(t){for(;;)switch(t.n){case 0:return console.log("Adding P2 servers by ID..."),n=Object.values(e),r=[],t.p=1,t.n=2,Promise.all(nr(y).map(function(t){return a.getUserMap(t)}));case 2:r=t.v,t.n=4;break;case 3:return t.p=3,o=t.v,console.error(o),n.forEach(function(t){return t["P2 Server"]="Not Found"}),t.a(2);case 4:if(0!==r.length){t.n=5;break}return console.error("Failed to get any user maps"),n.forEach(function(t){return t["P2 Server"]="Not Found"}),t.a(2);case 5:n.forEach(function(t){var e,n=null===(e=r.find(function(e){return e[t["P2 ID"]]}))||void 0===e?void 0:e[t["P2 ID"]].world_code;n?t["P2 Server"]=a.convertServerStr(n):(console.log("Could not find user with ID: ".concat(t["P2 ID"]," in client-side means ; typeof: ").concat(er(t["P2 ID"]),", id type: ").concat(er(Object.keys(USER_MAPS[0])[0]))),t["P2 Server"]="Not Found")});case 6:return t.a(2)}},t,null,[[1,3]])})),function(t){return vr.apply(this,arguments)}),setUser:(gr=ur(ir().m(function t(e){return ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.cache(Tt.Keys.USER,e);case 1:return t.a(2)}},t)})),function(t){return gr.apply(this,arguments)}),getUser:(yr=ur(ir().m(function t(){return ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.get(Tt.Keys.USER);case 1:return t.a(2,t.v)}},t)})),function(){return yr.apply(this,arguments)}),clearUserData:function(){var t=ur(ir().m(function t(){return ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.clearUserData();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),clearUserDataLists:(hr=ur(ir().m(function t(){return ir().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.delete(Tt.Keys.GLOBAL_USERS);case 1:return t.n=2,Tt.delete(Tt.Keys.EU_USERS);case 2:return t.n=3,Tt.delete(Tt.Keys.ASIA_USERS);case 3:return t.n=4,Tt.delete(Tt.Keys.JPN_USERS);case 4:return t.n=5,Tt.delete(Tt.Keys.KOR_USERS);case 5:return t.a(2)}},t)})),function(){return hr.apply(this,arguments)}),convertServerStr:function(t){return g[t]}};const _r=wr;function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}function Er(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Sr(t)+" is not iterable")}function Pr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return kr(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(kr(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,kr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,kr(f,"constructor",u),kr(u,"constructor",s),s.displayName="GeneratorFunction",kr(u,o,"GeneratorFunction"),kr(f),kr(f,o,"Generator"),kr(f,r,function(){return this}),kr(f,"toString",function(){return"[object Generator]"}),(Pr=function(){return{w:a,m:p}})()}function kr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}kr=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){kr(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},kr(t,e,n,r)}function Or(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Tr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){Or(a,r,o,i,c,"next",t)}function c(t){Or(a,r,o,i,c,"throw",t)}i(void 0)})}}function Ar(t){return function(t){if(Array.isArray(t))return Fr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Lr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,e)||Lr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dr(Object(n),!0).forEach(function(e){Rr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Rr(t,e,n){return(e=function(t){var e=function(t){if("object"!=Sr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Lr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Lr(t,e){if(t){if("string"==typeof t)return Fr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fr(t,e):void 0}}function Fr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Cr=b.filter(function(t){return t.includes(" Pick ")||t.includes("ban ")});function Nr(t){var e={};console.log("Processing ".concat(t.length," battles into dict..."));var n,r=xr(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;console.log("Processing battle: ".concat(o)),e[o["Seq Num"]]=o}}catch(t){r.e(t)}finally{r.f()}return e}function Mr(t,e){var n,r,o,a=function(t){var n,r;return null!==(n=null===(r=Qt.getHeroByCode(t,e))||void 0===r?void 0:r.name)&&void 0!==n?n:e.Fodder.name},i={"Date/Time":t.time,"Seq Num":t.seq_num,"P1 ID":t.p1_id.toString(),"P2 ID":t.p2_id.toString(),"P1 League":null!==(n=t.grades[0])&&void 0!==n?n:"","P2 League":null!==(r=t.grades[1])&&void 0!==r?r:"","P1 Points":null!==(o=t.scores[0])&&void 0!==o?o:null,Win:1===t.winner?"W":"L","First Pick":1===t.first_pick?"True":"False","P1 Preban 1":a(t.p1_preban[0]),"P1 Preban 2":a(t.p1_preban[1]),"P2 Preban 1":a(t.p2_preban[0]),"P2 Preban 2":a(t.p2_preban[1]),"P1 Pick 1":a(t.p1_picks[0]),"P1 Pick 2":a(t.p1_picks[1]),"P1 Pick 3":a(t.p1_picks[2]),"P1 Pick 4":a(t.p1_picks[3]),"P1 Pick 5":a(t.p1_picks[4]),"P2 Pick 1":a(t.p2_picks[0]),"P2 Pick 2":a(t.p2_picks[1]),"P2 Pick 3":a(t.p2_picks[2]),"P2 Pick 4":a(t.p2_picks[3]),"P2 Pick 5":a(t.p2_picks[4]),"P1 Postban":a(t.postbans[1]),"P2 Postban":a(t.postbans[0])};return i["P1 Picks"]=[i["P1 Pick 1"],i["P1 Pick 2"],i["P1 Pick 3"],i["P1 Pick 4"],i["P1 Pick 5"]],i["P2 Picks"]=[i["P2 Pick 1"],i["P2 Pick 2"],i["P2 Pick 3"],i["P2 Pick 4"],i["P2 Pick 5"]],i["P1 Prebans"]=[i["P1 Preban 1"],i["P1 Preban 2"]],i["P2 Prebans"]=[i["P2 Preban 1"],i["P2 Preban 2"]],i}function Br(t){var e,n=xr(Cr);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r]=t[r]?t[r]:"Empty"}}catch(t){n.e(t)}finally{n.f()}return t["P1 Points"]=Number(t["P1 Points"])||t["P1 Points"],t["P1 Picks"]=[t["P1 Pick 1"],t["P1 Pick 2"],t["P1 Pick 3"],t["P1 Pick 4"],t["P1 Pick 5"]],t["P2 Picks"]=[t["P2 Pick 1"],t["P2 Pick 2"],t["P2 Pick 3"],t["P2 Pick 4"],t["P2 Pick 5"]],t["P1 Prebans"]=[t["P1 Preban 1"],t["P1 Preban 2"]],t["P2 Prebans"]=[t["P2 Preban 1"],t["P2 Preban 2"]],t}function Gr(t,e){var n,r,o=function(t){return Qt.getHeroByName(t,e).prime};return{"Date/Time":t["Date/Time"],"Seq Num":t["Seq Num"],"P1 ID":t["P1 ID"],"P2 ID":t["P2 ID"],"P1 League":null!==(n=m[t["P1 League"]])&&void 0!==n?n:"","P2 League":null!==(r=m[t["P2 League"]])&&void 0!==r?r:"","P1 Points":t["P1 Points"],Win:"W"===t.Win?1:0,"First Pick":"True"===t["First Pick"]?1:0,"P1 Preban 1":o(t["P1 Preban 1"]),"P1 Preban 2":o(t["P1 Preban 2"]),"P2 Preban 1":o(t["P2 Preban 1"]),"P2 Preban 2":o(t["P2 Preban 2"]),"P1 Pick 1":o(t["P1 Pick 1"]),"P1 Pick 2":o(t["P1 Pick 2"]),"P1 Pick 3":o(t["P1 Pick 3"]),"P1 Pick 4":o(t["P1 Pick 4"]),"P1 Pick 5":o(t["P1 Pick 5"]),"P2 Pick 1":o(t["P2 Pick 1"]),"P2 Pick 2":o(t["P2 Pick 2"]),"P2 Pick 3":o(t["P2 Pick 3"]),"P2 Pick 4":o(t["P2 Pick 4"]),"P2 Pick 5":o(t["P2 Pick 5"]),"P1 Postban":o(t["P1 Postban"]),"P2 Postban":o(t["P2 Postban"]),"P1 Picks":t["P1 Picks"].map(o).reduce(function(t,e){return t*e},1),"P2 Picks":t["P2 Picks"].map(o).reduce(function(t,e){return t*e},1),"P1 Prebans":t["P1 Prebans"].map(o).reduce(function(t,e){return t*e},1),"P2 Prebans":t["P2 Prebans"].map(o).reduce(function(t,e){return t*e},1)}}function Ur(t){return(100*t).toFixed(2)+"%"}function Hr(t,e){var n=t.filter(function(t){return t.Win}).length,r=t.length,o=0!==r?n/r:0;return{games_won:n,games_appeared:r,total_games:e,appearance_rate:Ur(0!==e?r/e:0),win_rate:Ur(o),"+/-":2*n-r}}var Kr,Vr,Wr,qr,zr,Jr,Yr,Xr,$r={loaded_servers:new Set,getBattles:(Xr=Tr(Pr().m(function t(){var e,n,r,o;return Pr().w(function(t){for(;;)switch(t.n){case 0:return console.log("Getting battles"),t.n=1,Tt.get(Tt.Keys.BATTLES);case 1:if(r=e=t.v,!(n=null!==r)){t.n=2;break}n=void 0!==e;case 2:if(!n){t.n=3;break}o=e,t.n=4;break;case 3:o=null;case 4:return t.a(2,o)}},t)})),function(){return Xr.apply(this,arguments)}),removeBattles:(Yr=Tr(Pr().m(function t(){return Pr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.delete(Tt.Keys.BATTLES);case 1:return t.n=2,Tt.delete(Tt.Keys.UPLOADED_BATTLES);case 2:return t.n=3,Tt.delete(Tt.Keys.FILTERED_BATTLES);case 3:console.log("Removed battle data from cache; cleared ['BATTLES', 'UPLOADED_BATTLES', 'FILTERED_BATTLES']");case 4:return t.a(2)}},t)})),function(){return Yr.apply(this,arguments)}),removeFilteredBattles:(Jr=Tr(Pr().m(function t(){return Pr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.delete(Tt.Keys.FILTERED_BATTLES);case 1:console.log("Removed filtered battle data from cache; cleared ['FILTERED_BATTLES']");case 2:return t.a(2)}},t)})),function(){return Jr.apply(this,arguments)}),applyFilter:(zr=Tr(Pr().m(function t(e){var n,r,o,a,i,c,s,u,l,f,p,d;return Pr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getBattles();case 1:n=t.v,r=e.localFilters||[],o=e.globalFilters||[],a=Object.values(n),i=xr(o);try{for(i.s();!(c=i.n()).done;)s=c.value,console.log("Applying global filter: ".concat(s)),u=a.length,a=s.call(a),n=Object.fromEntries(a.map(function(t){return[t["Seq Num"],t]})),console.log("Filtered ".concat(u-a.length," out of ").concat(u,"; new total = ").concat(a.length))}catch(t){i.e(t)}finally{i.f()}l=xr(r),t.p=2,p=Pr().m(function t(){var e,r;return Pr().w(function(t){for(;;)switch(t.n){case 0:e=f.value,console.log("Applying local filter: ".concat(e)),r=Object.keys(n).length,n=Object.fromEntries(Object.entries(n).filter(function(t){var n=Ir(t,2),r=(n[0],n[1]);return e.call(r)})),console.log("Filtered ".concat(r-Object.keys(n).length," out of ").concat(r,"; new total = ").concat(Object.keys(n).length));case 1:return t.a(2)}},t)}),l.s();case 3:if((f=l.n()).done){t.n=5;break}return t.d(Er(p()),4);case 4:t.n=3;break;case 5:t.n=7;break;case 6:t.p=6,d=t.v,l.e(d);case 7:return t.p=7,l.f(),t.f(7);case 8:return console.log("Caching filtered battles ; total = ".concat(Object.keys(n).length)),t.n=9,Tt.cache(Tt.Keys.FILTERED_BATTLES,n);case 9:return console.log("Filtered battles and stored in cache; modified ['FILTERED_BATTLES']; Applied total of <".concat(r.length+o.length,"> filters")),t.a(2,n)}},t,this,[[2,6,7,8]])})),function(t){return zr.apply(this,arguments)}),getNumericalBattles:(qr=Tr(Pr().m(function t(e,n){var r,o;return Pr().w(function(t){for(;;)if(0===t.n)return r=function(t,e){return[t,Gr(e,n)]},o=Object.fromEntries(Object.entries(e).map(function(t){var e=Ir(t,2),n=e[0],o=e[1];return r(n,o)})),t.a(2,o)},t)})),function(t,e){return qr.apply(this,arguments)}),extendBattles:(Wr=Tr(Pr().m(function t(e){var n,r,o,a,i;return Pr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.get(Tt.Keys.BATTLES);case 1:if(a=n=t.v,!(o=null!==a)){t.n=2;break}o=void 0!==n;case 2:if(!o){t.n=3;break}i=n,t.n=4;break;case 3:i={};case 4:return r=jr(jr({},i),Nr(e)),t.n=5,Tt.cache(Tt.Keys.BATTLES,r);case 5:return console.log("Extended user data in cache"),t.a(2,r)}},t)})),function(t){return Wr.apply(this,arguments)}),cacheQuery:(Vr=Tr(Pr().m(function t(e,n,r){var o,a,i,c;return Pr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No query battles provided to cacheQuery"),t.a(2,[]);case 1:return console.log("Caching queried battles: ".concat(e," battles; modified [BATTLES]")),o=function(t){return Mr(t,r)},a=e.map(o),i=_r.convertServerStr(n.world_code),a.map(function(t){t["P1 Server"]=i}),t.n=2,_r.addP2ServersByID(a);case 2:return t.n=3,this.extendBattles(a);case 3:return c=t.v,console.log("Cached queried battles in cache; modified [BATTLES]"),t.a(2,c)}},t,this)})),function(t,e,n){return Vr.apply(this,arguments)}),cacheUpload:(Kr=Tr(Pr().m(function t(e){var n,r;return Pr().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return console.log("No uploaded battles provided to cacheUpload"),t.a(2,tr.emptyFilters());case 1:return n=e.map(Br),t.n=2,Tt.cache(Tt.Keys.UPLOADED_BATTLES,n);case 2:return t.n=3,this.extendBattles(n);case 3:return r=t.v,console.log("Ingested uploaded battle data into cache; modified [BATTLES] and overwrote [UPLOADED_BATTLES]"),t.a(2,r)}},t,this)})),function(t){return Kr.apply(this,arguments)}),getStats:function(){var t=Tr(Pr().m(function t(e,n,r,o,a){var i,c,s,u,l,f,p,d,h,y,g;return Pr().w(function(t){for(;;)switch(t.n){case 0:return i=r.localFilters.length+r.globalFilters.length,t.n=1,this.applyFilter(r);case 1:return c=t.v,s=Object.values(e),u=Object.values(c),t.n=2,this.getNumericalBattles(c,o);case 2:return l=t.v,f=ne(s,n,i>0?l:null,a),t.n=3,this.getPrebanStats(l,o);case 3:return p=t.v,t.n=4,this.getFirstPickStats(l,o);case 4:return d=t.v,t.n=5,this.getGeneralStats(l,o);case 5:return h=t.v,t.n=6,this.getHeroStats(l,o);case 6:return y=t.v,t.n=7,this.getServerStats(u);case 7:return g=t.v,t.a(2,{battles:s,filteredBattles:u,plotContent:f,prebanStats:p,generalStats:h,firstPickStats:d,playerHeroStats:y.playerHeroStats,enemyHeroStats:y.enemyHeroStats,serverStats:g})}},t,this)}));return function(e,n,r,o,a){return t.apply(this,arguments)}}(),getPrebanStats:function(t,e){var n=Qt.getHeroByName("Empty",e).prime,r=Object.values(t);if(0===r.length)return[];var o,a=function(t){return Ar(new Set(r)).map(function(e){return e[t]}).filter(function(t){return t&&t!==n})},i=a("P1 Preban 1"),c=a("P1 Preban 2"),s=new Set([].concat(Ar(i),Ar(c))),u=[],l=xr(s);try{for(l.s();!(o=l.n()).done;){var f=o.value;u.push(f)}}catch(t){l.e(t)}finally{l.f()}var p,d=xr(s);try{for(d.s();!(p=d.n()).done;){var h,y=p.value,g=xr(s);try{for(g.s();!(h=g.n()).done;){var v=h.value;y<v&&u.push(y*v)}}catch(t){g.e(t)}finally{g.f()}}}catch(t){d.e(t)}finally{d.f()}for(var m=r.length,b=[],w=function(){var t=S[_],n=r.filter(function(e){return e["P1 Prebans"]%t===0}),o=n.length;if(o<1)return 1;var a=n.reduce(function(t,e){return t+e.Win},0),i=m>0?o/m:0,c=o>0?a/o:0,s=2*a-o;b.push({preban:e.prime_pair_lookup[t],wins:a,appearances:o,appearance_rate:Ur(i),win_rate:Ur(c),"+/-":s})},_=0,S=u;_<S.length;_++)w();return b.sort(function(t,e){return e.appearances-t.appearances}),b},getFirstPickStats:function(t,e){var n=Object.values(t).filter(function(t){return t["First Pick"]});if(0===n.length)return[];var r,o=n.length,a={},i=xr(n);try{for(i.s();!(r=i.n()).done;){var c=r.value,s=c["P1 Pick 1"];s in a||(a[s]={wins:0,appearances:0}),a[s].wins+=c.Win?1:0,a[s].appearances+=1}}catch(t){i.e(t)}finally{i.f()}var u=Object.entries(a).map(function(t){var n=Ir(t,2),r=n[0],a=n[1];return{hero:Qt.getHeroByPrime(r,e).name,wins:a.wins,appearances:a.appearances,win_rate:Ur(a.wins/a.appearances),appearance_rate:Ur(a.appearances/o),"+/-":2*a.wins-a.appearances}});return u.sort(function(t,e){return e.appearances-t.appearances}),u},getGeneralStats:function(t,e){var n=Object.values(t);n.sort(function(t,e){return new Date(t["Date/Time"])-new Date(e["Date/Time"])});var r=0,o=0;if(n.length>1)for(var a=0;a<n.length-1;a++){var i=[n[a],n[a+1]],c=i[0],s=i[1]["P1 Points"]-c["P1 Points"];s<-40||(r+=s,o+=1)}for(var u=o>0?r/o:0,l=n.length,f=n.filter(function(t){return 1===t["First Pick"]}),p=n.filter(function(t){return 1!==t["First Pick"]}),d=f.length,h=p.length,y=f.reduce(function(t,e){return t+e.Win},0),g=p.reduce(function(t,e){return t+e.Win},0),v=l?d/l:0,m=l?h/l:0,b=d?y/d:0,w=h?g/h:0,_=l?(y+g)/l:0,S=0,E=0,P=0,k=0,O=0,T=n;O<T.length;O++)1===T[O].Win?(P+=1,S=Math.max(S,P),k=0):(P=0,k+=1,E=Math.max(E,k));var A="N/A";return{first_pick_count:d,second_pick_count:h,first_pick_rate:d?Ur(v):A,second_pick_rate:h?Ur(m):A,first_pick_winrate:d?Ur(b):A,second_pick_winrate:h?Ur(w):A,total_winrate:l?Ur(_):A,total_battles:l,total_wins:y+g,max_win_streak:S,max_loss_streak:E,avg_ppg:u.toFixed(2)}},getHeroStats:function(t,e){var n=e.heroes,r=Object.values(t);if(0===r.length)return{playerHeroStats:[],enemyHeroStats:[]};var o,a=r.length,i=[],c=[],s=xr(n);try{var u=function(){var t=o.value;if(t.name===e.Empty.name)return 1;var n=t.prime,s=r.filter(function(t){return t["P1 Picks"]%n===0}),u=r.filter(function(t){return t["P2 Picks"]%n===0});s.length>0&&i.push(jr(jr({},Hr(s,a)),{},{hero:t.name})),u.length>0&&c.push(jr(jr({},Hr(u,a)),{},{hero:t.name}))};for(s.s();!(o=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}return{playerHeroStats:i.sort(function(t,e){return t.hero.localeCompare(e.hero)}),enemyHeroStats:c.sort(function(t,e){return t.hero.localeCompare(e.hero)})}},getServerStats:function(t){for(var e=[],n=t.length,r=function(){var r=a[o],i=t.filter(function(t){return t["P2 Server"]===r}),c=i.length,s=i.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),u=c>0?s/c:"N/A",l=n>0?c/n:"N/A",f=i.filter(function(t){return"True"===t["First Pick"]}),p=f.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),d=f.length>0?p/f.length:"N/A",h=i.filter(function(t){return"False"===t["First Pick"]}),y=h.reduce(function(t,e){return t+("W"===e.Win?1:0)},0),g=h.length>0?y/h.length:"N/A";e.push({server:r,count:c,wins:s,win_rate:Ur(u),frequency:Ur(l),"+/-":2*s-c,fp_games:f.length,sp_games:h.length,fp_wr:Ur(d),sp_wr:Ur(g)})},o=0,a=Object.values(g);o<a.length;o++)r();return e.sort(function(t,e){return t.server.localeCompare(e.server)}),e}};const Qr=$r;function Zr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return to(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(to(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,to(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,to(f,"constructor",u),to(u,"constructor",s),s.displayName="GeneratorFunction",to(u,o,"GeneratorFunction"),to(f),to(f,o,"Generator"),to(f,r,function(){return this}),to(f,"toString",function(){return"[object Generator]"}),(Zr=function(){return{w:a,m:p}})()}function to(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}to=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){to(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},to(t,e,n,r)}function eo(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function no(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){eo(a,r,o,i,c,"next",t)}function c(t){eo(a,r,o,i,c,"throw",t)}i(void 0)})}}function ro(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return oo(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(oo(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,oo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,oo(f,"constructor",u),oo(u,"constructor",s),s.displayName="GeneratorFunction",oo(u,o,"GeneratorFunction"),oo(f),oo(f,o,"Generator"),oo(f,r,function(){return this}),oo(f,"toString",function(){return"[object Generator]"}),(ro=function(){return{w:a,m:p}})()}function oo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}oo=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){oo(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},oo(t,e,n,r)}function ao(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}no(Zr().m(function t(e){var n,r,o,a;return Zr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.getUser();case 1:n=t.v,r=document.getElementById("heroStatsOrQuery"),n?(console.log("Found user: ".concat(n,"; showing hero stats in sidebar")),o=e.heroStatsURL,r.innerHTML="\n            <a href=".concat(o,' class="pc-link">\n                <span class="pc-micon"><i data-feather="bar-chart-2"></i></span>\n                <span class="pc-mtext">Hero Stats</span>\n            </a>\n            ')):(console.log("Found user: ".concat(n,"; showing user query in sidebar")),a=e.userQueryURL,r.innerHTML="\n            <a href=".concat(a,' class="pc-link">\n                <span class="pc-micon"><i data-feather="download"></i></span>\n                <span class="pc-mtext">Query User Data</span>\n            </a>\n            ')),feather.replace();case 2:return t.a(2)}},t)})),no(Zr().m(function t(e){var n;return Zr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.getUser();case 1:n=t.v,document.getElementById("user-options").innerHTML=n?'\n            <button name="switch_user" class="btn btn-primary" type="submit" action="switch-user" id="switch-user-btn">\n                Switch User\n            </button>\n            ':"";case 2:return t.a(2)}},t)})),no(Zr().m(function t(e,n,r){var o=this;return Zr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,p.fetchBattleData(e).then(function(t){return t.json()}).then(function(){var t=no(Zr().m(function t(a){var i,c,s;return Zr().w(function(t){for(;;)switch(t.n){case 0:if(!a.success){t.n=2;break}return i=a.battles,t.n=1,Qr.cacheQuery(i,e,r);case 1:console.log("Cached queried battles"),t.n=3;break;case 2:c=null,"upload"===n.get("source")?c='{{ url_for("home_blueprint.upload_battle_data")}}':(s="Error while fetching data: ".concat(a.error),c=o.addStrParam('{{ url_for("home_blueprint.user_query") }}',"errorMSG",s)),window.location.replace(c);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),no(Zr().m(function t(e){var n,r,o;return Zr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Qt.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.p=2,t.n=3,tr.createAndParse(e,n);case 3:return t.v,r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0);case 4:return t.p=4,o=t.v,console.error(o),r.textContent="Validation Failed: ".concat(o.message),r.classList.remove("text-safe"),r.classList.add("text-danger"),t.a(2,!1)}},t,null,[[2,4]])})),no(Zr().m(function t(e){var n,r;return Zr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Qt.getHeroManager();case 1:return n=t.v,r=document.getElementById("filterMSG"),t.n=2,tr.createAndParse(e,n);case 2:return r.textContent="Validation Passed",r.classList.remove("text-danger"),r.classList.add("text-safe"),t.a(2,!0)}},t)}));var io,co={HeroManager:Qt,BattleManager:Qr,SeasonManager:rn,UserManager:_r,ClientCache:Tt,getFilters:(io=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){ao(a,r,o,i,c,"next",t)}function c(t){ao(a,r,o,i,c,"throw",t)}i(void 0)})}}(ro().m(function t(e){var n,r,o;return ro().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Tt.getFilterStr();case 1:if(n=t.v){t.n=2;break}return t.a(2,tr.getEmptyFilters());case 2:return t.n=3,rn.getSeasonDetails();case 3:return r=t.v,t.n=4,tr.createAndParse(n,e,r);case 4:return o=t.v,t.a(2,o.filters)}},t)})),function(t){return io.apply(this,arguments)})};const so=co;function uo(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,u=Object.create(s.prototype);return lo(u,"_invoke",function(n,r,o){var a,c,s,u=0,l=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,c=0,s=t,p.n=n,i}};function d(n,r){for(c=n,s=r,e=0;!f&&u&&!o&&e<l.length;e++){var o,a=l[e],d=p.p,h=a[2];n>3?(o=h===r)&&(s=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(c=0,p.v=r,p.n=a[1]):d<h&&(o=n<3||a[0]>r||r>h)&&(a[4]=n,a[5]=r,p.n=h,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,h),c=l,s=h;(e=c<2?t:s)||!f;){a||(c?c<3?(c>1&&(p.n=-1),d(c,s)):p.n=s:p.v=s);try{if(u=2,a){if(c||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,c<2&&(c=0)}else 1===c&&(e=a.return)&&e.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=t}else if((e=(f=p.n<0)?s:n.call(r,p))!==i)break}catch(e){a=t,c=1,s=e}finally{u=1}}return{value:e,done:f}}}(n,o,a),!0),u}var i={};function c(){}function s(){}function u(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(lo(e={},r,function(){return this}),e),f=u.prototype=c.prototype=Object.create(l);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,lo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return s.prototype=u,lo(f,"constructor",u),lo(u,"constructor",s),s.displayName="GeneratorFunction",lo(u,o,"GeneratorFunction"),lo(f),lo(f,o,"Generator"),lo(f,r,function(){return this}),lo(f,"toString",function(){return"[object Generator]"}),(uo=function(){return{w:a,m:p}})()}function lo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}lo=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){lo(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},lo(t,e,n,r)}function fo(t,e,n,r,o,a,i){try{var c=t[a](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function po(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){fo(a,r,o,i,c,"next",t)}function c(t){fo(a,r,o,i,c,"throw",t)}i(void 0)})}}document.addEventListener("DOMContentLoaded",po(uo().m(function t(){var e,n,r,o;return uo().w(function(t){for(;;)switch(t.n){case 0:return e=document.getElementById("auto-query-flag"),(n=document.getElementById("auto-query-toggle-container")).classList.add("no-transition"),t.n=1,so.ClientCache.getFlag("autoQuery");case 1:e.checked=t.v,setTimeout(function(){n.classList.remove("no-transition")},20),(r=new URLSearchParams(window.location.search)).get("errorMSG")&&(document.getElementById("errorMSG").textContent=r.get("errorMSG")),e.addEventListener("click",po(uo().m(function t(){return uo().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,so.ClientCache.setFlag("autoQuery",e.checked);case 1:return t.a(2)}},t)}))),o=null,document.getElementById("csvFile").addEventListener("change",function(t){o=t.target.files[0]}),document.getElementById("uploadForm").addEventListener("submit",function(){var t=po(uo().m(function t(n){var r,a,i,c,s,u;return uo().w(function(t){for(;;)switch(t.n){case 0:if(console.log("Processing File Submission"),n.preventDefault(),o){t.n=1;break}return document.getElementById("uploadError").textContent="Must upload a file",t.a(2);case 1:return r=e.checked,t.n=2,so.HeroManager.getHeroManager();case 2:return t.v,t.p=3,t.n=4,T.parseUpload(o);case 4:return a=t.v,t.n=5,so.ClientCache.clearUserData();case 5:return t.n=6,so.BattleManager.cacheUpload(a);case 6:return t.v,i=a[0]["P1 ID"],t.n=7,so.UserManager.findUser({id:i});case 7:if(c=t.v,console.log("Got data:",JSON.stringify(c)),c.error){t.n=9;break}return t.n=8,so.UserManager.setUser(c.user);case 8:s={source:"upload",query:r?"true":"false"},window.location.href=URLS.addStrParams(URLS.loadData,s),t.n=10;break;case 9:document.getElementById("errorMSG").textContent=c.error;case 10:t.n=12;break;case 11:t.p=11,u=t.v,console.error("Caught Error:",u),document.getElementById("uploadError").textcontent=u.message;case 12:return t.a(2)}},t,null,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()),document.getElementById("content-body").classList.remove("d-none");case 2:return t.a(2)}},t)})))})()})();